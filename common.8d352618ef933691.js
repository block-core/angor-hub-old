"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[76],{5167:(b,m,d)=>{d.d(m,{n:()=>s});var l=d(1648),f=d(4085),n=d(4438);const g=[[["","angorCardFront",""]],[["","angorCardBack",""]],"*",[["","angorCardExpansion",""]]],a=["[angorCardFront]","[angorCardBack]","*","[angorCardExpansion]"];function o(i,c){1&i&&(n.j41(0,"div",0),n.SdG(1),n.k0s(),n.j41(2,"div",1),n.SdG(3,1),n.k0s())}function u(i,c){1&i&&(n.j41(0,"div",2),n.SdG(1,3),n.k0s()),2&i&&n.Y8G("@expandCollapse",void 0)}function t(i,c){if(1&i&&(n.SdG(0,2),n.DNE(1,u,2,1,"div",2)),2&i){const h=n.XpG();n.R7$(),n.vxM(h.expanded?1:-1)}}let s=(()=>{class i{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"angor-card-expanded":this.expanded,"angor-card-face-back":this.flippable&&"back"===this.face,"angor-card-face-front":this.flippable&&"front"===this.face,"angor-card-flippable":this.flippable}}ngOnChanges(h){"expanded"in h&&(this.expanded=(0,f.he)(h.expanded.currentValue)),"flippable"in h&&(this.flippable=(0,f.he)(h.flippable.currentValue))}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["angor-card"]],hostVars:2,hostBindings:function(e,r){2&e&&n.HbH(r.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["angorCard"],standalone:!0,features:[n.OA$,n.aNF],ngContentSelectors:a,decls:2,vars:2,consts:[[1,"angor-card-front"],[1,"angor-card-back"],[1,"angor-card-expansion"]],template:function(e,r){1&e&&(n.NAR(g),n.DNE(0,o,4,0)(1,t,2,1)),2&e&&(n.vxM(r.flippable?0:-1),n.R7$(),n.vxM(r.flippable?-1:1))},styles:["angor-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}angor-card.angor-card-flippable .angor-card-front,angor-card.angor-card-flippable .angor-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable .angor-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}angor-card.angor-card-flippable .angor-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:l.F}})}}return i})()},8098:(b,m,d)=>{d.d(m,{U:()=>a});var l=d(467),f=d(4412),n=d(4438),g=d(4930);let a=(()=>{class o{constructor(t){this._signerService=t,this.STORAGE_KEY="userBookmarkedProjects",this.bookmarksSubject=new f.t([]),this.bookmarks$=this.bookmarksSubject.asObservable(),this.currentUserPubKey=null,window.addEventListener("storage",s=>{s.key===this.STORAGE_KEY&&this.refreshBookmarksForCurrentUser()})}initializeForCurrentUser(){var t=this;return(0,l.A)(function*(){t.clearBookmarks(),t.currentUserPubKey=yield t._signerService.getPublicKey(),t.currentUserPubKey&&(yield t.loadBookmarksForCurrentUser())})()}clearBookmarks(){this.bookmarksSubject.next([])}loadBookmarksForCurrentUser(){var t=this;return(0,l.A)(function*(){if(!t.currentUserPubKey)return;const i=t.getUserBookmarks()[t.currentUserPubKey]||[];t.bookmarksSubject.next(i)})()}getUserBookmarks(){const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{}}saveUserBookmarks(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}addBookmark(t){var s=this;return(0,l.A)(function*(){if(!s.currentUserPubKey&&(s.currentUserPubKey=yield s._signerService.getPublicKey(),!s.currentUserPubKey))return void console.warn("No public key found for the current user.");const i=s.getUserBookmarks(),c=i[s.currentUserPubKey]||[];c.includes(t)||(c.push(t),i[s.currentUserPubKey]=c,s.saveUserBookmarks(i),s.bookmarksSubject.next(c))})()}removeBookmark(t){var s=this;return(0,l.A)(function*(){if(!s.currentUserPubKey&&(s.currentUserPubKey=yield s._signerService.getPublicKey(),!s.currentUserPubKey))return void console.warn("No public key found for the current user.");const i=s.getUserBookmarks(),h=(i[s.currentUserPubKey]||[]).filter(e=>e!==t);i[s.currentUserPubKey]=h,s.saveUserBookmarks(i),s.bookmarksSubject.next(h)})()}isBookmarked(t){var s=this;return(0,l.A)(function*(){return s.currentUserPubKey||(s.currentUserPubKey=yield s._signerService.getPublicKey(),s.currentUserPubKey)?(s.getUserBookmarks()[s.currentUserPubKey]||[]).includes(t):(console.warn("No public key found for the current user."),!1)})()}getBookmarks(){var t=this;return(0,l.A)(function*(){return t.currentUserPubKey||(t.currentUserPubKey=yield t._signerService.getPublicKey(),t.currentUserPubKey)?t.getUserBookmarks()[t.currentUserPubKey]||[]:(console.warn("No public key found for the current user."),[])})()}removeAllBookmarks(){var t=this;return(0,l.A)(function*(){if(!t.currentUserPubKey&&(t.currentUserPubKey=yield t._signerService.getPublicKey(),!t.currentUserPubKey))return void console.warn("No public key found for the current user.");const s=t.getUserBookmarks();s[t.currentUserPubKey]=[],t.saveUserBookmarks(s),t.bookmarksSubject.next([])})()}refreshBookmarksForCurrentUser(){this.currentUserPubKey&&this.loadBookmarksForCurrentUser()}static{this.\u0275fac=function(s){return new(s||o)(n.KVO(g.A))}}static{this.\u0275prov=n.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},833:(b,m,d)=>{d.d(m,{F:()=>f});var l=d(4438);let f=(()=>{class n{constructor(){this.mainnetLocalStorageKey="mainnetIndexers",this.testnetLocalStorageKey="testnetIndexers",this.mainnetPrimaryIndexerKey="mainnetPrimaryIndexer",this.testnetPrimaryIndexerKey="testnetPrimaryIndexer",this.networkStorageKey="selectedNetwork",this.defaultMainnetIndexer="https://btc.indexer.angor.io/",this.defaultTestnetIndexer="https://tbtc.indexer.angor.io/",this.initializeDefaultIndexers()}initializeDefaultIndexers(){0===this.getIndexers("mainnet").length&&(this.addIndexer(this.defaultMainnetIndexer,"mainnet"),this.setPrimaryIndexer(this.defaultMainnetIndexer,"mainnet")),0===this.getIndexers("testnet").length&&(this.addIndexer(this.defaultTestnetIndexer,"testnet"),this.setPrimaryIndexer(this.defaultTestnetIndexer,"testnet"))}addIndexer(a,o){let u=this.getIndexers(o);u.includes(a)||(u.push(a),this.saveIndexers(u,o))}getIndexers(a){return JSON.parse(localStorage.getItem("mainnet"===a?this.mainnetLocalStorageKey:this.testnetLocalStorageKey)||"[]")}saveIndexers(a,o){localStorage.setItem("mainnet"===o?this.mainnetLocalStorageKey:this.testnetLocalStorageKey,JSON.stringify(a))}setPrimaryIndexer(a,o){this.getIndexers(o).includes(a)&&localStorage.setItem("mainnet"===o?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey,a)}getPrimaryIndexer(a){return localStorage.getItem("mainnet"===a?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}removeIndexer(a,o){let u=this.getIndexers(o);const t=u.indexOf(a);-1!==t&&(u.splice(t,1),this.saveIndexers(u,o),a===this.getPrimaryIndexer(o))&&localStorage.removeItem("mainnet"===o?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}clearAllIndexers(a){const u="mainnet"===a?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey;localStorage.removeItem("mainnet"===a?this.mainnetLocalStorageKey:this.testnetLocalStorageKey),localStorage.removeItem(u)}setNetwork(a){localStorage.setItem(this.networkStorageKey,a)}getNetwork(){return localStorage.getItem(this.networkStorageKey)||"testnet"}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},2914:(b,m,d)=>{d.d(m,{m:()=>i});var l=d(719),f=d(4438),n=d(3813),g=d(5766),a=d(5416),o=d(345);let s=(()=>{class c{constructor(e,r){this.snackBar=e,this.sanitizer=r,this.defaultBackground="url(/assets/gradient.jpg)"}unsubscribe(e){if(e)for(let r=0;r<e.length;r++)e[r].unsubscribe()}now(){return Math.floor(Date.now()/1e3)}getBannerBackgroundStyle(e){if(!e)return this.defaultBackground;if("string"==typeof e){const r=this.sanitizeImageUrl(e);return r?`url(${r})`:this.defaultBackground}return`url(${this.bypassStyle(e)})`}millisatoshisToSatoshis(e){return Math.floor(e/1e3)}getRelayUrls(e){let r=e;if(Array.isArray(r)){r={};for(let y=0;y<e.length;y++)r[e[y]]={}}return Object.keys(r)}getNostrIdentifier(e){try{const r=this.hexToArray(e);return this.convertToBech32(r,"npub")}catch{return e}}copy(e){this.copyToClipboard(e),this.snackBar.open("Copied to clipboard","Hide",{duration:2500,horizontalPosition:"center",verticalPosition:"bottom"})}copyToClipboard(e){var r=document.createElement("textarea");r.style.position="fixed",r.style.top=0,r.style.left=0,r.style.width="2em",r.style.height="2em",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.value=e,document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy")}catch{console.error("Oops, unable to copy")}document.body.removeChild(r)}getHexIdentifier(e){const r=this.hexToArray(e);return this.convertToBech32(r,"npub")}getShortenedIdentifier(e){const r=this.getNostrIdentifier(e);return`${r.substring(5,13)}:${r.substring(r.length-8)}`}convertToBech32(e,r){const p=n.I.toWords(e);return n.I.encode(r,p)}hexToArray(e){return(0,g.aT)(e)}arrayToHex(e){return(0,g.My)(e)}keyToHex(e){return(0,g.My)(e)}sanitizeLUD06(e){if(e&&!e.startsWith("http"))return this.bypassUrl(e)}sanitizeUrlAndBypass(e){const r=this.sanitizeUrl(e);return this.bypassUrl(r)}sanitizeUrlAndBypassFrame(e){const r=this.sanitizeUrl(e);return this.bypassFrameUrl(r)}sanitizeUrl(e,r){if(!e)return"";if(!e?.startsWith("http")){if(!r)return e.startsWith("/assets")?e:"";e="https://"+e}return e}sanitizeImageUrl(e){if(!(e=this.sanitizeUrl(e)))return;let r=e.toLowerCase();return r=r.split("?")[0],r.endsWith("jpg")||r.endsWith("jpeg")||r.endsWith("png")||r.endsWith("webp")||r.endsWith("gif")?e:void 0}bypassUrl(e){return this.sanitizer.bypassSecurityTrustUrl(e)}bypassStyle(e){return this.sanitizer.bypassSecurityTrustStyle(e)}bypassFrameUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static{this.\u0275fac=function(r){return new(r||c)(f.KVO(a.UG),f.KVO(o.up))}}static{this.\u0275prov=f.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),i=(()=>{class c{constructor(e){this.utilities=e,this.imageExtensions=[".jpg",".jpeg",".gif",".png",".webp",".apng",".jfif",".svg"],this.videoExtensions=[".mp4",".m4v",".m4p",".mpg",".mpeg",".webm",".avif",".mov",".ogv"],this.audioExtensions=[".mp3",".m4a",".flac",".ogg",".wav"]}isImage(e){return this.imageExtensions.some(r=>e.includes(r))}isVideo(e){return this.videoExtensions.some(r=>e.includes(r))}isAudio(e){return this.audioExtensions.some(r=>e.includes(r))}isYouTube(e){return e.includes("youtu.be")||e.includes("youtube.com")}isSpotify(e){return e.includes("open.spotify.com")}isTidal(e){return e.includes("tidal.com")}parseContent(e){return e=e.replaceAll(new RegExp("\\p{Cf}","gu"),""),this.tokenizeText(e).map(p=>this.processToken(p))}tokenizeText(e){return e.split(/(\s|,|#\[[^\]]*\])/).filter(r=>""!==r)}processToken(e){return e.startsWith("nostr:")?this.processNostrToken(e):e.startsWith("@")?this.processUsernameToken(e):e.startsWith("http://")||e.startsWith("https://")?this.processLinkToken(e):e}processNostrToken(e){const r=l.Qe.decode(e.substring(6)),p=r.data;switch(r.type){case"nprofile":case"npub":case"note":case"nevent":return{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:p,token:r.type};default:return e}}processUsernameToken(e){const r=e.substring(1),p=this.findNpubByUsername(r);if(p){const y=l.Qe.decode(p);return{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:y.data,token:y.type}}return e}processLinkToken(e){return this.isImage(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"image"}:this.isVideo(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"video"}:this.isAudio(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"audio"}:this.isYouTube(e)?this.processYouTubeLink(e):this.isSpotify(e)?this.processSpotifyLink(e):this.isTidal(e)?this.processTidalLink(e):{word:e,token:"link"}}processYouTubeLink(e){const r=this.extractYouTubeId(e);return{safeWord:this.utilities.bypassFrameUrl(`https://www.youtube.com/embed/${r}`),word:`https://www.youtube.com/embed/${r}`,token:"youtube"}}processSpotifyLink(e){return{safeWord:this.utilities.sanitizeUrlAndBypassFrame(e.replace("open.spotify.com/","open.spotify.com/embed/")),word:e,token:"spotify"}}processTidalLink(e){const r=e.replace("tidal.com/browse/track/","embed.tidal.com/tracks/");return{safeWord:this.utilities.sanitizeUrlAndBypassFrame(r),word:e,token:"tidal"}}extractYouTubeId(e){const r=e.match(/(?:youtu\.be\/|youtube\.com\/watch\?v=)([^&]+)/);return r?r[1]:""}findNpubByUsername(e){}static{this.\u0275fac=function(r){return new(r||c)(f.KVO(s))}}static{this.\u0275prov=f.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()}}]);