(self.webpackChunkangor=self.webpackChunkangor||[]).push([[458],{2747:(O,s,r)=>{"use strict";r.d(s,{n:()=>y});var i=r(1648),t=r(4085),n=r(4438);const e=[[["","angorCardFront",""]],[["","angorCardBack",""]],"*",[["","angorCardExpansion",""]]],a=["[angorCardFront]","[angorCardBack]","*","[angorCardExpansion]"];function c(o,p){1&o&&(n.j41(0,"div",0),n.SdG(1),n.k0s(),n.j41(2,"div",1),n.SdG(3,1),n.k0s())}function u(o,p){1&o&&(n.j41(0,"div",2),n.SdG(1,3),n.k0s()),2&o&&n.Y8G("@expandCollapse",void 0)}function l(o,p){if(1&o&&(n.SdG(0,2),n.DNE(1,u,2,1,"div",2)),2&o){const h=n.XpG();n.R7$(),n.vxM(h.expanded?1:-1)}}let y=(()=>{class o{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"angor-card-expanded":this.expanded,"angor-card-face-back":this.flippable&&"back"===this.face,"angor-card-face-front":this.flippable&&"front"===this.face,"angor-card-flippable":this.flippable}}ngOnChanges(h){"expanded"in h&&(this.expanded=(0,t.he)(h.expanded.currentValue)),"flippable"in h&&(this.flippable=(0,t.he)(h.flippable.currentValue))}static{this.\u0275fac=function(f){return new(f||o)}}static{this.\u0275cmp=n.VBU({type:o,selectors:[["angor-card"]],hostVars:2,hostBindings:function(f,x){2&f&&n.HbH(x.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["angorCard"],standalone:!0,features:[n.OA$,n.aNF],ngContentSelectors:a,decls:2,vars:2,consts:[[1,"angor-card-front"],[1,"angor-card-back"],[1,"angor-card-expansion"]],template:function(f,x){1&f&&(n.NAR(e),n.DNE(0,c,4,0)(1,l,2,1)),2&f&&(n.vxM(x.flippable?0:-1),n.R7$(),n.vxM(x.flippable?-1:1))},styles:["angor-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}angor-card.angor-card-flippable .angor-card-front,angor-card.angor-card-flippable .angor-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable .angor-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}angor-card.angor-card-flippable .angor-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:i.F}})}}return o})()},9345:(O,s,r)=>{"use strict";r.d(s,{n:()=>i.n});var i=r(2747)},4496:(O,s,r)=>{"use strict";r.d(s,{q:()=>L});var i=r(9345),t=r(9979),n=r(177),e=r(4438),a=r(8834),c=r(1997),u=r(9213),l=r(9115),y=r(5245),o=r(467),p=r(8703),h=r(7291);let f=(()=>{class R{constructor(_,C){this._changeDetectorRef=_,this._storageService=C,this.userChange=new e.bkB}ngOnInit(){this.loadUserProfile(),this.subscription=this._storageService.profile$.subscribe(_=>{_&&_.pubKey===this.pubkey&&(this.user=_.metadata,this.userChange.emit(this.user),this._changeDetectorRef.detectChanges())})}loadUserProfile(){var _=this;return(0,o.A)(function*(){const C=yield _._storageService.getProfile(_.pubkey);_.user=C||{},_.userChange.emit(_.user),_._changeDetectorRef.detectChanges()})()}get displayName(){return this.user?.display_name||this.user?.name||this.shortenPubkey(this.pubkey)}get displayAvatar(){return this.user?.picture||this.avatarUrl||"/images/avatars/avatar-placeholder.png"}shortenPubkey(_){return _?`${_.slice(0,8)}...${_.slice(-8)}`:""}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(C){return new(C||R)(e.rXU(e.gRc),e.rXU(h.n))}}static{this.\u0275cmp=e.VBU({type:R,selectors:[["app-post-profile"]],inputs:{pubkey:"pubkey",avatarUrl:"avatarUrl",created_at:"created_at"},outputs:{userChange:"userChange"},standalone:!0,features:[e.aNF],decls:9,vars:7,consts:[[1,"flex","items-center"],[1,"flex","items-center","group",3,"href"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"]],template:function(C,d){1&C&&(e.j41(0,"div",0)(1,"a",1),e.nrm(2,"img",2),e.j41(3,"div",3)(4,"span",4),e.EFF(5),e.k0s(),e.j41(6,"span",5),e.EFF(7),e.nI1(8,"ago"),e.k0s()()()()),2&C&&(e.R7$(),e.Y8G("href","/profile/"+d.pubkey,e.B4B),e.R7$(),e.Y8G("src",d.displayAvatar,e.B4B)("alt",d.displayName),e.R7$(3),e.JRh(d.displayName),e.R7$(2),e.JRh(e.bMT(8,5,d.created_at)))},dependencies:[n.MD,p.g]})}}return R})();var x=r(2022),m=r(413),w=r(3105),b=r(8359),k=r(6697);const A=R=>({"large-font":R}),B=R=>({"heart-beat":R}),z=R=>["/post",R];function Y(R,$){if(1&R&&(e.j41(0,"div",12),e.nrm(1,"iframe",14),e.k0s()),2&R){const _=e.XpG().$implicit;e.R7$(),e.Y8G("src",_.safeWord,e.f$h)}}function I(R,$){if(1&R&&(e.j41(0,"div",12),e.nrm(1,"img",15),e.k0s()),2&R){const _=e.XpG().$implicit;e.R7$(),e.Y8G("src",_.safeWord,e.B4B)}}function N(R,$){if(1&R&&(e.j41(0,"div",12)(1,"video",16),e.nrm(2,"source",17),e.EFF(3," Your browser does not support the video tag. "),e.k0s()()),2&R){const _=e.XpG().$implicit;e.R7$(2),e.Y8G("src",_.safeWord,e.B4B)}}function P(R,$){if(1&R&&(e.j41(0,"div",12)(1,"audio",18),e.nrm(2,"source",19),e.EFF(3," Your browser does not support the audio element. "),e.k0s()()),2&R){const _=e.XpG().$implicit;e.R7$(2),e.Y8G("src",_.safeWord,e.B4B)}}function T(R,$){if(1&R&&(e.j41(0,"div",13)(1,"a",20)(2,"span",21),e.EFF(3),e.k0s()()()),2&R){const _=e.XpG().$implicit;e.R7$(),e.Y8G("href",_.word,e.B4B),e.R7$(2),e.JRh(_.word)}}function j(R,$){if(1&R&&(e.j41(0,"div",13)(1,"span",22),e.EFF(2),e.k0s()()),2&R){const _=e.XpG().$implicit,C=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(2,A,C.isSingleEmojiOrWord(_))),e.R7$(),e.SpI("",_.trim()," ")}}function F(R,$){if(1&R&&(e.j41(0,"div",10),e.DNE(1,Y,2,1,"div",12)(2,I,2,1,"div",12)(3,N,4,1,"div",12)(4,P,4,1,"div",12)(5,T,4,2,"div",13)(6,j,3,4,"div",13),e.k0s()),2&R){const _=$.$implicit;e.R7$(),e.vxM("youtube"===_.token?1:-1),e.R7$(),e.vxM("image"===_.token?2:-1),e.R7$(),e.vxM("video"===_.token?3:-1),e.R7$(),e.vxM("audio"===_.token?4:-1),e.R7$(),e.vxM("link"===_.token?5:-1),e.R7$(),e.vxM(_.token?-1:6)}}function D(R,$){if(1&R){const _=e.RV6();e.j41(0,"div",11)(1,"button",23),e.bIt("click",function(){e.eBV(_);const d=e.XpG();return e.Njj(d.toggleLike(d.item))}),e.nrm(2,"mat-icon",24),e.j41(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"button",26),e.nrm(6,"mat-icon",27),e.j41(7,"span",25),e.EFF(8,"Comment"),e.k0s()(),e.j41(9,"button",23),e.bIt("click",function(){e.eBV(_);const d=e.XpG();return e.Njj(d.onShare(d.item))}),e.nrm(10,"mat-icon",28),e.j41(11,"span",25),e.EFF(12,"Share"),e.k0s()(),e.j41(13,"button",23),e.bIt("click",function(){e.eBV(_);const d=e.XpG();return e.Njj(d.openZapDialog(d.item.id,d.user))}),e.nrm(14,"mat-icon",29),e.j41(15,"span",25),e.EFF(16,"Zap"),e.k0s()()()}if(2&R){const _=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(7,B,_.isLiked))("svgIcon",_.isLiked?"heroicons_solid:heart":"heroicons_outline:heart"),e.R7$(2),e.SpI("",_.isLiked?"Liked":"Like"," "),e.R7$(),e.Y8G("routerLink",e.eq3(9,z,_.item.id)),e.R7$(),e.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:share"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:bolt")}}function H(R,$){if(1&R&&(e.nrm(0,"hr",30),e.j41(1,"div",31),e.nrm(2,"div",32),e.j41(3,"div",33)(4,"button",34)(5,"span",35),e.EFF(6,"Read More ..."),e.k0s()()()()),2&R){const _=e.XpG();e.R7$(4),e.Y8G("routerLink",e.eq3(1,z,_.item.id))}}let L=(()=>{class R{constructor(){this.actions=!0,this.more=!0,this.user=new e.bkB,this.storageService=(0,e.WQX)(h.n),this.zapService=(0,e.WQX)(w.D),this.parseContent=(0,e.WQX)(m.m),this.eventService=(0,e.WQX)(x.U),this.angorConfirmationService=(0,e.WQX)(t.m),this.changeDetectorRef=(0,e.WQX)(e.gRc),this.subscription=new b.yU,this.tokens=(0,e.vPA)([]),this.isLiked=!1}get item(){return this._item}set item(_){this._item=_,this.onItemChange()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}openZapDialog(_,C){this.zapService.openZapDialog(_,C)}getProfile(){}isSingleEmojiOrWord(_){const C=_.trim(),d=/^\w+$/.test(C),S=/^[\p{Emoji}]+$/u.test(C);return(d||S)&&C.length<10}onItemChange(){this._item&&(this.subscription=this.storageService.myLikes$.pipe((0,k.s)(1)).subscribe(_=>{this.isLiked=_?.includes(this._item.id)||!1,this.changeDetectorRef.detectChanges()}),this.tokens.set(this._item.content?this.parseContent.parseContent(this._item.content):[]))}sendLike(_){this.isLiked||this.eventService.sendLikeEvent(_).then(()=>{this.isLiked=!0,this.changeDetectorRef.detectChanges()}).catch(C=>console.error("Failed to send like:",C))}toggleLike(_){this.sendLike(_)}onShare(_){this.angorConfirmationService.open({title:"Share",message:'Are you sure you want to share this post on your profile? <span class="font-medium">This action is permanent and cannot be undone.</span>',icon:{show:!0,name:"heroicons_solid:share",color:"primary"},actions:{confirm:{show:!0,label:"Yes, Share",color:"primary"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(d=>{console.log(d),"confirmed"===d&&this.eventService.shareEvent(_)})}static{this.\u0275fac=function(C){return new(C||R)}}static{this.\u0275cmp=e.VBU({type:R,selectors:[["app-post"]],inputs:{item:"item",actions:"actions",more:"more"},outputs:{user:"user"},standalone:!0,features:[e.aNF],decls:42,vars:13,consts:[["postCardMenu","matMenu"],[1,"flex","w-full","flex-col"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],[3,"userChange","pubkey","avatarUrl","created_at"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item",""],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"my-2"],[1,"inline-block","whitespace-pre-wrap","break-words"],[1,"mx-3","flex","items-center","sm:mx-5"],[1,"relative","mb-4","block"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"],["alt","Embedded Image",1,"max-h-140","object-cover",2,"width","100%",3,"src"],["controls","",2,"width","100%"],["type","video/mp4",3,"src"],["controls",""],["type","audio/mpeg",3,"src"],["target","_blank",1,"inline-block","break-words","text-blue-500","underline",3,"href"],[1,"inline-block","break-words"],[1,"inline-block","break-words",3,"ngClass"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"text-red-500","icon-size-5",3,"ngClass","svgIcon"],[1,"ml-2"],["mat-button","",1,"mr-1","px-3",3,"routerLink"],[1,"text-blue-500","icon-size-5",3,"svgIcon"],[1,"text-green-500","icon-size-5",3,"svgIcon"],[1,"text-orange-500","icon-size-5",3,"svgIcon"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"routerLink"],[1,"mr-1"]],template:function(C,d){if(1&C){const S=e.RV6();e.j41(0,"angor-card",1)(1,"div",2)(2,"app-post-profile",3),e.bIt("userChange",function(K){return e.eBV(S),e.Njj(d.user=K)}),e.k0s(),e.j41(3,"button",4),e.nrm(4,"mat-icon",5),e.k0s(),e.j41(5,"mat-menu",null,0)(7,"button",6)(8,"span",7),e.nrm(9,"mat-icon",8),e.j41(10,"span"),e.EFF(11,"Save post"),e.k0s()()(),e.j41(12,"button",6)(13,"span",7),e.nrm(14,"mat-icon",8),e.j41(15,"span"),e.EFF(16,"Hide post"),e.k0s()()(),e.j41(17,"button",6)(18,"span",7),e.nrm(19,"mat-icon",8),e.j41(20,"span"),e.EFF(21,"Snooze for 30 days"),e.k0s()()(),e.j41(22,"button",6)(23,"span",7),e.nrm(24,"mat-icon",8),e.j41(25,"span"),e.EFF(26,"Hide all"),e.k0s()()(),e.nrm(27,"mat-divider",9),e.j41(28,"button",6)(29,"span",7),e.nrm(30,"mat-icon",8),e.j41(31,"span"),e.EFF(32,"Report post"),e.k0s()()(),e.j41(33,"button",6)(34,"span",7),e.nrm(35,"mat-icon",8),e.j41(36,"span"),e.EFF(37,"Turn on notifications for this post"),e.k0s()()()()(),e.Z7z(38,F,7,6,"div",10,e.fX1),e.DNE(40,D,17,11,"div",11)(41,H,7,3),e.k0s()}if(2&C){const S=e.sdS(6);e.R7$(2),e.Y8G("pubkey",null==d.item?null:d.item.pubkey)("avatarUrl","/images/avatars/avatar-placeholder.png")("created_at",d.item.created_at),e.R7$(),e.Y8G("matMenuTriggerFor",S),e.R7$(),e.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:eye-slash"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:clock"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:minus-circle"),e.R7$(6),e.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:bell"),e.R7$(3),e.Dyx(d.tokens()),e.R7$(2),e.vxM(d.actions?40:-1),e.R7$(),e.vxM(d.more?41:-1)}},dependencies:[i.n,f,u.m_,u.An,c.w,c.q,l.Cn,l.kk,l.fb,l.Cp,y.iI,y.Wk,n.MD,n.YU,a.$z]})}}return R})()},2022:(O,s,r)=>{"use strict";r.d(s,{U:()=>u});var i=r(467),t=r(5766),n=r(719),e=r(4438),a=r(6231),c=r(6324);let u=(()=>{class l{constructor(o,p){this.relayService=o,this.signerService=p,this.likesMap=new Map,this.myLikedNoteIds=[]}sendTextEvent(o){var p=this;return(0,i.A)(function*(){if(o)try{const f=p.signerService.getUnsignedEvent(1,[],o);let x;if(p.signerService.isUsingSecretKey()){const m=yield p.signerService.getDecryptedSecretKey(),w=(0,t.aT)(m);x=(0,n.pC)(f,w)}else x=yield p.signerService.signEventWithExtension(f);yield p.relayService.publishEventToWriteRelays(x)}catch(h){console.error("Failed to send text event:",h)}})()}sendLikeEvent(o){var p=this;return(0,i.A)(function*(){if(o)try{const x=p.signerService.getUnsignedEvent(7,[["e",o.id],["p",o.pubkey]],"+");let m;if(p.signerService.isUsingSecretKey()){const w=yield p.signerService.getDecryptedSecretKey(),b=(0,t.aT)(w);m=(0,n.pC)(x,b)}else m=yield p.signerService.signEventWithExtension(x);yield p.relayService.publishEventToWriteRelays(m),p.likesMap.set(o.id,[...p.likesMap.get(o.id)||[],p.signerService.getPublicKey()])}catch(h){console.error("Failed to send like event:",h)}})()}sendZapEvent(o,p){var h=this;return(0,i.A)(function*(){if(o&&!(p<=0))try{const f=[["e",o.id],["p",o.pubkey],["amount",p.toString()]],m=h.signerService.getUnsignedEvent(9735,f,`Zapped with ${p} sats`);let w;if(h.signerService.isUsingSecretKey()){const b=yield h.signerService.getDecryptedSecretKey(),k=(0,t.aT)(b);w=(0,n.pC)(m,k)}else w=yield h.signerService.signEventWithExtension(m);yield h.relayService.publishEventToWriteRelays(w)}catch(f){console.error("Failed to send zap event:",f)}})()}sendReplyEvent(o,p){var h=this;return(0,i.A)(function*(){if(o)try{const x=h.signerService.getUnsignedEvent(1,[["e",o.id],["p",o.pubkey]],p);let m;if(h.signerService.isUsingSecretKey()){const w=yield h.signerService.getDecryptedSecretKey(),b=(0,t.aT)(w);m=(0,n.pC)(x,b)}else m=yield h.signerService.signEventWithExtension(x);yield h.relayService.publishEventToWriteRelays(m)}catch(f){console.error("Failed to send reply event:",f)}})()}shareEvent(o){var p=this;return(0,i.A)(function*(){if(o)try{const x=p.signerService.getUnsignedEvent(6,[["e",o.id],["p",o.pubkey]],"");let m;if(p.signerService.isUsingSecretKey()){const w=yield p.signerService.getDecryptedSecretKey(),b=(0,t.aT)(w);m=(0,n.pC)(x,b)}else m=yield p.signerService.signEventWithExtension(x);yield p.relayService.publishEventToWriteRelays(m),console.log("Event shared successfully:",m)}catch(h){console.error("Failed to share event:",h)}})()}static{this.\u0275fac=function(p){return new(p||l)(e.KVO(a.b),e.KVO(c.A))}}static{this.\u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},3105:(O,s,r)=>{"use strict";r.d(s,{D:()=>c});var i=r(467),t=r(4438),n=r(5351),e=r(5416),a=r(2507);let c=(()=>{class u{constructor(){this.dialog=(0,t.WQX)(n.bZ),this.snackBar=(0,t.WQX)(e.UG)}canUseZap(y){var o=this;return(0,i.A)(function*(){return!(!y||!y.lud06&&!y.lud16)||(o.openSnackBar("Using Zap is not possible. Please complete your profile to include lud06 or lud16."),!1)})()}openSnackBar(y,o="dismiss"){this.snackBar.open(y,o,{duration:3e3})}openZapDialog(y="",o){var p=this;return(0,i.A)(function*(){(yield p.canUseZap(o))&&p.dialog.open(a.r,{width:"405px",maxHeight:"90vh",data:{lud16:o.lud16,lud06:o.lud06,pubkey:o.pubkey,eventId:y}})})()}static{this.\u0275fac=function(o){return new(o||u)}}static{this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},2507:(O,s,r)=>{"use strict";r.d(s,{r:()=>$});var i=r(467),t=r(4438),n=r(9417),e=r(5351),a=r(5416),c=r(6182),u=r(7673),l=r(9437),y=r(1626);let o=(()=>{class _{constructor(d){this.http=d}getLightning(d){return this.http.get(d).pipe((0,l.W)(S=>(console.error("Failed to fetch Lightning response:",S),(0,u.of)({status:"Failed"}))))}getLightningInvoice(d,S){return this.http.get(`${d}?amount=${S}`).pipe((0,l.W)(K=>(console.error("Failed to fetch Lightning invoice:",K),(0,u.of)({pr:"",status:"Failed"}))))}getLightningAddress(d){try{const[S,M]=d.split("@");return`https://${M}/.well-known/lnurlp/${S}`}catch{return console.error("Invalid Lightning address format:",d),""}}sendZapRequest(d,S,M,K){const g=encodeURIComponent(JSON.stringify(S));return this.http.get(`${d}?amount=${M}&nostr=${g}&lnurl=${K}`).pipe((0,l.W)(E=>(console.error("Failed to send zap request:",E),(0,u.of)({pr:"",status:"Failed"}))))}login(){return(0,i.A)(function*(){try{return window.webln&&!window.webln.isEnabled()&&(yield window.webln.enable()),!0}catch(d){return console.error("WebLN login failed:",d),!1}})()}hasWebln(){return!!window.webln}sendPayment(d){var S=this;return(0,i.A)(function*(){try{return S.hasWebln()?yield window.webln.sendPayment(d):(console.error("WebLN is not available"),null)}catch(M){throw console.error("Payment failed:",M),M}})()}payInvoice(d){var S=this;return(0,i.A)(function*(){if((yield S.login())&&S.hasWebln())try{return!!(yield S.sendPayment(d))}catch(K){return console.error("Failed to pay invoice:",K),!1}return console.error("WebLN not available or login failed"),!1})()}static{this.\u0275fac=function(S){return new(S||_)(t.KVO(y.Qq))}}static{this.\u0275prov=t.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})();var p=r(719),h=r(6324),f=r(6231),x=r(8834),m=r(9213),w=r(5398),b=r(177),k=r(1997),A=r(2102),B=r(9042),z=r(2798),Y=r(882),I=r(4823),N=r(5766),P=r(9706);function T(_,C){if(1&_){const d=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){let M;const K=t.eBV(d).$implicit,g=t.XpG(2);return t.Njj(null==(M=g.sendZapForm.get("amount"))?null:M.setValue(K.value))}),t.j41(1,"mat-icon",16),t.EFF(2),t.k0s(),t.j41(3,"span",17),t.EFF(4),t.k0s()()}if(2&_){const d=C.$implicit;t.R7$(2),t.JRh(d.icon),t.R7$(2),t.JRh(d.label)}}function j(_,C){1&_&&(t.j41(0,"mat-error"),t.EFF(1," Zap amount is required "),t.k0s())}function F(_,C){1&_&&(t.j41(0,"mat-error"),t.EFF(1," Minimum amount is 1 sat "),t.k0s())}function D(_,C){if(1&_){const d=t.RV6();t.j41(0,"mat-dialog-content",5)(1,"div",6),t.DNE(2,T,5,2,"button",7),t.k0s(),t.nrm(3,"mat-divider"),t.j41(4,"div",8)(5,"mat-form-field",9)(6,"mat-label"),t.EFF(7,"Zap Amount"),t.k0s(),t.nrm(8,"input",10),t.j41(9,"mat-hint",11),t.EFF(10,"Amount in sats"),t.k0s(),t.DNE(11,j,2,0,"mat-error",12)(12,F,2,0,"mat-error",12),t.k0s(),t.j41(13,"mat-form-field",9)(14,"mat-label"),t.EFF(15,"Comment"),t.k0s(),t.nrm(16,"input",13),t.j41(17,"mat-hint",11),t.EFF(18),t.k0s()()(),t.j41(19,"mat-dialog-actions",11)(20,"button",14),t.bIt("click",function(){t.eBV(d);const M=t.XpG();return t.Njj(M.onSubmit())}),t.EFF(21," Create Invoice "),t.k0s()()()}if(2&_){let d,S,M;const K=t.XpG();t.R7$(2),t.Y8G("ngForOf",K.zapButtons),t.R7$(2),t.Y8G("formGroup",K.sendZapForm),t.R7$(7),t.Y8G("ngIf",null==(d=K.sendZapForm.get("amount"))?null:d.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(S=K.sendZapForm.get("amount"))?null:S.hasError("min")),t.R7$(6),t.SpI(" ",(null==(M=K.sendZapForm.get("comment"))||null==M.value?null:M.value.length)||0,"/100 "),t.R7$(2),t.Y8G("disabled",K.sendZapForm.invalid)}}function H(_,C){if(1&_&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2),t.k0s(),t.nrm(3,"mat-divider",23)(4,"qrcode",24),t.k0s()),2&_){const d=t.XpG(2);t.R7$(2),t.SpI("Scan with phone to pay (",d.invoiceAmount," sats)"),t.R7$(2),t.Y8G("qrdata",d.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M")}}function L(_,C){if(1&_){const d=t.RV6();t.j41(0,"div",25)(1,"mat-form-field",26)(2,"mat-label"),t.EFF(3,"Invoice Address"),t.k0s(),t.nrm(4,"input",27),t.j41(5,"button",28),t.bIt("click",function(){t.eBV(d);const M=t.XpG(2);return t.Njj(M.copyInvoice())}),t.nrm(6,"mat-icon",29),t.k0s()()()}if(2&_){const d=t.XpG(2);t.R7$(4),t.Y8G("value",d.lightningInvoice),t.R7$(),t.Y8G("matTooltip","Copy Invoice"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:clipboard-document")}}function R(_,C){if(1&_&&(t.j41(0,"mat-dialog-content",18),t.DNE(1,H,5,4,"div",19)(2,L,7,3,"div",20),t.k0s()),2&_){const d=t.XpG();t.R7$(),t.Y8G("ngIf",d.displayQRCode),t.R7$(),t.Y8G("ngIf",d.showInvoiceSection&&d.lightningInvoice)}}let $=(()=>{class _{constructor(d){this.util=d,this.formBuilder=(0,t.WQX)(n.ok),this.lightningService=(0,t.WQX)(o),this.signerService=(0,t.WQX)(h.A),this.relayService=(0,t.WQX)(f.b),this.dialogRef=(0,t.WQX)(e.CP),this.snackBar=(0,t.WQX)(a.UG),this.clipboard=(0,t.WQX)(c.B0),this.data=(0,t.WQX)(e.Vh),this.lightningInvoice="",this.payRequest=null,this.displayQRCode=!1,this.showInvoiceSection=!1,this.loading=!1,this.invoiceAmount=0,this.error="",this.zapButtons=[{icon:"thumb_up",label:"21",value:21},{icon:"favorite",label:"50",value:50},{icon:"emoji_emotions",label:"100",value:100},{icon:"star",label:"500",value:500},{icon:"celebration",label:"1k",value:1e3},{icon:"rocket",label:"5k",value:5e3},{icon:"local_fire_department",label:"10k",value:1e4},{icon:"flash_on",label:"100k",value:1e5},{icon:"diamond",label:"500k",value:5e5}]}ngOnInit(){this.initializeForm()}initializeForm(){this.sendZapForm=this.formBuilder.group({lightningAddress:[this.data.lud16||this.data.lud06,[n.k0.required,this.validateLightningAddress]],amount:["",[n.k0.required,n.k0.min(1)]],comment:[""]})}validateLightningAddress(d){return d.value.includes("@")?null:{invalidFormat:!0}}onSubmit(){var d=this;return(0,i.A)(function*(){d.sendZapForm.invalid?d.showError("Please fill out the form correctly."):(d.loading=!0,yield d.fetchPayRequest())})()}getCallbackUrl(d){if(d.includes("@")){const[S,M]=d.split("@");return`https://${M}/.well-known/lnurlp/${S}`}return d.toLowerCase().startsWith("lnurl")?this.util.convertBech32ToText(d).toString():null}fetchPayRequest(){var d=this;return(0,i.A)(function*(){d.resetState();const S=d.data.lud16||d.data.lud06;if(!S)return void d.showError("Lightning Address is required.");let M=d.getCallbackUrl(S);try{const K=yield fetch(M);if(!K.ok)throw new Error("Failed to fetch pay request.");const g=yield K.json();if("ERROR"===g.status)return void d.showError(g.reason||"Error fetching the pay request.");d.payRequest=g,d.showInvoiceSection=!1,d.configureAmountValidators(),yield d.generateInvoice()}catch(K){d.showError(K.message||"Error connecting to the server.")}finally{d.loading=!1}})()}generateInvoice(){var d=this;return(0,i.A)(function*(){const S=d.sendZapForm.get("amount")?.value,M=d.sendZapForm.get("comment")?.value,K=d.data.eventId||null;if(!d.payRequest)return void d.showError("Pay request is not loaded.");d.invoiceAmount=S;const g=new URL(d.payRequest.callback),v=new URLSearchParams({amount:(1e3*S).toString()});if(M&&d.payRequest.commentAllowed&&v.set("comment",M),K){const E=yield d.createAndSignZapRequest(K,M);v.set("nostr",JSON.stringify(E))}try{const E=yield fetch(`${g.origin}${g.pathname}?${v.toString()}`);if(!E.ok)throw new Error("Failed to fetch invoice.");const U=yield E.json();if("ERROR"===U.status)return void d.showError(U.reason||"Error fetching the invoice.");d.lightningInvoice=U.pr,d.showInvoiceSection=!0,d.toggleQRCodeDisplay(!0)}catch(E){d.showError(E.message||"Error fetching the invoice.")}})()}configureAmountValidators(){if(!this.payRequest)return;const d=(this.payRequest.minSendable||1e3)/1e3,S=(this.payRequest.maxSendable||21e6)/1e3,M=this.sendZapForm.get("amount");M?.setValidators([n.k0.required,n.k0.min(d),n.k0.max(S)]),M?.updateValueAndValidity()}createAndSignZapRequest(d,S){var M=this;return(0,i.A)(function*(){try{const K=M.createZapRequestData(d,S);let g;if(M.signerService.isUsingSecretKey()){const v=yield M.signerService.getDecryptedSecretKey();if(!v)throw new Error("Private key could not be retrieved.");const E=(0,N.aT)(v);g=(0,p.pC)(K,E)}else g=yield M.signerService.signEventWithExtension(K);if(!g)throw new Error("Signing failed. Signed event is null.");return g}catch(K){throw console.error("Error creating and signing zap request:",K),new Error("Failed to create and sign zap request.")}})()}createZapRequestData(d,S){return{kind:9734,content:S||"",tags:[["e",d],["p",this.payRequest?.nostrPubkey||""],["relays",...this.relayService.getConnectedRelays()]],pubkey:this.signerService.getPublicKey(),created_at:Math.floor(Date.now()/1e3)}}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.showSuccess("Invoice copied to clipboard")):this.showError("No invoice available to copy")}toggleQRCodeDisplay(d=!1){this.displayQRCode=!!d||!this.displayQRCode}resetState(){this.error="",this.loading=!0,this.lightningInvoice=""}showError(d){this.error=d,this.loading=!1,this.snackBar.open(d,"Dismiss",{duration:2e3})}showSuccess(d){this.snackBar.open(d,"Dismiss",{duration:2e3})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(S){return new(S||_)(t.rXU(P.FP))}}static{this.\u0275cmp=t.VBU({type:_,selectors:[["app-send-dialog"]],standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","","aria-label","Close",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],["class","p-0 mt-4",4,"ngIf"],["class","flex flex-col items-center justify-center text-center p-1 mt-4",4,"ngIf"],[1,"p-0","mt-4"],[1,"preset-buttons"],["class","mr-1 px-3","mat-button","",3,"click",4,"ngFor","ngForOf"],[1,"zap-form",3,"formGroup"],["appearance","outline",1,"sats-input"],["matInput","","formControlName","amount","placeholder","Enter amount in sats, e.g., 100","type","number","aria-label","Zap Amount"],["align","end"],[4,"ngIf"],["matInput","","formControlName","comment","placeholder","Optional comment, e.g., as a gift...","aria-label","Comment","maxlength","100"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"text-orange-500","icon-size-5"],[1,"ml-2"],[1,"flex","flex-col","items-center","justify-center","text-center","p-1","mt-4"],["class","w-full flex flex-col items-center",4,"ngIf"],["class","w-full max-w-md",4,"ngIf"],[1,"w-full","flex","flex-col","items-center"],[1,"mb-2"],[1,"w-full","mb-4"],[1,"qrcode-image","m-auto",3,"qrdata","matTooltip","errorCorrectionLevel"],[1,"w-full","max-w-md"],["appearance","outline",1,"w-full"],["matInput","","readonly","","aria-label","Invoice Address",3,"value"],["mat-icon-button","","matSuffix","","aria-label","Copy Invoice",3,"click","matTooltip"],[3,"svgIcon"]],template:function(S,M){1&S&&(t.j41(0,"div",0)(1,"button",1),t.nrm(2,"mat-icon",2),t.k0s()(),t.j41(3,"h1"),t.EFF(4,"\u26a1Zap"),t.k0s(),t.DNE(5,D,22,6,"mat-dialog-content",3)(6,R,3,2,"mat-dialog-content",4)),2&S&&(t.R7$(),t.Y8G("matDialogClose",void 0),t.R7$(),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(3),t.Y8G("ngIf",!M.showInvoiceSection||!M.lightningInvoice),t.R7$(),t.Y8G("ngIf",M.showInvoiceSection&&M.lightningInvoice))},dependencies:[Y.vg,x.Hl,x.$z,x.iY,m.m_,m.An,n.YN,n.me,n.Q0,n.BC,n.cb,n.tU,A.nJ,A.rl,n.X1,n.j4,n.JD,b.MD,b.Sq,b.bT,z.Ve,A.MV,A.TL,A.yw,A.RG,B.fS,B.fg,e.Yi,e.E7,w.f,w.c,k.q,I.oV,e.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{margin:5px 0}"]})}}return _})()},2577:(O,s,r)=>{const t=r(531),n=r(8715),e=r(465),a=r(5510);function c(u,l,y,o,p){const h=[].slice.call(arguments,1),f=h.length,x="function"==typeof h[f-1];if(!x&&!t())throw new Error("Callback required as last argument");if(!x){if(f<1)throw new Error("Too few arguments provided");return 1===f?(y=l,l=o=void 0):2===f&&!l.getContext&&(o=y,y=l,l=void 0),new Promise(function(m,w){try{const b=n.create(y,o);m(u(b,l,o))}catch(b){w(b)}})}if(f<2)throw new Error("Too few arguments provided");2===f?(p=y,y=l,l=o=void 0):3===f&&(l.getContext&&typeof p>"u"?(p=o,o=void 0):(p=o,o=y,y=l,l=void 0));try{const m=n.create(y,o);p(null,u(m,l,o))}catch(m){p(m)}}s.mo=c.bind(null,e.render),s.dY=c.bind(null,e.renderToDataURL),s.toString=c.bind(null,function(u,l,y){return a.render(u,y)})},531:O=>{O.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},919:(O,s,r)=>{const i=r(2656).getSymbolSize;s.getRowColCoords=function(n){if(1===n)return[];const e=Math.floor(n/7)+2,a=i(n),c=145===a?26:2*Math.ceil((a-13)/(2*e-2)),u=[a-7];for(let l=1;l<e-1;l++)u[l]=u[l-1]-c;return u.push(6),u.reverse()},s.getPositions=function(n){const e=[],a=s.getRowColCoords(n),c=a.length;for(let u=0;u<c;u++)for(let l=0;l<c;l++)0===u&&0===l||0===u&&l===c-1||u===c-1&&0===l||e.push([a[u],a[l]]);return e}},387:(O,s,r)=>{const i=r(838),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(e){this.mode=i.ALPHANUMERIC,this.data=e}n.getBitsLength=function(a){return 11*Math.floor(a/2)+a%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(a){let c;for(c=0;c+2<=this.data.length;c+=2){let u=45*t.indexOf(this.data[c]);u+=t.indexOf(this.data[c+1]),a.put(u,11)}this.data.length%2&&a.put(t.indexOf(this.data[c]),6)},O.exports=n},4481:O=>{function s(){this.buffer=[],this.length=0}s.prototype={get:function(r){const i=Math.floor(r/8);return 1==(this.buffer[i]>>>7-r%8&1)},put:function(r,i){for(let t=0;t<i;t++)this.putBit(1==(r>>>i-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(r){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),r&&(this.buffer[i]|=128>>>this.length%8),this.length++}},O.exports=s},8038:O=>{function s(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}s.prototype.set=function(r,i,t,n){const e=r*this.size+i;this.data[e]=t,n&&(this.reservedBit[e]=!0)},s.prototype.get=function(r,i){return this.data[r*this.size+i]},s.prototype.xor=function(r,i,t){this.data[r*this.size+i]^=t},s.prototype.isReserved=function(r,i){return this.reservedBit[r*this.size+i]},O.exports=s},1736:(O,s,r)=>{const i=r(3174),t=r(838);function n(e){this.mode=t.BYTE,"string"==typeof e&&(e=i(e)),this.data=new Uint8Array(e)}n.getBitsLength=function(a){return 8*a},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let a=0,c=this.data.length;a<c;a++)e.put(this.data[a],8)},O.exports=n},2296:(O,s,r)=>{const i=r(139),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];s.getBlocksCount=function(a,c){switch(c){case i.L:return t[4*(a-1)+0];case i.M:return t[4*(a-1)+1];case i.Q:return t[4*(a-1)+2];case i.H:return t[4*(a-1)+3];default:return}},s.getTotalCodewordsCount=function(a,c){switch(c){case i.L:return n[4*(a-1)+0];case i.M:return n[4*(a-1)+1];case i.Q:return n[4*(a-1)+2];case i.H:return n[4*(a-1)+3];default:return}}},139:(O,s)=>{s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2},s.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},s.from=function(t,n){if(s.isValid(t))return t;try{return function r(i){if("string"!=typeof i)throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+i)}}(t)}catch{return n}}},9202:(O,s,r)=>{const i=r(2656).getSymbolSize;s.getPositions=function(e){const a=i(e);return[[0,0],[a-7,0],[0,a-7]]}},9211:(O,s,r)=>{const i=r(2656),e=i.getBCHDigit(1335);s.getEncodedBits=function(c,u){const l=c.bit<<3|u;let y=l<<10;for(;i.getBCHDigit(y)-e>=0;)y^=1335<<i.getBCHDigit(y)-e;return 21522^(l<<10|y)}},6965:(O,s)=>{const r=new Uint8Array(512),i=new Uint8Array(256);(function(){let n=1;for(let e=0;e<255;e++)r[e]=n,i[n]=e,n<<=1,256&n&&(n^=285);for(let e=255;e<512;e++)r[e]=r[e-255]})(),s.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},s.exp=function(n){return r[n]},s.mul=function(n,e){return 0===n||0===e?0:r[i[n]+i[e]]}},1971:(O,s,r)=>{const i=r(838),t=r(2656);function n(e){this.mode=i.KANJI,this.data=e}n.getBitsLength=function(a){return 13*a},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let a;for(a=0;a<this.data.length;a++){let c=t.toSJIS(this.data[a]);if(c>=33088&&c<=40956)c-=33088;else{if(!(c>=57408&&c<=60351))throw new Error("Invalid SJIS character: "+this.data[a]+"\nMake sure your charset is UTF-8");c-=49472}c=192*(c>>>8&255)+(255&c),e.put(c,13)}},O.exports=n},9366:(O,s)=>{s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(t,n,e){switch(t){case s.Patterns.PATTERN000:return(n+e)%2==0;case s.Patterns.PATTERN001:return n%2==0;case s.Patterns.PATTERN010:return e%3==0;case s.Patterns.PATTERN011:return(n+e)%3==0;case s.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(e/3))%2==0;case s.Patterns.PATTERN101:return n*e%2+n*e%3==0;case s.Patterns.PATTERN110:return(n*e%2+n*e%3)%2==0;case s.Patterns.PATTERN111:return(n*e%3+(n+e)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}s.isValid=function(n){return null!=n&&""!==n&&!isNaN(n)&&n>=0&&n<=7},s.from=function(n){return s.isValid(n)?parseInt(n,10):void 0},s.getPenaltyN1=function(n){const e=n.size;let a=0,c=0,u=0,l=null,y=null;for(let o=0;o<e;o++){c=u=0,l=y=null;for(let p=0;p<e;p++){let h=n.get(o,p);h===l?c++:(c>=5&&(a+=c-5+3),l=h,c=1),h=n.get(p,o),h===y?u++:(u>=5&&(a+=u-5+3),y=h,u=1)}c>=5&&(a+=c-5+3),u>=5&&(a+=u-5+3)}return a},s.getPenaltyN2=function(n){const e=n.size;let a=0;for(let c=0;c<e-1;c++)for(let u=0;u<e-1;u++){const l=n.get(c,u)+n.get(c,u+1)+n.get(c+1,u)+n.get(c+1,u+1);(4===l||0===l)&&a++}return 3*a},s.getPenaltyN3=function(n){const e=n.size;let a=0,c=0,u=0;for(let l=0;l<e;l++){c=u=0;for(let y=0;y<e;y++)c=c<<1&2047|n.get(l,y),y>=10&&(1488===c||93===c)&&a++,u=u<<1&2047|n.get(y,l),y>=10&&(1488===u||93===u)&&a++}return 40*a},s.getPenaltyN4=function(n){let e=0;const a=n.data.length;for(let u=0;u<a;u++)e+=n.data[u];return 10*Math.abs(Math.ceil(100*e/a/5)-10)},s.applyMask=function(n,e){const a=e.size;for(let c=0;c<a;c++)for(let u=0;u<a;u++)e.isReserved(u,c)||e.xor(u,c,i(n,u,c))},s.getBestMask=function(n,e){const a=Object.keys(s.Patterns).length;let c=0,u=1/0;for(let l=0;l<a;l++){e(l),s.applyMask(l,n);const y=s.getPenaltyN1(n)+s.getPenaltyN2(n)+s.getPenaltyN3(n)+s.getPenaltyN4(n);s.applyMask(l,n),y<u&&(u=y,c=l)}return c}},838:(O,s,r)=>{const i=r(1604),t=r(6082);s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(a,c){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!i.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?a.ccBits[0]:c<27?a.ccBits[1]:a.ccBits[2]},s.getBestModeForData=function(a){return t.testNumeric(a)?s.NUMERIC:t.testAlphanumeric(a)?s.ALPHANUMERIC:t.testKanji(a)?s.KANJI:s.BYTE},s.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},s.isValid=function(a){return a&&a.bit&&a.ccBits},s.from=function(a,c){if(s.isValid(a))return a;try{return function n(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+e)}}(a)}catch{return c}}},7035:(O,s,r)=>{const i=r(838);function t(n){this.mode=i.NUMERIC,this.data=n.toString()}t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let a,c,u;for(a=0;a+3<=this.data.length;a+=3)c=this.data.substr(a,3),u=parseInt(c,10),e.put(u,10);const l=this.data.length-a;l>0&&(c=this.data.substr(a),u=parseInt(c,10),e.put(u,3*l+1))},O.exports=t},7767:(O,s,r)=>{const i=r(6965);s.mul=function(n,e){const a=new Uint8Array(n.length+e.length-1);for(let c=0;c<n.length;c++)for(let u=0;u<e.length;u++)a[c+u]^=i.mul(n[c],e[u]);return a},s.mod=function(n,e){let a=new Uint8Array(n);for(;a.length-e.length>=0;){const c=a[0];for(let l=0;l<e.length;l++)a[l]^=i.mul(e[l],c);let u=0;for(;u<a.length&&0===a[u];)u++;a=a.slice(u)}return a},s.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let a=0;a<n;a++)e=s.mul(e,new Uint8Array([1,i.exp(a)]));return e}},8715:(O,s,r)=>{const i=r(2656),t=r(139),n=r(4481),e=r(8038),a=r(919),c=r(9202),u=r(9366),l=r(2296),y=r(6758),o=r(8925),p=r(9211),h=r(838),f=r(7939);function k(I,N,P){const T=I.size,j=p.getEncodedBits(N,P);let F,D;for(F=0;F<15;F++)D=1==(j>>F&1),I.set(F<6?F:F<8?F+1:T-15+F,8,D,!0),I.set(8,F<8?T-F-1:F<9?15-F-1+1:15-F-1,D,!0);I.set(T-8,8,1,!0)}function Y(I,N,P,T){let j;if(Array.isArray(I))j=f.fromArray(I);else{if("string"!=typeof I)throw new Error("Invalid data");{let R=N;if(!R){const $=f.rawSplit(I);R=o.getBestVersionForData($,P)}j=f.fromString(I,R||40)}}const F=o.getBestVersionForData(j,P);if(!F)throw new Error("The amount of data is too big to be stored in a QR Code");if(N){if(N<F)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+F+".\n")}else N=F;const D=function B(I,N,P){const T=new n;P.forEach(function(L){T.put(L.mode.bit,4),T.put(L.getLength(),h.getCharCountIndicator(L.mode,I)),L.write(T)});const D=8*(i.getSymbolTotalCodewords(I)-l.getTotalCodewordsCount(I,N));for(T.getLengthInBits()+4<=D&&T.put(0,4);T.getLengthInBits()%8!=0;)T.putBit(0);const H=(D-T.getLengthInBits())/8;for(let L=0;L<H;L++)T.put(L%2?17:236,8);return function z(I,N,P){const T=i.getSymbolTotalCodewords(N),F=T-l.getTotalCodewordsCount(N,P),D=l.getBlocksCount(N,P),L=D-T%D,R=Math.floor(T/D),$=Math.floor(F/D),_=$+1,C=R-$,d=new y(C);let S=0;const M=new Array(D),K=new Array(D);let g=0;const v=new Uint8Array(I.buffer);for(let V=0;V<D;V++){const Q=V<L?$:_;M[V]=v.slice(S,S+Q),K[V]=d.encode(M[V]),S+=Q,g=Math.max(g,Q)}const E=new Uint8Array(T);let W,G,U=0;for(W=0;W<g;W++)for(G=0;G<D;G++)W<M[G].length&&(E[U++]=M[G][W]);for(W=0;W<C;W++)for(G=0;G<D;G++)E[U++]=K[G][W];return E}(T,I,N)}(N,P,j),H=i.getSymbolSize(N),L=new e(H);return function x(I,N){const P=I.size,T=c.getPositions(N);for(let j=0;j<T.length;j++){const F=T[j][0],D=T[j][1];for(let H=-1;H<=7;H++)if(!(F+H<=-1||P<=F+H))for(let L=-1;L<=7;L++)D+L<=-1||P<=D+L||I.set(F+H,D+L,H>=0&&H<=6&&(0===L||6===L)||L>=0&&L<=6&&(0===H||6===H)||H>=2&&H<=4&&L>=2&&L<=4,!0)}}(L,N),function m(I){const N=I.size;for(let P=8;P<N-8;P++){const T=P%2==0;I.set(P,6,T,!0),I.set(6,P,T,!0)}}(L),function w(I,N){const P=a.getPositions(N);for(let T=0;T<P.length;T++){const j=P[T][0],F=P[T][1];for(let D=-2;D<=2;D++)for(let H=-2;H<=2;H++)I.set(j+D,F+H,-2===D||2===D||-2===H||2===H||0===D&&0===H,!0)}}(L,N),k(L,P,0),N>=7&&function b(I,N){const P=I.size,T=o.getEncodedBits(N);let j,F,D;for(let H=0;H<18;H++)j=Math.floor(H/3),F=H%3+P-8-3,D=1==(T>>H&1),I.set(j,F,D,!0),I.set(F,j,D,!0)}(L,N),function A(I,N){const P=I.size;let T=-1,j=P-1,F=7,D=0;for(let H=P-1;H>0;H-=2)for(6===H&&H--;;){for(let L=0;L<2;L++)if(!I.isReserved(j,H-L)){let R=!1;D<N.length&&(R=1==(N[D]>>>F&1)),I.set(j,H-L,R),F--,-1===F&&(D++,F=7)}if(j+=T,j<0||P<=j){j-=T,T=-T;break}}}(L,D),isNaN(T)&&(T=u.getBestMask(L,k.bind(null,L,P))),u.applyMask(T,L),k(L,P,T),{modules:L,version:N,errorCorrectionLevel:P,maskPattern:T,segments:j}}s.create=function(N,P){if(typeof N>"u"||""===N)throw new Error("No input text");let j,F,T=t.M;return typeof P<"u"&&(T=t.from(P.errorCorrectionLevel,t.M),j=o.from(P.version),F=u.from(P.maskPattern),P.toSJISFunc&&i.setToSJISFunction(P.toSJISFunc)),Y(N,j,T,F)}},6758:(O,s,r)=>{const i=r(7767);function t(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}t.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},t.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(e.length+this.degree);a.set(e);const c=i.mod(a,this.genPoly),u=this.degree-c.length;if(u>0){const l=new Uint8Array(this.degree);return l.set(c,u),l}return c},O.exports=t},6082:(O,s)=>{const r="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";s.KANJI=new RegExp(t,"g"),s.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),s.BYTE=new RegExp(n,"g"),s.NUMERIC=new RegExp(r,"g"),s.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const e=new RegExp("^"+t+"$"),a=new RegExp("^"+r+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");s.testKanji=function(l){return e.test(l)},s.testNumeric=function(l){return a.test(l)},s.testAlphanumeric=function(l){return c.test(l)}},7939:(O,s,r)=>{const i=r(838),t=r(7035),n=r(387),e=r(1736),a=r(1971),c=r(6082),u=r(2656),l=r(243);function y(b){return unescape(encodeURIComponent(b)).length}function o(b,k,A){const B=[];let z;for(;null!==(z=b.exec(A));)B.push({data:z[0],index:z.index,mode:k,length:z[0].length});return B}function p(b){const k=o(c.NUMERIC,i.NUMERIC,b),A=o(c.ALPHANUMERIC,i.ALPHANUMERIC,b);let B,z;return u.isKanjiModeEnabled()?(B=o(c.BYTE,i.BYTE,b),z=o(c.KANJI,i.KANJI,b)):(B=o(c.BYTE_KANJI,i.BYTE,b),z=[]),k.concat(A,B,z).sort(function(I,N){return I.index-N.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function h(b,k){switch(k){case i.NUMERIC:return t.getBitsLength(b);case i.ALPHANUMERIC:return n.getBitsLength(b);case i.KANJI:return a.getBitsLength(b);case i.BYTE:return e.getBitsLength(b)}}function w(b,k){let A;const B=i.getBestModeForData(b);if(A=i.from(k,B),A!==i.BYTE&&A.bit<B.bit)throw new Error('"'+b+'" cannot be encoded with mode '+i.toString(A)+".\n Suggested mode is: "+i.toString(B));switch(A===i.KANJI&&!u.isKanjiModeEnabled()&&(A=i.BYTE),A){case i.NUMERIC:return new t(b);case i.ALPHANUMERIC:return new n(b);case i.KANJI:return new a(b);case i.BYTE:return new e(b)}}s.fromArray=function(k){return k.reduce(function(A,B){return"string"==typeof B?A.push(w(B,null)):B.data&&A.push(w(B.data,B.mode)),A},[])},s.fromString=function(k,A){const z=function x(b){const k=[];for(let A=0;A<b.length;A++){const B=b[A];switch(B.mode){case i.NUMERIC:k.push([B,{data:B.data,mode:i.ALPHANUMERIC,length:B.length},{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.ALPHANUMERIC:k.push([B,{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.KANJI:k.push([B,{data:B.data,mode:i.BYTE,length:y(B.data)}]);break;case i.BYTE:k.push([{data:B.data,mode:i.BYTE,length:y(B.data)}])}}return k}(p(k,u.isKanjiModeEnabled())),Y=function m(b,k){const A={},B={start:{}};let z=["start"];for(let Y=0;Y<b.length;Y++){const I=b[Y],N=[];for(let P=0;P<I.length;P++){const T=I[P],j=""+Y+P;N.push(j),A[j]={node:T,lastCount:0},B[j]={};for(let F=0;F<z.length;F++){const D=z[F];A[D]&&A[D].node.mode===T.mode?(B[D][j]=h(A[D].lastCount+T.length,T.mode)-h(A[D].lastCount,T.mode),A[D].lastCount+=T.length):(A[D]&&(A[D].lastCount=T.length),B[D][j]=h(T.length,T.mode)+4+i.getCharCountIndicator(T.mode,k))}}z=N}for(let Y=0;Y<z.length;Y++)B[z[Y]].end=0;return{map:B,table:A}}(z,A),I=l.find_path(Y.map,"start","end"),N=[];for(let P=1;P<I.length-1;P++)N.push(Y.table[I[P]].node);return s.fromArray(function f(b){return b.reduce(function(k,A){const B=k.length-1>=0?k[k.length-1]:null;return B&&B.mode===A.mode?(k[k.length-1].data+=A.data,k):(k.push(A),k)},[])}(N))},s.rawSplit=function(k){return s.fromArray(p(k,u.isKanjiModeEnabled()))}},2656:(O,s)=>{let r;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];s.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return 4*n+17},s.getSymbolTotalCodewords=function(n){return i[n]},s.getBCHDigit=function(t){let n=0;for(;0!==t;)n++,t>>>=1;return n},s.setToSJISFunction=function(n){if("function"!=typeof n)throw new Error('"toSJISFunc" is not a valid function.');r=n},s.isKanjiModeEnabled=function(){return typeof r<"u"},s.toSJIS=function(n){return r(n)}},1604:(O,s)=>{s.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}},8925:(O,s,r)=>{const i=r(2656),t=r(2296),n=r(139),e=r(838),a=r(1604),u=i.getBCHDigit(7973);function y(h,f){return e.getCharCountIndicator(h,f)+4}function o(h,f){let x=0;return h.forEach(function(m){const w=y(m.mode,f);x+=w+m.getBitsLength()}),x}s.from=function(f,x){return a.isValid(f)?parseInt(f,10):x},s.getCapacity=function(f,x,m){if(!a.isValid(f))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=e.BYTE);const k=8*(i.getSymbolTotalCodewords(f)-t.getTotalCodewordsCount(f,x));if(m===e.MIXED)return k;const A=k-y(m,f);switch(m){case e.NUMERIC:return Math.floor(A/10*3);case e.ALPHANUMERIC:return Math.floor(A/11*2);case e.KANJI:return Math.floor(A/13);default:return Math.floor(A/8)}},s.getBestVersionForData=function(f,x){let m;const w=n.from(x,n.M);if(Array.isArray(f)){if(f.length>1)return function p(h,f){for(let x=1;x<=40;x++)if(o(h,x)<=s.getCapacity(x,f,e.MIXED))return x}(f,w);if(0===f.length)return 1;m=f[0]}else m=f;return function l(h,f,x){for(let m=1;m<=40;m++)if(f<=s.getCapacity(m,x,h))return m}(m.mode,m.getLength(),w)},s.getEncodedBits=function(f){if(!a.isValid(f)||f<7)throw new Error("Invalid QR Code version");let x=f<<12;for(;i.getBCHDigit(x)-u>=0;)x^=7973<<i.getBCHDigit(x)-u;return f<<12|x}},465:(O,s,r)=>{const i=r(8428);s.render=function(a,c,u){let l=u,y=c;typeof l>"u"&&(!c||!c.getContext)&&(l=c,c=void 0),c||(y=function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),l=i.getOptions(l);const o=i.getImageWidth(a.modules.size,l),p=y.getContext("2d"),h=p.createImageData(o,o);return i.qrToImageData(h.data,a,l),function t(e,a,c){e.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=c,a.width=c,a.style.height=c+"px",a.style.width=c+"px"}(p,y,o),p.putImageData(h,0,0),y},s.renderToDataURL=function(a,c,u){let l=u;return typeof l>"u"&&(!c||!c.getContext)&&(l=c,c=void 0),l||(l={}),s.render(a,c,l).toDataURL(l.type||"image/png",(l.rendererOpts||{}).quality)}},5510:(O,s,r)=>{const i=r(8428);function t(a,c){const u=a.a/255,l=c+'="'+a.hex+'"';return u<1?l+" "+c+'-opacity="'+u.toFixed(2).slice(1)+'"':l}function n(a,c,u){let l=a+c;return typeof u<"u"&&(l+=" "+u),l}s.render=function(c,u,l){const y=i.getOptions(u),o=c.modules.size,p=c.modules.data,h=o+2*y.margin,f=y.color.light.a?"<path "+t(y.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",x="<path "+t(y.color.dark,"stroke")+' d="'+function e(a,c,u){let l="",y=0,o=!1,p=0;for(let h=0;h<a.length;h++){const f=Math.floor(h%c),x=Math.floor(h/c);!f&&!o&&(o=!0),a[h]?(p++,h>0&&f>0&&a[h-1]||(l+=o?n("M",f+u,.5+x+u):n("m",y,0),y=0,o=!1),f+1<c&&a[h+1]||(l+=n("h",p),p=0)):y++}return l}(p,o,y.margin)+'"/>',b='<svg xmlns="http://www.w3.org/2000/svg" '+(y.width?'width="'+y.width+'" height="'+y.width+'" ':"")+'viewBox="0 0 '+h+" "+h+'" shape-rendering="crispEdges">'+f+x+"</svg>\n";return"function"==typeof l&&l(null,b),b}},8428:(O,s)=>{function r(i){if("number"==typeof i&&(i=i.toString()),"string"!=typeof i)throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+i);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}s.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=t.width&&t.width>=21?t.width:void 0;return{width:e,scale:e?4:t.scale||4,margin:typeof t.margin>"u"||null===t.margin||t.margin<0?4:t.margin,color:{dark:r(t.color.dark||"#000000ff"),light:r(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},s.getScale=function(t,n){return n.width&&n.width>=t+2*n.margin?n.width/(t+2*n.margin):n.scale},s.getImageWidth=function(t,n){const e=s.getScale(t,n);return Math.floor((t+2*n.margin)*e)},s.qrToImageData=function(t,n,e){const a=n.modules.size,c=n.modules.data,u=s.getScale(a,e),l=Math.floor((a+2*e.margin)*u),y=e.margin*u,o=[e.color.light,e.color.dark];for(let p=0;p<l;p++)for(let h=0;h<l;h++){let f=4*(p*l+h),x=e.color.light;p>=y&&h>=y&&p<l-y&&h<l-y&&(x=o[c[Math.floor((p-y)/u)*a+Math.floor((h-y)/u)]?1:0]),t[f++]=x.r,t[f++]=x.g,t[f++]=x.b,t[f]=x.a}}},243:O=>{"use strict";var s={single_source_shortest_paths:function(r,i,t){var n={},e={};e[i]=0;var c,u,l,y,o,h,a=s.PriorityQueue.make();for(a.push(i,0);!a.empty();)for(l in y=(c=a.pop()).cost,o=r[u=c.value]||{})o.hasOwnProperty(l)&&(h=y+o[l],(typeof e[l]>"u"||e[l]>h)&&(e[l]=h,a.push(l,h),n[l]=u));if(typeof t<"u"&&typeof e[t]>"u"){var m=["Could not find a path from ",i," to ",t,"."].join("");throw new Error(m)}return n},extract_shortest_path_from_predecessor_list:function(r,i){for(var t=[],n=i;n;)t.push(n),n=r[n];return t.reverse(),t},find_path:function(r,i,t){var n=s.single_source_shortest_paths(r,i,t);return s.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(r){var n,i=s.PriorityQueue,t={};for(n in r=r||{},i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t.queue=[],t.sorter=r.sorter||i.default_sorter,t},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){this.queue.push({value:r,cost:i}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};O.exports=s},3174:O=>{"use strict";O.exports=function(r){for(var i=[],t=r.length,n=0;n<t;n++){var e=r.charCodeAt(n);if(e>=55296&&e<=56319&&t>n+1){var a=r.charCodeAt(n+1);a>=56320&&a<=57343&&(e=1024*(e-55296)+a-56320+65536,n+=1)}e<128?i.push(e):e<2048?(i.push(e>>6|192),i.push(63&e|128)):e<55296||e>=57344&&e<65536?(i.push(e>>12|224),i.push(e>>6&63|128),i.push(63&e|128)):e>=65536&&e<=1114111?(i.push(e>>18|240),i.push(e>>12&63|128),i.push(e>>6&63|128),i.push(63&e|128)):i.push(239,191,189)}return new Uint8Array(i).buffer}},6182:(O,s,r)=>{"use strict";r.d(s,{B0:()=>e});var i=r(177),t=r(4438);class n{constructor(y,o){this._document=o;const p=this._textarea=this._document.createElement("textarea"),h=p.style;h.position="fixed",h.top=h.opacity="0",h.left="-999em",p.setAttribute("aria-hidden","true"),p.value=y,p.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(p)}copy(){const y=this._textarea;let o=!1;try{if(y){const p=this._document.activeElement;y.select(),y.setSelectionRange(0,y.value.length),o=this._document.execCommand("copy"),p&&p.focus()}}catch{}return o}destroy(){const y=this._textarea;y&&(y.remove(),this._textarea=void 0)}}let e=(()=>{class l{constructor(o){this._document=o}copy(o){const p=this.beginCopy(o),h=p.copy();return p.destroy(),h}beginCopy(o){return new n(o,this._document)}static{this.\u0275fac=function(p){return new(p||l)(t.KVO(i.qQ))}}static{this.\u0275prov=t.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},9454:(O,s,r)=>{"use strict";r.d(s,{MY:()=>R});var i=r(4438);let u=(()=>{class ${static{this.\u0275fac=function(d){return new(d||$)}}static{this.\u0275mod=i.$C({type:$})}static{this.\u0275inj=i.G2t({})}}return $})();var l=r(6939),y=r(6600);r(9969);let R=(()=>{class ${static{this.\u0275fac=function(d){return new(d||$)}}static{this.\u0275mod=i.$C({type:$})}static{this.\u0275inj=i.G2t({imports:[y.yE,u,l.jc]})}}return $})()},9183:(O,s,r)=>{"use strict";r.d(s,{D6:()=>h,LG:()=>o});var i=r(4438),t=r(177),n=r(6600);const e=["determinateSpinner"];function a(f,x){if(1&f&&(i.qSk(),i.j41(0,"svg",11),i.nrm(1,"circle",12),i.k0s()),2&f){const m=i.XpG();i.BMQ("viewBox",m._viewBox()),i.R7$(),i.xc7("stroke-dasharray",m._strokeCircumference(),"px")("stroke-dashoffset",m._strokeCircumference()/2,"px")("stroke-width",m._circleStrokeWidth(),"%"),i.BMQ("r",m._circleRadius())}}const c=new i.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function u(){return{diameter:l}}}),l=100;let o=(()=>{class f{get color(){return this._color||this._defaultColor}set color(m){this._color=m}constructor(m,w,b){this._elementRef=m,this._defaultColor="primary",this._value=0,this._diameter=l,this._noopAnimations="NoopAnimations"===w&&!!b&&!b._forceAnimations,this.mode="mat-spinner"===m.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",b&&(b.color&&(this.color=this._defaultColor=b.color),b.diameter&&(this.diameter=b.diameter),b.strokeWidth&&(this.strokeWidth=b.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(m){this._value=Math.max(0,Math.min(100,m||0))}get diameter(){return this._diameter}set diameter(m){this._diameter=m||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(m){this._strokeWidth=m||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const m=2*this._circleRadius()+this.strokeWidth;return`0 0 ${m} ${m}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(w){return new(w||f)(i.rXU(i.aKT),i.rXU(i.bc$,8),i.rXU(c))}}static{this.\u0275cmp=i.VBU({type:f,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(w,b){if(1&w&&i.GBs(e,5),2&w){let k;i.mGM(k=i.lsd())&&(b._determinateCircle=k.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(w,b){2&w&&(i.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===b.mode?b.value:null)("mode",b.mode),i.HbH("mat-"+b.color),i.xc7("width",b.diameter,"px")("height",b.diameter,"px")("--mdc-circular-progress-size",b.diameter+"px")("--mdc-circular-progress-active-indicator-width",b.diameter+"px"),i.AVh("_mat-animation-noopable",b._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===b.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",i.Udg],diameter:[2,"diameter","diameter",i.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",i.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[i.GFd,i.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(w,b){if(1&w&&(i.DNE(0,a,2,8,"ng-template",null,0,i.C5r),i.j41(2,"div",2,1),i.qSk(),i.j41(4,"svg",3),i.nrm(5,"circle",4),i.k0s()(),i.joV(),i.j41(6,"div",5)(7,"div",6)(8,"div",7),i.eu8(9,8),i.k0s(),i.j41(10,"div",9),i.eu8(11,8),i.k0s(),i.j41(12,"div",10),i.eu8(13,8),i.k0s()()()),2&w){const k=i.sdS(1);i.R7$(4),i.BMQ("viewBox",b._viewBox()),i.R7$(),i.xc7("stroke-dasharray",b._strokeCircumference(),"px")("stroke-dashoffset",b._strokeDashOffset(),"px")("stroke-width",b._circleStrokeWidth(),"%"),i.BMQ("r",b._circleRadius()),i.R7$(4),i.Y8G("ngTemplateOutlet",k),i.R7$(2),i.Y8G("ngTemplateOutlet",k),i.R7$(2),i.Y8G("ngTemplateOutlet",k)}},dependencies:[t.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return f})(),h=(()=>{class f{static{this.\u0275fac=function(w){return new(w||f)}}static{this.\u0275mod=i.$C({type:f})}static{this.\u0275inj=i.G2t({imports:[t.MD,n.yE]})}}return f})()},5398:(O,s,r)=>{"use strict";r.d(s,{c:()=>c,f:()=>u});var i=r(467),t=r(4438),n=r(2577),e=r(345);const a=["qrcElement"];let c=(()=>{class l{constructor(o,p){this.renderer=o,this.sanitizer=p,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t.bkB,this.context=null}ngOnChanges(){var o=this;return(0,i.A)(function*(){yield o.createQRCode()})()}isValidQrCodeText(o){return!1===this.allowEmptyString?!(typeof o>"u"||""===o||"null"===o||null===o):!(typeof o>"u")}toDataURL(o){return new Promise((p,h)=>{(0,n.dY)(this.qrdata,o,(f,x)=>{f?h(f):p(x)})})}toCanvas(o,p){return new Promise((h,f)=>{(0,n.mo)(o,this.qrdata,p,x=>{x?f(x):h("success")})})}toSVG(o){return new Promise((p,h)=>{(0,n.toString)(this.qrdata,o,(f,x)=>{f?h(f):p(x)})})}renderElement(o){for(const p of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,p);this.renderer.appendChild(this.qrcElement.nativeElement,o)}createQRCode(){var o=this;return(0,i.A)(function*(){o.version&&o.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),o.version=40):o.version&&o.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),o.version=1):void 0!==o.version&&isNaN(o.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),o.version=void 0);try{if(!o.isValidQrCodeText(o.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");o.isValidQrCodeText(o.qrdata)&&""===o.qrdata&&(o.qrdata=" ");const p={color:{dark:o.colorDark,light:o.colorLight},errorCorrectionLevel:o.errorCorrectionLevel,margin:o.margin,scale:o.scale,version:o.version,width:o.width},h=o.imageSrc,f=o.imageHeight||40,x=o.imageWidth||40;switch(o.elementType){case"canvas":{const m=o.renderer.createElement("canvas");o.context=m.getContext("2d"),o.toCanvas(m,p).then(()=>{if(o.ariaLabel&&o.renderer.setAttribute(m,"aria-label",`${o.ariaLabel}`),o.title&&o.renderer.setAttribute(m,"title",`${o.title}`),h&&o.context){o.centerImage=new Image(x,f),h!==o.centerImage.src&&(o.centerImage.crossOrigin="anonymous",o.centerImage.src=h),f!==o.centerImage.height&&(o.centerImage.height=f),x!==o.centerImage.width&&(o.centerImage.width=x);const w=o.centerImage;w&&(w.onload=()=>{o.context?.drawImage(w,m.width/2-x/2,m.height/2-f/2,x,f)})}o.renderElement(m),o.emitQRCodeURL(m)}).catch(w=>{console.error("[angularx-qrcode] canvas error:",w)});break}case"svg":{const m=o.renderer.createElement("div");o.toSVG(p).then(w=>{o.renderer.setProperty(m,"innerHTML",w);const b=m.firstChild;o.renderer.setAttribute(b,"height",`${o.width}`),o.renderer.setAttribute(b,"width",`${o.width}`),o.renderElement(b),o.emitQRCodeURL(b)}).catch(w=>{console.error("[angularx-qrcode] svg error:",w)});break}default:{const m=o.renderer.createElement("img");o.toDataURL(p).then(w=>{o.alt&&m.setAttribute("alt",o.alt),o.ariaLabel&&m.setAttribute("aria-label",o.ariaLabel),m.setAttribute("src",w),o.title&&m.setAttribute("title",o.title),o.renderElement(m),o.emitQRCodeURL(m)}).catch(w=>{console.error("[angularx-qrcode] img/url error:",w)})}}}catch(p){console.error("[angularx-qrcode] Error generating QR Code:",p.message)}})()}convertBase64ImageUrlToBlob(o){const p=o.split(";base64,"),h=p[0].split(":")[1],f=atob(p[1]),x=new Uint8Array(f.length);for(let m=0;m<f.length;++m)x[m]=f.charCodeAt(m);return new Blob([x],{type:h})}emitQRCodeURL(o){const p=o.constructor.name;if(p===SVGSVGElement.name){const b=new Blob([o.outerHTML],{type:"image/svg+xml"}),k=URL.createObjectURL(b),A=this.sanitizer.bypassSecurityTrustUrl(k);return void this.qrCodeURL.emit(A)}let h="";p===HTMLCanvasElement.name&&(h=o.toDataURL("image/png")),p===HTMLImageElement.name&&(h=o.src);const f=this.convertBase64ImageUrlToBlob(h),x=URL.createObjectURL(f),m=this.sanitizer.bypassSecurityTrustUrl(x);this.qrCodeURL.emit(m)}static{this.\u0275fac=function(p){return new(p||l)(t.rXU(t.sFG),t.rXU(e.up))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["qrcode"]],viewQuery:function(p,h){if(1&p&&t.GBs(a,7),2&p){let f;t.mGM(f=t.lsd())&&(h.qrcElement=f.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(p,h){1&p&&t.nrm(0,"div",null,0),2&p&&t.HbH(h.cssClass)},encapsulation:2,changeDetection:0})}}return l})(),u=(()=>{class l{static{this.\u0275fac=function(p){return new(p||l)}}static{this.\u0275mod=t.$C({type:l})}static{this.\u0275inj=t.G2t({})}}return l})()},7540:(O,s,r)=>{"use strict";r.d(s,{e:()=>K});var i=r(4438);let K=(()=>{class g{static{this.\u0275fac=function(U){return new(U||g)}}static{this.\u0275mod=i.$C({type:g})}static{this.\u0275inj=i.G2t({})}}return g})()}}]);