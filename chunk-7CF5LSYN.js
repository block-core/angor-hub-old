import{a as W}from"./chunk-RQRL4SS7.js";import{a as H,c as q,d as Y,e as J}from"./chunk-YKVPUU23.js";import"./chunk-YT4QGOI5.js";import"./chunk-KQX6Z6FU.js";import{d as M,e as I}from"./chunk-XCEH5654.js";import{C as N,E as p,G as B,H as j,L as z,N as G,O as D,P,R,S as O,T as U,U as V,q as L,x as F,y as C}from"./chunk-FOIKTNAL.js";import{$ as K,X as k,ba as A,ca as T}from"./chunk-UUQOEFCO.js";import{f as b,k as E}from"./chunk-DNRPKDOR.js";import{Ca as v,Da as x,Jb as t,Kb as e,Lb as i,Vb as u,Xb as y,db as o,dc as n,eb as g,fc as S,kc as _,lc as w,qa as h,wb as c,yb as m}from"./chunk-E43IZEHU.js";var Z=()=>["/register"];function $(r,l){if(r&1&&(t(0,"angor-alert",8),n(1),e()),r&2){let f=y();m("appearance","outline")("showIcon",!1)("type",f.alert.type)("@shake",f.alert.type==="error"),o(),S(" ",f.alert.message," ")}}function ee(r,l){r&1&&(t(0,"span"),n(1,"Login"),e())}function te(r,l){r&1&&i(0,"mat-progress-spinner",32)}function ie(r,l){r&1&&(t(0,"span"),n(1,"Login"),e())}function ne(r,l){r&1&&i(0,"mat-progress-spinner",32)}function re(r,l){r&1&&(t(0,"div")(1,"div",11),i(2,"div",12),t(3,"div",13),n(4,"Or login with extension"),e(),i(5,"div",12),e(),t(6,"div",33)(7,"button",34),i(8,"mat-icon",35),e()()()),r&2&&(o(8),m("svgIcon","feather:zap"))}var Q=(()=>{let l=class l{constructor(s,d,a){this._formBuilder=s,this._router=d,this._signerService=a,this.alert={type:"error",message:""},this.showAlert=!1,this.loading=!1,this.isInstalledExtension=!1}ngOnInit(){this.initializeForms(),this.checkNostrExtensionAvailability()}initializeForms(){this.SecretKeyLoginForm=this._formBuilder.group({secretKey:["",[p.required,p.minLength(64)]]}),this.MenemonicLoginForm=this._formBuilder.group({menemonic:["",[p.required,p.minLength(12)]]})}checkNostrExtensionAvailability(){let s=globalThis;s.nostr&&typeof s.nostr.signEvent=="function"?this.isInstalledExtension=!0:this.isInstalledExtension=!1}loginWithSecretKey(){if(this.SecretKeyLoginForm.invalid)return;let s=this.SecretKeyLoginForm.get("secretKey").value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(s),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Secret key is missing or invalid.",this.showAlert=!0)}loginWithMenemonic(){if(this.MenemonicLoginForm.invalid)return;let s=this.MenemonicLoginForm.get("menemonic").value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(s),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Menemonic is missing or invalid.",this.showAlert=!0)}};l.\u0275fac=function(d){return new(d||l)(g(P),g(M),g(W))},l.\u0275cmp=h({type:l,selectors:[["auth-sign-in"]],standalone:!0,features:[_],decls:65,vars:15,consts:[[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-12"],["src","images/logo/logo.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-0.5","flex","items-baseline","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"appearance","showIcon","type"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"ngSubmit","formGroup"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"w-full"],["matInput","","formControlName","secretKey"],["mat-flat-button","","color","primary",1,"angor-mat-button-large","mt-6","w-full",3,"disabled"],[4,"ngIf"],["diameter","24","mode","indeterminate",4,"ngIf"],["matInput","","formControlName","menemonic"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],["diameter","24","mode","indeterminate"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto"],[1,"icon-size-5",3,"svgIcon"]],template:function(d,a){d&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i(4,"img",4),e(),t(5,"div",5),n(6," Login "),e(),t(7,"div",6)(8,"div"),n(9,"Don't have an account?"),e(),t(10,"a",7),n(11,"Register"),e()(),t(12,"angor-alert",8),n(13," Privet key test = "),t(14,"strong"),n(15,"123"),e(),i(16,"br"),n(17," Menemonic test = "),t(18,"strong"),n(19,"321"),e(),i(20,"br"),e(),c(21,$,2,5,"angor-alert",9),t(22,"form",10),u("ngSubmit",function(){return a.loginWithSecretKey()}),t(23,"div",11),i(24,"div",12),t(25,"div",13),n(26,"Enter secret key"),e(),i(27,"div",12),e(),t(28,"mat-form-field",14)(29,"mat-label"),n(30,"Secret Key"),e(),i(31,"input",15),e(),t(32,"button",16),c(33,ee,2,0,"span",17)(34,te,1,0,"mat-progress-spinner",18),e()(),t(35,"div",11),i(36,"div",12),t(37,"div",13),n(38,"Or enter menemonic"),e(),i(39,"div",12),e(),t(40,"form",10),u("ngSubmit",function(){return a.loginWithMenemonic()}),t(41,"mat-form-field",14)(42,"mat-label"),n(43,"Menemonic"),e(),i(44,"input",19),e(),t(45,"button",16),c(46,ie,2,0,"span",17)(47,ne,1,0,"mat-progress-spinner",18),e()(),c(48,re,9,1,"div",17),e()(),t(49,"div",20),v(),t(50,"svg",21)(51,"g",22),i(52,"circle",23)(53,"circle",24),e()(),t(54,"svg",25)(55,"defs")(56,"pattern",26),i(57,"rect",27),e()(),i(58,"rect",28),e(),x(),t(59,"div",29)(60,"div",30)(61,"div"),n(62,"Angor Hub"),e()(),t(63,"div",31),n(64," Angor Hub is a Nostr client customized around the Angor protocol, a decentralized crowdfunding platform. "),e()()()()),d&2&&(o(10),m("routerLink",w(14,Z)),o(2),m("appearance","outline")("showIcon",!1)("type","info"),o(9),m("ngIf",a.showAlert),o(),m("formGroup",a.SecretKeyLoginForm),o(10),m("disabled",a.SecretKeyLoginForm.invalid),o(),m("ngIf",!a.loading),o(),m("ngIf",a.loading),o(6),m("formGroup",a.MenemonicLoginForm),o(5),m("disabled",a.MenemonicLoginForm.invalid),o(),m("ngIf",!a.loading),o(),m("ngIf",a.loading),o(),m("ngIf",a.isInstalledExtension))},dependencies:[I,H,R,z,N,B,j,O,G,D,C,F,L,V,U,K,k,T,A,q,J,Y,E,b],encapsulation:2});let r=l;return r})();var Le=[{path:"",component:Q}];export{Le as default};
