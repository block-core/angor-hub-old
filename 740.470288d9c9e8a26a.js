"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[740],{1740:(Y,b,c)=>{c.r(b),c.d(b,{default:()=>we});var h=c(177),p=c(8834),f=c(9213),x=c(882),m=c(1413),u=c(6977),e=c(4438),o=c(9417),g=c(2408),v=c(9042),C=c(4823),j=c(833);function K(r,a){1&r&&e.nrm(0,"mat-icon",18),2&r&&e.Y8G("svgIcon","heroicons_solid:check-circle")}function M(r,a){1&r&&e.nrm(0,"mat-icon",19),2&r&&e.Y8G("svgIcon","heroicons_outline:check-circle")}function B(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",9)(1,"div",12)(2,"div",13)(3,"div",14),e.EFF(4),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.k0s()()(),e.j41(7,"div",16)(8,"button",17),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setPrimaryIndexer("mainnet",i))}),e.DNE(9,K,1,1,"mat-icon",18)(10,M,1,1,"mat-icon",19),e.k0s(),e.j41(11,"button",20),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.removeIndexer("mainnet",i))}),e.nrm(12,"mat-icon",21),e.k0s()()()}if(2&r){const t=a.$implicit;e.R7$(4),e.JRh(t.url),e.R7$(2),e.SpI(" Primary: ",t.primary?"Yes":"No"," "),e.R7$(2),e.FS9("matTooltip",t.primary?"This is already the primary indexer":"Set as Primary Indexer"),e.BMQ("aria-label",t.primary?"Primary Indexer":"Set as Primary Indexer"),e.R7$(),e.vxM(t.primary?9:10),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:trash")}}function U(r,a){1&r&&e.nrm(0,"mat-icon",18),2&r&&e.Y8G("svgIcon","heroicons_solid:check-circle")}function z(r,a){1&r&&e.nrm(0,"mat-icon",19),2&r&&e.Y8G("svgIcon","heroicons_outline:check-circle")}function V(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",9)(1,"div",12)(2,"div",13)(3,"div",14),e.EFF(4),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.k0s()()(),e.j41(7,"div",16)(8,"button",17),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setPrimaryIndexer("testnet",i))}),e.DNE(9,U,1,1,"mat-icon",18)(10,z,1,1,"mat-icon",19),e.k0s(),e.j41(11,"button",20),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.removeIndexer("testnet",i))}),e.nrm(12,"mat-icon",21),e.k0s()()()}if(2&r){const t=a.$implicit;e.R7$(4),e.JRh(t.url),e.R7$(2),e.SpI(" Primary: ",t.primary?"Yes":"No"," "),e.R7$(2),e.FS9("matTooltip",t.primary?"This is already the primary testnet indexer":"Set as Primary Testnet Indexer"),e.BMQ("aria-label",t.primary?"Primary Testnet Indexer":"Set as Primary Testnet Indexer"),e.R7$(),e.vxM(t.primary?9:10),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:trash")}}let D=(()=>{class r{constructor(){this._indexerService=(0,e.WQX)(j.F),this.mainnetIndexers=(0,e.vPA)([]),this.testnetIndexers=(0,e.vPA)([]),this.newMainnetIndexerUrl=(0,e.vPA)(""),this.newTestnetIndexerUrl=(0,e.vPA)(""),this.loadIndexers()}loadIndexers(){this.mainnetIndexers.set(this._indexerService.getIndexers("mainnet").map(t=>({url:t,primary:t===this._indexerService.getPrimaryIndexer("mainnet")}))),this.testnetIndexers.set(this._indexerService.getIndexers("testnet").map(t=>({url:t,primary:t===this._indexerService.getPrimaryIndexer("testnet")})))}addIndexer(t){const n="mainnet"===t?this.newMainnetIndexerUrl():this.newTestnetIndexerUrl();n.trim()&&(this._indexerService.addIndexer(n,t),this.loadIndexers(),"mainnet"===t?this.newMainnetIndexerUrl.set(""):this.newTestnetIndexerUrl.set(""))}removeIndexer(t,n){this._indexerService.removeIndexer(n.url,t),this.loadIndexers()}setPrimaryIndexer(t,n){this._indexerService.setPrimaryIndexer(n.url,t),this.loadIndexers()}trackByFn(t,n){return n.url}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-indexer"]],decls:29,vars:8,consts:[[1,"w-full","max-w-3xl"],[1,"mb-8","w-full"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","placeholder","Mainnet Indexer URL",3,"ngModelChange","ngModel"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8"],[1,"flex","flex-col","divide-y","border-b","border-t"],[1,"flex","flex-col","py-6","sm:flex-row","sm:items-center"],[1,"mb-8","mt-10","w-full"],["matInput","","placeholder","Testnet Indexer URL",3,"ngModelChange","ngModel"],[1,"flex","items-center"],[1,"ml-4"],[1,"font-medium"],[1,"text-sm","text-gray-500"],[1,"mt-4","flex","items-center","sm:ml-auto","sm:mt-0"],["mat-icon-button","",3,"click","matTooltip"],["aria-hidden","true",1,"text-primary",3,"svgIcon"],["aria-hidden","true",1,"text-hint",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-hint",3,"svgIcon"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e.EFF(4,"Add Mainnet Indexer"),e.k0s(),e.nrm(5,"mat-icon",3),e.j41(6,"input",4),e.mxI("ngModelChange",function(l){return e.DH7(i.newMainnetIndexerUrl,l)||(i.newMainnetIndexerUrl=l),l}),e.k0s(),e.j41(7,"button",5),e.bIt("click",function(){return i.addIndexer("mainnet")}),e.nrm(8,"mat-icon",6),e.k0s()()(),e.j41(9,"div",7)(10,"h3"),e.EFF(11,"Mainnet Indexers"),e.k0s(),e.j41(12,"div",8),e.Z7z(13,B,13,6,"div",9,e.Vm6),e.k0s()(),e.j41(15,"div",10)(16,"mat-form-field",2)(17,"mat-label"),e.EFF(18,"Add Testnet Indexer"),e.k0s(),e.nrm(19,"mat-icon",3),e.j41(20,"input",11),e.mxI("ngModelChange",function(l){return e.DH7(i.newTestnetIndexerUrl,l)||(i.newTestnetIndexerUrl=l),l}),e.k0s(),e.j41(21,"button",5),e.bIt("click",function(){return i.addIndexer("testnet")}),e.nrm(22,"mat-icon",6),e.k0s()()(),e.j41(23,"div",7)(24,"h3"),e.EFF(25,"Testnet Indexers"),e.k0s(),e.j41(26,"div",8),e.Z7z(27,V,13,6,"div",9,e.Vm6),e.k0s()()()),2&n&&(e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:link"),e.R7$(),e.R50("ngModel",i.newMainnetIndexerUrl),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:plus-circle"),e.R7$(5),e.Dyx(i.mainnetIndexers()),e.R7$(3),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:link"),e.R7$(),e.R50("ngModel",i.newTestnetIndexerUrl),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:plus-circle"),e.R7$(5),e.Dyx(i.testnetIndexers()))},dependencies:[o.YN,o.me,o.BC,o.vS,f.m_,f.An,g.RG,g.rl,g.nJ,g.JW,g.yw,v.fS,v.fg,p.Hl,p.iY,h.MD,C.uc,C.oV],encapsulation:2,changeDetection:0})}}return r})();const P=r=>({"ring-2 ring-primary":r});function A(r,a){1&r&&e.nrm(0,"mat-icon",5),2&r&&e.Y8G("svgIcon","heroicons_solid:check-circle")}function X(r,a){1&r&&e.nrm(0,"mat-icon",5),2&r&&e.Y8G("svgIcon","heroicons_solid:check-circle")}let W=(()=>{class r{constructor(t){this._fb=t,this._indexerService=(0,e.WQX)(j.F),this.selectedNetwork=(0,e.vPA)("testnet")}ngOnInit(){const t=this._indexerService.getNetwork();this.networkForm=this._fb.group({network:[t]}),this.selectedNetwork.set(t),(0,e.QZP)(()=>{console.log("Selected Network:",this.selectedNetwork())})}setNetwork(t){this.selectedNetwork.set(t)}save(){const t=this.selectedNetwork();this._indexerService.setNetwork(t)}cancel(){const t=this._indexerService.getNetwork();this.selectedNetwork.set(t)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(o.ok))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-network"]],decls:24,vars:8,consts:[[1,"w-full","max-w-3xl"],[1,"text-xl","font-bold"],[1,"text-secondary","mt-2"],[1,"mt-8","grid","w-full","max-w-3xl","gap-6","sm:grid-cols-2"],[1,"bg-card","relative","flex","cursor-pointer","flex-col","items-start","justify-start","rounded-md","p-6","shadow","hover:shadow-lg","transition-shadow",3,"click","ngClass"],["aria-label","Selected Network",1,"absolute","right-2","top-2","text-primary","icon-size-7",3,"svgIcon"],[1,"font-semibold","text-lg"],[1,"my-10","w-full","max-w-3xl","border-t"],[1,"flex","w-full","max-w-3xl","items-center","justify-end"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","type","button","color","primary",1,"ml-4",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2,"Change Your Network"),e.k0s(),e.j41(3,"div",2),e.EFF(4," Switch between Mainnet and Testnet to update your network preferences. "),e.k0s(),e.j41(5,"div",3)(6,"div",4),e.bIt("click",function(){return i.setNetwork("mainnet")}),e.DNE(7,A,1,1,"mat-icon",5),e.j41(8,"div",6),e.EFF(9,"Mainnet"),e.k0s(),e.j41(10,"div",2),e.EFF(11," The live Bitcoin network for real transactions. "),e.k0s()(),e.j41(12,"div",4),e.bIt("click",function(){return i.setNetwork("testnet")}),e.DNE(13,X,1,1,"mat-icon",5),e.j41(14,"div",6),e.EFF(15,"Testnet"),e.k0s(),e.j41(16,"div",2),e.EFF(17," A Bitcoin testing network for developers and testing purposes. "),e.k0s()()(),e.nrm(18,"div",7),e.j41(19,"div",8)(20,"button",9),e.bIt("click",function(){return i.cancel()}),e.EFF(21,"Cancel"),e.k0s(),e.j41(22,"button",10),e.bIt("click",function(){return i.save()}),e.EFF(23," Save "),e.k0s()()()),2&n&&(e.R7$(6),e.Y8G("ngClass",e.eq3(4,P,"mainnet"===i.selectedNetwork())),e.R7$(),e.vxM("mainnet"===i.selectedNetwork()?7:-1),e.R7$(5),e.Y8G("ngClass",e.eq3(6,P,"testnet"===i.selectedNetwork())),e.R7$(),e.vxM("testnet"===i.selectedNetwork()?13:-1))},dependencies:[o.X1,f.m_,f.An,p.Hl,p.$z,h.MD,h.YU],encapsulation:2,changeDetection:0})}}return r})();var E=c(450);let L=(()=>{class r{constructor(){this._formBuilder=(0,e.WQX)(o.ok),this.notificationsForm=(0,e.vPA)(this._formBuilder.group({mention:[!1],privateMessage:[!1],zap:[!1],follower:[!1]})),this.notificationKinds={mention:1,privateMessage:4,zap:9735,follower:3},this.initializeForm()}initializeForm(){const t=this.loadNotificationSettings();this.notificationsForm().setValue({mention:t.includes(this.notificationKinds.mention),privateMessage:t.includes(this.notificationKinds.privateMessage),zap:t.includes(this.notificationKinds.zap),follower:t.includes(this.notificationKinds.follower)})}saveSettings(){const t=this.notificationsForm().value,n=[];t.mention&&n.push(this.notificationKinds.mention),t.privateMessage&&n.push(this.notificationKinds.privateMessage),t.zap&&n.push(this.notificationKinds.zap),t.follower&&n.push(this.notificationKinds.follower),localStorage.setItem("notificationSettings",JSON.stringify(n)),console.log("Notification settings saved:",n)}loadNotificationSettings(){const t=localStorage.getItem("notificationSettings");return t?JSON.parse(t):[1,3,4,9735]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-notifications"]],decls:43,vars:10,consts:[["mentionToggle",""],["privateMessageToggle",""],["zapToggle",""],["followerToggle",""],[1,"w-full","max-w-3xl"],[3,"ngSubmit","formGroup"],[1,"w-full","text-xl"],[1,"mt-8","grid","w-full","grid-cols-1","gap-6"],[1,"flex","items-center","justify-between"],[1,"flex-auto","cursor-pointer",3,"click"],[1,"font-medium","leading-6"],[1,"text-secondary","text-md"],[1,"ml-2",3,"color","formControlName"],[1,"my-10","border-t"],[1,"flex","items-center","justify-end"],["mat-stroked-button","","type","button"],["mat-flat-button","","type","button",1,"ml-4",3,"click","color"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"div",4)(1,"form",5),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(i.saveSettings())}),e.j41(2,"div",6),e.EFF(3,"Notification Settings"),e.k0s(),e.j41(4,"div",7)(5,"div",8)(6,"div",9),e.bIt("click",function(){e.eBV(s);const d=e.sdS(12);return e.Njj(d.toggle())}),e.j41(7,"div",10),e.EFF(8,"Mention"),e.k0s(),e.j41(9,"div",11),e.EFF(10," Receive notifications when someone mentions you. "),e.k0s()(),e.nrm(11,"mat-slide-toggle",12,0),e.k0s(),e.j41(13,"div",8)(14,"div",9),e.bIt("click",function(){e.eBV(s);const d=e.sdS(20);return e.Njj(d.toggle())}),e.j41(15,"div",10),e.EFF(16,"Private Message"),e.k0s(),e.j41(17,"div",11),e.EFF(18," Receive notifications for private messages. "),e.k0s()(),e.nrm(19,"mat-slide-toggle",12,1),e.k0s(),e.j41(21,"div",8)(22,"div",9),e.bIt("click",function(){e.eBV(s);const d=e.sdS(28);return e.Njj(d.toggle())}),e.j41(23,"div",10),e.EFF(24,"Zap"),e.k0s(),e.j41(25,"div",11),e.EFF(26," Receive notifications when you get a zap. "),e.k0s()(),e.nrm(27,"mat-slide-toggle",12,2),e.k0s(),e.j41(29,"div",8)(30,"div",9),e.bIt("click",function(){e.eBV(s);const d=e.sdS(36);return e.Njj(d.toggle())}),e.j41(31,"div",10),e.EFF(32,"New Follower"),e.k0s(),e.j41(33,"div",11),e.EFF(34," Receive notifications when someone follows you. "),e.k0s()(),e.nrm(35,"mat-slide-toggle",12,3),e.k0s()(),e.nrm(37,"div",13),e.j41(38,"div",14)(39,"button",15),e.EFF(40,"Cancel"),e.k0s(),e.j41(41,"button",16),e.bIt("click",function(){return e.eBV(s),e.Njj(i.saveSettings())}),e.EFF(42," Save "),e.k0s()()()()}2&n&&(e.R7$(),e.Y8G("formGroup",i.notificationsForm()),e.R7$(10),e.Y8G("color","primary")("formControlName","mention"),e.R7$(8),e.Y8G("color","primary")("formControlName","privateMessage"),e.R7$(8),e.Y8G("color","primary")("formControlName","zap"),e.R7$(8),e.Y8G("color","primary")("formControlName","follower"),e.R7$(6),e.Y8G("color","primary"))},dependencies:[o.YN,o.qT,o.BC,o.cb,o.X1,o.j4,o.JD,E.mV,E.sG,p.Hl,p.$z],encapsulation:2,changeDetection:0})}}return r})();var y=c(467),F=c(7403),k=c(3),N=c(5351),_=c(7250),w=c(5245),T=c(5766),R=c(6231),I=c(6324),G=c(7291),$=c(5462);let O=(()=>{class r{constructor(){this._fb=(0,e.WQX)(o.ok),this._signerService=(0,e.WQX)(I.A),this._relayService=(0,e.WQX)(R.b),this._router=(0,e.WQX)(w.Ix),this._dialog=(0,e.WQX)(N.bZ),this._storageService=(0,e.WQX)(G.n),this.user=(0,e.vPA)(null),this.profileForm=(0,e.vPA)(this._fb.group({name:["",o.k0.required],username:[""],displayName:[""],website:[""],about:[""],picture:[""],banner:[""],lud06:[""],lud16:["",o.k0.pattern("^[a-z0-9._-]+@[a-z0-9.-]+.[a-z]{2,4}$")],nip05:["",o.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]})),this.content=(0,e.vPA)(""),this.userEffect=(0,e.QZP)(()=>{const t=this.user();t&&this.profileForm().setValue({name:t?.name||"",username:t?.username||"",displayName:t?.displayName||"",website:t?.website||"",about:t?.about||"",picture:t?.picture||"",banner:t?.banner||"",lud06:t?.lud06||"",lud16:t?.lud16||"",nip05:t?.nip05||""})}),this.setValues()}setValues(){var t=this;return(0,y.A)(function*(){try{const n=yield t._signerService.getPublicKey(),i=yield t._storageService.getProfile(n);t.user.set(i)}catch(n){console.error("Error fetching profile:",n)}})()}onSubmit(){this.profileForm().valid?this.submit():console.error("Form is invalid")}submit(){var t=this;return(0,y.A)(function*(){const n=t.profileForm().value;if(t.content.set(JSON.stringify(n)),t._signerService.isUsingSecretKey())try{const i=yield t._signerService.getDecryptedSecretKey();t.signEvent(i)}catch(i){console.error(i)}else if(t._signerService.isUsingExtension()){const i=t._signerService.getUnsignedEvent(0,[],t.content()),s=yield t._signerService.signEventWithExtension(i);t.publishSignedEvent(s)}})()}signEvent(t){var n=this;return(0,y.A)(function*(){const i=n._signerService.getUnsignedEvent(0,[],n.content()),s=(0,T.aT)(t),l=(0,$.pC)(i,s);n.publishSignedEvent(l)})()}publishSignedEvent(t){this._relayService.publishEventToWriteRelays(t),console.log("Profile Updated!"),this._router.navigate(["/profile"])}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-profile"]],decls:70,vars:23,consts:[[1,"w-full","max-w-3xl"],[3,"ngSubmit","formGroup"],[1,"w-full"],[1,"text-secondary"],[1,"mt-8","grid","w-full","gap-6","sm:grid-cols-4"],[1,"sm:col-span-4"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControlName"],["matInput","","cdkTextareaAutosize","",3,"formControlName","cdkAutosizeMinRows"],[1,"text-hint","mt-1","text-md"],[1,"mt-8","flex","items-center","justify-end"],["mat-stroked-button","","type","button"],["mat-flat-button","","type","submit","color","primary",1,"ml-4"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(2,"div",2)(3,"div",3),e.EFF(4," Following information is publicly displayed, be careful! "),e.k0s()(),e.j41(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e.EFF(9,"Name"),e.k0s(),e.nrm(10,"mat-icon",7)(11,"input",8),e.k0s()(),e.j41(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),e.EFF(15,"Username"),e.k0s(),e.nrm(16,"input",8),e.k0s()(),e.j41(17,"div",5)(18,"mat-form-field",6)(19,"mat-label"),e.EFF(20,"Display Name"),e.k0s(),e.nrm(21,"input",8),e.k0s()(),e.j41(22,"div",5)(23,"mat-form-field",6)(24,"mat-label"),e.EFF(25,"Website"),e.k0s(),e.nrm(26,"input",8),e.k0s()(),e.j41(27,"div",5)(28,"mat-form-field",6)(29,"mat-label"),e.EFF(30,"About"),e.k0s(),e.nrm(31,"textarea",9),e.k0s(),e.j41(32,"div",10),e.EFF(33," Brief description for your profile. Basic HTML and Emoji are allowed. "),e.k0s()(),e.j41(34,"div",5)(35,"mat-form-field",6)(36,"mat-label"),e.EFF(37,"Profile Picture URL"),e.k0s(),e.nrm(38,"input",8),e.k0s()(),e.j41(39,"div",5)(40,"mat-form-field",6)(41,"mat-label"),e.EFF(42,"Banner URL"),e.k0s(),e.nrm(43,"input",8),e.k0s()(),e.j41(44,"div",5)(45,"mat-form-field",6)(46,"mat-label"),e.EFF(47,"LUD06"),e.k0s(),e.nrm(48,"input",8),e.j41(49,"mat-hint"),e.EFF(50," LUD06 is an LNURL (Lightning Network URL) for receiving Bitcoin payments over the Lightning Network. "),e.k0s()()(),e.j41(51,"div",5)(52,"mat-form-field",6)(53,"mat-label"),e.EFF(54,"LUD16"),e.k0s(),e.nrm(55,"input",8),e.j41(56,"mat-hint"),e.EFF(57," LUD16 is a Lightning address, similar to an email format, used to receive Bitcoin payments via the Lightning Network. "),e.k0s()()(),e.j41(58,"div",5)(59,"mat-form-field",6)(60,"mat-label"),e.EFF(61,"NIP05"),e.k0s(),e.nrm(62,"input",8),e.j41(63,"mat-hint"),e.EFF(64," NIP05 provides a user-friendly identifier for Nostr, similar to an email address, to help identify and verify your public identity. "),e.k0s()()()(),e.j41(65,"div",11)(66,"button",12),e.EFF(67,"Cancel"),e.k0s(),e.j41(68,"button",13),e.EFF(69," Save "),e.k0s()()()()),2&n&&(e.R7$(),e.Y8G("formGroup",i.profileForm()),e.R7$(6),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:user"),e.R7$(),e.Y8G("formControlName","name"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","username"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","displayName"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","website"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","about")("cdkAutosizeMinRows",5),e.R7$(4),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","picture"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","banner"),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","lud06"),e.R7$(4),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","lud16"),e.R7$(4),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","nip05"))},dependencies:[o.YN,o.qT,o.me,o.BC,o.cb,o.X1,o.j4,o.JD,g.RG,g.rl,g.nJ,g.MV,g.JW,f.m_,f.An,v.fS,v.fg,F.xb,F.EE,_.Ve,k.Sy,p.Hl,p.$z,h.MD],encapsulation:2,changeDetection:0})}}return r})();var Q=c(345);function J(r,a){if(1&r&&(e.j41(0,"mat-option",26)(1,"div",16),e.EFF(2),e.k0s()()),2&r){const t=a.$implicit;e.Y8G("value",t.value),e.R7$(2),e.JRh(t.label)}}function H(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"img",14),e.bIt("error",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onImageError(i))}),e.k0s()(),e.j41(4,"div",15)(5,"div",16),e.EFF(6),e.k0s(),e.j41(7,"div",17),e.EFF(8),e.k0s()()(),e.j41(9,"div",18)(10,"mat-form-field",19)(11,"mat-select",20),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.accessType,i)||(s.accessType=i),e.Njj(i)}),e.bIt("selectionChange",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.updateRelayAccess(i))}),e.j41(12,"mat-select-trigger",21)(13,"span",22),e.EFF(14),e.nI1(15,"titlecase"),e.k0s()(),e.DNE(16,J,3,2,"mat-option",23),e.k0s()(),e.j41(17,"button",24),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.removeRelay(i.url))}),e.nrm(18,"mat-icon",25),e.k0s()()()}if(2&r){const t=a.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("src",n.relayFavIcon(t.url)||"/images/avatars/avatar-placeholder.png",e.B4B),e.R7$(3),e.JRh(t.url),e.R7$(),e.Y8G("ngClass",n.getRelayStatusClass(t)),e.R7$(),e.SpI(" Status: ",n.getRelayStatus(t)," "),e.R7$(3),e.R50("ngModel",t.accessType),e.R7$(3),e.JRh(e.bMT(15,7,t.accessType)),e.R7$(2),e.Y8G("ngForOf",n.accessOptions())}}function Z(r,a){if(1&r&&(e.qex(0),e.DNE(1,H,19,9,"div",10),e.bVm()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.relays())("ngForTrackBy",t.trackByFn)}}function q(r,a){1&r&&(e.j41(0,"div",27),e.EFF(1," No relays available. Add a new relay to get started. "),e.k0s())}let ee=(()=>{class r{constructor(){this._relayService=(0,e.WQX)(R.b),this._zone=(0,e.WQX)(e.SKi),this._sanitizer=(0,e.WQX)(Q.up),this._cdr=(0,e.WQX)(e.gRc),this.relays=(0,e.vPA)([]),this.newRelayUrl=(0,e.vPA)(""),this.accessOptions=(0,e.vPA)([{label:"Read",value:"read",description:"Reads only, does not write, unless explicitly specified on publish action."},{label:"Write",value:"write",description:"Writes your events, profile, and other metadata updates. Connects on-demand."},{label:"Read and Write",value:"read-write",description:"Reads and writes events, profiles, and other metadata. Always connected."}]),this.relayIconsCache=new Map,(0,e.QZP)(()=>{this._relayService.getRelays().subscribe(t=>{this._zone.run(()=>{this.relays.set(t),this._cdr.markForCheck()})})})}ngOnInit(){}addRelay(){this.newRelayUrl().trim()&&(this._relayService.addRelay(this.newRelayUrl().trim()),this.newRelayUrl.set(""),this._cdr.markForCheck())}updateRelayAccess(t){console.log("Relay Access Updated:",t.url,t.accessType),this._relayService.updateRelayAccessType(t.url,t.accessType),this._cdr.markForCheck()}removeRelay(t){this._relayService.removeRelay(t),this._cdr.markForCheck()}trackByFn(t,n){return n.url||t}getRelayStatus(t){return t.connected?"Connected":"Disconnected"}getRelayStatusClass(t){return t.connected?"text-green-700":"text-red-700"}relayFavIcon(t){if(this.relayIconsCache.has(t))return this.relayIconsCache.get(t);const n=this._sanitizer.bypassSecurityTrustUrl(t.replace("wss://","https://").replace("ws://","https://")+"/favicon.ico");return this.relayIconsCache.set(t,n),n}getSafeUrl(t){return this._sanitizer.bypassSecurityTrustUrl(t)}onImageError(t){t.target.src="/images/avatars/avatar-placeholder.png"}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-relay"]],decls:13,vars:4,consts:[["noRelays",""],[1,"w-full","max-w-3xl"],[1,"w-full"],["subscriptSizing","dynamic",1,"w-full"],["svgIcon","heroicons_solid:link","matPrefix","",1,"icon-size-5"],["matInput","","placeholder","Relay URL",3,"ngModelChange","ngModel"],["mat-icon-button","","matSuffix","","aria-label","Add relay",3,"click","disabled"],["svgIcon","heroicons_solid:plus-circle",1,"icon-size-5"],[1,"mt-8","flex","flex-col","divide-y","border-b","border-t"],[4,"ngIf","ngIfElse"],["class","flex flex-col py-6 sm:flex-row sm:items-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","py-6","sm:flex-row","sm:items-center"],[1,"flex","items-center"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","relay avatar",1,"h-full","w-full","object-cover",3,"error","src"],[1,"ml-4"],[1,"font-medium"],[1,"text-sm",3,"ngClass"],[1,"mt-4","flex","items-center","sm:ml-auto","sm:mt-0"],["subscriptSizing","dynamic",1,"angor-mat-dense","w-50"],[3,"ngModelChange","selectionChange","ngModel"],[1,"text-md"],[1,"ml-1","font-medium"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","aria-label","Remove relay",3,"click"],["svgIcon","heroicons_outline:trash",1,"text-hint"],[3,"value"],[1,"py-6","text-center","text-gray-500"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),e.EFF(4,"Add Relay"),e.k0s(),e.nrm(5,"mat-icon",4),e.j41(6,"input",5),e.mxI("ngModelChange",function(d){return e.eBV(s),e.DH7(i.newRelayUrl,d)||(i.newRelayUrl=d),e.Njj(d)}),e.k0s(),e.j41(7,"button",6),e.bIt("click",function(){return e.eBV(s),e.Njj(i.addRelay())}),e.nrm(8,"mat-icon",7),e.k0s()()(),e.j41(9,"div",8),e.DNE(10,Z,2,2,"ng-container",9)(11,q,2,0,"ng-template",null,0,e.C5r),e.k0s()()}if(2&n){const s=e.sdS(12);e.R7$(6),e.R50("ngModel",i.newRelayUrl),e.R7$(),e.Y8G("disabled",!i.newRelayUrl().trim()),e.R7$(3),e.Y8G("ngIf",i.relays().length>0)("ngIfElse",s)}},dependencies:[g.RG,g.rl,g.nJ,g.JW,g.yw,f.m_,f.An,v.fS,v.fg,p.Hl,p.iY,_.Ve,_.VO,_.$2,k.wT,k.Sy,h.PV,h.MD,h.YU,h.Sq,h.bT,o.YN,o.me,o.BC,o.vS],encapsulation:2,changeDetection:0})}}return r})();var te=c(5416);function ne(r,a){if(1&r){const t=e.RV6();e.j41(0,"mat-form-field",17)(1,"mat-label"),e.EFF(2,"Secret Key"),e.k0s(),e.nrm(3,"input",18),e.j41(4,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyToClipboard(i.secretKey()))}),e.nrm(5,"mat-icon",20),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(3),e.Y8G("value",t.secretKey())}}function ie(r,a){if(1&r){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-label"),e.EFF(2,"Nsec Key"),e.k0s(),e.nrm(3,"input",18),e.j41(4,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.copyToClipboard(i.nsecKey()))}),e.nrm(5,"mat-icon",20),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(3),e.Y8G("value",t.nsecKey())}}function re(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",22)(1,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.fetchSecretKey())}),e.EFF(2,"View Secret Key"),e.k0s()()}}function se(r,a){1&r&&(e.j41(0,"mat-form-field",11)(1,"mat-label"),e.EFF(2,"Current Password"),e.k0s(),e.nrm(3,"input",24),e.k0s())}function oe(r,a){1&r&&e.nrm(0,"div",7)}function ae(r,a){if(1&r){const t=e.RV6();e.j41(0,"form",8),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.removePassword())}),e.j41(1,"h3",9),e.EFF(2,"Remove Password"),e.k0s(),e.j41(3,"p",25),e.EFF(4," Removing your password will store your secret key unencrypted. Ensure you understand the risks. "),e.k0s(),e.j41(5,"mat-form-field",11)(6,"mat-label"),e.EFF(7,"Current Password"),e.k0s(),e.nrm(8,"input",26),e.k0s(),e.j41(9,"div",13)(10,"button",27),e.EFF(11,"Remove Password"),e.k0s()()()}if(2&r){const t=e.XpG();e.Y8G("formGroup",t.removePasswordForm)}}let ce=(()=>{class r{constructor(){this._signerService=(0,e.WQX)(I.A),this._snackBar=(0,e.WQX)(te.UG),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(o.ok),this.isPasswordEnabled=(0,e.vPA)(!1),this.secretKey=(0,e.vPA)(null),this.nsecKey=(0,e.vPA)(null)}ngOnInit(){const t="true"===localStorage.getItem("usePassword");this.isPasswordEnabled.set(t),this.changePasswordForm=this._formBuilder.group({currentPassword:[{value:"",disabled:!t},t?o.k0.required:[]],newPassword:["",[o.k0.required]]}),this.removePasswordForm=this._formBuilder.group({currentPasswordRemove:["",o.k0.required]}),this.updateFormState()}updateFormState(){this.isPasswordEnabled()?this.changePasswordForm.get("currentPassword")?.enable():(this.changePasswordForm.get("currentPassword")?.disable(),this.changePasswordForm.get("currentPassword")?.clearValidators()),this._changeDetectorRef.detectChanges()}fetchSecretKey(){var t=this;return(0,y.A)(function*(){try{const n=yield t._signerService.getDecryptedSecretKey();if(!n)throw new Error("Failed to retrieve the secret key");t.secretKey.set(n),t.fetchNsecKey(),t.openSnackBar("Secret key retrieved successfully.")}catch(n){console.error(n),t.openSnackBar("Failed to retrieve the secret key. Please try again.")}})()}fetchNsecKey(){try{if(!this.secretKey())throw new Error("Secret key must be retrieved first");const t=this._signerService.getNsecFromSeckey(this.secretKey());if(!t)throw new Error("Failed to generate the Nsec key");this.nsecKey.set(t),this.openSnackBar("Nsec key generated successfully.")}catch(t){console.error(t),this.openSnackBar("Failed to generate the Nsec key.")}}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>this.openSnackBar("Copied to clipboard.")).catch(n=>{console.error("Clipboard error:",n),this.openSnackBar("Failed to copy to clipboard.")})}changePassword(){var t=this;return(0,y.A)(function*(){if(t.changePasswordForm.invalid)return void t.openSnackBar("Please fill out all required fields.");const{currentPassword:n,newPassword:i}=t.changePasswordForm.value;try{const s=t.isPasswordEnabled()?yield t._signerService.getSecretKey(n):yield t._signerService.getSecretKey();if(!s)throw new Error("Secret key not found or incorrect password");yield t._signerService.setSecretKey(s,i),t.isPasswordEnabled.set(!0),localStorage.setItem("usePassword","true"),t.openSnackBar("Password successfully changed."),t.changePasswordForm.reset()}catch(s){console.error("Error changing password:",s),t.openSnackBar("Failed to change the password.")}})()}removePassword(){var t=this;return(0,y.A)(function*(){if(t.removePasswordForm.invalid)return void t.openSnackBar("Please enter your current password.");const{currentPasswordRemove:n}=t.removePasswordForm.value;try{const i=yield t._signerService.getSecretKey(n);if(!i)throw new Error("Incorrect current password");yield t._signerService.setSecretKey(i),localStorage.removeItem("usePassword"),t.isPasswordEnabled.set(!1),t.openSnackBar("Password successfully removed."),t.removePasswordForm.reset()}catch(i){console.error("Error removing password:",i),t.openSnackBar("Failed to remove the password.")}})()}openSnackBar(t){this._snackBar.open(t,"Dismiss",{duration:3e3})}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-security"]],decls:23,vars:7,consts:[[1,"w-full","max-w-3xl"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-gray-600","mb-4"],["class","w-full mb-4",4,"ngIf"],["class","w-full",4,"ngIf"],["class","mt-6 text-center",4,"ngIf"],[1,"my-10","border-t"],[3,"ngSubmit","formGroup"],[1,"text-xl"],["class","w-full mt-4",4,"ngIf"],[1,"w-full","mt-4"],["matInput","","formControlName","newPassword","type","password"],[1,"flex","justify-end","mt-6"],["mat-flat-button","","color","primary","type","submit"],["class","my-10 border-t",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-full","mb-4"],["matInput","","readonly","",3,"value"],["mat-icon-button","","matSuffix","",3,"click"],["svgIcon","heroicons_outline:clipboard-document"],[1,"w-full"],[1,"mt-6","text-center"],["mat-flat-button","","color","primary",3,"click"],["matInput","","formControlName","currentPassword","type","password"],[1,"text-secondary","mt-2"],["matInput","","formControlName","currentPasswordRemove","type","password"],["mat-flat-button","","color","warn","type","submit"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"section",1)(2,"h2",2),e.EFF(3,"Secret Key"),e.k0s(),e.j41(4,"p",3),e.EFF(5," Your secret key is sensitive information. Keep it secure and do not share it. "),e.k0s(),e.DNE(6,ne,6,1,"mat-form-field",4)(7,ie,6,1,"mat-form-field",5)(8,re,3,0,"div",6),e.k0s(),e.nrm(9,"div",7),e.j41(10,"form",8),e.bIt("ngSubmit",function(){return i.changePassword()}),e.j41(11,"h3",9),e.EFF(12,"Change Your Password"),e.k0s(),e.DNE(13,se,4,0,"mat-form-field",10),e.j41(14,"mat-form-field",11)(15,"mat-label"),e.EFF(16,"New Password"),e.k0s(),e.nrm(17,"input",12),e.k0s(),e.j41(18,"div",13)(19,"button",14),e.EFF(20,"Save"),e.k0s()()(),e.DNE(21,oe,1,0,"div",15)(22,ae,12,1,"form",16),e.k0s()),2&n&&(e.R7$(6),e.Y8G("ngIf",i.secretKey()),e.R7$(),e.Y8G("ngIf",i.nsecKey()),e.R7$(),e.Y8G("ngIf",!i.secretKey()),e.R7$(2),e.Y8G("formGroup",i.changePasswordForm),e.R7$(3),e.Y8G("ngIf",i.isPasswordEnabled()),e.R7$(8),e.Y8G("ngIf",i.isPasswordEnabled()),e.R7$(),e.Y8G("ngIf",i.isPasswordEnabled()))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,g.RG,g.rl,g.nJ,g.yw,f.m_,f.An,v.fS,v.fg,p.Hl,p.$z,p.iY,h.MD,h.bT],encapsulation:2,changeDetection:0})}}return r})();var le=c(7292);let de=(()=>{class r{constructor(t,n,i,s,l,d,S){this._fb=t,this._signerService=n,this._relayService=i,this._router=s,this._dialog=l,this._storageService=d,this._changeDetectorRef=S}ngOnInit(){this.profileForm=this._fb.group({name:["",o.k0.required],username:[""],displayName:[""],website:[""],about:[""],picture:[""],banner:[""],lud06:[""],lud16:["",o.k0.pattern("^[a-z0-9._-]+@[a-z0-9.-]+.[a-z]{2,4}$")],nip05:["",o.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]}),this.setValues()}setValues(){var t=this;return(0,y.A)(function*(){try{const n=yield t._signerService.getPublicKey(),i=yield t._storageService.getProfile(n);t.user=i,t.profileForm.setValue({name:t.user?.name||"",username:t.user?.username||"",displayName:t.user?.displayName||"",website:t.user?.website||"",about:t.user?.about||"",picture:t.user?.picture||"",banner:t.user?.banner||"",lud06:t.user?.lud06||"",lud16:t.user?.lud16||"",nip05:t.user?.nip05||""}),t._changeDetectorRef.detectChanges()}catch(n){console.error("Error fetching profile:",n)}})()}onSubmit(){this.profileForm.valid?this.submit():console.error("Form is invalid")}submit(){var t=this;return(0,y.A)(function*(){if(t.content=JSON.stringify(t.profileForm.value),t._signerService.isUsingSecretKey()){const i=t._signerService.getPassword();if(i)try{const s=yield t._signerService.getSecretKey(i);t.signEvent(s)}catch(s){console.error(s)}else t._dialog.open(le.b,{width:"300px",disableClose:!0}).afterClosed().subscribe(function(){var l=(0,y.A)(function*(d){if(d&&d.password)try{const S=yield t._signerService.getSecretKey(d.password);t.signEvent(S),0!=d.duration&&t._signerService.savePassword(d.password,d.duration)}catch(S){console.error(S)}else console.error("Password not provided")});return function(d){return l.apply(this,arguments)}}())}else if(t._signerService.isUsingExtension()){const i=t._signerService.getUnsignedEvent(0,[],t.content),s=yield t._signerService.signEventWithExtension(i);t.publishSignedEvent(s)}})()}signEvent(t){var n=this;return(0,y.A)(function*(){const i=n._signerService.getUnsignedEvent(0,[],n.content),s=(0,T.aT)(t),l=(0,$.pC)(i,s);n.publishSignedEvent(l)})()}publishSignedEvent(t){this._relayService.publishEventToWriteRelays(t),console.log("Profile Updated!"),this._router.navigate(["/profile"])}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(o.ok),e.rXU(I.A),e.rXU(R.b),e.rXU(w.Ix),e.rXU(N.bZ),e.rXU(G.n),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings-project-profile"]],decls:10,vars:1,consts:[[1,"w-full","max-w-3xl"],[3,"ngSubmit","formGroup"],[1,"w-full"],[1,"text-secondary"],[1,"mt-8","flex","items-center","justify-end"],["mat-stroked-button","","type","button"],["mat-flat-button","","type","submit","color","primary",1,"ml-4"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(2,"div",2)(3,"div",3),e.EFF(4," Manage and customize your project profile, including privacy settings, analytics, activity logs, and linked accounts. "),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.EFF(7,"Cancel"),e.k0s(),e.j41(8,"button",6),e.EFF(9," Save "),e.k0s()()()()),2&n&&(e.R7$(),e.Y8G("formGroup",i.profileForm))},dependencies:[o.YN,o.qT,o.cb,o.X1,o.j4,g.RG,f.m_,v.fS,F.EE,_.Ve,k.Sy,p.Hl,p.$z,h.MD],encapsulation:2,changeDetection:0})}}return r})();var me=c(4977);const ue=["drawer"],ge=(r,a)=>({"dark:hover:bg-hover hover:bg-gray-100":r,"bg-primary-50 dark:bg-hover":a}),pe=(r,a)=>({"text-hint":r,"text-primary dark:text-primary-500":a}),fe=r=>({"text-primary dark:text-primary-500":r});function he(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.goToPanel(i.id))}),e.nrm(1,"mat-icon",18),e.j41(2,"div",19)(3,"div",20),e.EFF(4),e.k0s(),e.j41(5,"div",21),e.EFF(6),e.k0s()()()}if(2&r){const t=a.$implicit,n=e.XpG();e.Y8G("ngClass",e.l_i(6,ge,!n.selectedPanel||n.selectedPanel!==t.id,n.selectedPanel&&n.selectedPanel===t.id)),e.R7$(),e.Y8G("ngClass",e.l_i(9,pe,!n.selectedPanel||n.selectedPanel!==t.id,n.selectedPanel&&n.selectedPanel===t.id))("svgIcon",t.icon),e.R7$(2),e.Y8G("ngClass",e.eq3(12,fe,n.selectedPanel&&n.selectedPanel===t.id)),e.R7$(),e.SpI(" ",t.title," "),e.R7$(2),e.SpI(" ",t.description," ")}}function ye(r,a){1&r&&e.nrm(0,"settings-relay")}function ve(r,a){1&r&&e.nrm(0,"settings-network")}function _e(r,a){1&r&&e.nrm(0,"settings-indexer")}function Se(r,a){1&r&&e.nrm(0,"settings-profile")}function be(r,a){1&r&&e.nrm(0,"settings-project-profile")}function xe(r,a){1&r&&e.nrm(0,"settings-security")}function ke(r,a){1&r&&e.nrm(0,"settings-notifications")}const we=[{path:"",component:(()=>{class r{selectPanel(t){this.selectedPanel=t,this._router.navigate(["settings",t],{replaceUrl:!0})}constructor(t,n,i,s,l){this._changeDetectorRef=t,this._angorMediaWatcherService=n,this._signerService=i,this._route=s,this._router=l,this.drawerMode="side",this.drawerOpened=!0,this.panels=[{id:"relay",icon:"heroicons_outline:server",title:"Relay",description:"Manage and configure your existing relays and update their access roles and permissions."},{id:"network",icon:"heroicons_outline:globe-alt",title:"Network",description:"Switch between mainnet and testnet for different Bitcoin network configurations."},{id:"indexer",icon:"heroicons_outline:chart-bar",title:"Indexer",description:"Add, remove, and manage your indexers, including setting the primary indexer."},{id:"profile",icon:"heroicons_outline:user",title:"Profile",description:"Update your personal profile, manage your account details, and modify your private information."},{id:"project-profile",icon:"heroicons_outline:check-badge",title:"Project profile",description:"Manage and customize your project profile, including privacy settings, analytics, activity logs, and linked accounts."},{id:"notifications",icon:"heroicons_outline:bell",title:"Notifications",description:"Control when and how you\u2019ll be notified across various communication channels."},{id:"security",icon:"heroicons_outline:shield-check",title:"Password Management",description:"Manage your password and decryption settings, including saving passwords for future decrypting sensitive information."}],this.selectedPanel="relay",this._unsubscribeAll=new m.B}ngOnInit(){this._route.paramMap.subscribe(n=>{const i=n.get("id");this.selectedPanel=i&&this.panels.some(s=>s.id===i)?i:"relay"}),this._signerService.isUsingSecretKey()?this.panels.some(i=>"security"===i.id)||(this.panels.push({id:"security",icon:"heroicons_outline:shield-check",title:"Password Management",description:"Manage your password and decryption settings, including saving passwords for future decrypting sensitive information."}),console.log("Extension not used, security panel added")):(this.panels=this.panels.filter(n=>"security"!==n.id),console.log("Extension used, security panel removed")),this._changeDetectorRef.markForCheck(),this._angorMediaWatcherService.onMediaChange$.pipe((0,u.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:n})=>{this.drawerMode=n.includes("lg")?"side":"over",this.drawerOpened="side"===this.drawerMode,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}goToPanel(t){this.selectedPanel=t,this._router.navigate(["settings",t],{replaceUrl:!0}),"over"===this.drawerMode&&this.drawer.close()}getPanelInfo(t){return this.panels.find(n=>n.id===t)}trackByFn(t,n){return n.id||t}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(e.gRc),e.rXU(me.l),e.rXU(I.A),e.rXU(w.nX),e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["settings"]],viewQuery:function(n,i){if(1&n&&e.GBs(ue,5),2&n){let s;e.mGM(s=e.lsd())&&(i.drawer=s.first)}},decls:28,vars:7,consts:[["drawer",""],[1,"flex","w-full","min-w-0","flex-col","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"flex-auto","sm:h-full"],[1,"dark:bg-gray-900","sm:w-96",3,"autoFocus","mode","opened"],[1,"m-8","mr-6","flex","items-center","justify-between","sm:my-10"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"lg:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex","flex-col","divide-y","border-b","border-t"],[1,"flex","cursor-pointer","px-8","py-5",3,"ngClass"],[1,"flex","flex-col"],[1,"flex-auto","px-6","pb-12","pt-9","md:p-8","md:pb-12","lg:p-12"],[1,"flex","items-center"],["mat-icon-button","",1,"-ml-2","lg:hidden",3,"click"],[1,"ml-2","text-3xl","font-bold","leading-none","tracking-tight","lg:ml-0"],[1,"mt-8"],[1,"flex","cursor-pointer","px-8","py-5",3,"click","ngClass"],[3,"ngClass","svgIcon"],[1,"ml-3"],[1,"font-medium","leading-6",3,"ngClass"],[1,"text-secondary","mt-0.5"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0)(4,"div",4)(5,"div",5),e.EFF(6," Settings "),e.k0s(),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){e.eBV(s);const d=e.sdS(3);return e.Njj(d.close())}),e.nrm(9,"mat-icon",8),e.k0s()()(),e.j41(10,"div",9),e.Z7z(11,he,7,14,"div",10,i.trackByFn,!0),e.k0s()(),e.j41(13,"mat-drawer-content",11)(14,"div",12)(15,"div",13)(16,"button",14),e.bIt("click",function(){e.eBV(s);const d=e.sdS(3);return e.Njj(d.toggle())}),e.nrm(17,"mat-icon",8),e.k0s(),e.j41(18,"div",15),e.EFF(19),e.k0s()(),e.j41(20,"div",16),e.DNE(21,ye,1,0,"settings-relay")(22,ve,1,0,"settings-network")(23,_e,1,0,"settings-indexer")(24,Se,1,0,"settings-profile")(25,be,1,0,"settings-project-profile")(26,xe,1,0,"settings-security")(27,ke,1,0,"settings-notifications"),e.k0s()()()()()}if(2&n){let s;e.R7$(2),e.Y8G("autoFocus",!1)("mode",i.drawerMode)("opened",i.drawerOpened),e.R7$(7),e.Y8G("svgIcon","heroicons_outline:x-mark"),e.R7$(2),e.Dyx(i.panels),e.R7$(6),e.Y8G("svgIcon","heroicons_outline:bars-3"),e.R7$(2),e.SpI(" ",i.getPanelInfo(i.selectedPanel).title," "),e.R7$(2),e.vxM("relay"===(s=i.selectedPanel)?21:"network"===s?22:"indexer"===s?23:"profile"===s?24:"project-profile"===s?25:"security"===s?26:"notifications"===s?27:-1)}},dependencies:[x.vg,x.qe,x.$C,x.$l,p.Hl,p.iY,f.m_,f.An,h.YU,O,ce,L,ee,W,D,de],encapsulation:2,changeDetection:0})}}return r})()}]},833:(Y,b,c)=>{c.d(b,{F:()=>p});var h=c(4438);let p=(()=>{class f{constructor(){this.mainnetLocalStorageKey="mainnetIndexers",this.testnetLocalStorageKey="testnetIndexers",this.mainnetPrimaryIndexerKey="mainnetPrimaryIndexer",this.testnetPrimaryIndexerKey="testnetPrimaryIndexer",this.networkStorageKey="selectedNetwork",this.defaultMainnetIndexer="https://btc.indexer.angor.io/",this.defaultTestnetIndexer="https://tbtc.indexer.angor.io/",this.initializeDefaultIndexers()}initializeDefaultIndexers(){0===this.getIndexers("mainnet").length&&(this.addIndexer(this.defaultMainnetIndexer,"mainnet"),this.setPrimaryIndexer(this.defaultMainnetIndexer,"mainnet")),0===this.getIndexers("testnet").length&&(this.addIndexer(this.defaultTestnetIndexer,"testnet"),this.setPrimaryIndexer(this.defaultTestnetIndexer,"testnet"))}addIndexer(m,u){let e=this.getIndexers(u);e.includes(m)||(e.push(m),this.saveIndexers(e,u))}getIndexers(m){return JSON.parse(localStorage.getItem("mainnet"===m?this.mainnetLocalStorageKey:this.testnetLocalStorageKey)||"[]")}saveIndexers(m,u){localStorage.setItem("mainnet"===u?this.mainnetLocalStorageKey:this.testnetLocalStorageKey,JSON.stringify(m))}setPrimaryIndexer(m,u){this.getIndexers(u).includes(m)&&localStorage.setItem("mainnet"===u?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey,m)}getPrimaryIndexer(m){return localStorage.getItem("mainnet"===m?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}removeIndexer(m,u){let e=this.getIndexers(u);const o=e.indexOf(m);-1!==o&&(e.splice(o,1),this.saveIndexers(e,u),m===this.getPrimaryIndexer(u))&&localStorage.removeItem("mainnet"===u?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}clearAllIndexers(m){const e="mainnet"===m?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey;localStorage.removeItem("mainnet"===m?this.mainnetLocalStorageKey:this.testnetLocalStorageKey),localStorage.removeItem(e)}setNetwork(m){localStorage.setItem(this.networkStorageKey,m)}getNetwork(){return localStorage.getItem(this.networkStorageKey)||"testnet"}static{this.\u0275fac=function(u){return new(u||f)}}static{this.\u0275prov=h.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()}}]);