"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[790],{6790:(E,k,s)=>{s.r(k),s.d(k,{default:()=>ye});var u=s(467),v=s(9345),b=s(7403),f=s(177),_=s(9417),p=s(8834),F=s(1997),i=s(9454),a=s(2408),m=s(9213),g=s(9042),h=s(9115),y=s(9183),C=s(882),R=s(450),G=s(4823),x=s(5245),B=s(8865),S=s(4496),$=s(1567),w=s(7540),T=s(1413),e=s(4438),Y=s(6324),K=s(7291),M=s(345),A=s(5416),N=s(5351),X=s(881),D=s(2022),L=s(5645),V=s(3801),O=s(413),z=s(8098);const Z=["eventInput"],W=["commentInput"],P=(n,c)=>({"border-primary text-primary":n,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300":c}),j=n=>({hidden:n}),J=n=>["/chat",n],H=()=>["hex","npub"],Q=(n,c)=>({height:n,overflow:c}),q=(n,c)=>({"white-space":n,"max-height":c,overflow:"hidden"}),ee=n=>({"large-font":n});function te(n,c){if(1&n&&(e.qex(0),e.nrm(1,"img",27),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.FS9("alt",(null==t.profileUser?null:t.profileUser.display_name)||(null==t.profileUser?null:t.profileUser.name)||""),e.Y8G("src",t.getSafeUrl(null==t.profileUser?null:t.profileUser.picture),e.B4B)}}function re(n,c){if(1&n&&e.nrm(0,"img",28),2&n){const t=e.XpG();e.FS9("alt",(null==t.profileUser?null:t.profileUser.display_name)||(null==t.profileUser?null:t.profileUser.name)||"")}}function oe(n,c){if(1&n){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.openZapDialog())}),e.j41(1,"span",40),e.nrm(2,"mat-icon",41),e.j41(3,"span"),e.EFF(4),e.k0s()()()}if(2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("svgIcon",t.isCurrentUserProfile?"heroicons_outline:qr-code":"feather:zap"),e.R7$(2),e.JRh(t.isCurrentUserProfile?"Receive Zap":"Send Zap")}}function ne(n,c){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",39),e.bIt("click",function(){const r=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.copyKey(r))}),e.j41(2,"span",40),e.nrm(3,"mat-icon",41),e.j41(4,"span"),e.EFF(5),e.k0s()()(),e.bVm()}if(2&n){const t=c.$implicit;e.R7$(3),e.Y8G("svgIcon","heroicons_outline:clipboard-document"),e.R7$(2),e.SpI("Copy Public key (",t,")")}}function ie(n,c){1&n&&(e.j41(0,"button",42)(1,"span",40),e.nrm(2,"mat-icon",41),e.j41(3,"span"),e.EFF(4,"Edit your profile"),e.k0s()()()),2&n&&(e.Y8G("routerLink","/settings/profile"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:pencil-square"))}function se(n,c){1&n&&(e.qex(0),e.j41(1,"button",43)(2,"span",40),e.nrm(3,"mat-icon",41),e.j41(4,"span"),e.EFF(5,"Report"),e.k0s()()(),e.j41(6,"button",43)(7,"span",40),e.nrm(8,"mat-icon",41),e.j41(9,"span"),e.EFF(10,"Turn on notifications"),e.k0s()()(),e.bVm()),2&n&&(e.R7$(3),e.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:bell"))}function ae(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"button",30),e.nrm(2,"mat-icon",31),e.k0s()(),e.j41(3,"div",29)(4,"button",32),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleBookmark(r.routePubKey))}),e.nrm(5,"mat-icon",31),e.nI1(6,"async"),e.k0s()(),e.j41(7,"div")(8,"button",33),e.nrm(9,"mat-icon",31),e.k0s(),e.j41(10,"mat-menu",null,1),e.DNE(12,oe,5,2,"button",34)(13,ne,6,2,"ng-container",35),e.nrm(14,"mat-divider",36),e.DNE(15,ie,5,2,"button",37)(16,se,11,2,"ng-container",38),e.k0s()()}if(2&n){let t;const o=e.sdS(11),r=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(11,J,r.routePubKey)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:chat-bubble-left-right"),e.R7$(3),e.Y8G("svgIcon",null!=(t=e.bMT(6,9,r.bookmarks$))&&t.includes(r.routePubKey)?"heroicons_solid:bookmark":"heroicons_outline:bookmark"),e.R7$(3),e.Y8G("matMenuTriggerFor",o),e.R7$(),e.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),e.R7$(3),e.Y8G("ngIf",!r.isCurrentUserProfile||r.isCurrentUserProfile),e.R7$(),e.Y8G("ngForOf",e.lJ4(13,H)),e.R7$(2),e.Y8G("ngIf",r.isCurrentUserProfile),e.R7$(),e.Y8G("ngIf",!r.isCurrentUserProfile)}}function le(n,c){1&n&&(e.j41(0,"span",51),e.EFF(1,"..."),e.k0s())}function ce(n,c){if(1&n){const t=e.RV6();e.j41(0,"angor-card",44)(1,"div",45)(2,"div",46),e.EFF(3," About "),e.k0s(),e.j41(4,"button",47),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleAbout())}),e.nrm(5,"mat-icon",48),e.k0s()(),e.j41(6,"div",49),e.EFF(7),e.DNE(8,le,2,0,"span",50),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("ngStyle",e.l_i(5,Q,t.aboutExpanded?"auto":"80px",t.aboutExpanded?"visible":"hidden")),e.R7$(5),e.Y8G("svgIcon",t.aboutExpanded?"heroicons_outline:chevron-up":"heroicons_outline:chevron-down"),e.R7$(),e.Y8G("ngStyle",e.l_i(8,q,t.aboutExpanded?"normal":"nowrap",t.aboutExpanded?"none":"1.5em")),e.R7$(),e.SpI(" ",(null==t.profileUser?null:t.profileUser.about)||""," "),e.R7$(),e.Y8G("ngIf",!t.aboutExpanded)}}function ue(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",67)(1,"emoji-mart",68),e.bIt("emojiClick",function(r){e.eBV(t);const l=e.XpG(2);return e.Njj(l.addEmoji(r))}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(),e.Y8G("darkMode",t.darkMode)}}function me(n,c){if(1&n){const t=e.RV6();e.j41(0,"angor-card",52)(1,"div",53)(2,"div",54),e.EFF(3,"Create Post"),e.k0s(),e.j41(4,"mat-slide-toggle",55),e.bIt("change",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.togglePreview())}),e.EFF(5," Preview "),e.k0s()(),e.j41(6,"div",56)(7,"mat-form-field",57),e.nrm(8,"textarea",58,2),e.k0s()(),e.j41(10,"div",59)(11,"div",40)(12,"button",60),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleEmojiPicker())}),e.nrm(13,"mat-icon",31),e.j41(14,"span",61),e.EFF(15,"Feeling"),e.k0s()(),e.DNE(16,ue,2,1,"div",62),e.j41(17,"button",63),e.nrm(18,"mat-icon",31),e.j41(19,"span",61),e.EFF(20,"Media"),e.k0s()(),e.j41(21,"button",63),e.nrm(22,"mat-icon",31),e.j41(23,"span",61),e.EFF(24,"Tag"),e.k0s()(),e.j41(25,"button",64),e.nrm(26,"mat-icon",31),e.k0s(),e.j41(27,"mat-menu",null,3)(29,"button",65)(30,"span",40),e.nrm(31,"mat-icon",41),e.j41(32,"span"),e.EFF(33,"Tag"),e.k0s()()(),e.j41(34,"button",65)(35,"span",40),e.nrm(36,"mat-icon",41),e.j41(37,"span"),e.EFF(38,"Feeling"),e.k0s()()(),e.j41(39,"button",43)(40,"span",40),e.nrm(41,"mat-icon",41),e.j41(42,"span"),e.EFF(43,"Live"),e.k0s()()(),e.j41(44,"button",43)(45,"span",40),e.nrm(46,"mat-icon",41),e.j41(47,"span"),e.EFF(48,"Gif"),e.k0s()()(),e.j41(49,"button",43)(50,"span",40),e.nrm(51,"mat-icon",41),e.j41(52,"span"),e.EFF(53,"Check in"),e.k0s()()()()(),e.j41(54,"button",66),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.sendEvent())}),e.nrm(55,"mat-icon",31),e.j41(56,"span",61),e.EFF(57,"Send"),e.k0s()()()()}if(2&n){const t=e.sdS(28),o=e.XpG();e.R7$(4),e.Y8G("color","primary"),e.R7$(3),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("placeholder","What's on your mind?")("rows",3),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:face-smile"),e.R7$(3),e.Y8G("ngIf",o.showEmojiPicker),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:photo"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:user-circle"),e.R7$(3),e.Y8G("matMenuTriggerFor",t),e.R7$(),e.Y8G("svgIcon","heroicons_solid:ellipsis-horizontal"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:user-circle"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:face-smile"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:play"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:sparkles"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:map-pin"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:paper-airplane")}}function de(n,c){if(1&n&&(e.qex(0),e.j41(1,"div",91),e.nrm(2,"img",92),e.k0s(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("src",t.safeWord,e.B4B)}}function pe(n,c){if(1&n&&(e.qex(0),e.j41(1,"div",91)(2,"video",93),e.nrm(3,"source",94),e.EFF(4," Your browser does not support the video tag. "),e.k0s()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.Y8G("src",t.safeWord,e.B4B)}}function fe(n,c){if(1&n&&(e.qex(0),e.j41(1,"div",91)(2,"audio",95),e.nrm(3,"source",96),e.EFF(4," Your browser does not support the audio element. "),e.k0s()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.Y8G("src",t.safeWord,e.B4B)}}function ge(n,c){if(1&n&&(e.qex(0),e.j41(1,"div",97)(2,"a",98)(3,"span",99),e.EFF(4),e.k0s()()(),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("href",t.word,e.B4B),e.R7$(2),e.JRh(t.word)}}function he(n,c){if(1&n&&(e.qex(0),e.j41(1,"div",97)(2,"span",100),e.EFF(3),e.k0s()(),e.bVm()),2&n){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.eq3(2,ee,o.isSingleEmojiOrWord(t))),e.R7$(),e.SpI(" ",t.trim()," ")}}function be(n,c){if(1&n&&(e.j41(0,"div",90),e.DNE(1,de,3,1,"ng-container",38)(2,pe,5,1,"ng-container",38)(3,fe,5,1,"ng-container",38)(4,ge,5,2,"ng-container",38)(5,he,4,4,"ng-container",38),e.k0s()),2&n){const t=c.$implicit;e.R7$(),e.Y8G("ngIf","image"===t.token),e.R7$(),e.Y8G("ngIf","video"===t.token),e.R7$(),e.Y8G("ngIf","audio"===t.token),e.R7$(),e.Y8G("ngIf","link"===t.token),e.R7$(),e.Y8G("ngIf",!t.token)}}function ke(n,c){if(1&n&&(e.j41(0,"angor-card",69,4)(2,"div",70),e.nrm(3,"img",71),e.j41(4,"div",72)(5,"span",73),e.EFF(6),e.k0s(),e.j41(7,"span",74),e.EFF(8,"1 minutes ago"),e.k0s()()(),e.DNE(9,be,6,5,"div",75),e.j41(10,"div",76)(11,"button",77),e.nrm(12,"mat-icon",78),e.j41(13,"span",61),e.EFF(14,"Unlike"),e.k0s()(),e.j41(15,"button",77),e.nrm(16,"mat-icon",79),e.j41(17,"span",61),e.EFF(18,"Comment"),e.k0s()(),e.j41(19,"button",77),e.nrm(20,"mat-icon",80),e.j41(21,"span",61),e.EFF(22,"Share"),e.k0s()(),e.j41(23,"button",77),e.nrm(24,"mat-icon",81),e.j41(25,"span",61),e.EFF(26,"Zap"),e.k0s()()(),e.nrm(27,"hr",82),e.j41(28,"div",83)(29,"div",40)(30,"div",84),e.EFF(31,"0 Zap"),e.k0s()(),e.nrm(32,"div",85),e.j41(33,"div",86)(34,"button",87),e.EFF(35," 0 Like "),e.k0s(),e.j41(36,"button",87),e.EFF(37," 0 shares "),e.k0s(),e.j41(38,"button",88)(39,"span",89),e.EFF(40,"0 Comments"),e.k0s()()()()()),2&n){const t=e.XpG();e.R7$(3),e.FS9("alt",(null==t.profileUser?null:t.profileUser.display_name)||(null==t.profileUser?null:t.profileUser.name)||""),e.Y8G("src",t.getSafeUrl(null==t.profileUser?null:t.profileUser.picture),e.B4B),e.R7$(3),e.JRh((null==t.profileUser?null:t.profileUser.display_name)||(null==t.profileUser?null:t.profileUser.name)||""),e.R7$(3),e.Y8G("ngForOf",t.parseContent.parseContent(t.eventInput.nativeElement.value))("ngForTrackBy",t.trackByFn),e.R7$(3),e.Y8G("svgIcon","heroicons_solid:heart"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:share"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:bolt")}}function ve(n,c){1&n&&e.nrm(0,"app-post",25),2&n&&e.Y8G("item",c.$implicit)}function _e(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",26)(1,"button",101),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.loadNextPage())}),e.EFF(2),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.loading?"Loading...":"Load More Posts"," ")}}const ye=[{path:"",component:(()=>{class n{constructor(t,o,r,l,d,U,I,xe,Pe,je,Ue,Ie,Fe,Ee){this._changeDetectorRef=t,this._signerService=o,this._storageService=r,this._sanitizer=l,this._route=d,this._router=U,this._snackBar=I,this._dialog=xe,this._angorConfigService=Pe,this._eventService=je,this._subscriptionService=Ue,this._clipboard=Ie,this.parseContent=Fe,this._bookmarkService=Ee,this.darkMode=!1,this.isLoading=!0,this.errorMessage=null,this._unsubscribeAll=new T.B,this.allPublicKeys=[],this.isCurrentUserProfile=!1,this.isFollowing=!1,this.showEmojiPicker=!1,this.showCommentEmojiPicker=!1,this.paymentInvoice="",this.invoiceAmount="?",this.isLiked=!1,this.isPreview=!1,this.posts=[],this.currentPage=1,this.loading=!1,this.myLikes=[],this.myLikedNoteIds=[],this.isLoadingPosts=!0,this.noEventsMessage="",this.hasMorePosts=!0,this.followersList=[],this.followingList=[],this.aboutExpanded=!0,this.bookmarkedProjectNpubs=[],this.projectIdentifier="",this.activeTab="about",this.bookmarks$=this._bookmarkService.bookmarks$}ngOnInit(){var t=this;return(0,u.A)(function*(){t.initializeTheme(),t.processRouteParams(),t.loadInitialPosts(),t.subscribeToNewPosts()})()}initializeTheme(){this._angorConfigService.config$.subscribe(t=>{"auto"===t.scheme?this.detectSystemTheme():this.darkMode="dark"===t.scheme})}trackByFn(t,o){return t}checkIfRoutePubKeyIsFollowing(){this.isFollowing=!(!this.routePubKey||!this.followersList)&&this.followersList.some(t=>t.pubkey===this.routePubKey)}processRouteParams(){this._route.paramMap.subscribe(t=>{const o=t.get("project")||"";o.startsWith("angor")?this.projectIdentifier=o:(console.error('Invalid project identifier. It must start with "angor".'),this.projectIdentifier="");const r=t.get("pubkey")||"";if(r){const l=this._signerService.processKey(r);l?(this.routePubKey=l,this.isCurrentUserProfile=!1):(this.errorMessage="Public key is invalid. Please check your input.",this.setCurrentUserProfile())}else this.setCurrentUserProfile();this.loadUserProfileData(this.routePubKey)})}setCurrentUserProfile(){this.isCurrentUserProfile=!0,this.routePubKey=this._signerService.getPublicKey()}loadUserProfileData(t){this.loadUserProfile(t)}isValidHexPubkey(t){return/^[a-fA-F0-9]{64}$/.test(t)}loadInitialPosts(){var t=this;return(0,u.A)(function*(){t.loading=!0;let o=0;try{for(;o<5;){const d=yield t._storageService.getPostsByPubKeysWithPagination([t.routePubKey],t.currentPage,10);if(d.length>0){t.posts=[...t.posts,...d],t.posts.sort((U,I)=>I.created_at-U.created_at);break}o++,o<5&&(yield t.delay(3e3))}t.hasMorePosts=t.posts.length>0,t.hasMorePosts||console.log("This user has no posts.")}catch(d){console.error("Error loading posts:",d)}finally{t.loading=!1}t.refreshUI()})()}delay(t){return new Promise(o=>setTimeout(o,t))}subscribeToNewPosts(){var t=this;this.isCurrentUserProfile?this._storageService.posts$.subscribe(o=>{o&&o.pubkey===this.routePubKey&&(this.posts.unshift(o),this.posts.sort((r,l)=>l.created_at-r.created_at),this.refreshUI())}):this.postsSubscriptionId=this._subscriptionService.addSubscriptions([{authors:[this.routePubKey],kinds:[1]}],function(){var r=(0,u.A)(function*(l){t.isReply(l)||t._storageService.savePost(l)});return function(l){return r.apply(this,arguments)}}())}isReply(t){return t.tags.filter(r=>"e"===r[0]||"p"===r[0]).length>0}loadNextPage(){this.loading||(this.currentPage++,this.loadInitialPosts())}toggleAbout(){this.aboutExpanded=!this.aboutExpanded}ngOnDestroy(){this.subscriptionId&&this._subscriptionService.removeSubscriptionById(this.subscriptionId),this.postsSubscriptionId&&this._subscriptionService.removeSubscriptionById(this.postsSubscriptionId),this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadUserProfile(t){var o=this;return(0,u.A)(function*(){if(o.isLoading=!0,o.errorMessage=null,o.profileUser=null,o.refreshUI(),!t)return o.errorMessage="No public key found. Please log in again.",o.isLoading=!1,void o.refreshUI();try{const r=yield o._storageService.getProfile(t);r&&(o.profileUser=r,o.refreshUI()),console.log("cachedMetadata: ",r),o.subscribeToUserProfileAndContacts(t)}catch(r){console.error("Error loading user profile:",r)}})()}subscribeToUserProfileAndContacts(t){var o=this;return(0,u.A)(function*(){o.subscriptionId=o._subscriptionService.addSubscriptions([{authors:[t],kinds:[0],limit:1}],function(){var l=(0,u.A)(function*(d){yield o.processProfileMetadata(d,t)});return function(d){return l.apply(this,arguments)}}())})()}processProfileMetadata(t,o){var r=this;return(0,u.A)(function*(){try{const l=JSON.parse(t.content);r.profileUser=l,yield r._storageService.saveProfile(o,l),r._changeDetectorRef.markForCheck()}catch(l){console.error("Error processing metadata event:",l)}})()}getSafeUrl(t){return this._sanitizer.bypassSecurityTrustUrl(t)}refreshUI(){this._changeDetectorRef.detectChanges()}openSnackBar(t,o="dismiss"){this._snackBar.open(t,o,{duration:3e3})}canUseZap(){var t=this;return(0,u.A)(function*(){return!(!t.profileUser||!t.profileUser.lud06&&!t.profileUser.lud16)||(t.openSnackBar("Using Zap is not possible. Please complete your profile to include lud06 or lud16."),!1)})()}openZapDialog(t=""){var o=this;return(0,u.A)(function*(){(yield o.canUseZap())&&o._dialog.open($.r,{width:"405px",maxHeight:"90vh",data:{lud16:o.profileUser.lud16,lud06:o.profileUser.lud06,pubkey:o.profileUser.pubkey,eventId:t}})})()}toggleLike(){this.isLiked=!this.isLiked,this.isLiked&&setTimeout(()=>{this.isLiked=!1,this.isLiked=!0},300)}addEmoji(t){this.eventInput.nativeElement.value+=t.emoji.native,this.showEmojiPicker=!1}toggleEmojiPicker(){this.showCommentEmojiPicker=!1,this.showEmojiPicker=!this.showEmojiPicker}addEmojiTocomment(t){this.commentInput.nativeElement.value+=t.emoji.native,this.showCommentEmojiPicker=!1}detectSystemTheme(){const t=window.matchMedia("(prefers-color-scheme: dark)");this.darkMode=t.matches,t.addEventListener("change",o=>{this.darkMode=o.matches})}togglePreview(){this.isPreview=!this.isPreview}sendEvent(){""!=this.eventInput.nativeElement.value&&this._eventService.sendTextEvent(this.eventInput.nativeElement.value).then(()=>{this.eventInput.nativeElement.value="",this._changeDetectorRef.markForCheck()}).catch(t=>{console.error("Failed to send Event:",t)})}copyHex(){this._clipboard.copy(this.routePubKey),this.openSnackBar("hex public key copied","dismiss")}copyNpub(){var t=this._signerService.getNpubFromPubkey(this.routePubKey);this._clipboard.copy(t),this.openSnackBar("npub public key copied","dismiss")}copyKey(t){if("hex"===t)this._clipboard.copy(this.routePubKey),this.openSnackBar("hex public key copied","dismiss");else if("npub"===t){const o=this._signerService.getNpubFromPubkey(this.routePubKey);this._clipboard.copy(o),this.openSnackBar("npub public key copied","dismiss")}}isSingleEmojiOrWord(t){const o=t.trim(),r=/^\w+$/.test(o),l=/^[\p{Emoji}]+$/u.test(o);return r||l}openPost(t){this._router.navigate(["/post",t])}toggleBookmark(t){var o=this;return(0,u.A)(function*(){(yield o._bookmarkService.isBookmarked(t))?yield o._bookmarkService.removeBookmark(t):yield o._bookmarkService.addBookmark(t)})()}isProjectBookmarked(t){var o=this;return(0,u.A)(function*(){return yield o._bookmarkService.isBookmarked(t)})()}switchTab(t){this.activeTab=t,this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(e.gRc),e.rXU(Y.A),e.rXU(K.n),e.rXU(M.up),e.rXU(x.nX),e.rXU(x.Ix),e.rXU(A.UG),e.rXU(N.bZ),e.rXU(X.P),e.rXU(D.U),e.rXU(L.n),e.rXU(V.B0),e.rXU(O.m),e.rXU(z.U))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["profile"]],viewQuery:function(o,r){if(1&o&&(e.GBs(Z,5),e.GBs(W,5)),2&o){let l;e.mGM(l=e.lsd())&&(r.eventInput=l.first),e.mGM(l=e.lsd())&&(r.commentInput=l.first)}},decls:36,vars:32,consts:[["defaultAvatar",""],["profileMenu","matMenu"],["eventInput",""],["postCardMenu01","matMenu"],["expandableComments","angorCard"],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","shadow"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';",1,"h-40","object-cover","lg:h-80",3,"src","alt"],[1,"bg-card","mx-auto","flex","w-full","max-w-5xl","flex-0","flex-col","items-center","px-8","lg:h-18","lg:flex-row"],[1,"-mt-26","flex-shrink-0","rounded-full","lg:-mt-22"],[4,"ngIf","ngIfElse"],[1,"mt-4","flex","flex-grow","flex-col","items-center","lg:ml-8","lg:mt-0","lg:items-start"],[1,"max-w-full","truncate","text-lg","font-bold","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"text-secondary","max-w-full","truncate","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"flex","flex-shrink-0","items-center","space-x-6","lg:mt-0"],[1,"mb-4","mt-8","flex","flex-shrink-0","items-center","space-x-6","lg:m-0","lg:ml-auto"],[1,"flex","justify-center","border-b","border-gray-200","dark:border-gray-700","mb-4"],[1,"flex","space-x-8"],[1,"py-4","px-1","border-b-2","font-medium","text-sm",3,"click","ngClass"],[1,"mx-auto","w-full","max-w-5xl","p-6","sm:p-8"],[3,"ngClass"],["class","about-section mb-8 flex w-full flex-col items-start p-6 pb-6 transition-all duration-300 sm:p-8","style","position: relative",3,"ngStyle",4,"ngIf"],[1,"m-auto","flex","w-full","max-w-140","flex-col","items-start"],["class","mb-8 flex w-full flex-col p-6 pb-6 sm:p-8",4,"ngIf"],["class","mb-8 flex w-full flex-col bg-primary-50 dark:bg-primary-800",4,"ngIf"],[1,"mb-8","flex","w-full","flex-col",3,"item"],[1,"m-auto","mt-4","flex","justify-center"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","max-w-fit","rounded-full","object-cover","ring-4",3,"src","alt"],["src","/images/avatars/avatar-placeholder.png","onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","rounded-full","object-cover","ring-4",3,"alt"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","border","bg-white","shadow-md"],["mat-icon-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"my-2"],["mat-menu-item","",3,"routerLink",4,"ngIf"],[4,"ngIf"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],[1,"about-section","mb-8","flex","w-full","flex-col","items-start","p-6","pb-6","transition-all","duration-300","sm:p-8",2,"position","relative",3,"ngStyle"],[1,"mb-2","flex","w-full","items-center","justify-between"],[1,"text-2xl","font-semibold","leading-tight"],["mat-icon-button","","color","primary","aria-label","Toggle about section",2,"position","absolute","top","16px","right","16px",3,"click"],[3,"svgIcon"],[1,"about-content","text-base","text-gray-700","dark:text-gray-50","transition-all","duration-300",3,"ngStyle"],["class","text-gray-500",4,"ngIf"],[1,"text-gray-500"],[1,"mb-8","flex","w-full","flex-col","p-6","pb-6","sm:p-8"],[1,"flex","justify-between"],[1,"text-xl","font-semibold"],[1,"-mr-4","ml-auto",3,"change","color"],[1,"mt-8","flex","flex-col","items-start","sm:flex-row"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"placeholder","rows"],[1,"-mx-3","mt-6","flex","items-center","justify-between","sm:mt-8"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"ml-2"],["class","emoji-picker-container-global",4,"ngIf"],["mat-button","",1,"mr-1","hidden","px-3","sm:inline-flex"],["mat-button","",1,"px-3",3,"matMenuTriggerFor"],["mat-menu-item","",1,"sm:hidden"],["mat-button","",1,"mr-1","flex","px-3",3,"click"],[1,"emoji-picker-container-global"],[3,"emojiClick","darkMode"],[1,"mb-8","flex","w-full","flex-col","bg-primary-50","dark:bg-primary-800"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"],["class","inline-block whitespace-pre-wrap break-words",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","flex","items-center","sm:mx-5"],["mat-button","",1,"mr-1","px-3"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"text-blue-500","icon-size-5",3,"svgIcon"],[1,"text-green-500","icon-size-5",3,"svgIcon"],[1,"text-orange-500","icon-size-5",3,"svgIcon"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],[1,"ml-3","text-md","tracking-tight"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"-ml-2","mr-1","px-3","sm:ml-0"],["mat-button","",1,"px-3","sm:-mr-4"],[1,"mr-1"],[1,"inline-block","whitespace-pre-wrap","break-words"],[1,"relative","mb-4","block"],["alt","Embedded Image",1,"max-h-140","object-cover",2,"width","100%",3,"src"],["controls","",2,"width","100%"],["type","video/mp4",3,"src"],["controls",""],["type","audio/mpeg",3,"src"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],["target","_blank",1,"inline-block","break-words","text-blue-500","underline",3,"href"],[1,"inline-block","break-words"],[1,"inline-block","break-words",3,"ngClass"],["mat-raised-button","","color","primary",1,"bg-card","text-gray-700","hover:bg-gray-200","dark:text-gray-300","dark:hover:bg-gray-700",3,"click","disabled"]],template:function(o,r){if(1&o){const l=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div"),e.nrm(3,"img",7),e.k0s(),e.j41(4,"div",8)(5,"div",9),e.DNE(6,te,2,2,"ng-container",10)(7,re,1,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(9,"div",11)(10,"div",12),e.EFF(11),e.k0s(),e.j41(12,"div",13),e.EFF(13),e.k0s()(),e.j41(14,"div",14)(15,"div",15),e.DNE(16,ae,17,14),e.k0s()()()(),e.j41(17,"div",16)(18,"nav",17)(19,"button",18),e.bIt("click",function(){return e.eBV(l),e.Njj(r.switchTab("about"))}),e.EFF(20," About "),e.k0s(),e.j41(21,"button",18),e.bIt("click",function(){return e.eBV(l),e.Njj(r.switchTab("updates"))}),e.EFF(22," Updates "),e.k0s(),e.j41(23,"button",18),e.bIt("click",function(){return e.eBV(l),e.Njj(r.switchTab("comments"))}),e.EFF(24," Comments "),e.k0s()()(),e.j41(25,"div",19)(26,"div",20),e.DNE(27,ce,9,11,"angor-card",21),e.k0s(),e.j41(28,"div",20)(29,"div",22),e.DNE(30,me,58,16,"angor-card",23)(31,ke,41,9,"angor-card",24),e.Z7z(32,ve,1,1,"app-post",25,e.Vm6),e.DNE(34,_e,3,2,"div",26),e.k0s()(),e.nrm(35,"div",20),e.k0s()()}if(2&o){const l=e.sdS(8);e.R7$(3),e.FS9("alt",(null==r.profileUser?null:r.profileUser.display_name)||(null==r.profileUser?null:r.profileUser.name)||"Banner"),e.Y8G("src",(null==r.profileUser?null:r.profileUser.banner)||"/images/pages/profile/cover.jpg",e.B4B),e.R7$(3),e.Y8G("ngIf",null==r.profileUser?null:r.profileUser.picture)("ngIfElse",l),e.R7$(5),e.SpI(" ",(null==r.profileUser?null:r.profileUser.display_name)||(null==r.profileUser?null:r.profileUser.name)||"Unknown User"," "),e.R7$(2),e.SpI(" ",(null==r.profileUser?null:r.profileUser.username)||(null==r.profileUser?null:r.profileUser.name)," "),e.R7$(3),e.vxM(r.projectIdentifier?16:-1),e.R7$(3),e.Y8G("ngClass",e.l_i(17,P,"about"===r.activeTab,"about"!==r.activeTab)),e.R7$(2),e.Y8G("ngClass",e.l_i(20,P,"updates"===r.activeTab,"updates"!==r.activeTab)),e.R7$(2),e.Y8G("ngClass",e.l_i(23,P,"comments"===r.activeTab,"comments"!==r.activeTab)),e.R7$(3),e.Y8G("ngClass",e.eq3(26,j,"about"!==r.activeTab)),e.R7$(),e.Y8G("ngIf",(null==r.profileUser?null:r.profileUser.about)&&""!==r.profileUser.about.trim()),e.R7$(),e.Y8G("ngClass",e.eq3(28,j,"updates"!==r.activeTab)),e.R7$(2),e.Y8G("ngIf",r.isCurrentUserProfile),e.R7$(),e.Y8G("ngIf",r.isPreview),e.R7$(),e.Dyx(r.posts),e.R7$(2),e.vxM(r.hasMorePosts?34:-1),e.R7$(),e.Y8G("ngClass",e.eq3(30,j,"comments"!==r.activeTab))}},dependencies:[x.Wk,v.n,m.m_,m.An,p.Hl,p.$z,p.iY,h.Cn,h.kk,h.fb,h.Cp,a.RG,a.rl,g.fS,g.fg,b.xb,b.EE,F.w,F.q,G.uc,f.YU,f.MD,f.Sq,f.bT,f.B3,f.Jj,_.YN,B.Ic,R.sG,y.D6,w.e,i.MY,C.vg,S.q],styles:[".emoji-picker-container-global{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;width:350px;max-width:100%}.heart-beat{animation:heartBeatAnimation .3s ease-in-out}@keyframes heartBeatAnimation{0%{transform:scale(1)}30%{transform:scale(2)}60%{transform:scale(1)}to{transform:scale(1)}}.loading-spinner{display:flex;justify-content:center;align-items:center;margin:20px 0}.loading-spinner .spinner{border:4px solid rgba(0,0,0,.1);border-left-color:#009fb5;border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.about-section{overflow:hidden;transition:height .3s ease}.c-img,.c-video{max-width:100%;border-radius:10px}\n"],encapsulation:2,changeDetection:0})}}return n})()}]},8098:(E,k,s)=>{s.d(k,{U:()=>_});var u=s(467),v=s(4412),b=s(4438),f=s(6324);let _=(()=>{class p{constructor(i){this._signerService=i,this.STORAGE_KEY="userBookmarkedProjects",this.bookmarksSubject=new v.t([]),this.bookmarks$=this.bookmarksSubject.asObservable(),this.currentUserPubKey=null,window.addEventListener("storage",a=>{a.key===this.STORAGE_KEY&&this.refreshBookmarksForCurrentUser()})}initializeForCurrentUser(){var i=this;return(0,u.A)(function*(){i.clearBookmarks(),i.currentUserPubKey=yield i._signerService.getPublicKey(),i.currentUserPubKey&&(yield i.loadBookmarksForCurrentUser())})()}clearBookmarks(){this.bookmarksSubject.next([])}loadBookmarksForCurrentUser(){var i=this;return(0,u.A)(function*(){if(!i.currentUserPubKey)return;const m=i.getUserBookmarks()[i.currentUserPubKey]||[];i.bookmarksSubject.next(m)})()}getUserBookmarks(){const i=localStorage.getItem(this.STORAGE_KEY);return i?JSON.parse(i):{}}saveUserBookmarks(i){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i))}addBookmark(i){var a=this;return(0,u.A)(function*(){if(!a.currentUserPubKey&&(a.currentUserPubKey=yield a._signerService.getPublicKey(),!a.currentUserPubKey))return void console.warn("No public key found for the current user.");const m=a.getUserBookmarks(),g=m[a.currentUserPubKey]||[];g.includes(i)||(g.push(i),m[a.currentUserPubKey]=g,a.saveUserBookmarks(m),a.bookmarksSubject.next(g))})()}removeBookmark(i){var a=this;return(0,u.A)(function*(){if(!a.currentUserPubKey&&(a.currentUserPubKey=yield a._signerService.getPublicKey(),!a.currentUserPubKey))return void console.warn("No public key found for the current user.");const m=a.getUserBookmarks(),h=(m[a.currentUserPubKey]||[]).filter(y=>y!==i);m[a.currentUserPubKey]=h,a.saveUserBookmarks(m),a.bookmarksSubject.next(h)})()}isBookmarked(i){var a=this;return(0,u.A)(function*(){return a.currentUserPubKey||(a.currentUserPubKey=yield a._signerService.getPublicKey(),a.currentUserPubKey)?(a.getUserBookmarks()[a.currentUserPubKey]||[]).includes(i):(console.warn("No public key found for the current user."),!1)})()}getBookmarks(){var i=this;return(0,u.A)(function*(){return i.currentUserPubKey||(i.currentUserPubKey=yield i._signerService.getPublicKey(),i.currentUserPubKey)?i.getUserBookmarks()[i.currentUserPubKey]||[]:(console.warn("No public key found for the current user."),[])})()}removeAllBookmarks(){var i=this;return(0,u.A)(function*(){if(!i.currentUserPubKey&&(i.currentUserPubKey=yield i._signerService.getPublicKey(),!i.currentUserPubKey))return void console.warn("No public key found for the current user.");const a=i.getUserBookmarks();a[i.currentUserPubKey]=[],i.saveUserBookmarks(a),i.bookmarksSubject.next([])})()}refreshBookmarksForCurrentUser(){this.currentUserPubKey&&this.loadBookmarksForCurrentUser()}static{this.\u0275fac=function(a){return new(a||p)(b.KVO(f.A))}}static{this.\u0275prov=b.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()}}]);