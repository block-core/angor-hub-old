import{a as jt}from"./chunk-OCVFWT7P.js";import{b as Ft,e as Ut,f as Yt,o as ce,r as zt}from"./chunk-TKFXSBHP.js";import{B as Lt,C as Mt,D as Bt,G as Le,a as Ct,c as Pt,j as Ot,k as Oe,l as Ne,t as Nt}from"./chunk-LXFTENSE.js";import{Bb as yt,Cc as At,Ea as ft,Eb as Pe,Ga as ae,La as ut,Lb as bt,Mb as wt,Nb as It,Pb as Et,Qb as St,Ra as dt,Sa as U,Wb as Tt,Za as ht,a as oe,ab as mt,ba as Z,bb as pt,c as se,e as Wi,ea as rt,g as qi,h as Y,ha as he,ia as nt,ka as Re,kb as vt,lb as _t,ma as xe,mb as Ae,mc as Rt,n as Te,na as De,o as de,qa as ot,ra as st,sa as at,sc as xt,vb as Ce,vc as Dt,wb as gt,ya as ct,za as lt}from"./chunk-7QMWPNHP.js";var Qt=Wi((Gt,Me)=>{(function(x){if(typeof Gt=="object"&&typeof Me<"u")Me.exports=x();else if(typeof define=="function"&&define.amd)define([],x);else{var y;typeof window<"u"?y=window:typeof global<"u"?y=global:typeof self<"u"?y=self:y=this,y.localforage=x()}})(function(){var x,y,lr;return function s(a,l,m){function w(N,z){if(!l[N]){if(!a[N]){var v=typeof se=="function"&&se;if(!z&&v)return v(N,!0);if(b)return b(N,!0);var g=new Error("Cannot find module '"+N+"'");throw g.code="MODULE_NOT_FOUND",g}var A=l[N]={exports:{}};a[N][0].call(A.exports,function(L){var X=a[N][1][L];return w(X||L)},A,A.exports,s,a,l,m)}return l[N].exports}for(var b=typeof se=="function"&&se,C=0;C<m.length;C++)w(m[C]);return w}({1:[function(s,a,l){(function(m){"use strict";var w=m.MutationObserver||m.WebKitMutationObserver,b;if(w){var C=0,N=new w(L),z=m.document.createTextNode("");N.observe(z,{characterData:!0}),b=function(){z.data=C=++C%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var v=new m.MessageChannel;v.port1.onmessage=L,b=function(){v.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?b=function(){var M=m.document.createElement("script");M.onreadystatechange=function(){L(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},m.document.documentElement.appendChild(M)}:b=function(){setTimeout(L,0)};var g,A=[];function L(){g=!0;for(var M,$,B=A.length;B;){for($=A,A=[],M=-1;++M<B;)$[M]();B=A.length}g=!1}a.exports=X;function X(M){A.push(M)===1&&!g&&b()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(s,a,l){"use strict";var m=s(1);function w(){}var b={},C=["REJECTED"],N=["FULFILLED"],z=["PENDING"];a.exports=v;function v(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,p!==w&&X(this,p)}v.prototype.catch=function(p){return this.then(null,p)},v.prototype.then=function(p,S){if(typeof p!="function"&&this.state===N||typeof S!="function"&&this.state===C)return this;var E=new this.constructor(w);if(this.state!==z){var D=this.state===N?p:S;A(E,D,this.outcome)}else this.queue.push(new g(E,p,S));return E};function g(p,S,E){this.promise=p,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(p){b.resolve(this.promise,p)},g.prototype.otherCallFulfilled=function(p){A(this.promise,this.onFulfilled,p)},g.prototype.callRejected=function(p){b.reject(this.promise,p)},g.prototype.otherCallRejected=function(p){A(this.promise,this.onRejected,p)};function A(p,S,E){m(function(){var D;try{D=S(E)}catch(F){return b.reject(p,F)}D===p?b.reject(p,new TypeError("Cannot resolve promise with itself")):b.resolve(p,D)})}b.resolve=function(p,S){var E=M(L,S);if(E.status==="error")return b.reject(p,E.value);var D=E.value;if(D)X(p,D);else{p.state=N,p.outcome=S;for(var F=-1,j=p.queue.length;++F<j;)p.queue[F].callFulfilled(S)}return p},b.reject=function(p,S){p.state=C,p.outcome=S;for(var E=-1,D=p.queue.length;++E<D;)p.queue[E].callRejected(S);return p};function L(p){var S=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof S=="function")return function(){S.apply(p,arguments)}}function X(p,S){var E=!1;function D(V){E||(E=!0,b.reject(p,V))}function F(V){E||(E=!0,b.resolve(p,V))}function j(){S(F,D)}var k=M(j);k.status==="error"&&D(k.value)}function M(p,S){var E={};try{E.value=p(S),E.status="success"}catch(D){E.status="error",E.value=D}return E}v.resolve=$;function $(p){return p instanceof this?p:b.resolve(new this(w),p)}v.reject=B;function B(p){var S=new this(w);return b.reject(S,p)}v.all=me;function me(p){var S=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=p.length,D=!1;if(!E)return this.resolve([]);for(var F=new Array(E),j=0,k=-1,V=new this(w);++k<E;)G(p[k],k);return V;function G(ie,le){S.resolve(ie).then(pe,function(ee){D||(D=!0,b.reject(V,ee))});function pe(ee){F[le]=ee,++j===E&&!D&&(D=!0,b.resolve(V,F))}}}v.race=J;function J(p){var S=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=p.length,D=!1;if(!E)return this.resolve([]);for(var F=-1,j=new this(w);++F<E;)k(p[F]);return j;function k(V){S.resolve(V).then(function(G){D||(D=!0,b.resolve(j,G))},function(G){D||(D=!0,b.reject(j,G))})}}},{1:1}],3:[function(s,a,l){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=s(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(s,a,l){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function w(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var C=b();function N(){try{if(!C||!C.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function z(e,i){e=e||[],i=i||{};try{return new Blob(e,i)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,n=new t,o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(i.type)}}typeof Promise>"u"&&s(3);var v=Promise;function g(e,i){i&&e.then(function(t){i(null,t)},function(t){i(t)})}function A(e,i,t){typeof i=="function"&&e.then(i),typeof t=="function"&&e.catch(t)}function L(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function X(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var M="local-forage-detect-blob-support",$=void 0,B={},me=Object.prototype.toString,J="readonly",p="readwrite";function S(e){for(var i=e.length,t=new ArrayBuffer(i),n=new Uint8Array(t),o=0;o<i;o++)n[o]=e.charCodeAt(o);return t}function E(e){return new v(function(i){var t=e.transaction(M,p),n=z([""]);t.objectStore(M).put(n,"key"),t.onabort=function(o){o.preventDefault(),o.stopPropagation(),i(!1)},t.oncomplete=function(){var o=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);i(r||!o||parseInt(o[1],10)>=43)}}).catch(function(){return!1})}function D(e){return typeof $=="boolean"?v.resolve($):E(e).then(function(i){return $=i,$})}function F(e){var i=B[e.name],t={};t.promise=new v(function(n,o){t.resolve=n,t.reject=o}),i.deferredOperations.push(t),i.dbReady?i.dbReady=i.dbReady.then(function(){return t.promise}):i.dbReady=t.promise}function j(e){var i=B[e.name],t=i.deferredOperations.pop();if(t)return t.resolve(),t.promise}function k(e,i){var t=B[e.name],n=t.deferredOperations.pop();if(n)return n.reject(i),n.promise}function V(e,i){return new v(function(t,n){if(B[e.name]=B[e.name]||Fe(),e.db)if(i)F(e),e.db.close();else return t(e.db);var o=[e.name];i&&o.push(e.version);var r=C.open.apply(C,o);i&&(r.onupgradeneeded=function(c){var f=r.result;try{f.createObjectStore(e.storeName),c.oldVersion<=1&&f.createObjectStore(M)}catch(u){if(u.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw u}}),r.onerror=function(c){c.preventDefault(),n(r.error)},r.onsuccess=function(){var c=r.result;c.onversionchange=function(f){f.target.close()},t(c),j(e)}})}function G(e){return V(e,!1)}function ie(e){return V(e,!0)}function le(e,i){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==i&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function pe(e){return new v(function(i,t){var n=new FileReader;n.onerror=t,n.onloadend=function(o){var r=btoa(o.target.result||"");i({__local_forage_encoded_blob:!0,data:r,type:e.type})},n.readAsBinaryString(e)})}function ee(e){var i=S(atob(e.data));return z([i],{type:e.type})}function Be(e){return e&&e.__local_forage_encoded_blob}function qt(e){var i=this,t=i._initReady().then(function(){var n=B[i._dbInfo.name];if(n&&n.dbReady)return n.dbReady});return A(t,e,e),t}function Kt(e){F(e);for(var i=B[e.name],t=i.forages,n=0;n<t.length;n++){var o=t[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,G(e).then(function(r){return e.db=r,le(e)?ie(e):r}).then(function(r){e.db=i.db=r;for(var c=0;c<t.length;c++)t[c]._dbInfo.db=r}).catch(function(r){throw k(e,r),r})}function Q(e,i,t,n){n===void 0&&(n=1);try{var o=e.db.transaction(e.storeName,i);t(null,o)}catch(r){if(n>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return v.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ie(e)}).then(function(){return Kt(e).then(function(){Q(e,i,t,n-1)})}).catch(t);t(r)}}function Fe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Zt(e){var i=this,t={db:null};if(e)for(var n in e)t[n]=e[n];var o=B[t.name];o||(o=Fe(),B[t.name]=o),o.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=qt);var r=[];function c(){return v.resolve()}for(var f=0;f<o.forages.length;f++){var u=o.forages[f];u!==i&&r.push(u._initReady().catch(c))}var d=o.forages.slice(0);return v.all(r).then(function(){return t.db=o.db,G(t)}).then(function(h){return t.db=h,le(t,i._defaultConfig.version)?ie(t):h}).then(function(h){t.db=o.db=h,i._dbInfo=t;for(var _=0;_<d.length;_++){var I=d[_];I!==i&&(I._dbInfo.db=t.db,I._dbInfo.version=t.version)}})}function Jt(e,i){var t=this;e=L(e);var n=new v(function(o,r){t.ready().then(function(){Q(t._dbInfo,J,function(c,f){if(c)return r(c);try{var u=f.objectStore(t._dbInfo.storeName),d=u.get(e);d.onsuccess=function(){var h=d.result;h===void 0&&(h=null),Be(h)&&(h=ee(h)),o(h)},d.onerror=function(){r(d.error)}}catch(h){r(h)}})}).catch(r)});return g(n,i),n}function ei(e,i){var t=this,n=new v(function(o,r){t.ready().then(function(){Q(t._dbInfo,J,function(c,f){if(c)return r(c);try{var u=f.objectStore(t._dbInfo.storeName),d=u.openCursor(),h=1;d.onsuccess=function(){var _=d.result;if(_){var I=_.value;Be(I)&&(I=ee(I));var T=e(I,_.key,h++);T!==void 0?o(T):_.continue()}else o()},d.onerror=function(){r(d.error)}}catch(_){r(_)}})}).catch(r)});return g(n,i),n}function ti(e,i,t){var n=this;e=L(e);var o=new v(function(r,c){var f;n.ready().then(function(){return f=n._dbInfo,me.call(i)==="[object Blob]"?D(f.db).then(function(u){return u?i:pe(i)}):i}).then(function(u){Q(n._dbInfo,p,function(d,h){if(d)return c(d);try{var _=h.objectStore(n._dbInfo.storeName);u===null&&(u=void 0);var I=_.put(u,e);h.oncomplete=function(){u===void 0&&(u=null),r(u)},h.onabort=h.onerror=function(){var T=I.error?I.error:I.transaction.error;c(T)}}catch(T){c(T)}})}).catch(c)});return g(o,t),o}function ii(e,i){var t=this;e=L(e);var n=new v(function(o,r){t.ready().then(function(){Q(t._dbInfo,p,function(c,f){if(c)return r(c);try{var u=f.objectStore(t._dbInfo.storeName),d=u.delete(e);f.oncomplete=function(){o()},f.onerror=function(){r(d.error)},f.onabort=function(){var h=d.error?d.error:d.transaction.error;r(h)}}catch(h){r(h)}})}).catch(r)});return g(n,i),n}function ri(e){var i=this,t=new v(function(n,o){i.ready().then(function(){Q(i._dbInfo,p,function(r,c){if(r)return o(r);try{var f=c.objectStore(i._dbInfo.storeName),u=f.clear();c.oncomplete=function(){n()},c.onabort=c.onerror=function(){var d=u.error?u.error:u.transaction.error;o(d)}}catch(d){o(d)}})}).catch(o)});return g(t,e),t}function ni(e){var i=this,t=new v(function(n,o){i.ready().then(function(){Q(i._dbInfo,J,function(r,c){if(r)return o(r);try{var f=c.objectStore(i._dbInfo.storeName),u=f.count();u.onsuccess=function(){n(u.result)},u.onerror=function(){o(u.error)}}catch(d){o(d)}})}).catch(o)});return g(t,e),t}function oi(e,i){var t=this,n=new v(function(o,r){if(e<0){o(null);return}t.ready().then(function(){Q(t._dbInfo,J,function(c,f){if(c)return r(c);try{var u=f.objectStore(t._dbInfo.storeName),d=!1,h=u.openKeyCursor();h.onsuccess=function(){var _=h.result;if(!_){o(null);return}e===0||d?o(_.key):(d=!0,_.advance(e))},h.onerror=function(){r(h.error)}}catch(_){r(_)}})}).catch(r)});return g(n,i),n}function si(e){var i=this,t=new v(function(n,o){i.ready().then(function(){Q(i._dbInfo,J,function(r,c){if(r)return o(r);try{var f=c.objectStore(i._dbInfo.storeName),u=f.openKeyCursor(),d=[];u.onsuccess=function(){var h=u.result;if(!h){n(d);return}d.push(h.key),h.continue()},u.onerror=function(){o(u.error)}}catch(h){o(h)}})}).catch(o)});return g(t,e),t}function ai(e,i){i=X.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var n=this,o;if(!e.name)o=v.reject("Invalid arguments");else{var r=e.name===t.name&&n._dbInfo.db,c=r?v.resolve(n._dbInfo.db):G(e).then(function(f){var u=B[e.name],d=u.forages;u.db=f;for(var h=0;h<d.length;h++)d[h]._dbInfo.db=f;return f});e.storeName?o=c.then(function(f){if(f.objectStoreNames.contains(e.storeName)){var u=f.version+1;F(e);var d=B[e.name],h=d.forages;f.close();for(var _=0;_<h.length;_++){var I=h[_];I._dbInfo.db=null,I._dbInfo.version=u}var T=new v(function(R,O){var P=C.open(e.name,u);P.onerror=function(H){var ne=P.result;ne.close(),O(H)},P.onupgradeneeded=function(){var H=P.result;H.deleteObjectStore(e.storeName)},P.onsuccess=function(){var H=P.result;H.close(),R(H)}});return T.then(function(R){d.db=R;for(var O=0;O<h.length;O++){var P=h[O];P._dbInfo.db=R,j(P._dbInfo)}}).catch(function(R){throw(k(e,R)||v.resolve()).catch(function(){}),R})}}):o=c.then(function(f){F(e);var u=B[e.name],d=u.forages;f.close();for(var h=0;h<d.length;h++){var _=d[h];_._dbInfo.db=null}var I=new v(function(T,R){var O=C.deleteDatabase(e.name);O.onerror=function(){var P=O.result;P&&P.close(),R(O.error)},O.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},O.onsuccess=function(){var P=O.result;P&&P.close(),T(P)}});return I.then(function(T){u.db=T;for(var R=0;R<d.length;R++){var O=d[R];j(O._dbInfo)}}).catch(function(T){throw(k(e,T)||v.resolve()).catch(function(){}),T})})}return g(o,i),o}var ci={_driver:"asyncStorage",_initStorage:Zt,_support:N(),iterate:ei,getItem:Jt,setItem:ti,removeItem:ii,clear:ri,length:ni,key:oi,keys:si,dropInstance:ai};function li(){return typeof openDatabase=="function"}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fi="~~local_forage_type~",Ue=/^~~local_forage_type~([^~]+)~/,fe="__lfsc__:",ve=fe.length,_e="arbf",ge="blob",Ye="si08",ze="ui08",je="uic8",ke="si16",Ve="si32",He="ur16",Xe="ui32",$e="fl32",Ge="fl64",Qe=ve+_e.length,We=Object.prototype.toString;function qe(e){var i=e.length*.75,t=e.length,n,o=0,r,c,f,u;e[e.length-1]==="="&&(i--,e[e.length-2]==="="&&i--);var d=new ArrayBuffer(i),h=new Uint8Array(d);for(n=0;n<t;n+=4)r=q.indexOf(e[n]),c=q.indexOf(e[n+1]),f=q.indexOf(e[n+2]),u=q.indexOf(e[n+3]),h[o++]=r<<2|c>>4,h[o++]=(c&15)<<4|f>>2,h[o++]=(f&3)<<6|u&63;return d}function ye(e){var i=new Uint8Array(e),t="",n;for(n=0;n<i.length;n+=3)t+=q[i[n]>>2],t+=q[(i[n]&3)<<4|i[n+1]>>4],t+=q[(i[n+1]&15)<<2|i[n+2]>>6],t+=q[i[n+2]&63];return i.length%3===2?t=t.substring(0,t.length-1)+"=":i.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function ui(e,i){var t="";if(e&&(t=We.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&We.call(e.buffer)==="[object ArrayBuffer]")){var n,o=fe;e instanceof ArrayBuffer?(n=e,o+=_e):(n=e.buffer,t==="[object Int8Array]"?o+=Ye:t==="[object Uint8Array]"?o+=ze:t==="[object Uint8ClampedArray]"?o+=je:t==="[object Int16Array]"?o+=ke:t==="[object Uint16Array]"?o+=He:t==="[object Int32Array]"?o+=Ve:t==="[object Uint32Array]"?o+=Xe:t==="[object Float32Array]"?o+=$e:t==="[object Float64Array]"?o+=Ge:i(new Error("Failed to get type for BinaryArray"))),i(o+ye(n))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var c=fi+e.type+"~"+ye(this.result);i(fe+ge+c)},r.readAsArrayBuffer(e)}else try{i(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),i(null,c)}}function di(e){if(e.substring(0,ve)!==fe)return JSON.parse(e);var i=e.substring(Qe),t=e.substring(ve,Qe),n;if(t===ge&&Ue.test(i)){var o=i.match(Ue);n=o[1],i=i.substring(o[0].length)}var r=qe(i);switch(t){case _e:return r;case ge:return z([r],{type:n});case Ye:return new Int8Array(r);case ze:return new Uint8Array(r);case je:return new Uint8ClampedArray(r);case ke:return new Int16Array(r);case He:return new Uint16Array(r);case Ve:return new Int32Array(r);case Xe:return new Uint32Array(r);case $e:return new Float32Array(r);case Ge:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var be={serialize:ui,deserialize:di,stringToBuffer:qe,bufferToString:ye};function Ke(e,i,t,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,n)}function hi(e){var i=this,t={db:null};if(e)for(var n in e)t[n]=typeof e[n]!="string"?e[n].toString():e[n];var o=new v(function(r,c){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(f){return c(f)}t.db.transaction(function(f){Ke(f,t,function(){i._dbInfo=t,r()},function(u,d){c(d)})},c)});return t.serializer=be,o}function K(e,i,t,n,o,r){e.executeSql(t,n,o,function(c,f){f.code===f.SYNTAX_ERR?c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(u,d){d.rows.length?r(u,f):Ke(u,i,function(){u.executeSql(t,n,o,r)},r)},r):r(c,f)},r)}function mi(e,i){var t=this;e=L(e);var n=new v(function(o,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(f){K(f,c,"SELECT * FROM "+c.storeName+" WHERE key = ? LIMIT 1",[e],function(u,d){var h=d.rows.length?d.rows.item(0).value:null;h&&(h=c.serializer.deserialize(h)),o(h)},function(u,d){r(d)})})}).catch(r)});return g(n,i),n}function pi(e,i){var t=this,n=new v(function(o,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(f){K(f,c,"SELECT * FROM "+c.storeName,[],function(u,d){for(var h=d.rows,_=h.length,I=0;I<_;I++){var T=h.item(I),R=T.value;if(R&&(R=c.serializer.deserialize(R)),R=e(R,T.key,I+1),R!==void 0){o(R);return}}o()},function(u,d){r(d)})})}).catch(r)});return g(n,i),n}function Ze(e,i,t,n){var o=this;e=L(e);var r=new v(function(c,f){o.ready().then(function(){i===void 0&&(i=null);var u=i,d=o._dbInfo;d.serializer.serialize(i,function(h,_){_?f(_):d.db.transaction(function(I){K(I,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,h],function(){c(u)},function(T,R){f(R)})},function(I){if(I.code===I.QUOTA_ERR){if(n>0){c(Ze.apply(o,[e,u,t,n-1]));return}f(I)}})})}).catch(f)});return g(r,t),r}function vi(e,i,t){return Ze.apply(this,[e,i,t,1])}function _i(e,i){var t=this;e=L(e);var n=new v(function(o,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(f){K(f,c,"DELETE FROM "+c.storeName+" WHERE key = ?",[e],function(){o()},function(u,d){r(d)})})}).catch(r)});return g(n,i),n}function gi(e){var i=this,t=new v(function(n,o){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"DELETE FROM "+r.storeName,[],function(){n()},function(f,u){o(u)})})}).catch(o)});return g(t,e),t}function yi(e){var i=this,t=new v(function(n,o){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(f,u){var d=u.rows.item(0).c;n(d)},function(f,u){o(u)})})}).catch(o)});return g(t,e),t}function bi(e,i){var t=this,n=new v(function(o,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(f){K(f,c,"SELECT key FROM "+c.storeName+" WHERE id = ? LIMIT 1",[e+1],function(u,d){var h=d.rows.length?d.rows.item(0).key:null;o(h)},function(u,d){r(d)})})}).catch(r)});return g(n,i),n}function wi(e){var i=this,t=new v(function(n,o){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"SELECT key FROM "+r.storeName,[],function(f,u){for(var d=[],h=0;h<u.rows.length;h++)d.push(u.rows.item(h).key);n(d)},function(f,u){o(u)})})}).catch(o)});return g(t,e),t}function Ii(e){return new v(function(i,t){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(o,r){for(var c=[],f=0;f<r.rows.length;f++)c.push(r.rows.item(f).name);i({db:e,storeNames:c})},function(o,r){t(r)})},function(n){t(n)})})}function Ei(e,i){i=X.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var n=this,o;return e.name?o=new v(function(r){var c;e.name===t.name?c=n._dbInfo.db:c=openDatabase(e.name,"","",0),e.storeName?r({db:c,storeNames:[e.storeName]}):r(Ii(c))}).then(function(r){return new v(function(c,f){r.db.transaction(function(u){function d(T){return new v(function(R,O){u.executeSql("DROP TABLE IF EXISTS "+T,[],function(){R()},function(P,H){O(H)})})}for(var h=[],_=0,I=r.storeNames.length;_<I;_++)h.push(d(r.storeNames[_]));v.all(h).then(function(){c()}).catch(function(T){f(T)})},function(u){f(u)})})}):o=v.reject("Invalid arguments"),g(o,i),o}var Si={_driver:"webSQLStorage",_initStorage:hi,_support:li(),iterate:pi,getItem:mi,setItem:vi,removeItem:_i,clear:gi,length:yi,key:bi,keys:wi,dropInstance:Ei};function Ti(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Je(e,i){var t=e.name+"/";return e.storeName!==i.storeName&&(t+=e.storeName+"/"),t}function Ri(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function xi(){return!Ri()||localStorage.length>0}function Di(e){var i=this,t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Je(e,i._defaultConfig),xi()?(i._dbInfo=t,t.serializer=be,v.resolve()):v.reject()}function Ai(e){var i=this,t=i.ready().then(function(){for(var n=i._dbInfo.keyPrefix,o=localStorage.length-1;o>=0;o--){var r=localStorage.key(o);r.indexOf(n)===0&&localStorage.removeItem(r)}});return g(t,e),t}function Ci(e,i){var t=this;e=L(e);var n=t.ready().then(function(){var o=t._dbInfo,r=localStorage.getItem(o.keyPrefix+e);return r&&(r=o.serializer.deserialize(r)),r});return g(n,i),n}function Pi(e,i){var t=this,n=t.ready().then(function(){for(var o=t._dbInfo,r=o.keyPrefix,c=r.length,f=localStorage.length,u=1,d=0;d<f;d++){var h=localStorage.key(d);if(h.indexOf(r)===0){var _=localStorage.getItem(h);if(_&&(_=o.serializer.deserialize(_)),_=e(_,h.substring(c),u++),_!==void 0)return _}}});return g(n,i),n}function Oi(e,i){var t=this,n=t.ready().then(function(){var o=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(o.keyPrefix.length)),r});return g(n,i),n}function Ni(e){var i=this,t=i.ready().then(function(){for(var n=i._dbInfo,o=localStorage.length,r=[],c=0;c<o;c++){var f=localStorage.key(c);f.indexOf(n.keyPrefix)===0&&r.push(f.substring(n.keyPrefix.length))}return r});return g(t,e),t}function Li(e){var i=this,t=i.keys().then(function(n){return n.length});return g(t,e),t}function Mi(e,i){var t=this;e=L(e);var n=t.ready().then(function(){var o=t._dbInfo;localStorage.removeItem(o.keyPrefix+e)});return g(n,i),n}function Bi(e,i,t){var n=this;e=L(e);var o=n.ready().then(function(){i===void 0&&(i=null);var r=i;return new v(function(c,f){var u=n._dbInfo;u.serializer.serialize(i,function(d,h){if(h)f(h);else try{localStorage.setItem(u.keyPrefix+e,d),c(r)}catch(_){(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")&&f(_),f(_)}})})});return g(o,t),o}function Fi(e,i){if(i=X.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var n=this,o;return e.name?o=new v(function(r){e.storeName?r(Je(e,n._defaultConfig)):r(e.name+"/")}).then(function(r){for(var c=localStorage.length-1;c>=0;c--){var f=localStorage.key(c);f.indexOf(r)===0&&localStorage.removeItem(f)}}):o=v.reject("Invalid arguments"),g(o,i),o}var Ui={_driver:"localStorageWrapper",_initStorage:Di,_support:Ti(),iterate:Pi,getItem:Ci,setItem:Bi,removeItem:Mi,clear:Ai,length:Li,key:Oi,keys:Ni,dropInstance:Fi},Yi=function(i,t){return i===t||typeof i=="number"&&typeof t=="number"&&isNaN(i)&&isNaN(t)},zi=function(i,t){for(var n=i.length,o=0;o<n;){if(Yi(i[o],t))return!0;o++}return!1},et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},re={},tt={},te={INDEXEDDB:ci,WEBSQL:Si,LOCALSTORAGE:Ui},ji=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],ue=["dropInstance"],we=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ue),ki={description:"",driver:ji.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vi(e,i){e[i]=function(){var t=arguments;return e.ready().then(function(){return e[i].apply(e,t)})}}function Ie(){for(var e=1;e<arguments.length;e++){var i=arguments[e];if(i)for(var t in i)i.hasOwnProperty(t)&&(et(i[t])?arguments[0][t]=i[t].slice():arguments[0][t]=i[t])}return arguments[0]}var Hi=function(){function e(i){w(this,e);for(var t in te)if(te.hasOwnProperty(t)){var n=te[t],o=n._driver;this[t]=o,re[o]||this.defineDriver(n)}this._defaultConfig=Ie({},ki),this._config=Ie({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":m(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var n in t){if(n==="storeName"&&(t[n]=t[n].replace(/\W/g,"_")),n==="version"&&typeof t[n]!="number")return new Error("Database version must be a number.");this._config[n]=t[n]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,n,o){var r=new v(function(c,f){try{var u=t._driver,d=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){f(d);return}for(var h=we.concat("_initStorage"),_=0,I=h.length;_<I;_++){var T=h[_],R=!zi(ue,T);if((R||t[T])&&typeof t[T]!="function"){f(d);return}}var O=function(){for(var ne=function(Gi){return function(){var Qi=new Error("Method "+Gi+" is not implemented by the current driver"),it=v.reject(Qi);return g(it,arguments[arguments.length-1]),it}},Ee=0,$i=ue.length;Ee<$i;Ee++){var Se=ue[Ee];t[Se]||(t[Se]=ne(Se))}};O();var P=function(ne){re[u]&&console.info("Redefining LocalForage driver: "+u),re[u]=t,tt[u]=ne,c()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(P,f):P(!!t._support):P(!0)}catch(H){f(H)}});return A(r,n,o),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,n,o){var r=re[t]?v.resolve(re[t]):v.reject(new Error("Driver not found."));return A(r,n,o),r},e.prototype.getSerializer=function(t){var n=v.resolve(be);return A(n,t),n},e.prototype.ready=function(t){var n=this,o=n._driverSet.then(function(){return n._ready===null&&(n._ready=n._initDriver()),n._ready});return A(o,t,t),o},e.prototype.setDriver=function(t,n,o){var r=this;et(t)||(t=[t]);var c=this._getSupportedDrivers(t);function f(){r._config.driver=r.driver()}function u(_){return r._extend(_),f(),r._ready=r._initStorage(r._config),r._ready}function d(_){return function(){var I=0;function T(){for(;I<_.length;){var R=_[I];return I++,r._dbInfo=null,r._ready=null,r.getDriver(R).then(u).catch(T)}f();var O=new Error("No available storage method found.");return r._driverSet=v.reject(O),r._driverSet}return T()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=h.then(function(){var _=c[0];return r._dbInfo=null,r._ready=null,r.getDriver(_).then(function(I){r._driver=I._driver,f(),r._wrapLibraryMethodsWithReady(),r._initDriver=d(c)})}).catch(function(){f();var _=new Error("No available storage method found.");return r._driverSet=v.reject(_),r._driverSet}),A(this._driverSet,n,o),this._driverSet},e.prototype.supports=function(t){return!!tt[t]},e.prototype._extend=function(t){Ie(this,t)},e.prototype._getSupportedDrivers=function(t){for(var n=[],o=0,r=t.length;o<r;o++){var c=t[o];this.supports(c)&&n.push(c)}return n},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,n=we.length;t<n;t++)Vi(this,we[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Xi=new Hi;a.exports=Xi},{3:3}]},{},[4])(4)})});var Zi=["tooltip"],Xt=20;var $t=new Re("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let x=De(ce);return()=>x.scrollStrategies.reposition({scrollThrottle:Xt})}});function Ji(x){return()=>x.scrollStrategies.reposition({scrollThrottle:Xt})}var er={provide:$t,deps:[ce],useFactory:Ji};function tr(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var ir=new Re("mat-tooltip-default-options",{providedIn:"root",factory:tr});var kt="tooltip-panel",Vt=Pt({passive:!0}),rr=8,nr=8,or=24,sr=200,Br=(()=>{let y=class y{get position(){return this._position}set position(s){s!==this._position&&(this._position=s,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(s){this._positionAtOrigin=Oe(s),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(s){this._disabled=Oe(s),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(s){this._showDelay=Ne(s)}get hideDelay(){return this._hideDelay}set hideDelay(s){this._hideDelay=Ne(s),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(s){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=s!=null?String(s).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(s){this._tooltipClass=s,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(s,a,l,m,w,b,C,N,z,v,g,A){this._overlay=s,this._elementRef=a,this._scrollDispatcher=l,this._viewContainerRef=m,this._ngZone=w,this._platform=b,this._ariaDescriber=C,this._focusMonitor=N,this._dir=v,this._defaultOptions=g,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=ar,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Te,this._injector=De(ft),this._scrollStrategy=z,this._document=A,g&&(this._showDelay=g.showDelay,this._hideDelay=g.hideDelay,g.position&&(this.position=g.position),g.positionAtOrigin&&(this.positionAtOrigin=g.positionAtOrigin),g.touchGestures&&(this.touchGestures=g.touchGestures)),v.change.pipe(Z(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=rr}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Z(this._destroyed)).subscribe(s=>{s?s==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let s=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([a,l])=>{s.removeEventListener(a,l,Vt)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(s,this.message,"tooltip"),this._focusMonitor.stopMonitoring(s)}show(s=this.showDelay,a){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let l=this._createOverlay(a);this._detach(),this._portal=this._portal||new Yt(this._tooltipComponent,this._viewContainerRef);let m=this._tooltipInstance=l.attach(this._portal).instance;m._triggerElement=this._elementRef.nativeElement,m._mouseLeaveHideDelay=this._hideDelay,m.afterHidden().pipe(Z(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),m.show(s)}hide(s=this.hideDelay){let a=this._tooltipInstance;a&&(a.isVisible()?a.hide(s):(a._cancelPendingAnimations(),this._detach()))}toggle(s){this._isTooltipVisible()?this.hide():this.show(void 0,s)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(s){if(this._overlayRef){let m=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!s)&&m._origin instanceof ae)return this._overlayRef;this._detach()}let a=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),l=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?s||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(a);return l.positionChanges.pipe(Z(this._destroyed)).subscribe(m=>{this._updateCurrentPositionClass(m.connectionPair),this._tooltipInstance&&m.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:l,panelClass:`${this._cssClassPrefix}-${kt}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Z(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Z(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Z(this._destroyed)).subscribe(m=>{this._isTooltipVisible()&&m.keyCode===27&&!Ot(m)&&(m.preventDefault(),m.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(s){let a=s.getConfig().positionStrategy,l=this._getOrigin(),m=this._getOverlayPosition();a.withPositions([this._addOffset(oe(oe({},l.main),m.main)),this._addOffset(oe(oe({},l.fallback),m.fallback))])}_addOffset(s){let a=nr,l=!this._dir||this._dir.value=="ltr";return s.originY==="top"?s.offsetY=-a:s.originY==="bottom"?s.offsetY=a:s.originX==="start"?s.offsetX=l?-a:a:s.originX==="end"&&(s.offsetX=l?a:-a),s}_getOrigin(){let s=!this._dir||this._dir.value=="ltr",a=this.position,l;a=="above"||a=="below"?l={originX:"center",originY:a=="above"?"top":"bottom"}:a=="before"||a=="left"&&s||a=="right"&&!s?l={originX:"start",originY:"center"}:(a=="after"||a=="right"&&s||a=="left"&&!s)&&(l={originX:"end",originY:"center"});let{x:m,y:w}=this._invertPosition(l.originX,l.originY);return{main:l,fallback:{originX:m,originY:w}}}_getOverlayPosition(){let s=!this._dir||this._dir.value=="ltr",a=this.position,l;a=="above"?l={overlayX:"center",overlayY:"bottom"}:a=="below"?l={overlayX:"center",overlayY:"top"}:a=="before"||a=="left"&&s||a=="right"&&!s?l={overlayX:"end",overlayY:"center"}:(a=="after"||a=="right"&&s||a=="left"&&!s)&&(l={overlayX:"start",overlayY:"center"});let{x:m,y:w}=this._invertPosition(l.overlayX,l.overlayY);return{main:l,fallback:{overlayX:m,overlayY:w}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),mt(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(s){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=s,this._tooltipInstance._markForCheck())}_invertPosition(s,a){return this.position==="above"||this.position==="below"?a==="top"?a="bottom":a==="bottom"&&(a="top"):s==="end"?s="start":s==="start"&&(s="end"),{x:s,y:a}}_updateCurrentPositionClass(s){let{overlayY:a,originX:l,originY:m}=s,w;if(a==="center"?this._dir&&this._dir.value==="rtl"?w=l==="end"?"left":"right":w=l==="start"?"left":"right":w=a==="bottom"&&m==="top"?"above":"below",w!==this._currentPosition){let b=this._overlayRef;if(b){let C=`${this._cssClassPrefix}-${kt}-`;b.removePanelClass(C+this._currentPosition),b.addPanelClass(C+w)}this._currentPosition=w}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",s=>{this._setupPointerExitEventsIfNeeded();let a;s.x!==void 0&&s.y!==void 0&&(a=s),this.show(void 0,a)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",s=>{let a=s.targetTouches?.[0],l=a?{x:a.clientX,y:a.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let m=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,l),this._defaultOptions.touchLongPressShowDelay??m)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let s=[];if(this._platformSupportsMouseEvents())s.push(["mouseleave",a=>{let l=a.relatedTarget;(!l||!this._overlayRef?.overlayElement.contains(l))&&this.hide()}],["wheel",a=>this._wheelListener(a)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let a=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};s.push(["touchend",a],["touchcancel",a])}this._addListeners(s),this._passiveListeners.push(...s)}_addListeners(s){s.forEach(([a,l])=>{this._elementRef.nativeElement.addEventListener(a,l,Vt)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(s){if(this._isTooltipVisible()){let a=this._document.elementFromPoint(s.clientX,s.clientY),l=this._elementRef.nativeElement;a!==l&&!l.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){let s=this.touchGestures;if(s!=="off"){let a=this._elementRef.nativeElement,l=a.style;(s==="on"||a.nodeName!=="INPUT"&&a.nodeName!=="TEXTAREA")&&(l.userSelect=l.msUserSelect=l.webkitUserSelect=l.MozUserSelect="none"),(s==="on"||!a.draggable)&&(l.webkitUserDrag="none"),l.touchAction="none",l.webkitTapHighlightColor="transparent"}}};y.\u0275fac=function(a){return new(a||y)(U(ce),U(ae),U(Ft),U(pt),U(ht),U(Ct),U(Nt),U(Lt),U($t),U(Bt),U(ir,8),U(xt))},y.\u0275dir=at({type:y,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(a,l){a&2&&Ae("mat-mdc-tooltip-disabled",l.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0});let x=y;return x})(),ar=(()=>{let y=class y{constructor(s,a,l){this._changeDetectorRef=s,this._elementRef=a,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Te,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=l==="NoopAnimations"}show(s){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},s)}hide(s){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},s)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:s}){(!s||!this._triggerElement.contains(s))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let s=this._elementRef.nativeElement.getBoundingClientRect();return s.height>or&&s.width>=sr}_handleAnimationEnd({animationName:s}){(s===this._showAnimation||s===this._hideAnimation)&&this._finalizeAnimation(s===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(s){s?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(s){let a=this._tooltip.nativeElement,l=this._showAnimation,m=this._hideAnimation;if(a.classList.remove(s?m:l),a.classList.add(s?l:m),this._isVisible!==s&&(this._isVisible=s,this._changeDetectorRef.markForCheck()),s&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let w=getComputedStyle(a);(w.getPropertyValue("animation-duration")==="0s"||w.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}s&&this._onShow(),this._animationsDisabled&&(a.classList.add("_mat-animation-noopable"),this._finalizeAnimation(s))}};y.\u0275fac=function(a){return new(a||y)(U(Rt),U(ae),U(ut,8))},y.\u0275cmp=ot({type:y,selectors:[["mat-tooltip-component"]],viewQuery:function(a,l){if(a&1&&bt(Zi,7),a&2){let m;wt(m=It())&&(l._tooltip=m.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(a,l){a&1&&Pe("mouseleave",function(w){return l._handleMouseLeave(w)}),a&2&&_t("zoom",l.isVisible()?1:null)},standalone:!0,features:[Tt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(a,l){if(a&1){let m=yt();Ce(0,"div",1,0),Pe("animationend",function(b){return ct(m),lt(l._handleAnimationEnd(b))}),Ce(2,"div",2),Et(3),gt()()}a&2&&(Ae("mdc-tooltip--multiline",l._isMultiline),vt("ngClass",l.tooltipClass),dt(3),St(l.message))},dependencies:[Dt],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - 2*8px);margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - 2*8px);align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0});let x=y;return x})();var Fr=(()=>{let y=class y{};y.\u0275fac=function(a){return new(a||y)},y.\u0275mod=st({type:y}),y.\u0275inj=nt({providers:[er],imports:[Mt,At,zt,Le,Le,Ut]});let x=y;return x})();var W=qi(Qt());var Wt=(()=>{let y=class y{constructor(){this.metadataSubject=new de(null),W.default.config({driver:W.default.INDEXEDDB,name:"user-database",version:1,storeName:"users",description:"Store for user metadata"})}getMetadataStream(){return this.metadataSubject.asObservable()}getUserMetadata(s){return Y(this,null,function*(){try{return yield W.default.getItem(s)}catch(a){return console.error("Error getting metadata from IndexedDB:",a),null}})}saveUserMetadata(s,a){return Y(this,null,function*(){try{yield W.default.setItem(s,a),this.metadataSubject.next({pubkey:s,metadata:a})}catch(l){console.error("Error saving metadata to IndexedDB:",l)}})}removeUserMetadata(s){return Y(this,null,function*(){try{yield W.default.removeItem(s),this.metadataSubject.next({pubkey:s,metadata:null})}catch(a){console.error("Error removing metadata from IndexedDB:",a)}})}clearAllMetadata(){return Y(this,null,function*(){try{yield W.default.clear(),this.metadataSubject.next(null)}catch(s){console.error("Error clearing all metadata:",s)}})}getAllUsers(){return Y(this,null,function*(){try{let s=yield W.default.keys(),a=[];for(let l of s){let m=yield W.default.getItem(l);m&&a.push(m)}return a}catch(s){return console.error("Error getting all users from IndexedDB:",s),[]}})}};y.\u0275fac=function(a){return new(a||y)},y.\u0275prov=he({token:y,factory:y.\u0275fac,providedIn:"root"});let x=y;return x})();var $r=(()=>{let y=class y{constructor(s,a){this.indexedDBService=s,this.relayService=a,this.metadataSubject=new de(null),this.requestQueue=new Set,this.isProcessingQueue=!1,this.maxRequestsPerBatch=3,this.requestDelay=5e3}getMetadataStream(){return this.metadataSubject.asObservable().pipe(rt(2e3))}enqueueRequest(s){this.requestQueue.add(s),this.processQueue()}fetchMetadataForMultipleKeys(s){return Y(this,null,function*(){let a={kinds:[0],authors:s};try{yield this.relayService.ensureConnectedRelays();let l=this.relayService.getConnectedRelays();if(l.length===0){console.error("No relays are connected.");return}let m=this.relayService.getPool().subscribeMany(l,[a],{onevent:w=>Y(this,null,function*(){if(w.kind===0)try{let b=JSON.parse(w.content);yield this.indexedDBService.saveUserMetadata(w.pubkey,b),this.metadataSubject.next({pubkey:w.pubkey,metadata:b})}catch(b){console.error("Error parsing metadata:",b)}}),oneose:()=>{}});setTimeout(()=>{m.close()},10*60*1e3)}catch(l){console.error("Failed to fetch metadata for multiple keys:",l)}})}processQueue(){return Y(this,null,function*(){if(!(this.isProcessingQueue||this.requestQueue.size===0)){for(this.isProcessingQueue=!0;this.requestQueue.size>0;){let s=Array.from(this.requestQueue).slice(0,this.maxRequestsPerBatch);this.requestQueue=new Set(Array.from(this.requestQueue).slice(this.maxRequestsPerBatch)),yield Promise.all(s.map(a=>Y(this,null,function*(){try{let l=yield this.fetchMetadataRealtime(a);l&&(yield this.indexedDBService.saveUserMetadata(a,l),this.metadataSubject.next(l))}catch(l){console.error(`Failed to update metadata for user: ${a}`,l)}}))),yield new Promise(a=>setTimeout(a,this.requestDelay))}this.isProcessingQueue=!1}})}fetchMetadataWithCache(s){return Y(this,null,function*(){let a=yield this.indexedDBService.getUserMetadata(s);return a?this.metadataSubject.next(a):this.enqueueRequest(s),this.subscribeToMetadataUpdates(s),a})}subscribeToMetadataUpdates(s){this.relayService.ensureConnectedRelays().then(()=>{let a={authors:[s],kinds:[0]};this.relayService.getPool().subscribeMany(this.relayService.getConnectedRelays(),[a],{onevent:l=>Y(this,null,function*(){if(l.pubkey===s&&l.kind===0)try{let m=JSON.parse(l.content);yield this.indexedDBService.saveUserMetadata(s,m),this.metadataSubject.next(m)}catch(m){console.error("Error parsing updated metadata:",m)}}),oneose(){}})})}fetchMetadataRealtime(s){return Y(this,null,function*(){yield this.relayService.ensureConnectedRelays();let a=this.relayService.getConnectedRelays();if(a.length===0)throw new Error("No connected relays");return new Promise(l=>{let m=this.relayService.getPool().subscribeMany(a,[{authors:[s],kinds:[0]}],{onevent:w=>{if(w.pubkey===s&&w.kind===0)try{let b=JSON.parse(w.content);l(b)}catch(b){console.error("Error parsing event content:",b),l(null)}finally{m.close()}},oneose(){m.close(),l(null)}})})})}refreshAllStoredMetadata(){return Y(this,null,function*(){let s=yield this.indexedDBService.getAllUsers();if(!s||s.length===0){console.log("No stored users found in IndexedDB");return}s.forEach(a=>this.enqueueRequest(a.pubkey))})}};y.\u0275fac=function(a){return new(a||y)(xe(Wt),xe(jt))},y.\u0275prov=he({token:y,factory:y.\u0275fac,providedIn:"root"});let x=y;return x})();export{Br as a,Fr as b,Wt as c,$r as d};
