(self.webpackChunkangor=self.webpackChunkangor||[]).push([[387],{1146:xe=>{"use strict";for(var N="qpzry9x8gf2tvdw0s3jn54khce6mua7l",k={},E=0;E<32;E++){var v=N.charAt(E);if(void 0!==k[v])throw new TypeError(v+" is ambiguous");k[v]=E}function y(D){var $=D>>25;return(33554431&D)<<5^996825010&-(1&$)^642813549&-($>>1&1)^513874426&-($>>2&1)^1027748829&-($>>3&1)^705979059&-($>>4&1)}function A(D){for(var $=1,fe=0;fe<D.length;++fe){var z=D.charCodeAt(fe);if(z<33||z>126)return"Invalid prefix ("+D+")";$=y($)^z>>5}for($=y($),fe=0;fe<D.length;++fe){var ne=D.charCodeAt(fe);$=y($)^31&ne}return $}function T(D,$){if(D.length<8)return D+" too short";if(D.length>($=$||90))return"Exceeds length limit";var fe=D.toLowerCase(),z=D.toUpperCase();if(D!==fe&&D!==z)return"Mixed-case string "+D;var ne=(D=fe).lastIndexOf("1");if(-1===ne)return"No separator character for "+D;if(0===ne)return"Missing prefix for "+D;var o=D.slice(0,ne),ae=D.slice(ne+1);if(ae.length<6)return"Data too short";var ke=A(o);if("string"==typeof ke)return ke;for(var je=[],he=0;he<ae.length;++he){var we=ae.charAt(he),se=k[we];if(void 0===se)return"Unknown character "+we;ke=y(ke)^se,!(he+6>=ae.length)&&je.push(se)}return 1!==ke?"Invalid checksum for "+D:{prefix:o,words:je}}function H(D,$,fe,z){for(var ne=0,o=0,ae=(1<<fe)-1,ke=[],je=0;je<D.length;++je)for(ne=ne<<$|D[je],o+=$;o>=fe;)ke.push(ne>>(o-=fe)&ae);if(z)o>0&&ke.push(ne<<fe-o&ae);else{if(o>=$)return"Excess padding";if(ne<<fe-o&ae)return"Non-zero padding"}return ke}xe.exports={decodeUnsafe:function P(){var D=T.apply(null,arguments);if("object"==typeof D)return D},decode:function B(D){var $=T.apply(null,arguments);if("object"==typeof $)return $;throw new Error($)},encode:function f(D,$,fe){if(D.length+7+$.length>(fe=fe||90))throw new TypeError("Exceeds length limit");var z=A(D=D.toLowerCase());if("string"==typeof z)throw new Error(z);for(var ne=D+"1",o=0;o<$.length;++o){var ae=$[o];if(ae>>5)throw new Error("Non 5-bit word");z=y(z)^ae,ne+=N.charAt(ae)}for(o=0;o<6;++o)z=y(z);for(z^=1,o=0;o<6;++o)ne+=N.charAt(z>>5*(5-o)&31);return ne},toWordsUnsafe:function oe(D){var $=H(D,8,5,!0);if(Array.isArray($))return $},toWords:function le(D){var $=H(D,8,5,!0);if(Array.isArray($))return $;throw new Error($)},fromWordsUnsafe:function ee(D){var $=H(D,5,8,!1);if(Array.isArray($))return $},fromWords:function te(D){var $=H(D,5,8,!1);if(Array.isArray($))return $;throw new Error($)}}},7387:(xe,N,k)=>{"use strict";k.r(N),k.d(N,{default:()=>au});var E={};k.r(E),k.d(E,{OG:()=>Pr,My:()=>vn,Ph:()=>At,lX:()=>Rr,Id:()=>an,fg:()=>Hi,qj:()=>Et,aT:()=>yn,lq:()=>en,z:()=>Fi,Q5:()=>Un});var v=k(467),y=k(5167),A=k(7403),f=k(177),T=k(9417),P=k(8834),B=k(1997),H=k(2102),oe=k(9213),le=k(9042),ee=k(9115),te=k(9183),D=k(450),$=k(4823),fe=k(5245),z=k(8865),ne=k(3813),o=k(4438),ae=k(2577),ke=k(345);const je=["qrcElement"];let he=(()=>{class t{constructor(e,r){this.renderer=e,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new o.bkB,this.context=null}ngOnChanges(){var e=this;return(0,v.A)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((r,i)=>{(0,ae.dY)(this.qrdata,e,(s,u)=>{s?i(s):r(u)})})}toCanvas(e,r){return new Promise((i,s)=>{(0,ae.mo)(e,this.qrdata,r,u=>{u?s(u):i("success")})})}toSVG(e){return new Promise((r,i)=>{(0,ae.toString)(this.qrdata,e,(s,u)=>{s?i(s):r(u)})})}renderElement(e){for(const r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,v.A)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const r={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},i=e.imageSrc,s=e.imageHeight||40,u=e.imageWidth||40;switch(e.elementType){case"canvas":{const d=e.renderer.createElement("canvas");e.context=d.getContext("2d"),e.toCanvas(d,r).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(d,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(d,"title",`${e.title}`),i&&e.context){e.centerImage=new Image(u,s),i!==e.centerImage.src&&(e.centerImage.crossOrigin="anonymous",e.centerImage.src=i),s!==e.centerImage.height&&(e.centerImage.height=s),u!==e.centerImage.width&&(e.centerImage.width=u);const p=e.centerImage;p&&(p.onload=()=>{e.context?.drawImage(p,d.width/2-u/2,d.height/2-s/2,u,s)})}e.renderElement(d),e.emitQRCodeURL(d)}).catch(p=>{console.error("[angularx-qrcode] canvas error:",p)});break}case"svg":{const d=e.renderer.createElement("div");e.toSVG(r).then(p=>{e.renderer.setProperty(d,"innerHTML",p);const m=d.firstChild;e.renderer.setAttribute(m,"height",`${e.width}`),e.renderer.setAttribute(m,"width",`${e.width}`),e.renderElement(m),e.emitQRCodeURL(m)}).catch(p=>{console.error("[angularx-qrcode] svg error:",p)});break}default:{const d=e.renderer.createElement("img");e.toDataURL(r).then(p=>{e.alt&&d.setAttribute("alt",e.alt),e.ariaLabel&&d.setAttribute("aria-label",e.ariaLabel),d.setAttribute("src",p),e.title&&d.setAttribute("title",e.title),e.renderElement(d),e.emitQRCodeURL(d)}).catch(p=>{console.error("[angularx-qrcode] img/url error:",p)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})()}convertBase64ImageUrlToBlob(e){const r=e.split(";base64,"),i=r[0].split(":")[1],s=atob(r[1]),u=new Uint8Array(s.length);for(let d=0;d<s.length;++d)u[d]=s.charCodeAt(d);return new Blob([u],{type:i})}emitQRCodeURL(e){const r=e.constructor.name;if(r===SVGSVGElement.name){const m=new Blob([e.outerHTML],{type:"image/svg+xml"}),M=URL.createObjectURL(m),S=this.sanitizer.bypassSecurityTrustUrl(M);return void this.qrCodeURL.emit(S)}let i="";r===HTMLCanvasElement.name&&(i=e.toDataURL("image/png")),r===HTMLImageElement.name&&(i=e.src);const s=this.convertBase64ImageUrlToBlob(i),u=URL.createObjectURL(s),d=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(d)}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(o.sFG),o.rXU(ke.up))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["qrcode"]],viewQuery:function(r,i){if(1&r&&o.GBs(je,7),2&r){let s;o.mGM(s=o.lsd())&&(i.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[o.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){1&r&&o.nrm(0,"div",null,0),2&r&&o.HbH(i.cssClass)},encapsulation:2,changeDetection:0})}}return t})(),we=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({})}}return t})(),Kn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({})}}return t})();var qe=k(1413),Ue=k(5351),Sn=k(2798),Ve=k(882);k(6371);var et=k(6218),tt=k(600);function dn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ye(t,...n){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(t.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${t.length}`)}const Le={number:dn,bool:function nt(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:Ye,hash:function Xn(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");dn(t.outputLen),dn(t.blockLen)},exists:function rt(t,n=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(n&&t.finished)throw new Error("Hash#digest() has already been called")},output:function it(t,n){Ye(t);const e=n.outputLen;if(t.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}},Ge="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,fn=t=>t instanceof Uint8Array,hn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Oe=(t,n)=>t<<32-n|t>>>n;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const Qn=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function Pe(t){if(!fn(t))throw new Error("Uint8Array expected");let n="";for(let e=0;e<t.length;e++)n+=Qn[t[e]];return n}function Fe(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const n=t.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const e=new Uint8Array(n/2);for(let r=0;r<e.length;r++){const i=2*r,s=t.slice(i,i+2),u=Number.parseInt(s,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");e[r]=u}return e}function De(t){if("string"==typeof t&&(t=function er(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!fn(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function $e(...t){const n=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let e=0;return t.forEach(r=>{if(!fn(r))throw new Error("Uint8Array expected");n.set(r,e),e+=r.length}),n}class An{clone(){return this._cloneInto()}}function pn(t){const n=r=>t().update(De(r)).digest(),e=t();return n.outputLen=e.outputLen,n.blockLen=e.blockLen,n.create=()=>t(),n}function Xt(t=32){if(Ge&&"function"==typeof Ge.getRandomValues)return Ge.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Tn extends An{constructor(n,e,r,i){super(),this.blockLen=n,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=hn(this.buffer)}update(n){Le.exists(this);const{view:e,buffer:r,blockLen:i}=this,s=(n=De(n)).length;for(let u=0;u<s;){const d=Math.min(i-this.pos,s-u);if(d!==i)r.set(n.subarray(u,u+d),this.pos),this.pos+=d,u+=d,this.pos===i&&(this.process(e,0),this.pos=0);else{const p=hn(n);for(;i<=s-u;u+=i)this.process(p,u)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){Le.exists(this),Le.output(n,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>i-u&&(this.process(r,0),u=0);for(let S=u;S<i;S++)e[S]=0;(function Cn(t,n,e,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(n,e,r);const i=BigInt(32),s=BigInt(4294967295),u=Number(e>>i&s),d=Number(e&s),m=r?0:4;t.setUint32(n+(r?4:0),u,r),t.setUint32(n+m,d,r)})(r,i-8,BigInt(8*this.length),s),this.process(r,0);const d=hn(n),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=p/4,M=this.get();if(m>M.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<m;S++)d.setUint32(4*S,M[S],s)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const r=n.slice(0,e);return this.destroy(),r}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:s,destroyed:u,pos:d}=this;return n.length=i,n.pos=d,n.finished=s,n.destroyed=u,i%e&&n.buffer.set(r),n}}const In=(t,n,e)=>t&n^~t&e,Rn=(t,n,e)=>t&n^t&e^n&e,Pn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nt=new Uint32Array(64);class gn extends Tn{constructor(){super(64,32,8,!1),this.A=0|Bt[0],this.B=0|Bt[1],this.C=0|Bt[2],this.D=0|Bt[3],this.E=0|Bt[4],this.F=0|Bt[5],this.G=0|Bt[6],this.H=0|Bt[7]}get(){const{A:n,B:e,C:r,D:i,E:s,F:u,G:d,H:p}=this;return[n,e,r,i,s,u,d,p]}set(n,e,r,i,s,u,d,p){this.A=0|n,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|u,this.G=0|d,this.H=0|p}process(n,e){for(let S=0;S<16;S++,e+=4)Nt[S]=n.getUint32(e,!1);for(let S=16;S<64;S++){const O=Nt[S-15],L=Nt[S-2],U=Oe(O,7)^Oe(O,18)^O>>>3,I=Oe(L,17)^Oe(L,19)^L>>>10;Nt[S]=I+Nt[S-7]+U+Nt[S-16]|0}let{A:r,B:i,C:s,D:u,E:d,F:p,G:m,H:M}=this;for(let S=0;S<64;S++){const L=M+(Oe(d,6)^Oe(d,11)^Oe(d,25))+In(d,p,m)+Pn[S]+Nt[S]|0,I=(Oe(r,2)^Oe(r,13)^Oe(r,22))+Rn(r,i,s)|0;M=m,m=p,p=d,d=u+L|0,u=s,s=i,i=r,r=L+I|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,u=u+this.D|0,d=d+this.E|0,p=p+this.F|0,m=m+this.G|0,M=M+this.H|0,this.set(r,i,s,u,d,p,m,M)}roundClean(){Nt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Bn extends gn{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const It=pn(()=>new gn),Qt=(pn(()=>new Bn),BigInt(0),BigInt(1)),Nn=BigInt(2),Jt=t=>t instanceof Uint8Array,vs=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function vn(t){if(!Jt(t))throw new Error("Uint8Array expected");let n="";for(let e=0;e<t.length;e++)n+=vs[t[e]];return n}function ji(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function yn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const n=t.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const e=new Uint8Array(n/2);for(let r=0;r<e.length;r++){const i=2*r,s=t.slice(i,i+2),u=Number.parseInt(s,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");e[r]=u}return e}function At(t){return ji(vn(t))}function Rr(t){if(!Jt(t))throw new Error("Uint8Array expected");return ji(vn(Uint8Array.from(t).reverse()))}function en(t,n){return yn(t.toString(16).padStart(2*n,"0"))}function Fi(t,n){return en(t,n).reverse()}function Et(t,n,e){let r;if("string"==typeof n)try{r=yn(n)}catch(s){throw new Error(`${t} must be valid hex string, got "${n}". Cause: ${s}`)}else{if(!Jt(n))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(n)}const i=r.length;if("number"==typeof e&&i!==e)throw new Error(`${t} expected ${e} bytes, got ${i}`);return r}function an(...t){const n=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let e=0;return t.forEach(r=>{if(!Jt(r))throw new Error("Uint8Array expected");n.set(r,e),e+=r.length}),n}const Pr=t=>(Nn<<BigInt(t-1))-Qt,Br=t=>new Uint8Array(t),$i=t=>Uint8Array.from(t);function Hi(t,n,e){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");if("function"!=typeof e)throw new Error("hmacFn must be a function");let r=Br(t),i=Br(t),s=0;const u=()=>{r.fill(1),i.fill(0),s=0},d=(...S)=>e(i,r,...S),p=(S=Br())=>{i=d($i([0]),S),r=d(),0!==S.length&&(i=d($i([1]),S),r=d())},m=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const O=[];for(;S<n;){r=d();const L=r.slice();O.push(L),S+=r.length}return an(...O)};return(S,O)=>{let L;for(u(),p(S);!(L=O(m()));)p();return u(),L}}const ws={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,n)=>n.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Un(t,n,e={}){const r=(i,s,u)=>{const d=ws[s];if("function"!=typeof d)throw new Error(`Invalid validator "${s}", expected function`);const p=t[i];if(!(u&&void 0===p||d(p,t)))throw new Error(`Invalid param ${String(i)}=${p} (${typeof p}), expected ${s}`)};for(const[i,s]of Object.entries(n))r(i,s,!1);for(const[i,s]of Object.entries(e))r(i,s,!0);return t}const bt=BigInt(0),He=BigInt(1),tn=BigInt(2),bs=BigInt(3),Nr=BigInt(4),qi=BigInt(5),Gi=BigInt(8);function _t(t,n){const e=t%n;return e>=bt?e:n+e}function Es(t,n,e){if(e<=bt||n<bt)throw new Error("Expected power/modulo > 0");if(e===He)return bt;let r=He;for(;n>bt;)n&He&&(r=r*t%e),t=t*t%e,n>>=He;return r}function Ut(t,n,e){let r=t;for(;n-- >bt;)r*=r,r%=e;return r}function ir(t,n){if(t===bt||n<=bt)throw new Error(`invert: expected positive integers, got n=${t} mod=${n}`);let e=_t(t,n),r=n,i=bt,s=He,u=He,d=bt;for(;e!==bt;){const m=r/e,M=r%e,S=i-u*m,O=s-d*m;r=e,e=M,i=u,s=d,u=S,d=O}if(r!==He)throw new Error("invert: does not exist");return _t(i,n)}BigInt(9),BigInt(16);const Ss=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ur(t,n){const e=void 0!==n?n:t.toString(2).length;return{nBitLength:e,nByteLength:Math.ceil(e/8)}}const Ps=BigInt(0),Lr=BigInt(1);function zi(t){return function As(t){Un(t,Ss.reduce((r,i)=>(r[i]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(t.Fp),Un(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ur(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{Ph:Us,aT:Ls}=E,ln={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(t){const{Err:n}=ln;if(t.length<2||2!==t[0])throw new n("Invalid signature integer tag");const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new n("Invalid signature integer: wrong length");if(128&r[0])throw new n("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:Us(r),l:t.subarray(e+2)}},toSig(t){const{Err:n}=ln,e="string"==typeof t?Ls(t):t;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let r=e.length;if(r<2||48!=e[0])throw new n("Invalid signature tag");if(e[1]!==r-2)throw new n("Invalid signature: incorrect length");const{d:i,l:s}=ln._parseInt(e.subarray(2)),{d:u,l:d}=ln._parseInt(s);if(d.length)throw new n("Invalid signature: left bytes after parsing");return{r:i,s:u}},hexFromSig(t){const n=m=>8&Number.parseInt(m[0],16)?"00"+m:m,e=m=>{const M=m.toString(16);return 1&M.length?`0${M}`:M},r=n(e(t.s)),i=n(e(t.r)),s=r.length/2,u=i.length/2,d=e(s),p=e(u);return`30${e(u+s+4)}02${p}${i}02${d}${r}`}},Dt=BigInt(0),st=BigInt(1),or=(BigInt(2),BigInt(3));function js(t){const n=function Ds(t){const n=zi(t);return Un(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}(t),{Fp:e,n:r}=n,i=e.BYTES+1,s=2*e.BYTES+1;function d(G){return _t(G,r)}function p(G){return ir(G,r)}const{ProjectivePoint:m,normPrivateKeyToScalar:M,weierstrassEquation:S,isWithinCurveOrder:O}=function Os(t){const n=function Ns(t){const n=zi(t);Un(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:i}=n;if(e){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof e||"bigint"!=typeof e.beta||"function"!=typeof e.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}(t),{Fp:e}=n,r=n.toBytes||((U,I,j)=>{const F=I.toAffine();return an(Uint8Array.from([4]),e.toBytes(F.x),e.toBytes(F.y))}),i=n.fromBytes||(U=>{const I=U.subarray(1);return{x:e.fromBytes(I.subarray(0,e.BYTES)),y:e.fromBytes(I.subarray(e.BYTES,2*e.BYTES))}});function s(U){const{a:I,b:j}=n,F=e.sqr(U),W=e.mul(F,U);return e.add(e.add(W,e.mul(U,I)),j)}if(!e.eql(e.sqr(n.Gy),s(n.Gx)))throw new Error("bad generator point: equation left != right");function u(U){return"bigint"==typeof U&&Dt<U&&U<n.n}function d(U){if(!u(U))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function p(U){const{allowedPrivateKeyLengths:I,nByteLength:j,wrapPrivateKey:F,n:W}=n;if(I&&"bigint"!=typeof U){if(U instanceof Uint8Array&&(U=vn(U)),"string"!=typeof U||!I.includes(U.length))throw new Error("Invalid key");U=U.padStart(2*j,"0")}let Z;try{Z="bigint"==typeof U?U:At(Et("private key",U,j))}catch{throw new Error(`private key must be ${j} bytes, hex or bigint, not ${typeof U}`)}return F&&(Z=_t(Z,W)),d(Z),Z}const m=new Map;function M(U){if(!(U instanceof S))throw new Error("ProjectivePoint expected")}class S{constructor(I,j,F){if(this.px=I,this.py=j,this.pz=F,null==I||!e.isValid(I))throw new Error("x required");if(null==j||!e.isValid(j))throw new Error("y required");if(null==F||!e.isValid(F))throw new Error("z required")}static fromAffine(I){const{x:j,y:F}=I||{};if(!I||!e.isValid(j)||!e.isValid(F))throw new Error("invalid affine point");if(I instanceof S)throw new Error("projective point not allowed");const W=Z=>e.eql(Z,e.ZERO);return W(j)&&W(F)?S.ZERO:new S(j,F,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const j=e.invertBatch(I.map(F=>F.pz));return I.map((F,W)=>F.toAffine(j[W])).map(S.fromAffine)}static fromHex(I){const j=S.fromAffine(i(Et("pointHex",I)));return j.assertValidity(),j}static fromPrivateKey(I){return S.BASE.multiply(p(I))}_setWindowSize(I){this._WINDOW_SIZE=I,m.delete(this)}assertValidity(){if(this.is0()){if(n.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:I,y:j}=this.toAffine();if(!e.isValid(I)||!e.isValid(j))throw new Error("bad point: x or y not FE");const F=e.sqr(j),W=s(I);if(!e.eql(F,W))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(e.isOdd)return!e.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){M(I);const{px:j,py:F,pz:W}=this,{px:Z,py:V,pz:J}=I,q=e.eql(e.mul(j,J),e.mul(Z,W)),Y=e.eql(e.mul(F,J),e.mul(V,W));return q&&Y}negate(){return new S(this.px,e.neg(this.py),this.pz)}double(){const{a:I,b:j}=n,F=e.mul(j,or),{px:W,py:Z,pz:V}=this;let J=e.ZERO,q=e.ZERO,Y=e.ZERO,Q=e.mul(W,W),X=e.mul(Z,Z),ge=e.mul(V,V),ie=e.mul(W,Z);return ie=e.add(ie,ie),Y=e.mul(W,V),Y=e.add(Y,Y),J=e.mul(I,Y),q=e.mul(F,ge),q=e.add(J,q),J=e.sub(X,q),q=e.add(X,q),q=e.mul(J,q),J=e.mul(ie,J),Y=e.mul(F,Y),ge=e.mul(I,ge),ie=e.sub(Q,ge),ie=e.mul(I,ie),ie=e.add(ie,Y),Y=e.add(Q,Q),Q=e.add(Y,Q),Q=e.add(Q,ge),Q=e.mul(Q,ie),q=e.add(q,Q),ge=e.mul(Z,V),ge=e.add(ge,ge),Q=e.mul(ge,ie),J=e.sub(J,Q),Y=e.mul(ge,X),Y=e.add(Y,Y),Y=e.add(Y,Y),new S(J,q,Y)}add(I){M(I);const{px:j,py:F,pz:W}=this,{px:Z,py:V,pz:J}=I;let q=e.ZERO,Y=e.ZERO,Q=e.ZERO;const X=n.a,ge=e.mul(n.b,or);let ie=e.mul(j,Z),ye=e.mul(F,V),_e=e.mul(W,J),Ae=e.add(j,F),G=e.add(Z,V);Ae=e.mul(Ae,G),G=e.add(ie,ye),Ae=e.sub(Ae,G),G=e.add(j,W);let K=e.add(Z,J);return G=e.mul(G,K),K=e.add(ie,_e),G=e.sub(G,K),K=e.add(F,W),q=e.add(V,J),K=e.mul(K,q),q=e.add(ye,_e),K=e.sub(K,q),Q=e.mul(X,G),q=e.mul(ge,_e),Q=e.add(q,Q),q=e.sub(ye,Q),Q=e.add(ye,Q),Y=e.mul(q,Q),ye=e.add(ie,ie),ye=e.add(ye,ie),_e=e.mul(X,_e),G=e.mul(ge,G),ye=e.add(ye,_e),_e=e.sub(ie,_e),_e=e.mul(X,_e),G=e.add(G,_e),ie=e.mul(ye,G),Y=e.add(Y,ie),ie=e.mul(K,G),q=e.mul(Ae,q),q=e.sub(q,ie),ie=e.mul(Ae,ye),Q=e.mul(K,Q),Q=e.add(Q,ie),new S(q,Y,Q)}subtract(I){return this.add(I.negate())}is0(){return this.equals(S.ZERO)}wNAF(I){return L.wNAFCached(this,m,I,j=>{const F=e.invertBatch(j.map(W=>W.pz));return j.map((W,Z)=>W.toAffine(F[Z])).map(S.fromAffine)})}multiplyUnsafe(I){const j=S.ZERO;if(I===Dt)return j;if(d(I),I===st)return this;const{endo:F}=n;if(!F)return L.unsafeLadder(this,I);let{k1neg:W,k1:Z,k2neg:V,k2:J}=F.splitScalar(I),q=j,Y=j,Q=this;for(;Z>Dt||J>Dt;)Z&st&&(q=q.add(Q)),J&st&&(Y=Y.add(Q)),Q=Q.double(),Z>>=st,J>>=st;return W&&(q=q.negate()),V&&(Y=Y.negate()),Y=new S(e.mul(Y.px,F.beta),Y.py,Y.pz),q.add(Y)}multiply(I){d(I);let F,W,j=I;const{endo:Z}=n;if(Z){const{k1neg:V,k1:J,k2neg:q,k2:Y}=Z.splitScalar(j);let{p:Q,f:X}=this.wNAF(J),{p:ge,f:ie}=this.wNAF(Y);Q=L.constTimeNegate(V,Q),ge=L.constTimeNegate(q,ge),ge=new S(e.mul(ge.px,Z.beta),ge.py,ge.pz),F=Q.add(ge),W=X.add(ie)}else{const{p:V,f:J}=this.wNAF(j);F=V,W=J}return S.normalizeZ([F,W])[0]}multiplyAndAddUnsafe(I,j,F){const W=S.BASE,Z=(J,q)=>q!==Dt&&q!==st&&J.equals(W)?J.multiply(q):J.multiplyUnsafe(q),V=Z(this,j).add(Z(I,F));return V.is0()?void 0:V}toAffine(I){const{px:j,py:F,pz:W}=this,Z=this.is0();null==I&&(I=Z?e.ONE:e.inv(W));const V=e.mul(j,I),J=e.mul(F,I),q=e.mul(W,I);if(Z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(q,e.ONE))throw new Error("invZ was invalid");return{x:V,y:J}}isTorsionFree(){const{h:I,isTorsionFree:j}=n;if(I===st)return!0;if(j)return j(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:j}=n;return I===st?this:j?j(S,this):this.multiplyUnsafe(n.h)}toRawBytes(I=!0){return this.assertValidity(),r(S,this,I)}toHex(I=!0){return vn(this.toRawBytes(I))}}S.BASE=new S(n.Gx,n.Gy,e.ONE),S.ZERO=new S(e.ZERO,e.ONE,e.ZERO);const O=n.nBitLength,L=function Bs(t,n){const e=(i,s)=>{const u=s.negate();return i?u:s},r=i=>({windows:Math.ceil(n/i)+1,windowSize:2**(i-1)});return{constTimeNegate:e,unsafeLadder(i,s){let u=t.ZERO,d=i;for(;s>Ps;)s&Lr&&(u=u.add(d)),d=d.double(),s>>=Lr;return u},precomputeWindow(i,s){const{windows:u,windowSize:d}=r(s),p=[];let m=i,M=m;for(let S=0;S<u;S++){M=m,p.push(M);for(let O=1;O<d;O++)M=M.add(m),p.push(M);m=M.double()}return p},wNAF(i,s,u){const{windows:d,windowSize:p}=r(i);let m=t.ZERO,M=t.BASE;const S=BigInt(2**i-1),O=2**i,L=BigInt(i);for(let U=0;U<d;U++){const I=U*p;let j=Number(u&S);u>>=L,j>p&&(j-=O,u+=Lr);const F=I,W=I+Math.abs(j)-1,V=j<0;0===j?M=M.add(e(U%2!=0,s[F])):m=m.add(e(V,s[W]))}return{p:m,f:M}},wNAFCached(i,s,u,d){const p=i._WINDOW_SIZE||1;let m=s.get(i);return m||(m=this.precomputeWindow(i,p),1!==p&&s.set(i,d(m))),this.wNAF(p,m,u)}}}(S,n.endo?Math.ceil(O/2):O);return{CURVE:n,ProjectivePoint:S,normPrivateKeyToScalar:p,weierstrassEquation:s,isWithinCurveOrder:u}}({...n,toBytes(G,K,de){const be=K.toAffine(),re=e.toBytes(be.x),Me=an;return de?Me(Uint8Array.from([K.hasEvenY()?2:3]),re):Me(Uint8Array.from([4]),re,e.toBytes(be.y))},fromBytes(G){const K=G.length,de=G[0],be=G.subarray(1);if(K!==i||2!==de&&3!==de){if(K===s&&4===de)return{x:e.fromBytes(be.subarray(0,e.BYTES)),y:e.fromBytes(be.subarray(e.BYTES,2*e.BYTES))};throw new Error(`Point of length ${K} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const re=At(be);if(!function u(G){return Dt<G&&G<e.ORDER}(re))throw new Error("Point is not on curve");const Me=S(re);let Re=e.sqrt(Me);return!(1&~de)!=((Re&st)===st)&&(Re=e.neg(Re)),{x:re,y:Re}}}}),L=G=>vn(en(G,n.nByteLength));function U(G){return G>r>>st}const j=(G,K,de)=>At(G.slice(K,de));class F{constructor(K,de,be){this.r=K,this.s=de,this.recovery=be,this.assertValidity()}static fromCompact(K){const de=n.nByteLength;return K=Et("compactSignature",K,2*de),new F(j(K,0,de),j(K,de,2*de))}static fromDER(K){const{r:de,s:be}=ln.toSig(Et("DER",K));return new F(de,be)}assertValidity(){if(!O(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!O(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(K){return new F(this.r,this.s,K)}recoverPublicKey(K){const{r:de,s:be,recovery:re}=this,Me=Y(Et("msgHash",K));if(null==re||![0,1,2,3].includes(re))throw new Error("recovery id invalid");const Re=2===re||3===re?de+n.n:de;if(Re>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const xt=m.fromHex((1&re?"03":"02")+L(Re)),kt=p(Re),Pt=d(-Me*kt),Ot=d(be*kt),St=m.BASE.multiplyAndAddUnsafe(xt,Pt,Ot);if(!St)throw new Error("point at infinify");return St.assertValidity(),St}hasHighS(){return U(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return yn(this.toDERHex())}toDERHex(){return ln.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return yn(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}const W={isValidPrivateKey(G){try{return M(G),!0}catch{return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{const K=function Rs(t,n,e=!1){const r=(t=Et("privateHash",t)).length,i=Ur(n).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return _t(e?Rr(t):At(t),n-He)+He}(n.randomBytes(e.BYTES+8),r);return en(K,n.nByteLength)},precompute:(G=8,K=m.BASE)=>(K._setWindowSize(G),K.multiply(BigInt(3)),K)};function V(G){const K=G instanceof Uint8Array,de="string"==typeof G,be=(K||de)&&G.length;return K?be===i||be===s:de?be===2*i||be===2*s:G instanceof m}const q=n.bits2int||function(G){const K=At(G),de=8*G.length-n.nBitLength;return de>0?K>>BigInt(de):K},Y=n.bits2int_modN||function(G){return d(q(G))},Q=Pr(n.nBitLength);function X(G){if("bigint"!=typeof G)throw new Error("bigint expected");if(!(Dt<=G&&G<Q))throw new Error(`bigint expected < 2^${n.nBitLength}`);return en(G,n.nByteLength)}const ie={lowS:n.lowS,prehash:!1},ye={lowS:n.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function Z(G,K=!0){return m.fromPrivateKey(G).toRawBytes(K)},getSharedSecret:function J(G,K,de=!0){if(V(G))throw new Error("first arg must be private key");if(!V(K))throw new Error("second arg must be public key");return m.fromHex(K).multiply(M(G)).toRawBytes(de)},sign:function _e(G,K,de=ie){const{seed:be,k2sig:re}=function ge(G,K,de=ie){if(["recovered","canonical"].some(Tt=>Tt in de))throw new Error("sign() legacy options not supported");const{hash:be,randomBytes:re}=n;let{lowS:Me,prehash:Re,extraEntropy:Ie}=de;null==Me&&(Me=!0),G=Et("msgHash",G),Re&&(G=Et("prehashed msgHash",be(G)));const xt=Y(G),kt=M(K),Pt=[X(kt),X(xt)];if(null!=Ie){const Tt=!0===Ie?re(e.BYTES):Ie;Pt.push(Et("extraEntropy",Tt,e.BYTES))}const Ot=an(...Pt),St=xt;return{seed:Ot,k2sig:function Gt(Tt){const Mn=q(Tt);if(!O(Mn))return;const ps=p(Mn),zt=m.BASE.multiply(Mn).toAffine(),kn=d(zt.x);if(kn===Dt)return;const Ar=d(ps*d(St+kn*kt));if(Ar===Dt)return;let gs=(zt.x===kn?0:2)|Number(zt.y&st),ms=Ar;return Me&&U(Ar)&&(ms=function I(G){return U(G)?d(-G):G}(Ar),gs^=1),new F(kn,ms,gs)}}}(G,K,de);return Hi(n.hash.outputLen,n.nByteLength,n.hmac)(be,re)},verify:function Ae(G,K,de,be=ye){const re=G;if(K=Et("msgHash",K),de=Et("publicKey",de),"strict"in be)throw new Error("options.strict was renamed to lowS");const{lowS:Me,prehash:Re}=be;let Ie,xt;try{if("string"==typeof re||re instanceof Uint8Array)try{Ie=F.fromDER(re)}catch(zt){if(!(zt instanceof ln.Err))throw zt;Ie=F.fromCompact(re)}else{if("object"!=typeof re||"bigint"!=typeof re.r||"bigint"!=typeof re.s)throw new Error("PARSE");{const{r:zt,s:kn}=re;Ie=new F(zt,kn)}}xt=m.fromHex(de)}catch(zt){if("PARSE"===zt.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Me&&Ie.hasHighS())return!1;Re&&(K=n.hash(K));const{r:kt,s:Pt}=Ie,Ot=Y(K),St=p(Pt),Gt=d(Ot*St),Tt=d(kt*St),Mn=m.BASE.multiplyAndAddUnsafe(xt,Gt,Tt)?.toAffine();return!!Mn&&d(Mn.x)===kt},ProjectivePoint:m,Signature:F,utils:W}}BigInt(4);class Yi extends An{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,Le.hash(n);const r=De(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?n.create().update(r).digest():r);for(let u=0;u<s.length;u++)s[u]^=54;this.iHash.update(s),this.oHash=n.create();for(let u=0;u<s.length;u++)s[u]^=106;this.oHash.update(s),s.fill(0)}update(n){return Le.exists(this),this.iHash.update(n),this}digestInto(n){Le.exists(this),Le.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:s,blockLen:u,outputLen:d}=this;return n.finished=i,n.destroyed=s,n.blockLen=u,n.outputLen=d,n.oHash=e._cloneInto(n.oHash),n.iHash=r._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wn=(t,n,e)=>new Yi(t,n).update(e).digest();function Ws(t){return{hash:t,hmac:(n,...e)=>wn(t,n,$e(...e)),randomBytes:Xt}}wn.create=(t,n)=>new Yi(t,n);const sr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ar=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ki=BigInt(1),lr=BigInt(2),Zi=(t,n)=>(t+n/lr)/n;function Xi(t){const n=sr,e=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),u=BigInt(23),d=BigInt(44),p=BigInt(88),m=t*t*t%n,M=m*m*t%n,S=Ut(M,e,n)*M%n,O=Ut(S,e,n)*M%n,L=Ut(O,lr,n)*m%n,U=Ut(L,i,n)*L%n,I=Ut(U,s,n)*U%n,j=Ut(I,d,n)*I%n,F=Ut(j,p,n)*j%n,W=Ut(F,d,n)*I%n,Z=Ut(W,e,n)*M%n,V=Ut(Z,u,n)*U%n,J=Ut(V,r,n)*m%n,q=Ut(J,lr,n);if(!Dr.eql(Dr.sqr(q),t))throw new Error("Cannot find square root");return q}const Dr=function Is(t,n,e=!1,r={}){if(t<=bt)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Ur(t,n);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=function ks(t){if(t%Nr===bs){const n=(t+He)/Nr;return function(r,i){const s=r.pow(i,n);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Gi===qi){const n=(t-qi)/Gi;return function(r,i){const s=r.mul(i,tn),u=r.pow(s,n),d=r.mul(i,u),p=r.mul(r.mul(d,tn),u),m=r.mul(d,r.sub(p,r.ONE));if(!r.eql(r.sqr(m),i))throw new Error("Cannot find square root");return m}}return function Ms(t){const n=(t-He)/tn;let e,r,i;for(e=t-He,r=0;e%tn===bt;e/=tn,r++);for(i=tn;i<t&&Es(i,n,t)!==t-He;i++);if(1===r){const u=(t+He)/Nr;return function(p,m){const M=p.pow(m,u);if(!p.eql(p.sqr(M),m))throw new Error("Cannot find square root");return M}}const s=(e+He)/tn;return function(d,p){if(d.pow(p,n)===d.neg(d.ONE))throw new Error("Cannot find square root");let m=r,M=d.pow(d.mul(d.ONE,i),e),S=d.pow(p,s),O=d.pow(p,e);for(;!d.eql(O,d.ONE);){if(d.eql(O,d.ZERO))return d.ZERO;let L=1;for(let I=d.sqr(O);L<m&&!d.eql(I,d.ONE);L++)I=d.sqr(I);const U=d.pow(M,He<<BigInt(m-L-1));M=d.sqr(U),S=d.mul(S,U),O=d.mul(O,M),m=L}return S}}(t)}(t),d=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Pr(i),ZERO:bt,ONE:He,create:p=>_t(p,t),isValid:p=>{if("bigint"!=typeof p)throw new Error("Invalid field element: expected bigint, got "+typeof p);return bt<=p&&p<t},is0:p=>p===bt,isOdd:p=>(p&He)===He,neg:p=>_t(-p,t),eql:(p,m)=>p===m,sqr:p=>_t(p*p,t),add:(p,m)=>_t(p+m,t),sub:(p,m)=>_t(p-m,t),mul:(p,m)=>_t(p*m,t),pow:(p,m)=>function Cs(t,n,e){if(e<bt)throw new Error("Expected power > 0");if(e===bt)return t.ONE;if(e===He)return n;let r=t.ONE,i=n;for(;e>bt;)e&He&&(r=t.mul(r,i)),i=t.sqr(i),e>>=He;return r}(d,p,m),div:(p,m)=>_t(p*ir(m,t),t),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>ir(p,t),sqrt:r.sqrt||(p=>u(d,p)),invertBatch:p=>function Ts(t,n){const e=new Array(n.length),r=n.reduce((s,u,d)=>t.is0(u)?s:(e[d]=s,t.mul(s,u)),t.ONE),i=t.inv(r);return n.reduceRight((s,u,d)=>t.is0(u)?s:(e[d]=t.mul(s,e[d]),t.mul(s,u)),i),e}(d,p),cmov:(p,m,M)=>M?m:p,toBytes:p=>e?Fi(p,s):en(p,s),fromBytes:p=>{if(p.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${p.length}`);return e?Rr(p):At(p)}});return Object.freeze(d)}(sr,void 0,void 0,{sqrt:Xi}),bn=function Vs(t,n){const e=r=>js({...t,...Ws(r)});return Object.freeze({...e(n),create:e})}({a:BigInt(0),b:BigInt(7),Fp:Dr,n:ar,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const n=ar,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ki*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,u=BigInt("0x100000000000000000000000000000000"),d=Zi(s*t,n),p=Zi(-r*t,n);let m=_t(t-d*e-p*i,n),M=_t(-d*r-p*s,n);const S=m>u,O=M>u;if(S&&(m=n-m),O&&(M=n-M),m>u||M>u)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:S,k1:m,k2neg:O,k2:M}}}},It),cr=BigInt(0),Qi=t=>"bigint"==typeof t&&cr<t&&t<sr,Ji={};function ur(t,...n){let e=Ji[t];if(void 0===e){const r=It(Uint8Array.from(t,i=>i.charCodeAt(0)));e=an(r,r),Ji[t]=e}return It(an(e,...n))}const jr=t=>t.toRawBytes(!0).slice(1),Fr=t=>en(t,32),$r=t=>_t(t,sr),On=t=>_t(t,ar),Hr=bn.ProjectivePoint;function qr(t){let n=bn.utils.normPrivateKeyToScalar(t),e=Hr.fromPrivateKey(n);return{scalar:e.hasEvenY()?n:On(-n),bytes:jr(e)}}function eo(t){if(!Qi(t))throw new Error("bad x: need 0 < x < p");const n=$r(t*t);let r=Xi($r(n*t+BigInt(7)));r%lr!==cr&&(r=$r(-r));const i=new Hr(t,r,Ki);return i.assertValidity(),i}function to(...t){return On(At(ur("BIP0340/challenge",...t)))}function no(t,n,e){const r=Et("signature",t,64),i=Et("message",n),s=Et("publicKey",e,32);try{const u=eo(At(s)),d=At(r.subarray(0,32));if(!Qi(d))return!1;const p=At(r.subarray(32,64));if(!(t=>"bigint"==typeof t&&cr<t&&t<ar)(p))return!1;const m=to(Fr(d),jr(u),i),M=((t,n,e)=>Hr.BASE.multiplyAndAddUnsafe(t,n,e))(u,p,On(-m));return!(!M||!M.hasEvenY()||M.toAffine().x!==d)}catch{return!1}}const _n={getPublicKey:function Zs(t){return qr(t).bytes},sign:function Xs(t,n,e=Xt(32)){const r=Et("message",t),{bytes:i,scalar:s}=qr(n),u=Et("auxRand",e,32),d=Fr(s^At(ur("BIP0340/aux",u))),p=ur("BIP0340/nonce",d,i,r),m=On(At(p));if(m===cr)throw new Error("sign failed: k is zero");const{bytes:M,scalar:S}=qr(m),O=to(M,i,r),L=new Uint8Array(64);if(L.set(M,0),L.set(Fr(On(S+O*s)),32),!no(L,r,i))throw new Error("sign: Invalid signature produced");return L},verify:no,utils:{randomPrivateKey:bn.utils.randomPrivateKey,lift_x:eo,pointToBytes:jr,numberToBytesBE:en,bytesToNumberBE:At,taggedHash:ur,mod:_t}};function cn(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function jt(...t){const n=(i,s)=>u=>i(s(u));return{encode:Array.from(t).reverse().reduce((i,s)=>i?n(i,s.encode):s.encode,void 0),decode:t.reduce((i,s)=>i?n(i,s.decode):s.decode,void 0)}}function Ft(t){return{encode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("alphabet.encode input should be an array of numbers");return n.map(e=>{if(cn(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]})},decode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("alphabet.decode input should be array of strings");return n.map(e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const r=t.indexOf(e);if(-1===r)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return r})}}}function $t(t=""){if("string"!=typeof t)throw new Error("join separator should be string");return{encode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("join.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return n.join(t)},decode:n=>{if("string"!=typeof n)throw new Error("join.decode input should be string");return n.split(t)}}}function Dn(t,n="="){if(cn(t),"string"!=typeof n)throw new Error("padding chr should be string");return{encode(e){if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("padding.encode input should be array of strings");for(let r of e)if("string"!=typeof r)throw new Error(`padding.encode: non-string input=${r}`);for(;e.length*t%8;)e.push(n);return e},decode(e){if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("padding.encode input should be array of strings");for(let i of e)if("string"!=typeof i)throw new Error(`padding.decode: non-string input=${i}`);let r=e.length;if(r*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&e[r-1]===n;r--)if(!((r-1)*t%8))throw new Error("Invalid padding: string has too much padding");return e.slice(0,r)}}}function ro(t){if("function"!=typeof t)throw new Error("normalize fn should be function");return{encode:n=>n,decode:n=>t(n)}}function io(t,n,e){if(n<2)throw new Error(`convertRadix: wrong from=${n}, base cannot be less than 2`);if(e<2)throw new Error(`convertRadix: wrong to=${e}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let r=0;const i=[],s=Array.from(t);for(s.forEach(u=>{if(cn(u),u<0||u>=n)throw new Error(`Wrong integer: ${u}`)});;){let u=0,d=!0;for(let p=r;p<s.length;p++){const m=s[p],M=n*u+m;if(!Number.isSafeInteger(M)||n*u/n!==u||M-m!=n*u)throw new Error("convertRadix: carry overflow");if(u=M%e,s[p]=Math.floor(M/e),!Number.isSafeInteger(s[p])||s[p]*e+u!==M)throw new Error("convertRadix: carry overflow");d&&(s[p]?d=!1:r=p)}if(i.push(u),d)break}for(let u=0;u<t.length-1&&0===t[u];u++)i.push(0);return i.reverse()}const oo=(t,n)=>n?oo(n,t%n):t,dr=(t,n)=>t+(n-oo(t,n));function Gr(t,n,e,r){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(e<=0||e>32)throw new Error(`convertRadix2: wrong to=${e}`);if(dr(n,e)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${e} carryBits=${dr(n,e)}`);let i=0,s=0;const u=2**e-1,d=[];for(const p of t){if(cn(p),p>=2**n)throw new Error(`convertRadix2: invalid data word=${p} from=${n}`);if(i=i<<n|p,s+n>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${n}`);for(s+=n;s>=e;s-=e)d.push((i>>s-e&u)>>>0);i&=2**s-1}if(i=i<<e-s&u,!r&&s>=n)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&d.push(i>>>0),d}function Wt(t,n=!1){if(cn(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(dr(8,t)>32||dr(t,8)>32)throw new Error("radix2: carry overflow");return{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Gr(Array.from(e),8,t,!n)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Gr(e,t,8,n))}}}function ao(t){if("function"!=typeof t)throw new Error("unsafeWrapper fn should be function");return function(...n){try{return t.apply(null,n)}catch{}}}jt(Wt(4),Ft("0123456789ABCDEF"),$t("")),jt(Wt(5),Ft("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Dn(5),$t(""));const Vt=(jt(Wt(5),Ft("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Dn(5),$t("")),jt(Wt(5),Ft("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),$t(""),ro(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),jt(Wt(6),Ft("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Dn(6),$t(""))),zr=(jt(Wt(6),Ft("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Dn(6),$t("")),t=>jt(function so(t){return cn(t),{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return io(Array.from(n),256,t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(io(n,t,256))}}}(58),Ft(t),$t(""))),Wr=(zr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),zr("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),zr("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),jt(Ft("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),$t(""))),uo=[996825010,642813549,513874426,1027748829,705979059];function jn(t){const n=t>>25;let e=(33554431&t)<<5;for(let r=0;r<uo.length;r++)1==(n>>r&1)&&(e^=uo[r]);return e}function fo(t,n,e=1){const r=t.length;let i=1;for(let s=0;s<r;s++){const u=t.charCodeAt(s);if(u<33||u>126)throw new Error(`Invalid prefix (${t})`);i=jn(i)^u>>5}i=jn(i);for(let s=0;s<r;s++)i=jn(i)^31&t.charCodeAt(s);for(let s of n)i=jn(i)^s;for(let s=0;s<6;s++)i=jn(i);return i^=e,Wr.encode(Gr([i%2**30],30,5,!1))}function ho(t){const n="bech32"===t?1:734539939,e=Wt(5),r=e.decode,i=e.encode,s=ao(r);function d(M,S=90){if("string"!=typeof M)throw new Error("bech32.decode input should be string, not "+typeof M);if(M.length<8||!1!==S&&M.length>S)throw new TypeError(`Wrong string length: ${M.length} (${M}). Expected (8..${S})`);const O=M.toLowerCase();if(M!==O&&M!==M.toUpperCase())throw new Error("String must be lowercase or uppercase");const L=(M=O).lastIndexOf("1");if(0===L||-1===L)throw new Error('Letter "1" must be present between prefix and data only');const U=M.slice(0,L),I=M.slice(L+1);if(I.length<6)throw new Error("Data must be at least 6 characters long");const j=Wr.decode(I).slice(0,-6),F=fo(U,j,n);if(!I.endsWith(F))throw new Error(`Invalid checksum in ${M}: expected "${F}"`);return{prefix:U,words:j}}return{encode:function u(M,S,O=90){if("string"!=typeof M)throw new Error("bech32.encode prefix should be string, not "+typeof M);if(!Array.isArray(S)||S.length&&"number"!=typeof S[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof S);const L=M.length+7+S.length;if(!1!==O&&L>O)throw new TypeError(`Length ${L} exceeds limit ${O}`);return`${M=M.toLowerCase()}1${Wr.encode(S)}${fo(M,S,n)}`},decode:d,decodeToBytes:function m(M){const{prefix:S,words:O}=d(M,!1);return{prefix:S,words:O,bytes:r(O)}},decodeUnsafe:ao(d),fromWords:r,fromWordsUnsafe:s,toWords:i}}const xn=ho("bech32");ho("bech32m"),jt(Wt(4),Ft("0123456789abcdef"),$t(""),ro(t=>{if("string"!=typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));var go=k(5693),Vr=k(9673),ia=k(9608);const Ht=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Zr(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function Xr(t){if("string"==typeof t&&(t=Zr(t)),!(t=>t instanceof Uint8Array)(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function Qr(t,n){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof n&&t.length!==n)throw new Error(`Uint8Array length ${n} expected`)}function Jr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function mo(t,...n){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(t.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${t.length}`)}const Rt={number:Jr,bool:function ua(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:mo,hash:function da(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Jr(t.outputLen),Jr(t.blockLen)},exists:function fa(t,n=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(n&&t.finished)throw new Error("Hash#digest() has already been called")},output:function ha(t,n){mo(t);const e=n.outputLen;if(t.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}},Mt=(t,n)=>255&t[n++]|(255&t[n++])<<8;class pa{constructor(n){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Qr(n=Xr(n),32);const e=Mt(n,0),r=Mt(n,2),i=Mt(n,4),s=Mt(n,6),u=Mt(n,8),d=Mt(n,10),p=Mt(n,12),m=Mt(n,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|u<<12),this.r[5]=u>>>1&8190,this.r[6]=8191&(u>>>14|d<<2),this.r[7]=8065&(d>>>11|p<<5),this.r[8]=8191&(p>>>8|m<<8),this.r[9]=m>>>5&127;for(let M=0;M<8;M++)this.pad[M]=Mt(n,16+2*M)}process(n,e,r=!1){const i=r?0:2048,{h:s,r:u}=this,d=u[0],p=u[1],m=u[2],M=u[3],S=u[4],O=u[5],L=u[6],U=u[7],I=u[8],j=u[9],F=Mt(n,e+0),W=Mt(n,e+2),Z=Mt(n,e+4),V=Mt(n,e+6),J=Mt(n,e+8),q=Mt(n,e+10),Y=Mt(n,e+12),Q=Mt(n,e+14);let X=s[0]+(8191&F),ge=s[1]+(8191&(F>>>13|W<<3)),ie=s[2]+(8191&(W>>>10|Z<<6)),ye=s[3]+(8191&(Z>>>7|V<<9)),_e=s[4]+(8191&(V>>>4|J<<12)),Ae=s[5]+(J>>>1&8191),G=s[6]+(8191&(J>>>14|q<<2)),K=s[7]+(8191&(q>>>11|Y<<5)),de=s[8]+(8191&(Y>>>8|Q<<8)),be=s[9]+(Q>>>5|i),re=0,Me=re+X*d+ge*(5*j)+ie*(5*I)+ye*(5*U)+_e*(5*L);re=Me>>>13,Me&=8191,Me+=Ae*(5*O)+G*(5*S)+K*(5*M)+de*(5*m)+be*(5*p),re+=Me>>>13,Me&=8191;let Re=re+X*p+ge*d+ie*(5*j)+ye*(5*I)+_e*(5*U);re=Re>>>13,Re&=8191,Re+=Ae*(5*L)+G*(5*O)+K*(5*S)+de*(5*M)+be*(5*m),re+=Re>>>13,Re&=8191;let Ie=re+X*m+ge*p+ie*d+ye*(5*j)+_e*(5*I);re=Ie>>>13,Ie&=8191,Ie+=Ae*(5*U)+G*(5*L)+K*(5*O)+de*(5*S)+be*(5*M),re+=Ie>>>13,Ie&=8191;let xt=re+X*M+ge*m+ie*p+ye*d+_e*(5*j);re=xt>>>13,xt&=8191,xt+=Ae*(5*I)+G*(5*U)+K*(5*L)+de*(5*O)+be*(5*S),re+=xt>>>13,xt&=8191;let kt=re+X*S+ge*M+ie*m+ye*p+_e*d;re=kt>>>13,kt&=8191,kt+=Ae*(5*j)+G*(5*I)+K*(5*U)+de*(5*L)+be*(5*O),re+=kt>>>13,kt&=8191;let Pt=re+X*O+ge*S+ie*M+ye*m+_e*p;re=Pt>>>13,Pt&=8191,Pt+=Ae*d+G*(5*j)+K*(5*I)+de*(5*U)+be*(5*L),re+=Pt>>>13,Pt&=8191;let Ot=re+X*L+ge*O+ie*S+ye*M+_e*m;re=Ot>>>13,Ot&=8191,Ot+=Ae*p+G*d+K*(5*j)+de*(5*I)+be*(5*U),re+=Ot>>>13,Ot&=8191;let St=re+X*U+ge*L+ie*O+ye*S+_e*M;re=St>>>13,St&=8191,St+=Ae*m+G*p+K*d+de*(5*j)+be*(5*I),re+=St>>>13,St&=8191;let Gt=re+X*I+ge*U+ie*L+ye*O+_e*S;re=Gt>>>13,Gt&=8191,Gt+=Ae*M+G*m+K*p+de*d+be*(5*j),re+=Gt>>>13,Gt&=8191;let Tt=re+X*j+ge*I+ie*U+ye*L+_e*O;re=Tt>>>13,Tt&=8191,Tt+=Ae*S+G*M+K*m+de*p+be*d,re+=Tt>>>13,Tt&=8191,re=(re<<2)+re|0,re=re+Me|0,Me=8191&re,re>>>=13,Re+=re,s[0]=Me,s[1]=Re,s[2]=Ie,s[3]=xt,s[4]=kt,s[5]=Pt,s[6]=Ot,s[7]=St,s[8]=Gt,s[9]=Tt}finalize(){const{h:n,pad:e}=this,r=new Uint16Array(10);let i=n[1]>>>13;n[1]&=8191;for(let d=2;d<10;d++)n[d]+=i,i=n[d]>>>13,n[d]&=8191;n[0]+=5*i,i=n[0]>>>13,n[0]&=8191,n[1]+=i,i=n[1]>>>13,n[1]&=8191,n[2]+=i,r[0]=n[0]+5,i=r[0]>>>13,r[0]&=8191;for(let d=1;d<10;d++)r[d]=n[d]+i,i=r[d]>>>13,r[d]&=8191;r[9]-=8192;let s=(1^i)-1;for(let d=0;d<10;d++)r[d]&=s;s=~s;for(let d=0;d<10;d++)n[d]=n[d]&s|r[d];n[0]=65535&(n[0]|n[1]<<13),n[1]=65535&(n[1]>>>3|n[2]<<10),n[2]=65535&(n[2]>>>6|n[3]<<7),n[3]=65535&(n[3]>>>9|n[4]<<4),n[4]=65535&(n[4]>>>12|n[5]<<1|n[6]<<14),n[5]=65535&(n[6]>>>2|n[7]<<11),n[6]=65535&(n[7]>>>5|n[8]<<8),n[7]=65535&(n[8]>>>8|n[9]<<5);let u=n[0]+e[0];n[0]=65535&u;for(let d=1;d<8;d++)u=(n[d]+e[d]|0)+(u>>>16)|0,n[d]=65535&u}update(n){Rt.exists(this);const{buffer:e,blockLen:r}=this,i=(n=Xr(n)).length;for(let s=0;s<i;){const u=Math.min(r-this.pos,i-s);if(u!==r)e.set(n.subarray(s,s+u),this.pos),this.pos+=u,s+=u,this.pos===r&&(this.process(e,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(n,s)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(n){Rt.exists(this),Rt.output(n,this),this.finished=!0;const{buffer:e,h:r}=this;let{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let s=0;for(let u=0;u<8;u++)n[s++]=r[u]>>>0,n[s++]=r[u]>>>8;return n}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const r=n.slice(0,e);return this.destroy(),r}}!function ga(t){const n=(r,i)=>t(i).update(Xr(r)).digest(),e=t(new Uint8Array(32));n.outputLen=e.outputLen,n.blockLen=e.blockLen,n.create=r=>t(r)}(t=>new pa(t));const ma=Zr("expand 16-byte k"),va=Zr("expand 32-byte k"),ya=Ht(ma),wa=Ht(va),vo=t=>!(t.byteOffset%4),pe=(t,n)=>t<<n|t>>>32-n;const yo=(t=>{const{core:n,rounds:e,counterRight:r,counterLen:i,allow128bitKeys:s,extendNonceFn:u,blockLen:d}=function la(t,n){if(void 0!==n&&("object"!=typeof n||!(t=>"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object)(n)))throw new Error("options must be object or undefined");return Object.assign(t,n)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);Rt.number(i),Rt.number(e),Rt.number(d),Rt.bool(r),Rt.bool(s);const p=d/4;if(d%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(m,M,S,O,L=0)=>{if(Rt.bytes(m),Rt.bytes(M),Rt.bytes(S),O||(O=new Uint8Array(S.length)),Rt.bytes(O),Rt.number(L),L<0||L>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(O.length<S.length)throw new Error(`Salsa/ChaCha: output (${O.length}) is shorter than data (${S.length})`);const U=[];let I,j;if(32===m.length)I=m,j=wa;else{if(16!==m.length||!s)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${m.length}`);I=new Uint8Array(32),I.set(m),I.set(m,16),j=ya,U.push(I)}if(u){if(M.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");I=u(j,I,M.subarray(0,16),new Uint8Array(32)),U.push(I),M=M.subarray(16)}const F=16-i;if(M.length!==F)throw new Error(`Salsa/ChaCha: nonce must be ${F} or 16 bytes`);if(12!==F){const X=new Uint8Array(12);X.set(M,r?0:12-M.length),U.push(M=X)}const W=new Uint8Array(d),Z=Ht(W),V=Ht(I),J=Ht(M),q=vo(S)&&Ht(S),Y=vo(O)&&Ht(O);U.push(Z);const Q=S.length;for(let X=0,ge=L;X<Q;ge++){if(n(j,V,J,Z,ge,e),ge>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const ie=Math.min(d,Q-X);if(ie===d&&Y&&q){const ye=X/4;if(X%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let _e=0;_e<p;_e++)Y[ye+_e]=q[ye+_e]^Z[_e];X+=d}else{for(let ye=0;ye<ie;ye++)O[X+ye]=S[X+ye]^W[ye];X+=ie}}for(let X=0;X<U.length;X++)U[X].fill(0);return O}})({core:function $n(t,n,e,r,i,s=20){let u=t[0],d=t[1],p=t[2],m=t[3],M=n[0],S=n[1],O=n[2],L=n[3],U=n[4],I=n[5],j=n[6],F=n[7],W=i,Z=e[0],V=e[1],J=e[2],q=u,Y=d,Q=p,X=m,ge=M,ie=S,ye=O,_e=L,Ae=U,G=I,K=j,de=F,be=W,re=Z,Me=V,Re=J;for(let xt=0;xt<s;xt+=2)q=q+ge|0,be=pe(be^q,16),Ae=Ae+be|0,ge=pe(ge^Ae,12),q=q+ge|0,be=pe(be^q,8),Ae=Ae+be|0,ge=pe(ge^Ae,7),Y=Y+ie|0,re=pe(re^Y,16),G=G+re|0,ie=pe(ie^G,12),Y=Y+ie|0,re=pe(re^Y,8),G=G+re|0,ie=pe(ie^G,7),Q=Q+ye|0,Me=pe(Me^Q,16),K=K+Me|0,ye=pe(ye^K,12),Q=Q+ye|0,Me=pe(Me^Q,8),K=K+Me|0,ye=pe(ye^K,7),X=X+_e|0,Re=pe(Re^X,16),de=de+Re|0,_e=pe(_e^de,12),X=X+_e|0,Re=pe(Re^X,8),de=de+Re|0,_e=pe(_e^de,7),q=q+ie|0,Re=pe(Re^q,16),K=K+Re|0,ie=pe(ie^K,12),q=q+ie|0,Re=pe(Re^q,8),K=K+Re|0,ie=pe(ie^K,7),Y=Y+ye|0,be=pe(be^Y,16),de=de+be|0,ye=pe(ye^de,12),Y=Y+ye|0,be=pe(be^Y,8),de=de+be|0,ye=pe(ye^de,7),Q=Q+_e|0,re=pe(re^Q,16),Ae=Ae+re|0,_e=pe(_e^Ae,12),Q=Q+_e|0,re=pe(re^Q,8),Ae=Ae+re|0,_e=pe(_e^Ae,7),X=X+ge|0,Me=pe(Me^X,16),G=G+Me|0,ge=pe(ge^G,12),X=X+ge|0,Me=pe(Me^X,8),G=G+Me|0,ge=pe(ge^G,7);let Ie=0;r[Ie++]=u+q|0,r[Ie++]=d+Y|0,r[Ie++]=p+Q|0,r[Ie++]=m+X|0,r[Ie++]=M+ge|0,r[Ie++]=S+ie|0,r[Ie++]=O+ye|0,r[Ie++]=L+_e|0,r[Ie++]=U+Ae|0,r[Ie++]=I+G|0,r[Ie++]=j+K|0,r[Ie++]=F+de|0,r[Ie++]=W+be|0,r[Ie++]=Z+re|0,r[Ie++]=V+Me|0,r[Ie++]=J+Re|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),ei=new Uint8Array([0]),_o=new Uint8Array;var ka=Object.defineProperty,yt=(t,n)=>{for(var e in n)ka(t,e,{get:n[e],enumerable:!0})};function xo(){return Pe(_n.utils.randomPrivateKey())}function ti(t){return Pe(_n.getPublicKey(t))}yt({},{MessageNode:()=>Eo,MessageQueue:()=>Mo,insertEventIntoAscendingList:()=>Ca,insertEventIntoDescendingList:()=>Aa,normalizeURL:()=>ni,utf8Decoder:()=>qt,utf8Encoder:()=>Lt});var qt=new TextDecoder("utf-8"),Lt=new TextEncoder;function ni(t){let n=new URL(t);return n.pathname=n.pathname.replace(/\/+/g,"/"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),("80"===n.port&&"ws:"===n.protocol||"443"===n.port&&"wss:"===n.protocol)&&(n.port=""),n.searchParams.sort(),n.hash="",n.toString()}function Aa(t,n){let i,e=0,r=t.length-1,s=e;if(r<0)s=0;else if(n.created_at<t[r].created_at)s=r+1;else if(n.created_at>=t[e].created_at)s=e;else for(;;){if(r<=e+1){s=r;break}if(i=Math.floor(e+(r-e)/2),t[i].created_at>n.created_at)e=i;else{if(!(t[i].created_at<n.created_at)){s=i;break}r=i}}return t[s]?.id!==n.id?[...t.slice(0,s),n,...t.slice(s)]:t}function Ca(t,n){let i,e=0,r=t.length-1,s=e;if(r<0)s=0;else if(n.created_at>t[r].created_at)s=r+1;else if(n.created_at<=t[e].created_at)s=e;else for(;;){if(r<=e+1){s=r;break}if(i=Math.floor(e+(r-e)/2),t[i].created_at<n.created_at)e=i;else{if(!(t[i].created_at>n.created_at)){s=i;break}r=i}}return t[s]?.id!==n.id?[...t.slice(0,s),n,...t.slice(s)]:t}var Eo=class{_value;_next;get value(){return this._value}set value(t){this._value=t}get next(){return this._next}set next(t){this._next=t}constructor(t){this._value=t,this._next=null}},Mo=class{_first;_last;get first(){return this._first}set first(t){this._first=t}get last(){return this._last}set last(t){this._last=t}_size;get size(){return this._size}set size(t){this._size=t}constructor(){this._first=null,this._last=null,this._size=0}enqueue(t){const n=new Eo(t);return 0!==this._size&&this._last?(this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let t=this._first;return this._first=t.next,t.next=null,this._size--,t.value}},En=Symbol("verified");function Yt(t,n){const e=t;return e.pubkey=ti(n),e.id=Hn(e),e.sig=function ko(t,n){return Pe(_n.sign(Hn(t),n))}(e,n),e[En]=!0,e}function Hn(t){let n=It(Lt.encode(function Ra(t){if(!ri(t))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content])}(t)));return Pe(n)}var Pa=t=>t instanceof Object;function ri(t){if(!Pa(t)||"number"!=typeof t.kind||"string"!=typeof t.content||"number"!=typeof t.created_at||"string"!=typeof t.pubkey||!t.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(t.tags))return!1;for(let n=0;n<t.tags.length;n++){let e=t.tags[n];if(!Array.isArray(e))return!1;for(let r=0;r<e.length;r++)if("object"==typeof e[r])return!1}return!0}function pr(t){if("boolean"==typeof t[En])return t[En];const n=Hn(t);if(n!==t.id)return t[En]=!1;try{return t[En]=_n.verify(t.sig,n,t.pubkey)}catch{return t[En]=!1}}function Ba(t,n){if(t.ids&&-1===t.ids.indexOf(n.id)&&!t.ids.some(e=>n.id.startsWith(e))||t.kinds&&-1===t.kinds.indexOf(n.kind)||t.authors&&-1===t.authors.indexOf(n.pubkey)&&!t.authors.some(e=>n.pubkey.startsWith(e)))return!1;for(let e in t)if("#"===e[0]){let i=t[`#${e.slice(1)}`];if(i&&!n.tags.find(([s,u])=>s===e.slice(1)&&-1!==i.indexOf(u)))return!1}return!(t.since&&n.created_at<t.since||t.until&&n.created_at>t.until)}function gr(t,n){let e=n.length+3,r=t.indexOf(`"${n}":`)+e,i=t.slice(r).indexOf('"')+r+1;return t.slice(i,i+64)}function Ao(t,n){let e=n.length,r=t.indexOf(`"${n}":`)+e+3,i=t.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Co(t){let n=t.slice(0,22).indexOf('"EVENT"');if(-1===n)return null;let e=t.slice(n+7+1).indexOf('"');if(-1===e)return null;let r=n+7+1+e,i=t.slice(r+1,80).indexOf('"');return-1===i?null:t.slice(r+1,r+1+i)}function La(t,n){return n===gr(t,"id")}function Oa(t,n){return n===gr(t,"pubkey")}function Da(t,n){return n===Ao(t,"kind")}function Io(t,n={}){let{listTimeout:e=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=n;var s,M,u={},d={connect:[],disconnect:[],error:[],notice:[],auth:[]},p={},m={};function O(){return(O=(0,v.A)(function*(){return M||(M=new Promise((V,J)=>{try{s=new WebSocket(t)}catch(X){J(X)}s.onopen=()=>{d.connect.forEach(X=>X()),V()},s.onerror=()=>{M=void 0,d.error.forEach(X=>X()),J()},s.onclose=(0,v.A)(function*(){M=void 0,d.disconnect.forEach(X=>X())});let Y,q=new Mo;function Q(){if(0===q.size)return clearInterval(Y),void(Y=null);var X=q.dequeue();if(!X)return;let ge=Co(X);if(ge){let ie=u[ge];if(ie&&ie.alreadyHaveEvent&&ie.alreadyHaveEvent(gr(X,"id"),t))return}try{let ie=JSON.parse(X);switch(ie[0]){case"EVENT":{let G=ie[1],K=ie[2];return void(ri(K)&&u[G]&&(u[G].skipVerification||pr(K))&&function So(t,n){for(let e=0;e<t.length;e++)if(Ba(t[e],n))return!0;return!1}(u[G].filters,K)&&(p[G]?.event||[]).forEach(de=>de(K)))}case"COUNT":let ye=ie[1],_e=ie[2];return void(u[ye]&&(p[ye]?.count||[]).forEach(G=>G(_e)));case"EOSE":{let G=ie[1];return void(G in p&&(p[G].eose.forEach(K=>K()),p[G].eose=[]))}case"OK":{let G=ie[1],K=ie[2],de=ie[3]||"";if(G in m){let{resolve:be,reject:re}=m[G];K?be(null):re(new Error(de))}return}case"NOTICE":let Ae=ie[1];return void d.notice.forEach(G=>G(Ae));case"AUTH":{let G=ie[1];return void d.auth?.forEach(K=>K(G))}}}catch{return}}s.onmessage=X=>{q.enqueue(X.data),Y||(Y=setInterval(Q,0))}}))})).apply(this,arguments)}function L(){return 1===s?.readyState}function I(){return I=(0,v.A)(function*(){L()||(yield function S(){return O.apply(this,arguments)}())}),I.apply(this,arguments)}function j(V){return F.apply(this,arguments)}function F(){return(F=(0,v.A)(function*(V){let J=JSON.stringify(V);if(L()||(yield new Promise(q=>setTimeout(q,1e3)),L()))try{s.send(J)}catch(q){console.log(q)}})).apply(this,arguments)}const W=(V,{verb:J="REQ",skipVerification:q=!1,alreadyHaveEvent:Y=null,id:Q=Math.random().toString().slice(2)}={})=>{let X=Q;u[X]={id:X,filters:V,skipVerification:q,alreadyHaveEvent:Y},j([J,X,...V]);let ge={sub:(ie,ye={})=>W(ie||V,{skipVerification:ye.skipVerification||q,alreadyHaveEvent:ye.alreadyHaveEvent||Y,id:X}),unsub:()=>{delete u[X],delete p[X],j(["CLOSE",X])},on:(ie,ye)=>{p[X]=p[X]||{event:[],count:[],eose:[]},p[X][ie].push(ye)},off:(ie,ye)=>{let _e=p[X],Ae=_e[ie].indexOf(ye);Ae>=0&&_e[ie].splice(Ae,1)},get events(){return function Ro(t){return ii.apply(this,arguments)}(ge)}};return ge};function Z(V,J){return new Promise((q,Y)=>{if(!V.id)return void Y(new Error(`event ${V} has no id`));let Q=V.id;j([J,V]),m[Q]={resolve:q,reject:Y}})}return{url:t,sub:W,on:(V,J)=>{d[V].push(J),"connect"===V&&1===s?.readyState&&J()},off:(V,J)=>{let q=d[V].indexOf(J);-1!==q&&d[V].splice(q,1)},list:(V,J)=>new Promise(q=>{let Y=W(V,J),Q=[],X=setTimeout(()=>{Y.unsub(),q(Q)},e);Y.on("eose",()=>{Y.unsub(),clearTimeout(X),q(Q)}),Y.on("event",ge=>{Q.push(ge)})}),get:(V,J)=>new Promise(q=>{let Y=W([V],J),Q=setTimeout(()=>{Y.unsub(),q(null)},r);Y.on("event",X=>{Y.unsub(),clearTimeout(Q),q(X)})}),count:V=>new Promise(J=>{let q=W(V,{...W,verb:"COUNT"}),Y=setTimeout(()=>{q.unsub(),J(null)},i);q.on("count",Q=>{q.unsub(),clearTimeout(Y),J(Q)})}),publish:V=>(0,v.A)(function*(){yield Z(V,"EVENT")})(),auth:V=>(0,v.A)(function*(){yield Z(V,"AUTH")})(),connect:function U(){return I.apply(this,arguments)},close(){d={connect:[],disconnect:[],error:[],notice:[],auth:[]},p={},m={},s?.readyState===WebSocket.OPEN&&s.close()},get status(){return s?.readyState??3}}}function ii(){return(ii=(0,tt.A)(function*(t){let n;const e=[],r=i=>{n?(n(i),n=void 0):e.push(i)};t.on("event",r);try{for(;;)e.length>0?yield e.shift():yield yield(0,et.A)(new Promise(s=>{n=s}))}finally{t.off("event",r)}})).apply(this,arguments)}yt({},{getHex64:()=>gr,getInt:()=>Ao,getSubscriptionId:()=>Co,matchEventId:()=>La,matchEventKind:()=>Da,matchEventPubkey:()=>Oa});var oi={};yt(oi,{BECH32_REGEX:()=>Bo,decode:()=>qn,naddrEncode:()=>za,neventEncode:()=>Ga,noteEncode:()=>Ha,nprofileEncode:()=>qa,npubEncode:()=>$a,nrelayEncode:()=>Wa,nsecEncode:()=>Fa});var Po=5e3,Bo=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function qn(t){let{prefix:n,words:e}=xn.decode(t,Po),r=new Uint8Array(xn.fromWords(e));switch(n){case"nprofile":{let i=mr(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==i[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Pe(i[0][0]),relays:i[1]?i[1].map(s=>qt.decode(s)):[]}}}case"nevent":{let i=mr(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==i[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(i[2]&&32!==i[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(i[3]&&4!==i[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Pe(i[0][0]),relays:i[1]?i[1].map(s=>qt.decode(s)):[],author:i[2]?.[0]?Pe(i[2][0]):void 0,kind:i[3]?.[0]?parseInt(Pe(i[3][0]),16):void 0}}}case"naddr":{let i=mr(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!i[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==i[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!i[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==i[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:qt.decode(i[0][0]),pubkey:Pe(i[2][0]),kind:parseInt(Pe(i[3][0]),16),relays:i[1]?i[1].map(s=>qt.decode(s)):[]}}}case"nrelay":{let i=mr(r);if(!i[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:qt.decode(i[0][0])}}case"nsec":case"npub":case"note":return{type:n,data:Pe(r)};default:throw new Error(`unknown prefix ${n}`)}}function mr(t){let n={},e=t;for(;e.length>0;){let r=e[0],i=e[1];if(!i)throw new Error(`malformed TLV ${r}`);let s=e.slice(2,2+i);if(e=e.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);n[r]=n[r]||[],n[r].push(s)}return n}function Fa(t){return si("nsec",t)}function $a(t){return si("npub",t)}function Ha(t){return si("note",t)}function Gn(t,n){let e=xn.toWords(n);return xn.encode(t,e,Po)}function si(t,n){return Gn(t,Fe(n))}function qa(t){return Gn("nprofile",vr({0:[Fe(t.pubkey)],1:(t.relays||[]).map(e=>Lt.encode(e))}))}function Ga(t){let n;return null!=t.kind&&(n=function ja(t){const n=new Uint8Array(4);return n[0]=t>>24&255,n[1]=t>>16&255,n[2]=t>>8&255,n[3]=255&t,n}(t.kind)),Gn("nevent",vr({0:[Fe(t.id)],1:(t.relays||[]).map(r=>Lt.encode(r)),2:t.author?[Fe(t.author)]:[],3:n?[new Uint8Array(n)]:[]}))}function za(t){let n=new ArrayBuffer(4);return new DataView(n).setUint32(0,t.kind,!1),Gn("naddr",vr({0:[Lt.encode(t.identifier)],1:(t.relays||[]).map(r=>Lt.encode(r)),2:[Fe(t.pubkey)],3:[new Uint8Array(n)]}))}function Wa(t){return Gn("nrelay",vr({0:[Lt.encode(t)]}))}function vr(t){let n=[];return Object.entries(t).forEach(([e,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(e)],0),s.set([i.length],1),s.set(i,2),n.push(s)})}),$e(...n)}var ai={};function No(t,n,e){return li.apply(this,arguments)}function li(){return(li=(0,v.A)(function*(t,n,e){const i=Uo(bn.getSharedSecret(t,"02"+n));let s=Uint8Array.from(Xt(16)),u=Lt.encode(e),d=yield crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),p=yield crypto.subtle.encrypt({name:"AES-CBC",iv:s},d,u);return`${Vt.encode(new Uint8Array(p))}?iv=${Vt.encode(new Uint8Array(s.buffer))}`})).apply(this,arguments)}function Ya(t,n,e){return ci.apply(this,arguments)}function ci(){return(ci=(0,v.A)(function*(t,n,e){let[r,i]=e.split("?iv="),u=Uo(bn.getSharedSecret(t,"02"+n)),d=yield crypto.subtle.importKey("raw",u,{name:"AES-CBC"},!1,["decrypt"]),p=Vt.decode(r),m=Vt.decode(i),M=yield crypto.subtle.decrypt({name:"AES-CBC",iv:m},d,p);return qt.decode(M)})).apply(this,arguments)}function Uo(t){return t.slice(1,33)}yt(ai,{decrypt:()=>Ya,encrypt:()=>No}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),yt({},{NIP05_REGEX:()=>Lo,queryProfile:()=>Qa,searchDomain:()=>Xa,useFetchImplementation:()=>Za});var yr,Lo=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{yr=fetch}catch{}function Za(t){yr=t}function Xa(t){return ui.apply(this,arguments)}function ui(){return(ui=(0,v.A)(function*(t,n=""){try{return(yield(yield yr(`https://${t}/.well-known/nostr.json?name=${n}`)).json()).names}catch{return{}}})).apply(this,arguments)}function Qa(t){return di.apply(this,arguments)}function di(){return(di=(0,v.A)(function*(t){const n=t.match(Lo);if(!n)return null;const[e,r="_",i]=n;try{const s=yield yr(`https://${i}/.well-known/nostr.json?name=${r}`),{names:u,relays:d}=function Ja(t){const n={names:{}};for(const[e,r]of Object.entries(t.names))"string"==typeof e&&"string"==typeof r&&(n.names[e]=r);if(t.relays){n.relays={};for(const[e,r]of Object.entries(t.relays))"string"==typeof e&&Array.isArray(r)&&(n.relays[e]=r.filter(i=>"string"==typeof i))}return n}(yield s.json()),p=u[r];return p?{pubkey:p,relays:d?.[p]}:null}catch{return null}})).apply(this,arguments)}function tl(t,n){let r=ia.c.fromMasterSeed((0,Vr.kw)(t,n)).derive("m/44'/1237'/0'/0/0").privateKey;if(!r)throw new Error("could not derive private key");return Pe(r)}function nl(){return(0,Vr.we)(go.p)}function rl(t){return(0,Vr.JB)(t,go.p)}function ol(t){const n={reply:void 0,root:void 0,mentions:[],profiles:[]},e=[];for(const r of t.tags)"e"===r[0]&&r[1]&&e.push(r),"p"===r[0]&&r[1]&&n.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<e.length;r++){const i=e[r],[s,u,d,p]=i,m={id:u,relays:d?[d]:[]},S=r===e.length-1;"root"!==p?"reply"!==p?"mention"!==p?0===r?n.root=m:S?n.reply=m:n.mentions.push(m):n.mentions.push(m):n.reply=m:n.root=m}return n}function Oo(t){let n=0;for(let e=0;e<t.length;e++){const r=parseInt(t[e],16);if(0!==r){n+=Math.clz32(r)-28;break}n+=4}return n}function al(t,n){let e=0;const r=t,i=["nonce",e.toString(),n.toString()];for(r.tags.push(i);;){const s=Math.floor((new Date).getTime()/1e3);if(s!==r.created_at&&(e=0,r.created_at=s),i[1]=(++e).toString(),r.id=Hn(r),Oo(r.id)>=n)break}return r}function cl(t,n,e,r){return Yt({kind:6,tags:[...t.tags??[],["e",n.id,e],["p",n.pubkey]],content:""===t.content?"":JSON.stringify(n),created_at:t.created_at},r)}function Do(t){if(6!==t.kind)return;let n,e;for(let r=t.tags.length-1;r>=0&&(void 0===n||void 0===e);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===n?n=i:"p"===i[0]&&void 0===e&&(e=i))}return void 0!==n?{id:n[1],relays:[n[2],e?.[2]].filter(r=>"string"==typeof r),author:e?.[1]}:void 0}function ul(t,{skipVerification:n}={}){const e=Do(t);if(void 0===e||""===t.content)return;let r;try{r=JSON.parse(t.content)}catch{return}return r.id===e.id&&(n||pr(r))?r:void 0}yt({},{generateSeedWords:()=>nl,privateKeyFromSeedWords:()=>tl,validateWords:()=>rl}),yt({},{parse:()=>ol}),yt({},{getPow:()=>Oo,minePow:()=>al}),yt({},{finishRepostEvent:()=>cl,getRepostedEvent:()=>ul,getRepostedEventPointer:()=>Do}),yt({},{NOSTR_URI_REGEX:()=>wr,parse:()=>hl,test:()=>fl});var wr=new RegExp(`nostr:(${Bo.source})`);function fl(t){return"string"==typeof t&&new RegExp(`^${wr.source}$`).test(t)}function hl(t){const n=t.match(new RegExp(`^${wr.source}$`));if(!n)throw new Error(`Invalid Nostr URI: ${t}`);return{uri:n[0],value:n[1],decoded:qn(n[1])}}function gl(t,n,e){const r=n.tags.filter(i=>i.length>=2&&("e"===i[0]||"p"===i[0]));return Yt({...t,kind:7,tags:[...t.tags??[],...r,["e",n.id],["p",n.pubkey]],content:t.content??"+"},e)}function ml(t){if(7!==t.kind)return;let n,e;for(let r=t.tags.length-1;r>=0&&(void 0===n||void 0===e);r--){const i=t.tags[r];i.length>=2&&("e"===i[0]&&void 0===n?n=i:"p"===i[0]&&void 0===e&&(e=i))}return void 0!==n&&void 0!==e?{id:n[1],relays:[n[2],e[2]].filter(r=>void 0!==r),author:e[1]}:void 0}function yl(t,n){let e=[];(n.kind||-1)>=0&&e.push(`kind=${n.kind}`),n.until&&e.push(`created_at<${n.until}`),n.since&&e.push(`created_at>${n.since}`);let r=e.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=It(Lt.encode(`nostr:delegation:${n.pubkey}:${r}`)),s=Pe(_n.sign(i,t));return{from:ti(t),to:n.pubkey,cond:r,sig:s}}function wl(t){let n=t.tags.find(d=>"delegation"===d[0]&&d.length>=4);if(!n)return null;let e=n[1],r=n[2],i=n[3],s=r.split("&");for(let d=0;d<s.length;d++){let[p,m,M]=s[d].split(/\b/);if("kind"!==p||"="!==m||t.kind!==parseInt(M)){if("created_at"===p&&"<"===m&&t.created_at<parseInt(M))continue;if("created_at"===p&&">"===m&&t.created_at>parseInt(M))continue;return null}}let u=It(Lt.encode(`nostr:delegation:${t.pubkey}:${r}`));return _n.verify(i,u,e)?e:null}yt({},{finishReactionEvent:()=>gl,getReactedEventPointer:()=>ml}),yt({},{createDelegation:()=>yl,getDelegator:()=>wl}),yt({},{matchAll:()=>_l,regex:()=>fi,replaceAll:()=>xl});var fi=()=>new RegExp(`\\b${wr.source}\\b`,"g");function*_l(t){const n=t.matchAll(fi());for(const e of n)try{const[r,i]=e;yield{uri:r,value:i,decoded:qn(i),start:e.index,end:e.index+r.length}}catch{}}function xl(t,n){return t.replaceAll(fi(),(e,r)=>n({uri:e,value:r,decoded:qn(r)}))}yt({},{channelCreateEvent:()=>Ml,channelHideMessageEvent:()=>Al,channelMessageEvent:()=>Sl,channelMetadataEvent:()=>kl,channelMuteUserEvent:()=>Cl});var hi,Ml=(t,n)=>{let e;if("object"==typeof t.content)e=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;e=t.content}return Yt({kind:40,tags:[...t.tags??[]],content:e,created_at:t.created_at},n)},kl=(t,n)=>{let e;if("object"==typeof t.content)e=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;e=t.content}return Yt({kind:41,tags:[["e",t.channel_create_event_id],...t.tags??[]],content:e,created_at:t.created_at},n)},Sl=(t,n)=>{const e=[["e",t.channel_create_event_id,t.relay_url,"root"]];return t.reply_to_channel_message_event_id&&e.push(["e",t.reply_to_channel_message_event_id,t.relay_url,"reply"]),Yt({kind:42,tags:[...e,...t.tags??[]],content:t.content,created_at:t.created_at},n)},Al=(t,n)=>{let e;if("object"==typeof t.content)e=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;e=t.content}return Yt({kind:43,tags:[["e",t.channel_message_event_id],...t.tags??[]],content:e,created_at:t.created_at},n)},Cl=(t,n)=>{let e;if("object"==typeof t.content)e=JSON.stringify(t.content);else{if("string"!=typeof t.content)return;e=t.content}return Yt({kind:44,tags:[["p",t.pubkey_to_mute],...t.tags??[]],content:e,created_at:t.created_at},n)};yt({},{useFetchImplementation:()=>Il,validateGithub:()=>Rl});try{hi=fetch}catch{}function Il(t){hi=t}function Rl(t,n,e){return pi.apply(this,arguments)}function pi(){return(pi=(0,v.A)(function*(t,n,e){try{return(yield(yield hi(`https://gist.github.com/${n}/${e}/raw`)).text())===`Verifying that I control the following Nostr public key: ${t}`}catch{return!1}})).apply(this,arguments)}yt({},{authenticate:()=>Bl});var Bl=function(){var t=(0,v.A)(function*({challenge:n,relay:e,sign:r}){const i={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",n]],content:""};return e.auth(yield r(i))});return function(e){return t.apply(this,arguments)}}();yt({},{decrypt:()=>Ll,encrypt:()=>Ul,utils:()=>un});var mi,un={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(t,n)=>bn.getSharedSecret(t,"02"+n).subarray(1,33),getMessageKeys(t,n){const e=((t,n,e,r,i)=>function Ea(t,n,e,r=32){if(Le.hash(t),Le.number(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);void 0===e&&(e=_o);const s=new Uint8Array(i*t.outputLen),u=wn.create(t,n),d=u._cloneInto(),p=new Uint8Array(u.outputLen);for(let m=0;m<i;m++)ei[0]=m+1,d.update(0===m?_o:p).update(e).update(ei).digestInto(p),s.set(p,t.outputLen*m),u._cloneInto(d);return u.destroy(),d.destroy(),p.fill(0),ei.fill(0),s.slice(0,r)}(t,function xa(t,n,e){return Le.hash(t),void 0===e&&(e=new Uint8Array(t.outputLen)),wn(t,De(e),De(n))}(t,n,e),r,i))(It,t,n,"nip44-v2",76);return{encryption:e.subarray(0,32),nonce:e.subarray(32,44),auth:e.subarray(44,76)}},calcPadding(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("expected positive integer");if(t<=32)return 32;const n=1<<Math.floor(Math.log2(t-1))+1,e=n<=256?32:n/8;return e*(Math.floor((t-1)/e)+1)},pad(t){const n=Lt.encode(t),e=n.length;if(e<1||e>=un.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=un.v2.calcPadding(e),i=new Uint8Array(r-e),s=new Uint8Array(2);return new DataView(s.buffer).setUint16(0,e),$e(s,n,i)},unpad(t){const n=new DataView(t.buffer).getUint16(0),e=t.subarray(2,2+n);if(0===n||e.length!==n||t.length!==2+un.v2.calcPadding(n))throw new Error("invalid padding");return qt.decode(e)}}};function Ul(t,n,e={}){const r=e.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const i=e.salt??Xt(32);Qr(i,32);const s=un.v2.getMessageKeys(t,i),u=un.v2.pad(n),d=yo(s.encryption,s.nonce,u),p=wn(It,s.auth,d);return Vt.encode($e(new Uint8Array([r]),i,d,p))}function Ll(t,n){const e=un.v2;Qr(t,32);const r=n.length;if(r<e.minCiphertextSize||r>=e.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===n[0])throw new Error("unknown encryption version");let i;try{i=Vt.decode(n)}catch(O){throw new Error("invalid base64: "+O.message)}const s=i.subarray(0,1)[0];if(2!==s)throw new Error("unknown encryption version "+s);const u=i.subarray(1,33),d=i.subarray(33,-32),p=i.subarray(-32),m=e.getMessageKeys(t,u);if(!function ca(t,n){if(t.length!==n.length)throw new Error("equalBytes: Different size of Uint8Arrays");let e=!0;for(let r=0;r<t.length;r++)e&&(e=t[r]===n[r]);return e}(wn(It,m.auth,d),p))throw new Error("invalid MAC");const S=yo(m.encryption,m.nonce,d);return e.unpad(S)}function Dl(t){const{pathname:n,searchParams:e}=new URL(t),r=n,i=e.get("relay"),s=e.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}function jl(t){return gi.apply(this,arguments)}function gi(){return(gi=(0,v.A)(function*({pubkey:t,secret:n,invoice:e}){const i=yield No(n,t,JSON.stringify({method:"pay_invoice",params:{invoice:e}}));return Yt({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t]]},n)})).apply(this,arguments)}yt({},{makeNwcRequestEvent:()=>jl,parseConnectionString:()=>Dl}),yt({},{getZapEndpoint:()=>Hl,makeZapReceipt:()=>zl,makeZapRequest:()=>ql,useFetchImplementation:()=>$l,validateZapRequest:()=>Gl});try{mi=fetch}catch{}function $l(t){mi=t}function Hl(t){return vi.apply(this,arguments)}function vi(){return(vi=(0,v.A)(function*(t){try{let n="",{lud06:e,lud16:r}=JSON.parse(t.content);if(e){let{words:u}=xn.decode(e,1e3),d=xn.fromWords(u);n=qt.decode(d)}else{if(!r)return null;{let[u,d]=r.split("@");n=`https://${d}/.well-known/lnurlp/${u}`}}let s=yield(yield mi(n)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null})).apply(this,arguments)}function ql({profile:t,event:n,amount:e,relays:r,comment:i=""}){if(!e)throw new Error("amount not given");if(!t)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",t],["amount",e.toString()],["relays",...r]]};return n&&s.tags.push(["e",n]),s}function Gl(t){let n;try{n=JSON.parse(t)}catch{return"Invalid zap request JSON."}if(!ri(n))return"Zap request is not a valid Nostr event.";if(!pr(n))return"Invalid signature on zap request.";let e=n.tags.find(([s,u])=>"p"===s&&u);if(!e)return"Zap request doesn't have a 'p' tag.";if(!e[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=n.tags.find(([s,u])=>"e"===s&&u);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":n.tags.find(([s,u])=>"relays"===s&&u)?null:"Zap request doesn't have a 'relays' tag."}function zl({zapRequest:t,preimage:n,bolt11:e,paidAt:r}){let s=JSON.parse(t).tags.filter(([d])=>"e"===d||"p"===d||"a"===d),u={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["bolt11",e],["description",t]]};return n&&u.tags.push(["preimage",n]),u}yt({},{getToken:()=>Vl,unpackEventFromToken:()=>Fo,validateEvent:()=>$o,validateToken:()=>Yl});var jo="Nostr ";function Vl(t,n,e){return yi.apply(this,arguments)}function yi(){return(yi=(0,v.A)(function*(t,n,e,r=!1){if(!t||!n)throw new Error("Missing loginUrl or httpMethod");const i=function Ia(t=255){return{kind:t,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",t],["method",n]],i.created_at=Math.round((new Date).getTime()/1e3);const s=yield e(i);return(r?jo:"")+Vt.encode(Lt.encode(JSON.stringify(s)))})).apply(this,arguments)}function Yl(t,n,e){return wi.apply(this,arguments)}function wi(){return(wi=(0,v.A)(function*(t,n,e){const r=yield Fo(t).catch(s=>{throw s});return yield $o(r,n,e).catch(s=>{throw s})})).apply(this,arguments)}function Fo(t){return bi.apply(this,arguments)}function bi(){return(bi=(0,v.A)(function*(t){if(!t)throw new Error("Missing token");t=t.replace(jo,"");const n=qt.decode(Vt.decode(t));if(!n||0===n.length||!n.startsWith("{"))throw new Error("Invalid token");return JSON.parse(n)})).apply(this,arguments)}function $o(t,n,e){return _i.apply(this,arguments)}function _i(){return(_i=(0,v.A)(function*(t,n,e){if(!t)throw new Error("Invalid nostr event");if(!pr(t))throw new Error("Invalid nostr event, signature invalid");if(27235!==t.kind)throw new Error("Invalid nostr event, kind invalid");if(!t.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-t.created_at>60)throw new Error("Invalid nostr event, expired");const r=t.tags.find(s=>"u"===s[0]);if(1!==r?.length&&r?.[1]!==n)throw new Error("Invalid nostr event, url tag invalid");const i=t.tags.find(s=>"method"===s[0]);if(1!==i?.length&&i?.[1].toLowerCase()!==e.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0})).apply(this,arguments)}function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Te.apply(this,arguments)}const Go=t=>t.reduce((n,e)=>n+e.toString(16).padStart(2,"0"),"");class zo extends Error{constructor(n,e,r,i){let s=n.toString();e&&(s+=` ${e}`),s+=": ",s+=i.message?i.message:JSON.stringify(i),super(s),this.status=void 0,this.statusText=void 0,this.headers=void 0,this.error=void 0,this.status=n,this.statusText=e,this.headers=r,this.error=i}}const Kl=["auth","endpoint","params","request_body","method","max_retries","base_url","user_agent","headers"],Zl="https://api.getalby.com";function Wo(t,n){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,v.A)(function*(t,n,e=0){const r=yield fetch(t,n);if(429===r.status&&e>0){const i=Number(r.headers.get("x-rate-limit-reset")),s=Number(r.headers.get("x-rate-limit-remaining")),u=1e3*i-Date.now();let d=1e3;return 0===s&&(d=u),yield new Promise(p=>setTimeout(p,d)),Wo(t,n,e-1)}return r})).apply(this,arguments)}function Mi(){return(Mi=(0,v.A)(function*(t){let{auth:n,endpoint:e,params:r={},request_body:i,method:s,max_retries:u,base_url:d=Zl,user_agent:p,headers:m}=t,M=function xi(t,n){if(null==t)return{};var e,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n.indexOf(e=s[r])>=0||(i[e]=t[e]);return i}(t,Kl);const S=new URL(d+e);S.search=function Ho(t){return Object.entries(t).map(([n,e])=>n&&e?`${n}=${e}`:"").filter(n=>n).join("&")}(r);const O="POST"===s&&!!i,L=n?yield n.getAuthHeader(S.href,s):void 0,U=yield Wo(S.toString(),Te({headers:Te({},O?{"Content-Type":"application/json; charset=utf-8"}:void 0,L,m,{"User-Agent":p??"@getalby/sdk","X-User-Agent":p??"@getalby/sdk"}),method:s,body:O?JSON.stringify(i):void 0},M),u);if(!U.ok){const I=yield U.json();throw new zo(U.status,U.statusText,U.headers,I)}return U})).apply(this,arguments)}function wt(t){return ki.apply(this,arguments)}function ki(){return ki=(0,v.A)(function*(t){return(yield function Xl(t){return Mi.apply(this,arguments)}(t)).json()}),ki.apply(this,arguments)}class Yo{constructor(n){this.bearer_token=void 0,this.bearer_token=n}getAuthHeader(){return{Authorization:`Bearer ${this.bearer_token}`}}}class on extends Error{constructor(n,e){super(n),this.error=void 0,this.code=void 0,this.error=n,this.code=e}}class Ko extends on{}class Si extends on{}class Ai extends Si{}class Ci extends Si{}class Ti extends on{}class Ii extends on{}class br extends on{}class Zo extends on{}class Xo extends on{}const Qo={alby:{authorizationUrl:"https://nwc.getalby.com/apps/new",relayUrl:"wss://relay.getalby.com/v1",walletPubkey:"69effe7b49a6dd5cf525bd0905917a5005ffe480b58eeb8e861418cf3ae760d9"}};class zn{static parseWalletConnectUrl(n){n=n.replace("nostrwalletconnect://","http://").replace("nostr+walletconnect://","http://").replace("nostrwalletconnect:","http://").replace("nostr+walletconnect:","http://");const e=new URL(n),r=e.searchParams.get("relay");if(!r)throw new Error("No relay URL found in connection string");const i={walletPubkey:e.host,relayUrl:r},s=e.searchParams.get("secret");s&&(i.secret=s);const u=e.searchParams.get("lud16");return u&&(i.lud16=u),i}static withNewSecret(n){return(n=n||{}).secret=xo(),new zn(n)}constructor(n){var e;this.relay=void 0,this.relayUrl=void 0,this.secret=void 0,this.lud16=void 0,this.walletPubkey=void 0,this.options=void 0,n&&n.nostrWalletConnectUrl&&(n=Te({},zn.parseWalletConnectUrl(n.nostrWalletConnectUrl),n));const r=Qo[(null==(e=n)?void 0:e.providerName)||"alby"];this.options=Te({},r,n||{}),this.relayUrl=this.options.relayUrl,this.relay=Io(this.relayUrl),this.options.secret&&(this.secret=this.options.secret.toLowerCase().startsWith("nsec")?oi.decode(this.options.secret).data:this.options.secret),this.lud16=this.options.lud16,this.walletPubkey=this.options.walletPubkey.toLowerCase().startsWith("npub")?oi.decode(this.options.walletPubkey).data:this.options.walletPubkey,void 0===globalThis.WebSocket&&console.error("WebSocket is undefined. Make sure to `import websocket-polyfill` for nodejs environments")}get nostrWalletConnectUrl(){return this.getNostrWalletConnectUrl()}getNostrWalletConnectUrl(n=!0){let e=`nostr+walletconnect://${this.walletPubkey}?relay=${this.relayUrl}&pubkey=${this.publicKey}`;return n&&(e=`${e}&secret=${this.secret}`),e}get connected(){return 1===this.relay.status}get publicKey(){if(!this.secret)throw new Error("Missing secret key");return ti(this.secret)}getPublicKey(){return Promise.resolve(this.publicKey)}signEvent(n){if(!this.secret)throw new Error("Missing secret key");return Promise.resolve(Yt(n,this.secret))}getEventHash(n){return Hn(n)}close(){return this.relay.close()}encrypt(n,e){var r=this;return(0,v.A)(function*(){if(!r.secret)throw new Error("Missing secret");return yield ai.encrypt(r.secret,n,e)})()}decrypt(n,e){var r=this;return(0,v.A)(function*(){if(!r.secret)throw new Error("Missing secret");return yield ai.decrypt(r.secret,n,e)})()}getAuthorizationUrl(n){if(!this.options.authorizationUrl)throw new Error("Missing authorizationUrl option");const e=new URL(this.options.authorizationUrl);return null!=n&&n.name&&e.searchParams.set("name",n?.name),e.searchParams.set("pubkey",this.publicKey),null!=n&&n.returnTo&&e.searchParams.set("return_to",n.returnTo),null!=n&&n.budgetRenewal&&e.searchParams.set("budget_renewal",n.budgetRenewal),null!=n&&n.expiresAt&&e.searchParams.set("expires_at",Math.floor(n.expiresAt.getTime()/1e3).toString()),null!=n&&n.maxAmount&&e.searchParams.set("max_amount",n.maxAmount.toString()),void 0!==n?.editable&&e.searchParams.set("editable",n.editable.toString()),null!=n&&n.requestMethods&&e.searchParams.set("request_methods",n.requestMethods.join(" ")),e}initNWC(n={}){n.name||(n.name=document.location.host);const e=this.getAuthorizationUrl(n),r=window.outerHeight/2+window.screenY-300,i=window.outerWidth/2+window.screenX-200;return new Promise((s,u)=>{const d=window.open(e.toString(),`${document.title} - Wallet Connect`,`height=600,width=400,top=${r},left=${i}`);if(!d)return void u(new Error("failed to execute window.open"));const p=M=>{const S=M.data;S&&"nwc:success"===S.type&&M.origin===`${e.protocol}//${e.host}`&&(s(S),clearInterval(m),window.removeEventListener("message",p),d&&d.close())},m=setInterval(()=>{d&&d.closed&&(clearInterval(m),window.removeEventListener("message",p),u(new Error("Popup closed")))},500);window.addEventListener("message",p)})}getWalletServiceSupportedMethods(){var n=this;return(0,v.A)(function*(){return console.warn("getWalletServiceSupportedMethods is deprecated. Please use getWalletServiceInfo instead."),(yield n.getWalletServiceInfo()).capabilities})()}getWalletServiceInfo(){var n=this;return(0,v.A)(function*(){var e;yield n._checkConnected();const r=yield n.relay.list([{kinds:[13194],limit:1,authors:[n.walletPubkey]}],{eoseSubTimeout:1e4});if(!r.length)throw new Error("no info event (kind 13194) returned from relay");const i=r[0].content,s=r[0].tags.find(u=>"notifications"===u[0]);return{capabilities:i.split(/[ |,]/g),notifications:(null==s||null==(e=s[1])?void 0:e.split(" "))||[]}})()}getInfo(){var n=this;return(0,v.A)(function*(){try{return yield n.executeNip47Request("get_info",{},e=>!!e.methods)}catch(e){throw console.error("Failed to request get_info",e),e}})()}getBalance(){var n=this;return(0,v.A)(function*(){try{return yield n.executeNip47Request("get_balance",{},e=>void 0!==e.balance)}catch(e){throw console.error("Failed to request get_balance",e),e}})()}payInvoice(n){var e=this;return(0,v.A)(function*(){try{return yield e.executeNip47Request("pay_invoice",n,r=>!!r.preimage)}catch(r){throw console.error("Failed to request pay_invoice",r),r}})()}payKeysend(n){var e=this;return(0,v.A)(function*(){try{return yield e.executeNip47Request("pay_keysend",n,r=>!!r.preimage)}catch(r){throw console.error("Failed to request pay_keysend",r),r}})()}signMessage(n){var e=this;return(0,v.A)(function*(){try{return yield e.executeNip47Request("sign_message",n,r=>r.message===n.message&&!!r.signature)}catch(r){throw console.error("Failed to request sign_message",r),r}})()}multiPayInvoice(n){var e=this;return(0,v.A)(function*(){try{return{invoices:yield e.executeMultiNip47Request("multi_pay_invoice",n,n.invoices.length,r=>!!r.preimage),errors:[]}}catch(r){throw console.error("Failed to request multi_pay_invoice",r),r}})()}multiPayKeysend(n){var e=this;return(0,v.A)(function*(){try{return{keysends:yield e.executeMultiNip47Request("multi_pay_keysend",n,n.keysends.length,r=>!!r.preimage),errors:[]}}catch(r){throw console.error("Failed to request multi_pay_keysend",r),r}})()}makeInvoice(n){var e=this;return(0,v.A)(function*(){try{if(!n.amount)throw new Error("No amount specified");return yield e.executeNip47Request("make_invoice",n,r=>!!r.invoice)}catch(r){throw console.error("Failed to request make_invoice",r),r}})()}lookupInvoice(n){var e=this;return(0,v.A)(function*(){try{return yield e.executeNip47Request("lookup_invoice",n,r=>!!r.invoice)}catch(r){throw console.error("Failed to request lookup_invoice",r),r}})()}listTransactions(n){var e=this;return(0,v.A)(function*(){try{return yield e.executeNip47Request("list_transactions",n,r=>!!r.transactions)}catch(r){throw console.error("Failed to request list_transactions",r),r}})()}subscribeNotifications(n,e){var r=this;return(0,v.A)(function*(){var i=r;let s,u,d,p=!0;return(0,v.A)(function*(){for(;p;){try{yield i._checkConnected(),d=i.relay.sub([{kinds:[23196],authors:[i.walletPubkey],"#p":[i.publicKey]}]),console.info("subscribed to relay"),d.on("event",function(){var m=(0,v.A)(function*(M){const S=yield i.decrypt(i.walletPubkey,M.content);let O;try{O=JSON.parse(S)}catch(L){return void console.error("Failed to parse decrypted event content",L)}O.notification?(!e||e.indexOf(O.notification_type)>-1)&&n(O):console.error("No notification in response",O)});return function(M){return m.apply(this,arguments)}}()),yield new Promise(m=>{s=()=>{m()},u=()=>{console.info("relay disconnected"),s?.()},i.relay.on("disconnect",u)}),void 0!==u&&i.relay.off("disconnect",u)}catch(m){console.error("error subscribing to notifications",m||"unknown relay error")}p&&(yield new Promise(m=>setTimeout(m,1e3)))}})(),()=>{var m;p=!1,s?.(),null==(m=d)||m.unsub()}})()}executeNip47Request(n,e,r){var i=this;return(0,v.A)(function*(){var s=i;return yield i._checkConnected(),new Promise((u,d)=>{(0,v.A)(function*(){const p={method:n,params:e},m=yield s.encrypt(s.walletPubkey,JSON.stringify(p)),M={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",s.walletPubkey]],content:m,pubkey:s.publicKey},S=yield s.signEvent(M),O=s.relay.sub([{kinds:[23195],authors:[s.walletPubkey],"#e":[S.id]}]),L=setTimeout(function(){O.unsub(),d(new Ci(`reply timeout: event ${S.id}`,"INTERNAL"))},6e4);O.on("event",function(){var I=(0,v.A)(function*(j){clearTimeout(L),O.unsub();const F=yield s.decrypt(s.walletPubkey,j.content);let W;try{W=JSON.parse(F)}catch{return clearTimeout(L),O.unsub(),void d(new Ii("failed to deserialize response","INTERNAL"))}var Z,V;W.result?r(W.result)?u(W.result):(clearTimeout(L),O.unsub(),d(new br("response from NWC failed validation: "+JSON.stringify(W.result),"INTERNAL"))):(clearTimeout(L),O.unsub(),d(new Ko((null==(Z=W.error)?void 0:Z.message)||"unknown Error",(null==(V=W.error)?void 0:V.code)||"INTERNAL")))});return function(j){return I.apply(this,arguments)}}());const U=setTimeout(function(){O.unsub(),d(new Ai(`publish timeout: ${S.id}`,"INTERNAL"))},5e3);try{yield s.relay.publish(S),clearTimeout(U)}catch(I){clearTimeout(U),d(new Ti(`failed to publish: ${I}`,"INTERNAL"))}})()})})()}executeMultiNip47Request(n,e,r,i){var s=this;return(0,v.A)(function*(){var u=s;yield s._checkConnected();const d=[];return new Promise((p,m)=>{(0,v.A)(function*(){const M={method:n,params:e},S=yield u.encrypt(u.walletPubkey,JSON.stringify(M)),O={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",u.walletPubkey]],content:S,pubkey:u.publicKey},L=yield u.signEvent(O),U=u.relay.sub([{kinds:[23195],authors:[u.walletPubkey],"#e":[L.id]}]),I=setTimeout(function(){U.unsub(),m(new Ci(`reply timeout: event ${L.id}`,"INTERNAL"))},6e4);U.on("event",function(){var F=(0,v.A)(function*(W){const Z=yield u.decrypt(u.walletPubkey,W.content);let V;try{V=JSON.parse(Z)}catch{clearTimeout(I),U.unsub(),m(new Ii("failed to deserialize response","INTERNAL"))}if(V.result){var J;if(!i(V.result))return clearTimeout(I),U.unsub(),void m(new br("Response from NWC failed validation: "+JSON.stringify(V.result),"INTERNAL"));const Q=null==(J=W.tags.find(X=>"d"===X[0]))?void 0:J[1];if(void 0===Q)return clearTimeout(I),U.unsub(),void m(new br("No d tag found in response event","INTERNAL"));d.push(Te({},V.result,{dTag:Q})),d.length===r&&(clearTimeout(I),U.unsub(),p(d))}else{var q,Y;clearTimeout(I),U.unsub(),m(new Zo(null==(q=V.error)?void 0:q.message,null==(Y=V.error)?void 0:Y.code))}});return function(W){return F.apply(this,arguments)}}());const j=setTimeout(function(){U.unsub(),m(new Ai(`Publish timeout: ${L.id}`,"INTERNAL"))},5e3);try{yield u.relay.publish(L),clearTimeout(j)}catch(F){clearTimeout(j),m(new Ti(`Failed to publish: ${F}`,"INTERNAL"))}})()})})()}_checkConnected(){var n=this;return(0,v.A)(function*(){if(!n.secret)throw new Error("Missing secret key");try{yield n.relay.connect()}catch{throw console.error("failed to connect to relay",n.relayUrl),new Xo("Failed to connect to "+n.relayUrl,"OTHER")}})()}}const ec={get_info:"getInfo",get_balance:"getBalance",make_invoice:"makeInvoice",pay_invoice:"sendPayment",pay_keysend:"payKeysend",lookup_invoice:"lookupInvoice",list_transactions:"listTransactions",multi_pay_invoice:"sendMultiPayment",multi_pay_keysend:"multiKeysend",sign_message:"signMessage"};class _r{get relay(){return console.warn("relay is deprecated. Please use client.relay instead."),this.client.relay}get relayUrl(){return console.warn("relayUrl is deprecated. Please use client.relayUrl instead."),this.client.relayUrl}get walletPubkey(){return console.warn("walletPubkey is deprecated. Please use client.walletPubkey instead."),this.client.walletPubkey}get options(){return this.client.options}get secret(){return console.warn("secret is deprecated. Please use client.secret instead."),this.client.secret}static withNewSecret(n){return(n=n||{}).secret=xo(),new _r(n)}constructor(n){this._enabled=!1,this.client=void 0,this.subscribers=void 0,this.client=new zn(n),this.subscribers={}}on(n,e){this.subscribers[n]=e}notify(n,e){const r=this.subscribers[n];r&&r(e)}getNostrWalletConnectUrl(n=!0){return console.warn("getNostrWalletConnectUrl is deprecated. Please use client.getNostrWalletConnectUrl instead."),this.client.getNostrWalletConnectUrl(n)}get nostrWalletConnectUrl(){return console.warn("nostrWalletConnectUrl is deprecated. Please use client.nostrWalletConnectUrl instead."),this.client.nostrWalletConnectUrl}get connected(){return console.warn("connected is deprecated. Please use client.connected instead."),this.client.connected}get publicKey(){return console.warn("publicKey is deprecated. Please use client.publicKey instead."),this.client.publicKey}getPublicKey(){return this.client.getPublicKey()}signEvent(n){return this.client.signEvent(n)}getEventHash(n){return console.warn("getEventHash is deprecated. Please use client.getEventHash instead."),this.client.getEventHash(n)}enable(){var n=this;return(0,v.A)(function*(){n._enabled=!0})()}close(){return this.client.close()}encrypt(n,e){var r=this;return(0,v.A)(function*(){return console.warn("encrypt is deprecated. Please use client.encrypt instead."),r.client.encrypt(n,e)})()}decrypt(n,e){var r=this;return(0,v.A)(function*(){return console.warn("decrypt is deprecated. Please use client.decrypt instead."),r.client.decrypt(n,e)})()}getAuthorizationUrl(n){return console.warn("getAuthorizationUrl is deprecated. Please use client.getAuthorizationUrl instead."),this.client.getAuthorizationUrl(n)}initNWC(n={}){return console.warn("initNWC is deprecated. Please use client.initNWC instead."),this.client.initNWC(n)}getInfo(){var n=this;return(0,v.A)(function*(){yield n.checkEnabled();const e=["lightning","nostr"],r="Alby JS SDK";try{const i=yield n.client.getInfo(),s={methods:i.methods.map(u=>ec[u]),node:{alias:i.alias,pubkey:i.pubkey,color:i.color},supports:e,version:r};return n.notify("getInfo",s),s}catch(i){return console.error("Using minimal getInfo",i),{methods:["sendPayment"],node:{},supports:e,version:r}}})()}getBalance(){var n=this;return(0,v.A)(function*(){yield n.checkEnabled();const e=yield n.client.getBalance(),r={balance:Math.floor(e.balance/1e3),currency:"sats"};return n.notify("getBalance",r),r})()}sendPayment(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const r={preimage:(yield e.client.payInvoice({invoice:n})).preimage};return e.notify("sendPayment",r),r})()}sendPaymentAsync(n){var e=this;return(0,v.A)(function*(){return yield e.checkEnabled(),e.client.payInvoice({invoice:n}),e.notify("sendPaymentAsync",{}),{}})()}keysend(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const r={preimage:(yield e.client.payKeysend(Jo(n))).preimage};return e.notify("keysend",r),r})()}signMessage(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const r=yield e.client.signMessage({message:n}),i={message:r.message,signature:r.signature};return e.notify("keysend",i),i})()}makeInvoice(n){var e=this;return(0,v.A)(function*(){var r;yield e.checkEnabled();const i="object"==typeof n?n:void 0,s=+(null!=(r=i?.amount)?r:n);if(!s)throw new Error("No amount specified");const u={paymentRequest:(yield e.client.makeInvoice({amount:1e3*s,description:i?.defaultMemo})).invoice};return e.notify("makeInvoice",u),u})()}lookupInvoice(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const r=yield e.client.lookupInvoice({invoice:n.paymentRequest,payment_hash:n.paymentHash}),i={preimage:r.preimage,paymentRequest:r.invoice,paid:!!r.settled_at};return e.notify("lookupInvoice",i),i})()}listTransactions(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const r={transactions:(yield e.client.listTransactions(n)).transactions.map(tc)};return e.notify("listTransactions",r),r})()}sendMultiPayment(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const i={payments:(yield e.client.multiPayInvoice({invoices:n.map((s,u)=>({invoice:s,id:u.toString()}))})).invoices.map(s=>{const u=n[parseInt(s.dTag)];if(!u)throw new Error("Could not find paymentRequest matching response d tag");return{paymentRequest:u,preimage:s.preimage}}),errors:[]};return e.notify("sendMultiPayment",i),i})()}multiKeysend(n){var e=this;return(0,v.A)(function*(){yield e.checkEnabled();const i={keysends:(yield e.client.multiPayKeysend({keysends:n.map((s,u)=>Te({},Jo(s),{id:u.toString()}))})).keysends.map(s=>{const u=n[parseInt(s.dTag)];if(!u)throw new Error("Could not find keysend matching response d tag");return{keysend:u,preimage:s.preimage}}),errors:[]};return e.notify("multiKeysend",i),i})()}lnurl(n){throw new Error("Method not implemented.")}request(n,e){throw new Error("Method not implemented.")}verifyMessage(n,e){throw new Error("Method not implemented.")}checkEnabled(){var n=this;return(0,v.A)(function*(){if(!n._enabled)throw new Error("please call enable() and await the promise before calling this function")})()}}function tc(t){return Te({},t,{amount:Math.floor(t.amount/1e3),fees_paid:t.fees_paid?Math.floor(t.fees_paid/1e3):0})}function Jo(t){return{amount:1e3*+t.amount,pubkey:t.destination,tlv_records:t.customRecords?Object.entries(t.customRecords).map(n=>({type:parseInt(n[0]),value:Go((new TextEncoder).encode(n[1]))})):[]}}const nc=_r;function es(t){const n={};return t.recipient.customKey&&t.recipient.customValue&&(n[t.recipient.customKey]=t.recipient.customValue),n[7629169]=JSON.stringify(t.boostagram),{destination:t.recipient.address,amount:t.amount,custom_records:n}}class ts{constructor(n,e){this.auth=void 0,this.defaultRequestOptions=void 0,this.auth="string"==typeof n?new Yo(n):n,this.defaultRequestOptions=Te({},e,{user_agent:e?.user_agent})}accountBalance(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/balance",params:n,method:"GET"}))}accountSummary(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/summary",params:n,method:"GET"}))}accountInformation(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/me",params:n,method:"GET"}))}accountValue4Value(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/value4value",params:n,method:"GET"}))}incomingInvoices(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices/incoming",params:n,method:"GET"}))}outgoingInvoices(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices/outgoing",params:n,method:"GET"}))}invoices(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices",params:n,method:"GET"}))}getInvoice(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/invoices/${n}`,method:"GET"}))}decodeInvoice(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/decode/bolt11/${n}`,method:"GET"}))}createInvoice(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices",request_body:n,method:"POST"}))}keysend(n,e){let r,i;return Array.isArray(n)?(r="/payments/keysend/multi",i={keysends:n.map(s=>Te({},s,{custom_records:s.customRecords}))}):(r="/payments/keysend",i=Te({},n,{custom_records:n.customRecords})),wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:r,request_body:i,method:"POST"}))}sendPayment(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/payments/bolt11",request_body:n,method:"POST"}))}sendBoostagram(n,e){let r,i;return Array.isArray(n)?(r="/payments/keysend/multi",i={keysends:n.map(s=>es(s))}):(r="/payments/keysend",i=es(n)),wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:r,request_body:i,method:"POST"}))}sendToAlbyAccount(n,e){return console.warn("sendToAlbyAccount is deprecated. Please use sendBoostagramToAlbyAccount instead."),this.sendBoostagramToAlbyAccount(n,e)}sendBoostagramToAlbyAccount(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/payments/keysend",request_body:{destination:"030a58b8653d32b99200a2334cfe913e51dc7d155aa0116c176657a4f1722677a3",custom_records:{696969:n.account},amount:n.amount,memo:n.memo},method:"POST"}))}createWebhookEndpoint(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/webhook_endpoints",request_body:n,method:"POST"}))}deleteWebhookEndpoint(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/webhook_endpoints/${n}`,method:"DELETE"}))}getSwapInfo(n){return wt(Te({auth:this.auth},this.defaultRequestOptions,n,{endpoint:"/swaps/info",method:"GET"}))}createSwap(n,e){return wt(Te({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/swaps",method:"POST",request_body:n}))}}var xr={__proto__:null,NostrWebLNProvider:_r,NWC:nc,OauthWeblnProvider:class{constructor(t){this.client=void 0,this.auth=void 0,this.oauth=void 0,this.subscribers=void 0,this.isExecuting=void 0,this.auth=t.auth,this.client=new ts(t.auth),this.oauth=!0,this.subscribers={},this.isExecuting=!1}on(t,n){this.subscribers[t]=n}notify(t,n){const e=this.subscribers[t];e&&e(n)}enable(){var t=this;return(0,v.A)(function*(){var n;if(!t.isExecuting){if(null!=(n=t.auth.token)&&n.access_token)return{enabled:!0};if(typeof window>"u"||void 0===window.document)throw new Error("Missing access token");try{t.isExecuting=!0,yield t.openAuthorization()}finally{t.isExecuting=!1}}})()}sendPayment(t){var n=this;return(0,v.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const e=yield n.client.sendPayment({invoice:t});return n.notify("sendPayment",e),{preimage:e.payment_preimage}}catch(e){let r="Unknown Error";throw e instanceof Error&&(r=e.message),new Error(r)}finally{n.isExecuting=!1}})()}keysend(t){var n=this;return(0,v.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const e=yield n.client.keysend(t);return n.notify("keysend",e),{preimage:e.payment_preimage}}catch(e){let r="Unknown Error";throw e instanceof Error&&(r=e.message),new Error(r)}finally{n.isExecuting=!1}})()}getInfo(){return(0,v.A)(function*(){return{alias:"Alby"}})()}makeInvoice(t){var n=this;return(0,v.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const e=yield n.client.createInvoice({amount:parseInt(t.amount.toString()),description:t.defaultMemo});return n.notify("makeInvoice",e),{paymentRequest:e.payment_request}}catch(e){let r="Unknown Error";throw e instanceof Error&&(r=e.message),new Error(r)}finally{n.isExecuting=!1}})()}openAuthorization(){var t=this;return(0,v.A)(function*(){var n=t;const e=window.outerHeight/2+window.screenY-350,r=window.outerWidth/2+window.screenX-300,i=yield t.auth.generateAuthURL({code_challenge_method:"S256"});return new Promise((s,u)=>{const d=window.open(i,`${document.title} - WebLN enable`,`height=700,width=600,top=${e},left=${r}`);let p=!1;window.addEventListener("message",function(){var m=(0,v.A)(function*(M){const S=M.data;if(S&&"alby:oauth:success"===S.type&&M.origin===`${document.location.protocol}//${document.location.host}`&&!p){p=!0,console.info("Processing OAuth code response");const O=S.payload.code;try{yield n.auth.requestAccessToken(O),n.client=new ts(n.auth),d&&d.close(),n.notify("enable"),s({enabled:!0})}catch(L){console.error(L),u({enabled:!1})}}});return function(M){return m.apply(this,arguments)}}())})})()}}},Ri=k(5416);class rc{constructor(n,e){this._document=e;const r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=n,r.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(r)}copy(){const n=this._textarea;let e=!1;try{if(n){const r=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),e=this._document.execCommand("copy"),r&&r.focus()}}catch{}return e}destroy(){const n=this._textarea;n&&(n.remove(),this._textarea=void 0)}}let Pi=(()=>{class t{constructor(e){this._document=e}copy(e){const r=this.beginCopy(e),i=r.copy();return r.destroy(),i}beginCopy(e){return new rc(e,this._document)}static{this.\u0275fac=function(r){return new(r||t)(o.KVO(f.qQ))}}static{this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ic(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){const i=o.eBV(e).$implicit,s=o.XpG(2);return o.Njj(s.invoiceAmount=i.value)}),o.j41(1,"mat-icon"),o.EFF(2),o.k0s(),o.j41(3,"span"),o.EFF(4),o.k0s()()}if(2&t){const e=n.$implicit;o.R7$(2),o.JRh(e.icon),o.R7$(2),o.JRh(e.label)}}function oc(t,n){if(1&t){const e=o.RV6();o.j41(0,"mat-dialog-content")(1,"div",4),o.DNE(2,ic,5,2,"button",5),o.k0s(),o.nrm(3,"mat-divider"),o.j41(4,"mat-form-field",6)(5,"mat-label"),o.EFF(6,"Zap Amount"),o.k0s(),o.j41(7,"input",7),o.mxI("ngModelChange",function(i){o.eBV(e);const s=o.XpG();return o.DH7(s.invoiceAmount,i)||(s.invoiceAmount=i),o.Njj(i)}),o.k0s()(),o.j41(8,"mat-dialog-actions",8)(9,"button",9),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.generateInvoice())}),o.EFF(10," Generate Invoice "),o.k0s()()()}if(2&t){const e=o.XpG();o.R7$(2),o.Y8G("ngForOf",e.zapButtons),o.R7$(5),o.R50("ngModel",e.invoiceAmount)}}function sc(t,n){if(1&t){const e=o.RV6();o.j41(0,"div",12)(1,"span"),o.EFF(2),o.k0s(),o.nrm(3,"mat-divider")(4,"qrcode",13),o.j41(5,"mat-dialog-actions",14)(6,"button",15),o.bIt("click",function(){o.eBV(e);const i=o.XpG(2);return o.Njj(i.copyInvoice())}),o.nrm(7,"mat-icon",16),o.k0s()()()}if(2&t){const e=o.XpG(2);o.R7$(2),o.SpI("Scan with phone to pay (",e.invoiceAmount," sats)"),o.R7$(2),o.Y8G("qrdata",e.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M"),o.R7$(2),o.Y8G("matTooltip","Copy Invoice"),o.R7$(),o.Y8G("svgIcon","heroicons_outline:clipboard-document")}}function ac(t,n){if(1&t&&(o.j41(0,"mat-dialog-content"),o.DNE(1,sc,8,6,"div",11),o.k0s()),2&t){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.displayQRCode)}}let lc=(()=>{class t{constructor(e,r,i){this._dialogRef=e,this._snackBar=r,this._clipboard=i,this.invoiceAmount="",this.lightningInvoice="",this.displayQRCode=!1,this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}]}generateInvoice(){var e=this;return(0,v.A)(function*(){if(!e.invoiceAmount||Number(e.invoiceAmount)<=0)e.openSnackBar("Please enter a valid amount","dismiss");else try{e.nwc=new xr.NostrWebLNProvider({nostrWalletConnectUrl:yield e.loadNWCUrl()}),yield e.nwc.enable();const r=yield e.nwc.makeInvoice({amount:Number(e.invoiceAmount)});e.lightningInvoice=r.paymentRequest,e.showQRCode()}catch(r){console.error("Error generating invoice:",r),e.openSnackBar("Failed to generate invoice","dismiss")}})()}loadNWCUrl(){return(0,v.A)(function*(){try{const e=xr.NostrWebLNProvider.withNewSecret();return yield e.initNWC({name:"Angor Hub"}),e.getNostrWalletConnectUrl()}catch(e){throw console.error("Error initializing NWC:",e),new Error("Failed to initialize NWC provider")}})()}showQRCode(){this.displayQRCode=!this.displayQRCode}copyInvoice(){this.lightningInvoice?(this._clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(e,r){this._snackBar.open(e,r,{duration:1300})}closeDialog(){this._dialogRef.close()}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(Ue.CP),o.rXU(Ri.UG),o.rXU(Pi))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-receive-dialog"]],standalone:!0,features:[o.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"],["align","center"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"]],template:function(r,i){1&r&&(o.j41(0,"div",0)(1,"button",1),o.nrm(2,"mat-icon",2),o.k0s()(),o.j41(3,"h2"),o.EFF(4,"\u26a1 Receive Zap"),o.k0s(),o.DNE(5,oc,11,2,"mat-dialog-content",3)(6,ac,2,1,"mat-dialog-content",3)),2&r&&(o.R7$(),o.Y8G("matDialogClose",void 0),o.R7$(),o.Y8G("svgIcon","heroicons_outline:x-mark"),o.R7$(3),o.Y8G("ngIf",!i.displayQRCode),o.R7$(),o.Y8G("ngIf",i.displayQRCode))},dependencies:[Ve.vg,P.Hl,P.$z,P.iY,P.$0,oe.m_,oe.An,T.YN,T.me,T.Q0,T.BC,T.vS,H.nJ,H.rl,T.X1,f.MD,f.Sq,f.bT,Sn.Ve,H.RG,le.fS,le.fg,Ue.Yi,Ue.E7,we,he,B.q,$.oV,Ue.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}}return t})();for(var ns=k(1146),cc=k(3838),Kt=k(917),rs={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},is={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},os={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},ss={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},as={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Wn=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],uc={m:new Kt.BN(1e3,10),u:new Kt.BN(1e6,10),n:new Kt.BN(1e9,10),p:new Kt.BN(1e12,10)},dc=new Kt.BN("2100000000000000000",10),ls=new Kt.BN(1e11,10),Bi={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},cs={},Er=0,Ni=Object.keys(Bi);Er<Ni.length;Er++){var fc=Ni[Er],hc=Bi[Ni[Er]].toString();cs[hc]=fc}var pc={1:function(t){return sn(t,!0)},16:function(t){return sn(t,!0)},13:function(t){return sn(t,!0).toString("utf8")},19:function(t){return sn(t,!0)},23:function(t){return sn(t,!0)},27:function(t){return sn(t,!0)},6:Mr,24:Mr,3:function vc(t){for(var e,r,i,s,u,n=[],d=sn(t,!0);d.length>0;)e=d.slice(0,33).toString("hex"),r=d.slice(33,41).toString("hex"),i=parseInt(d.slice(41,45).toString("hex"),16),s=parseInt(d.slice(45,49).toString("hex"),16),u=parseInt(d.slice(49,51).toString("hex"),16),d=d.slice(51),n.push({pubkey:e,short_channel_id:r,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:u});return n},5:function yc(t){for(var n=t.slice().reverse().map(function(i){return[!!(1&i),!!(2&i),!!(4&i),!!(8&i),!!(16&i)]}).reduce(function(i,s){return i.concat(s)},[]);n.length<2*Wn.length;)n.push(!1);var e={extra_bits:{}};if(Wn.forEach(function(i,s){var u;n[2*s]?u="required":n[2*s+1]&&(u="supported"),e[i]=u}),n.length>2*Wn.length){var r=n.slice(2*Wn.length);e.extra_bits={start_bit:2*Wn.length,bits:r,required:r.reduce(function(i,s,u){return u%2!=0?i||!1:i||s},!1)}}return e}};function gc(t){return function(n){return{tagCode:parseInt(t),words:ns.encode("unknown",n,Number.MAX_SAFE_INTEGER)}}}function Mr(t){return t.reverse().reduce(function(n,e,r){return n+e*Math.pow(32,r)},0)}function sn(t,n){var e=cc.hp.from(function mc(t,n,e){for(var r=0,i=0,s=(1<<e)-1,u=[],d=0;d<t.length;++d)for(r=r<<n|t[d],i+=n;i>=e;)u.push(r>>(i-=e)&s);return i>0&&u.push(r<<e-i&s),u}(t,5,8));return n&&5*t.length%8!=0&&(e=e.slice(0,-1)),e}var Ui=k(7673),Li=k(9437),_c=k(1626);let us=(()=>{class t{constructor(e){this.http=e}getLightning(e){return this.http.get(e).pipe((0,Li.W)(r=>(console.error("Failed to fetch Lightning response:",r),(0,Ui.of)({status:"Failed"}))))}getLightningInvoice(e,r){return this.http.get(`${e}?amount=${r}`).pipe((0,Li.W)(s=>(console.error("Failed to fetch Lightning invoice:",s),(0,Ui.of)({pr:"",status:"Failed"}))))}getLightningAddress(e){try{const[r,i]=e.split("@");return`https://${i}/.well-known/lnurlp/${r}`}catch{return console.error("Invalid Lightning address format:",e),""}}sendZapRequest(e,r,i,s){const u=encodeURIComponent(JSON.stringify(r));return this.http.get(`${e}?amount=${i}&nostr=${u}&lnurl=${s}`).pipe((0,Li.W)(p=>(console.error("Failed to send zap request:",p),(0,Ui.of)({pr:"",status:"Failed"}))))}login(){return(0,v.A)(function*(){try{return window.webln&&!window.webln.isEnabled()&&(yield window.webln.enable()),!0}catch(e){return console.error("WebLN login failed:",e),!1}})()}hasWebln(){return!!window.webln}sendPayment(e){var r=this;return(0,v.A)(function*(){try{return r.hasWebln()?yield window.webln.sendPayment(e):(console.error("WebLN is not available"),null)}catch(i){throw console.error("Payment failed:",i),i}})()}payInvoice(e){var r=this;return(0,v.A)(function*(){if((yield r.login())&&r.hasWebln())try{return!!(yield r.sendPayment(e))}catch(s){return console.error("Failed to pay invoice:",s),!1}return console.error("WebLN not available or login failed"),!1})()}static{this.\u0275fac=function(r){return new(r||t)(o.KVO(_c.Qq))}}static{this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xc(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",10),o.bIt("click",function(){const i=o.eBV(e).$implicit,s=o.XpG(2);return o.Njj(s.sats=i.value)}),o.j41(1,"mat-icon"),o.EFF(2),o.k0s(),o.j41(3,"span"),o.EFF(4),o.k0s()()}if(2&t){const e=n.$implicit;o.R7$(2),o.JRh(e.icon),o.R7$(2),o.JRh(e.label)}}function Ec(t,n){if(1&t){const e=o.RV6();o.j41(0,"mat-dialog-content")(1,"div",4),o.DNE(2,xc,5,2,"button",5),o.k0s(),o.nrm(3,"mat-divider"),o.j41(4,"mat-form-field",6)(5,"mat-label"),o.EFF(6,"Zap Amount"),o.k0s(),o.j41(7,"input",7),o.mxI("ngModelChange",function(i){o.eBV(e);const s=o.XpG();return o.DH7(s.sats,i)||(s.sats=i),o.Njj(i)}),o.k0s()(),o.j41(8,"mat-dialog-actions",8)(9,"button",9),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.sendZap())}),o.EFF(10," Create invoice "),o.k0s()()()}if(2&t){const e=o.XpG();o.R7$(2),o.Y8G("ngForOf",e.zapButtons),o.R7$(5),o.R50("ngModel",e.sats)}}function Mc(t,n){if(1&t&&(o.j41(0,"div",16)(1,"span"),o.EFF(2),o.k0s(),o.nrm(3,"mat-divider")(4,"qrcode",17),o.k0s()),2&t){const e=o.XpG(2);o.R7$(2),o.SpI("Scan with phone to pay (",e.invoiceAmount," sats)"),o.R7$(2),o.Y8G("qrdata",e.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M")}}function kc(t,n){if(1&t){const e=o.RV6();o.j41(0,"mat-dialog-content"),o.DNE(1,Mc,5,4,"div",11),o.j41(2,"mat-dialog-actions",12)(3,"button",13),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.copyInvoice())}),o.nrm(4,"mat-icon",14),o.k0s(),o.j41(5,"button",13),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.payInvoice())}),o.nrm(6,"mat-icon",15),o.k0s()()()}if(2&t){const e=o.XpG();o.R7$(),o.Y8G("ngIf",e.displayQRCode),o.R7$(2),o.Y8G("matTooltip","Copy Invoice"),o.R7$(),o.Y8G("svgIcon","heroicons_outline:clipboard-document"),o.R7$(),o.Y8G("matTooltip","Pay Invoice"),o.R7$(),o.Y8G("svgIcon","feather:zap")}}let Sc=(()=>{class t{constructor(e,r,i,s,u){this._dialogRef=e,this._metadata=r,this._lightning=i,this._snackBar=s,this._clipboard=u,this.lightningInvoice="",this.showInvoiceSection=!1,this.displayQRCode=!1,this.invoiceAmount="?",this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}],this.getLightningInfo()}getLightningInfo(){let e="";if(this._metadata?.lud06){const{words:r}=ne.I.decode(this._metadata.lud06,5e3),i=new Uint8Array(ne.I.fromWords(r));e=(new TextDecoder).decode(Uint8Array.from(i))}else if(this._metadata?.lud16?.toLowerCase().startsWith("lnurl")){const{words:r}=ne.I.decode(this._metadata.lud16,5e3),i=new Uint8Array(ne.I.fromWords(r));e=(new TextDecoder).decode(Uint8Array.from(i))}else this._metadata?.lud16&&(e=this._lightning.getLightningAddress(this._metadata.lud16));""!==e?this._lightning.getLightning(e).subscribe(r=>{this.lightningResponse=r,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.showInvoiceSection=!0:this.openSnackBar("Couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}getLightningInvoice(e){var r=this;this.lightningResponse&&this.lightningResponse.callback&&this._lightning.getLightningInvoice(this.lightningResponse.callback,e).subscribe(function(){var i=(0,v.A)(function*(s){r.lightningInvoice=s.pr,r.setInvoiceAmount(r.lightningInvoice),r.showInvoiceSection=!0,r.showQRCode()});return function(s){return i.apply(this,arguments)}}())}setInvoiceAmount(e){if(e){const i=function bc(t,n){if("string"!=typeof t)throw new Error("Lightning Payment Request must be string");if("ln"!==t.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");var e=[],r=ns.decode(t,Number.MAX_SAFE_INTEGER);t=t.toLowerCase();var i=r.prefix,s=r.words,u=t.slice(i.length+1),d=s.slice(-104);s=s.slice(0,-104);var p=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(p&&!p[2]&&(p=i.match(/^ln(\S+)$/)),!p)throw new Error("Not a proper lightning payment request");e.push({name:"lightning_network",letters:"ln"});var M,m=p[1];if(n){if(void 0===n.bech32||void 0===n.pubKeyHash||void 0===n.scriptHash||!Array.isArray(n.validWitnessVersions))throw new Error("Invalid network");M=n}else switch(m){case rs.bech32:M=rs;break;case is.bech32:M=is;break;case os.bech32:M=os;break;case ss.bech32:M=ss;break;case as.bech32:M=as}if(!M||M.bech32!==m)throw new Error("Unknown coin bech32 prefix");e.push({name:"coin_network",letters:m,value:M});var O,S=p[2];S?(O=function wc(t,n){var e,r;if(t.slice(-1).match(/^[munp]$/))e=t.slice(-1),r=t.slice(0,-1);else{if(t.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=t}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");var i=new Kt.BN(r,10),s=e?i.mul(ls).div(uc[e]):i.mul(ls);if("p"===e&&!i.mod(new Kt.BN(10,10)).eq(new Kt.BN(0,10))||s.gt(dc))throw new Error("Amount is outside of valid range");return n?s.toString():s}(S+p[3],!0),e.push({name:"amount",letters:p[2]+p[3],value:O})):O=null,e.push({name:"separator",letters:"1"});var I,j,F,W,U=Mr(s.slice(0,7));for(s=s.slice(7),e.push({name:"timestamp",letters:u.slice(0,7),value:U}),u=u.slice(7);s.length>0;){var Z=s[0].toString();I=cs[Z]||"unknown_tag",j=pc[Z]||gc(Z),F=Mr((s=s.slice(1)).slice(0,2)),W=(s=s.slice(2)).slice(0,F),s=s.slice(F),e.push({name:I,tag:u[0],letters:u.slice(0,3+F),value:j(W)}),u=u.slice(3+F)}e.push({name:"signature",letters:u.slice(0,104),value:sn(d,!0)}),u=u.slice(104),e.push({name:"checksum",letters:u});var V={paymentRequest:t,sections:e,get expiry(){var Q=e.find(function(X){return"expiry"===X.name});if(Q)return Y("timestamp")+Q.value},get route_hints(){return e.filter(function(Q){return"route_hint"===Q.name}).map(function(Q){return Q.value})}},J=function(Q){if("route_hint"===Q)return"continue";Object.defineProperty(V,Q,{get:function(){return Y(Q)}})};for(var q in Bi)J(q);return V;function Y(Q){var X=e.find(function(ge){return ge.name===Q});return X?X.value:void 0}}(e).sections.find(s=>"amount"===s.name);i&&(this.invoiceAmount=String(Number(i.value)/1e3))}}showQRCode(){this.displayQRCode=!this.displayQRCode}sendZap(){this.getLightningInvoice(String(1e3*Number(this.sats)))}payInvoice(){var e=this;return(0,v.A)(function*(){if(!e.lightningInvoice)return void console.error("Lightning invoice is not set");const r=new xr.NostrWebLNProvider({nostrWalletConnectUrl:yield e.loadNWCUrl()});r.enable().then(()=>r.sendPayment(e.lightningInvoice)).then(i=>{i&&i.preimage?(console.log(`Payment successful, preimage: ${i.preimage}`),e.openSnackBar("Zapped!","dismiss"),e._dialogRef.close()):e.listenForPaymentStatus(r)}).catch(i=>{console.error("Payment failed:",i),e.openSnackBar("Failed to pay invoice","dismiss"),e.listenForPaymentStatus(r)})})()}loadNWCUrl(){const e=xr.NostrWebLNProvider.withNewSecret();return e.initNWC({name:"Angor Hub"}).then(()=>e.getNostrWalletConnectUrl()).catch(r=>{throw console.error("Error initializing NWC:",r),r})}listenForPaymentStatus(e){const r=()=>{e.sendPayment(this.lightningInvoice).then(i=>{i&&i.preimage?(console.log("Payment confirmed, preimage:",i.preimage),this.openSnackBar("Payment confirmed!","dismiss"),this._dialogRef.close()):setTimeout(r,5e3)}).catch(i=>{console.error("Error checking payment status:",i),setTimeout(r,5e3)})};r()}copyInvoice(){this.lightningInvoice?(this._clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(e,r){this._snackBar.open(e,r,{duration:1300})}closeDialog(){this._dialogRef.close()}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(Ue.CP),o.rXU(Ue.Vh),o.rXU(us),o.rXU(Ri.UG),o.rXU(Pi))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-send-dialog"]],standalone:!0,features:[o.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],["align","center"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"],["color","#f79318",3,"svgIcon"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"]],template:function(r,i){1&r&&(o.j41(0,"div",0)(1,"button",1),o.nrm(2,"mat-icon",2),o.k0s()(),o.j41(3,"h1"),o.EFF(4,"\u26a1 Send Zap"),o.k0s(),o.DNE(5,Ec,11,2,"mat-dialog-content",3)(6,kc,7,5,"mat-dialog-content",3)),2&r&&(o.R7$(),o.Y8G("matDialogClose",void 0),o.R7$(),o.Y8G("svgIcon","heroicons_outline:x-mark"),o.R7$(3),o.Y8G("ngIf",!i.showInvoiceSection||!i.lightningInvoice),o.R7$(),o.Y8G("ngIf",i.showInvoiceSection&&i.lightningInvoice))},dependencies:[Ve.vg,P.Hl,P.$z,P.iY,P.$0,oe.m_,oe.An,T.YN,T.me,T.Q0,T.BC,T.vS,H.nJ,H.rl,T.X1,f.MD,f.Sq,f.bT,Sn.Ve,H.RG,le.fS,le.fg,Ue.Yi,Ue.E7,we,he,B.q,$.oV,Ue.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}}return t})(),Ac=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({})}}return t})();var Cc=k(6939),Tc=k(6600);k(9969);let Ic=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=o.$C({type:t})}static{this.\u0275inj=o.G2t({imports:[Tc.yE,Ac,Cc.jc]})}}return t})();var Oi=k(4930),Rc=k(7291),fs=k(6231),hs=k(7343);let Pc=(()=>{class t{constructor(e,r,i){this.relayService=e,this.signerService=r,this.queueService=i,this.followersSubject=new qe.B,this.followingSubject=new qe.B}getFollowersObservable(){return this.followersSubject.asObservable()}getFollowingObservable(){return this.followingSubject.asObservable()}getFollowers(e){var r=this;return(0,v.A)(function*(){const i=[{kinds:[3],"#p":[e]}],s=[];return new Promise((u,d)=>{r.queueService.addRequestToQueue(i).subscribe({next:m=>{s.push(m),r.followersSubject.next(m)},error:m=>{console.error("Error fetching followers:",m),d(m)},complete:()=>{u(s)}})})})()}getFollowing(e){var r=this;return(0,v.A)(function*(){const i=[{kinds:[3],authors:[e]}],s=[];return new Promise((u,d)=>{r.queueService.addRequestToQueue(i).subscribe({next:m=>{m.tags.filter(S=>"p"===S[0]).forEach(S=>{s.push(S[1]),r.followingSubject.next(m)})},error:m=>{console.error("Error fetching following:",m),d(m)},complete:()=>{u(s)}})})})()}follow(e){var r=this;return(0,v.A)(function*(){const i=r.getFollowingList();if(i.includes(e))return void console.log(`Already following ${e}`);const s=[...i,e];r.setFollowingList(s);const u=r.signerService.getUnsignedEvent(3,s.map(d=>["p",d]),"");yield r.publishSignedEvent(u),console.log(`Now following ${e}`)})()}unfollow(e){var r=this;return(0,v.A)(function*(){const i=r.getFollowingList();if(!i.includes(e))return void console.log(`Not following ${e}`);const s=i.filter(d=>d!==e);r.setFollowingList(s);const u=r.signerService.getUnsignedEvent(3,s.map(d=>["p",d]),"");yield r.publishSignedEvent(u),console.log(`Unfollowed ${e}`)})()}publishSignedEvent(e){var r=this;return(0,v.A)(function*(){let s;if(yield r.signerService.isUsingExtension())s=yield r.signerService.signEventWithExtension(e);else{const u=yield r.signerService.getDecryptedSecretKey();if(!u)throw new Error("Secret key is missing. Unable to sign event.");s=r.signerService.getSignedEvent(e,u)}r.relayService.publishEventToWriteRelays(s)})()}getFollowingListAsTags(){const e=this.getFollowingList(),r=[],i=this.relayService.getConnectedRelays();return e.forEach(s=>{i.forEach(u=>{r.push(["p",s,u,localStorage.getItem(`${s}`)||""])})}),r}setFollowingListFromTags(e){const r=[];e.forEach(i=>{r.push(i[1])}),this.setFollowingList(r)}setFollowingList(e){const i=Array.from(new Set(e)).filter(s=>s).join(",");localStorage.setItem("following",i)}getFollowingList(){const e=localStorage.getItem("following");return null===e||""===e?[]:e.split(",").filter(i=>/[a-f0-9]{64}/.test(i))}static{this.\u0275fac=function(r){return new(r||t)(o.KVO(fs.b),o.KVO(Oi.A),o.KVO(hs.F))}}static{this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Bc=k(881),Nc=k(9979),kr=k(5766);class Uc{constructor(n,e,r,i,s,u,d=[]){this.username="",this.picture="/images/avatars/avatar-placeholder.png",this.replyCount=0,this.likeCount=0,this.zapCount=0,this.repostCount=0,this.likedByMe=!1,this.replies=[],this.likers=[],this.reposters=[],this.zappers=[],this.relatedEventIds=[],this.rootEventId="",this.replyToEventId="",this.mentions=[],this.hashtags=[],this.repostedByMe=!1,this.tags=[],this.isAReply=!1,this.kind=e,this.pubkey=r,this.content=i,this.noteId=s,this.createdAt=u,this.date=new Date(1e3*this.createdAt),this.fromNow=this.calculateTimeFromNow(this.date),this.tags=d,this.id=n}calculateTimeFromNow(n){const r=Math.floor(((new Date).getTime()-n.getTime())/1e3);return r<60?`${r} seconds ago`:r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<2592e3?`${Math.floor(r/86400)} days ago`:r<31536e3?`${Math.floor(r/2592e3)} months ago`:`${Math.floor(r/31536e3)} years ago`}}var Sr=k(719),Di=k(4412),Lc=k(3386),Oc=k(2827);let Dc=(()=>{class t{constructor(e,r,i,s){this.relayService=e,this.signerService=r,this.metadataService=i,this.queueService=s,this.eventsSubject=new Di.t([]),this.isLoading=new Di.t(!1),this.lastLoadedEventTime=null,this.pageSize=10,this.noMoreEvents=new Di.t(!1),this.seenEventIds=new Set,this.likesMap=new Map,this.repliesMap=new Map,this.zapsMap=new Map,this.repostsMap=new Map,this.hasLikedMap=new Map,this.hasRepostedMap=new Map,this.jobQueue=[],this.isProcessingQueue=!1,this.myLikedNoteIds=[]}subscribeToEvents(e){var r=this;return(0,v.A)(function*(){yield r.relayService.ensureConnectedRelays();const i=r.relayService.getConnectedRelays().slice(0,3);if(!i||0===i.length)return void console.error("No connected relays available.");const s=[{kinds:[1],authors:e,limit:r.pageSize},{"#p":e,limit:1}];r.relayService.getPool().subscribeMany(i,s,{onevent:d=>{r.isReply(d)||r.handleNewOrUpdatedEvent(d);const p=r.getParentEventId(d);switch(p&&r.enqueueJob(p),d.kind){case 7:case 9735:case 6:r.enqueueJob(p)}},oneose:()=>{}})})()}getParentEventId(e){const r=e.tags.find(i=>"e"===i[0]);return r?r[1]:null}handleNewOrUpdatedEvent(e){var r=this;return(0,v.A)(function*(){switch(e.kind){case 1:if(!r.seenEventIds.has(e.id)){r.seenEventIds.add(e.id);const i=yield r.createNewEvent(e);r.eventsSubject.next([i]),r.updateEventInSubject(e.id)}break;case 7:r.handleLikeEvent(e);break;case 9735:r.handleZapEvent(e);break;case 6:r.handleRepostEvent(e);break;case 4:r.handleReplyEvent(e)}})()}handleLikeEvent(e){const r=e.tags.find(i=>"e"===i[0])?.[1];if(r){const s=this.eventsSubject.getValue().find(u=>u.id===r);s&&(s.likeCount+=1,s.likers=[...s.likers||[],e.pubkey],this.eventsSubject.next([s]))}}handleZapEvent(e){const r=e.tags.find(i=>"e"===i[0])?.[1];if(r){const s=this.eventsSubject.getValue().find(u=>u.id===r);s&&(s.zapCount+=1,s.zappers=[...s.zappers||[],e.pubkey],this.eventsSubject.next([s]))}}handleRepostEvent(e){const r=e.tags.find(i=>"e"===i[0])?.[1];if(r){const s=this.eventsSubject.getValue().find(u=>u.id===r);s&&(s.repostCount+=1,s.reposters=[...s.reposters||[],e.pubkey],this.eventsSubject.next([s]))}}handleReplyEvent(e){var r=this;return(0,v.A)(function*(){const i=e.tags.find(s=>"e"===s[0])?.[1];if(i){const s=yield r.createNewEvent(e),d=r.eventsSubject.getValue().find(p=>p.id===i);d&&(d.replyCount+=1,d.replies=[...d.replies||[],s],r.eventsSubject.next([d]))}})()}isReply(e){return e.tags.filter(i=>"e"===i[0]||"p"===i[0]).length>0}getMyLikes(){var e=this;return(0,v.A)(function*(){const r={kinds:[7],authors:[e.signerService.getPublicKey()]};try{return(yield e.fetchFilteredEvents(r)).forEach(s=>{const u=s.tags.find(d=>"e"===d[0]);u&&e.myLikedNoteIds.push(u[1])}),e.myLikedNoteIds}catch(i){return console.error("Failed to get user likes:",i),[]}})()}loadMoreEvents(e){var r=this;return(0,v.A)(function*(){if(r.isLoading.value||r.noMoreEvents.value)return;r.isLoading.next(!0);const i={authors:e,kinds:[1],until:r.lastLoadedEventTime||Math.floor(Date.now()/1e3),limit:r.pageSize};try{const s=yield r.fetchFilteredEvents(i);if(s.length<r.pageSize&&r.noMoreEvents.next(!0),s.length>0){r.lastLoadedEventTime=s[s.length-1].created_at;const u=s.filter(p=>!r.seenEventIds.has(p.id)&&!r.isReply(p));u.forEach(p=>r.seenEventIds.add(p.id));const d=yield Promise.all(u.map(p=>r.createNewEvent(p)));r.eventsSubject.next([...r.eventsSubject.getValue(),...d].sort((p,m)=>m.createdAt-p.createdAt))}else r.noMoreEvents.next(!0)}catch(s){console.error("Error loading more events:",s)}finally{r.isLoading.next(!1)}})()}fetchFilteredEvents(e){var r=this;return(0,v.A)(function*(){return new Promise((i,s)=>{const u=new Map,d=[];r.queueService.addRequestToQueue([e]).subscribe({next:p=>{u.has(p.id)||(u.set(p.id,p),d.push(p))},error:p=>{console.error("Error fetching events:",p),s(p)},complete:()=>{console.log("All events fetched and completed"),i(d)}})})})()}createNewEvent(e){var r=this;return(0,v.A)(function*(){const i=new Uc(e.id,e.kind,e.pubkey,e.content,e.id,e.created_at,e.tags);r.enqueueJob(e.id),yield r.processJobQueue(),i.likedByMe=r.myLikedNoteIds.includes(e.id);const s=yield r.metadataService.fetchMetadataWithCache(e.pubkey);return s&&(i.username=s.name||i.npub,i.picture=s.picture||"/images/avatars/avatar-placeholder.png"),i})()}enqueueJob(e){this.jobQueue.some(r=>r.eventId===e)||(this.jobQueue.push({eventId:e}),this.isProcessingQueue||this.processJobQueue())}processJobQueue(){var e=this;return(0,v.A)(function*(){if(e.isProcessingQueue)return;e.isProcessingQueue=!0;const r=[];for(;e.jobQueue.length>0||r.length>0;){for(;e.jobQueue.length>0&&r.length<10;){const i=e.jobQueue.shift();if(!i)break;yield e.delay(1e3);const s=e.processJobWithQueueService(i);r.push(s),s.then(()=>{r.splice(r.indexOf(s),1)}).catch(u=>{console.error("Error processing job:",u),r.splice(r.indexOf(s),1)})}yield Promise.race(r)}e.isProcessingQueue=!1})()}processJobWithQueueService(e){var r=this;return(0,v.A)(function*(){try{const i=yield r.fetchMultiFilterEvents(e.eventId);r.repliesMap.set(e.eventId,i.replies),r.likesMap.set(e.eventId,i.likers),r.zapsMap.set(e.eventId,i.zappers),r.repostsMap.set(e.eventId,i.reposters),r.updateEventInSubject(e.eventId)}catch(i){throw console.error("Error processing job with QueueService:",i),i}})()}delay(e){return new Promise(r=>setTimeout(r,e))}updateEventInSubject(e){const i=this.eventsSubject.getValue().map(s=>(s.id===e&&(s.replyCount=this.getRepliesCount(e),s.replies=this.repliesMap.get(e)||[],s.likeCount=this.getLikesCount(e),s.likers=this.likesMap.get(e)||[],s.zapCount=this.getZapsCount(e),s.zappers=this.zapsMap.get(e)||[],s.repostCount=this.getRepostsCount(e),s.reposters=this.repostsMap.get(e)||[]),s));this.eventsSubject.next(i)}fetchMultiFilterEvents(e){var r=this;return(0,v.A)(function*(){const i=[{"#e":[e],kinds:[1]},{"#e":[e],kinds:[7]},{"#e":[e],kinds:[9735]},{"#e":[e],kinds:[6]}],s=new Map,u=[],d=[],p=[],m=[],M=r.queueService.addRequestToQueue(i);return new Promise((S,O)=>{var L;M.subscribe({next:(L=(0,v.A)(function*(U){if(s.has(U.id)||s.set(U.id,U),1===U.kind){const I=yield r.createNewEvent(U);u.push(I)}else 7===U.kind?d.push(U.pubkey):9735===U.kind?p.push(U.pubkey):6===U.kind&&m.push(U.pubkey)}),function(I){return L.apply(this,arguments)}),error:L=>{console.error("Error fetching events:",L),O(L)},complete:()=>{S({replies:u,likers:d,zappers:p,reposters:m})}})})})()}getRepliesCount(e){return(this.repliesMap.get(e)||[]).length}getLikesCount(e){return(this.likesMap.get(e)||[]).length}getZapsCount(e){return(this.zapsMap.get(e)||[]).length}getRepostsCount(e){return(this.repostsMap.get(e)||[]).length}hasUserLiked(e){return this.hasLikedMap.get(e)||!1}hasUserReposted(e){return this.hasRepostedMap.get(e)||!1}getEventStream(){return this.eventsSubject.asObservable().pipe((0,Lc.c)(1e3))}hasMoreEvents(){return this.noMoreEvents.asObservable()}sendTextEvent(e){var r=this;return(0,v.A)(function*(){if(e)try{const s=r.signerService.getUnsignedEvent(1,[],e);let u;if(r.signerService.isUsingSecretKey()){const d=yield r.signerService.getDecryptedSecretKey(),p=(0,kr.aT)(d);u=(0,Sr.pC)(s,p)}else u=yield r.signerService.signEventWithExtension(s);yield r.relayService.publishEventToWriteRelays(u)}catch(i){console.error("Failed to send text event:",i)}})()}sendLikeEvent(e){var r=this;return(0,v.A)(function*(){if(e)try{const u=r.signerService.getUnsignedEvent(7,[["e",e.id],["p",e.pubkey]],"+");let d;if(r.signerService.isUsingSecretKey()){const p=yield r.signerService.getDecryptedSecretKey(),m=(0,kr.aT)(p);d=(0,Sr.pC)(u,m)}else d=yield r.signerService.signEventWithExtension(u);yield r.relayService.publishEventToWriteRelays(d),r.likesMap.set(e.id,[...r.likesMap.get(e.id)||[],r.signerService.getPublicKey()]),r.hasLikedMap.set(e.id,!0)}catch(i){console.error("Failed to send like event:",i)}})()}sendZapEvent(e,r){var i=this;return(0,v.A)(function*(){if(e&&!(r<=0))try{const s=[["e",e.id],["p",e.pubkey],["amount",r.toString()]],d=i.signerService.getUnsignedEvent(9735,s,`Zapped with ${r} sats`);let p;if(i.signerService.isUsingSecretKey()){const m=yield i.signerService.getDecryptedSecretKey(),M=(0,kr.aT)(m);p=(0,Sr.pC)(d,M)}else p=yield i.signerService.signEventWithExtension(d);yield i.relayService.publishEventToWriteRelays(p)}catch(s){console.error("Failed to send zap event:",s)}})()}sendReplyEvent(e,r){var i=this;return(0,v.A)(function*(){if(e)try{const u=i.signerService.getUnsignedEvent(1,[["e",e.id],["p",e.pubkey]],r);let d;if(i.signerService.isUsingSecretKey()){const p=yield i.signerService.getDecryptedSecretKey(),m=(0,kr.aT)(p);d=(0,Sr.pC)(u,m)}else d=yield i.signerService.signEventWithExtension(u);yield i.relayService.publishEventToWriteRelays(d)}catch(s){console.error("Failed to send reply event:",s)}})()}clearEvents(){this.eventsSubject.next([]),this.seenEventIds.clear(),this.lastLoadedEventTime=null,this.noMoreEvents.next(!1)}static{this.\u0275fac=function(r){return new(r||t)(o.KVO(fs.b),o.KVO(Oi.A),o.KVO(Oc.T),o.KVO(hs.F))}}static{this.\u0275prov=o.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var jc=k(5645);const Fc=["eventInput"],$c=["commentInput"],Hc=(t,n)=>({height:t,overflow:n}),qc=(t,n)=>({"white-space":t,"max-height":n,overflow:"hidden"}),Gc=t=>({"heart-beat":t}),zc=t=>({"rotate-180":t});function Wc(t,n){if(1&t&&(o.qex(0),o.nrm(1,"img",35),o.bVm()),2&t){const e=o.XpG();o.R7$(),o.FS9("alt",(null==e.profileUser?null:e.profileUser.display_name)||(null==e.profileUser?null:e.profileUser.name)||""),o.Y8G("src",e.getSafeUrl(null==e.profileUser?null:e.profileUser.picture),o.B4B)}}function Vc(t,n){if(1&t&&o.nrm(0,"img",36),2&t){const e=o.XpG();o.FS9("alt",(null==e.profileUser?null:e.profileUser.display_name)||(null==e.profileUser?null:e.profileUser.name)||"")}}function Yc(t,n){if(1&t&&(o.j41(0,"div",37)(1,"div",38)(2,"span",39),o.EFF(3),o.k0s(),o.j41(4,"span",40),o.EFF(5,"FOLLOWERS"),o.k0s()(),o.j41(6,"div",38)(7,"span",41),o.EFF(8),o.k0s(),o.j41(9,"span",42),o.EFF(10,"FOLLOWING"),o.k0s()()()),2&t){const e=n.ngIf;o.R7$(2),o.Y8G("matTooltip","Total contact: "+e.totalContacts),o.R7$(),o.JRh(e.followersCount),o.R7$(5),o.JRh(e.followingCount),o.R7$(),o.Y8G("matTooltip","Total contact: "+e.totalContacts)}}function Kc(t,n){if(1&t){const e=o.RV6();o.j41(0,"div")(1,"button",43),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.toggleFollow())}),o.nrm(2,"mat-icon",44),o.k0s()()}if(2&t){const e=o.XpG();o.R7$(),o.Y8G("matTooltip",e.isFollowing?"Unfollow":"Follow"),o.R7$(),o.Y8G("svgIcon",e.isFollowing?"heroicons_outline:user-minus":"heroicons_outline:user-plus")}}function Zc(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",24),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.zap())}),o.j41(1,"span",25),o.nrm(2,"mat-icon",26),o.j41(3,"span"),o.EFF(4,"Send Zap"),o.k0s()()()}2&t&&(o.R7$(2),o.Y8G("svgIcon","feather:zap"))}function Xc(t,n){if(1&t){const e=o.RV6();o.j41(0,"button",24),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.openReceiveZapDialog())}),o.j41(1,"span",25),o.nrm(2,"mat-icon",26),o.j41(3,"span"),o.EFF(4,"Receive Zap"),o.k0s()()()}2&t&&(o.R7$(2),o.Y8G("svgIcon","heroicons_outline:qr-code"))}function Qc(t,n){1&t&&(o.j41(0,"button",45)(1,"span",25),o.nrm(2,"mat-icon",26),o.j41(3,"span"),o.EFF(4,"Edit your profile"),o.k0s()()()),2&t&&(o.Y8G("routerLink","/settings/profile"),o.R7$(2),o.Y8G("svgIcon","heroicons_outline:pencil-square"))}function Jc(t,n){1&t&&(o.j41(0,"button",46)(1,"span",25),o.nrm(2,"mat-icon",26),o.j41(3,"span"),o.EFF(4,"Report"),o.k0s()()()),2&t&&(o.R7$(2),o.Y8G("svgIcon","heroicons_solid:exclamation-triangle"))}function eu(t,n){1&t&&(o.j41(0,"button",46)(1,"span",25),o.nrm(2,"mat-icon",26),o.j41(3,"span"),o.EFF(4,"Turn on notifications"),o.k0s()()()),2&t&&(o.R7$(2),o.Y8G("svgIcon","heroicons_solid:bell"))}function tu(t,n){1&t&&(o.j41(0,"span",53),o.EFF(1,"..."),o.k0s())}function nu(t,n){if(1&t){const e=o.RV6();o.j41(0,"angor-card",47)(1,"div",48)(2,"div",49),o.EFF(3,"About"),o.k0s(),o.j41(4,"button",50),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.toggleAbout())}),o.j41(5,"mat-icon"),o.EFF(6),o.k0s()()(),o.j41(7,"div",51),o.EFF(8),o.DNE(9,tu,2,0,"span",52),o.k0s()()}if(2&t){const e=o.XpG();o.Y8G("ngStyle",o.l_i(5,Hc,e.aboutExpanded?"auto":"80px",e.aboutExpanded?"visible":"hidden")),o.R7$(6),o.JRh(e.aboutExpanded?"expand_less":"expand_more"),o.R7$(),o.Y8G("ngStyle",o.l_i(8,qc,e.aboutExpanded?"normal":"nowrap",e.aboutExpanded?"none":"1.5em")),o.R7$(),o.SpI(" ",(null==e.profileUser?null:e.profileUser.about)||""," "),o.R7$(),o.Y8G("ngIf",!e.aboutExpanded)}}function ru(t,n){if(1&t){const e=o.RV6();o.j41(0,"div",72)(1,"emoji-mart",73),o.bIt("emojiClick",function(i){o.eBV(e);const s=o.XpG(2);return o.Njj(s.addEmoji(i))}),o.k0s()()}if(2&t){const e=o.XpG(2);o.R7$(),o.Y8G("darkMode",e.darkMode)}}function iu(t,n){if(1&t){const e=o.RV6();o.j41(0,"angor-card",54)(1,"div",55)(2,"div",56),o.EFF(3,"Create Post"),o.k0s(),o.j41(4,"mat-slide-toggle",57),o.bIt("change",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.togglePreview())}),o.EFF(5," Preview "),o.k0s()(),o.j41(6,"div",58)(7,"div",59),o.nrm(8,"img",60),o.j41(9,"div",61),o.EFF(10),o.k0s()(),o.j41(11,"mat-form-field",62),o.nrm(12,"textarea",63,2),o.k0s()(),o.j41(14,"div",64)(15,"div",25)(16,"button",65),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.toggleEmojiPicker())}),o.nrm(17,"mat-icon",22),o.j41(18,"span",66),o.EFF(19,"Feeling"),o.k0s()(),o.DNE(20,ru,2,1,"div",67),o.j41(21,"button",68),o.nrm(22,"mat-icon",22),o.j41(23,"span",66),o.EFF(24,"Media"),o.k0s()(),o.j41(25,"button",68),o.nrm(26,"mat-icon",22),o.j41(27,"span",66),o.EFF(28,"Tag"),o.k0s()(),o.j41(29,"button",69),o.nrm(30,"mat-icon",22),o.k0s(),o.j41(31,"mat-menu",null,3)(33,"button",70)(34,"span",25),o.nrm(35,"mat-icon",26),o.j41(36,"span"),o.EFF(37,"Tag"),o.k0s()()(),o.j41(38,"button",70)(39,"span",25),o.nrm(40,"mat-icon",26),o.j41(41,"span"),o.EFF(42,"Feeling"),o.k0s()()(),o.j41(43,"button",46)(44,"span",25),o.nrm(45,"mat-icon",26),o.j41(46,"span"),o.EFF(47,"Live"),o.k0s()()(),o.j41(48,"button",46)(49,"span",25),o.nrm(50,"mat-icon",26),o.j41(51,"span"),o.EFF(52,"Gif"),o.k0s()()(),o.j41(53,"button",46)(54,"span",25),o.nrm(55,"mat-icon",26),o.j41(56,"span"),o.EFF(57,"Check in"),o.k0s()()()()(),o.j41(58,"button",71),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.sendEvent())}),o.nrm(59,"mat-icon",22),o.j41(60,"span",66),o.EFF(61,"Send"),o.k0s()()()()}if(2&t){const e=o.sdS(32),r=o.XpG();o.R7$(4),o.Y8G("color","primary"),o.R7$(4),o.FS9("alt",(null==r.currentUser?null:r.currentUser.display_name)||(null==r.currentUser?null:r.currentUser.name)||"Avatar"),o.Y8G("src",(null==r.currentUser?null:r.currentUser.picture)||"images/avatars/avatar-placeholder.png",o.B4B),o.R7$(2),o.SpI(" ",(null==r.currentUser?null:r.currentUser.name)||"Unknown User"," "),o.R7$(),o.Y8G("subscriptSizing","dynamic"),o.R7$(),o.Y8G("placeholder","What's on your mind?")("rows",3),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:face-smile"),o.R7$(3),o.Y8G("ngIf",r.showEmojiPicker),o.R7$(2),o.Y8G("svgIcon","heroicons_solid:photo"),o.R7$(4),o.Y8G("svgIcon","heroicons_solid:user-circle"),o.R7$(3),o.Y8G("matMenuTriggerFor",e),o.R7$(),o.Y8G("svgIcon","heroicons_solid:ellipsis-horizontal"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:user-circle"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:face-smile"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:play"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:sparkles"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:map-pin"),o.R7$(4),o.Y8G("svgIcon","heroicons_solid:paper-airplane")}}function ou(t,n){if(1&t){const e=o.RV6();o.j41(0,"div",72)(1,"emoji-mart",73),o.bIt("emojiClick",function(i){o.eBV(e);const s=o.XpG(2);return o.Njj(s.addEmojiTocomment(i))}),o.k0s()()}if(2&t){const e=o.XpG(2);o.R7$(),o.Y8G("darkMode",e.darkMode)}}function su(t,n){if(1&t){const e=o.RV6();o.j41(0,"angor-card",74,4)(2,"div",75),o.nrm(3,"img",76),o.j41(4,"div",77)(5,"span",78),o.EFF(6),o.k0s(),o.j41(7,"span",79),o.EFF(8,"1 minutes ago"),o.k0s()(),o.j41(9,"button",80),o.nrm(10,"mat-icon",22),o.k0s(),o.j41(11,"mat-menu",null,5)(13,"button",46)(14,"span",25),o.nrm(15,"mat-icon",26),o.j41(16,"span"),o.EFF(17,"Save post"),o.k0s()()(),o.j41(18,"button",46)(19,"span",25),o.nrm(20,"mat-icon",26),o.j41(21,"span"),o.EFF(22,"Hide post"),o.k0s()()(),o.j41(23,"button",46)(24,"span",25),o.nrm(25,"mat-icon",26),o.j41(26,"span"),o.EFF(27,"Snooze for 30 days"),o.k0s()()(),o.j41(28,"button",46)(29,"span",25),o.nrm(30,"mat-icon",26),o.j41(31,"span"),o.EFF(32,"Hide all"),o.k0s()()(),o.nrm(33,"mat-divider",27),o.j41(34,"button",46)(35,"span",25),o.nrm(36,"mat-icon",26),o.j41(37,"span"),o.EFF(38,"Report post"),o.k0s()()(),o.j41(39,"button",46)(40,"span",25),o.nrm(41,"mat-icon",26),o.j41(42,"span"),o.EFF(43,"Turn on notifications for this post"),o.k0s()()()()(),o.j41(44,"div",81),o.EFF(45),o.k0s(),o.nrm(46,"div",82),o.j41(47,"div",83)(48,"button",65),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.toggleLike())}),o.nrm(49,"mat-icon",84),o.j41(50,"span",66),o.EFF(51),o.k0s()(),o.j41(52,"button",65),o.bIt("click",function(){o.eBV(e);const i=o.sdS(1);return o.Njj(i.expanded=!i.expanded)}),o.nrm(53,"mat-icon",22),o.j41(54,"span",66),o.EFF(55,"Comment"),o.k0s()(),o.j41(56,"button",85),o.nrm(57,"mat-icon",22),o.j41(58,"span",66),o.EFF(59,"Share"),o.k0s()()(),o.nrm(60,"hr",86),o.j41(61,"div",87)(62,"div",25),o.nrm(63,"img",88)(64,"img",89)(65,"img",89)(66,"img",89),o.j41(67,"div",90),o.EFF(68," You and 4 more liked this "),o.k0s()(),o.nrm(69,"div",91),o.j41(70,"div",92)(71,"button",93),o.EFF(72," 0 shares "),o.k0s(),o.j41(73,"button",94),o.bIt("click",function(){o.eBV(e);const i=o.sdS(1);return o.Njj(i.expanded=!i.expanded)}),o.j41(74,"span",95),o.EFF(75,"0 Comments"),o.k0s(),o.nrm(76,"mat-icon",96),o.k0s()()(),o.qex(77,97),o.nrm(78,"hr",98),o.j41(79,"div",99)(80,"div",100),o.nrm(81,"img",101),o.j41(82,"mat-form-field",62),o.nrm(83,"textarea",63,6),o.k0s()(),o.j41(85,"div",102)(86,"div",25)(87,"button",103),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.toggleCommentEmojiPicker())}),o.nrm(88,"mat-icon",22),o.k0s(),o.DNE(89,ou,2,1,"div",67),o.j41(90,"button",104),o.nrm(91,"mat-icon",22),o.k0s(),o.j41(92,"button",104),o.nrm(93,"mat-icon",22),o.k0s()(),o.j41(94,"button",105),o.nrm(95,"mat-icon",22),o.j41(96,"span",66),o.EFF(97,"Send"),o.k0s()()()(),o.bVm(),o.k0s()}if(2&t){const e=o.sdS(1),r=o.sdS(12),i=o.XpG();o.R7$(3),o.FS9("alt",(null==i.currentUser?null:i.currentUser.display_name)||(null==i.currentUser?null:i.currentUser.name)||"Avatar"),o.Y8G("src",(null==i.currentUser?null:i.currentUser.picture)||"images/avatars/avatar-placeholder.png",o.B4B),o.R7$(3),o.JRh((null==i.currentUser?null:i.currentUser.display_name)||(null==i.currentUser?null:i.currentUser.name)),o.R7$(3),o.Y8G("matMenuTriggerFor",r),o.R7$(),o.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:eye-slash"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:clock"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:minus-circle"),o.R7$(6),o.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:bell"),o.R7$(4),o.SpI(" ",i.eventInput.nativeElement.value," "),o.R7$(4),o.Y8G("ngClass",o.eq3(29,Gc,i.isLiked))("svgIcon",i.isLiked?"heroicons_solid:heart":"heroicons_outline:heart"),o.R7$(2),o.JRh(i.isLiked?"Unlike":"Like"),o.R7$(2),o.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),o.R7$(4),o.Y8G("svgIcon","heroicons_solid:share"),o.R7$(19),o.Y8G("ngClass",o.eq3(31,zc,e.expanded))("svgIcon","heroicons_mini:chevron-down"),o.R7$(5),o.FS9("alt",(null==i.currentUser?null:i.currentUser.display_name)||(null==i.currentUser?null:i.currentUser.name)||"Avatar"),o.Y8G("src",(null==i.currentUser?null:i.currentUser.picture)||"images/avatars/avatar-placeholder.png",o.B4B),o.R7$(),o.Y8G("subscriptSizing","dynamic"),o.R7$(),o.Y8G("placeholder","Write a comment...")("rows",3),o.R7$(5),o.Y8G("svgIcon","heroicons_solid:face-smile"),o.R7$(),o.Y8G("ngIf",i.showCommentEmojiPicker),o.R7$(2),o.Y8G("svgIcon","heroicons_solid:photo"),o.R7$(2),o.Y8G("svgIcon","heroicons_solid:sparkles"),o.R7$(2),o.Y8G("svgIcon","heroicons_solid:paper-airplane")}}const au=[{path:"",component:(()=>{class t{constructor(e,r,i,s,u,d,p,m,M,S,O,L,U,I){this._changeDetectorRef=e,this._signerService=r,this._storageService=i,this._sanitizer=s,this._route=u,this._socialService=d,this._snackBar=p,this._lightning=m,this._dialog=M,this._angorConfigService=S,this._angorConfirmationService=O,this._eventService=L,this._subscriptionService=U,this._clipboard=I,this.darkMode=!1,this.isLoading=!0,this.errorMessage=null,this._unsubscribeAll=new qe.B,this.allPublicKeys=[],this.isCurrentUserProfile=!1,this.isFollowing=!1,this.showEmojiPicker=!1,this.showCommentEmojiPicker=!1,this.lightningResponse=null,this.lightningInvoice=null,this.paymentInvoice="",this.invoiceAmount="?",this.isLiked=!1,this.isPreview=!1,this.posts=[],this.likes=[],this.myLikes=[],this.myLikedNoteIds=[],this.isLoadingPosts=!0,this.noEventsMessage="",this.totalContacts=0,this.followersCount=0,this.followingCount=0,this.aboutExpanded=!0}ngOnInit(){var e=this;return(0,v.A)(function*(){e._angorConfigService.config$.subscribe(r=>{"auto"===r.scheme?e.detectSystemTheme():e.darkMode="dark"===r.scheme}),e._route.paramMap.subscribe(r=>{const i=r.get("pubkey");if(i)e.routePubKey=i;else{e.isCurrentUserProfile=!0;const s=e._signerService.getPublicKey();e.routePubKey=s}e.loadProfileUser(e.routePubKey),e.stats$=e._storageService.getContactStats$(e.routePubKey)})})()}toggleAbout(){this.aboutExpanded=!this.aboutExpanded}ngOnDestroy(){this.subscriptionId&&this._subscriptionService.removeSubscriptionById(this.subscriptionId),this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadCurrentUser(){var e=this;return(0,v.A)(function*(){e.currentUser=null,e._storageService.profile$.subscribe(r=>{r&&r.pubKey&&r.metadata&&r.pubKey===e.routePubKey&&(e.currentUser=r.metadata,e._changeDetectorRef.detectChanges())}),e._storageService.getProfile(e.routePubKey).then(r=>{e._changeDetectorRef.detectChanges(),e.currentUser=r})})()}loadProfileUser(e){var r=this;return(0,v.A)(function*(){if(r.isLoading=!0,r.errorMessage=null,r.profileUser=null,r._changeDetectorRef.detectChanges(),!e)return r.errorMessage="No public key found. Please log in again.",r.isLoading=!1,void r._changeDetectorRef.detectChanges();try{const i=yield r._storageService.getProfile(e);i&&(r.profileUser=i,r._changeDetectorRef.detectChanges()),r.subscribeToUserProfile(e)}catch(i){console.error("Error loading user profile:",i)}})()}subscribeToUserProfile(e){var r=this;this.subscriptionId=this._subscriptionService.addSubscriptions([{authors:[e],kinds:[0],limit:1}],function(){var s=(0,v.A)(function*(u){try{const d=JSON.parse(u.content);r.profileUser=d,yield r._storageService.saveProfile(e,d),r._changeDetectorRef.detectChanges()}catch(d){console.error("Error processing metadata event:",d)}});return function(u){return s.apply(this,arguments)}}())}getSafeUrl(e){return this._sanitizer.bypassSecurityTrustUrl(e)}toggleFollow(){var e=this;return(0,v.A)(function*(){try{const r=e._signerService.getPublicKey(),i=e.routePubKey||e.currentUserPubKey;if(!i||!r)return void console.error("Public key missing. Unable to toggle follow.");e.isFollowing?(yield e._socialService.unfollow(i),console.log(`Unfollowed ${i}`)):(yield e._socialService.follow(i),console.log(`Followed ${i}`)),e.isFollowing=!e.isFollowing,e._changeDetectorRef.detectChanges()}catch(r){console.error("Failed to toggle follow:",r)}})()}openSnackBar(e,r){this._snackBar.open(e,r,{duration:1300})}getLightningInfo(){let e="";if(this.profileUser?.lud06){const{words:r}=ne.I.decode(this.profileUser.lud06,5e3),i=new Uint8Array(ne.I.fromWords(r));e=(new TextDecoder).decode(Uint8Array.from(i))}else if(this.profileUser?.lud16?.toLowerCase().startsWith("lnurl")){const{words:r}=ne.I.decode(this.profileUser.lud16,5e3),i=new Uint8Array(ne.I.fromWords(r));e=(new TextDecoder).decode(Uint8Array.from(i))}else this.profileUser?.lud16&&(e=this._lightning.getLightningAddress(this.profileUser.lud16));""!==e?this._lightning.getLightning(e).subscribe(r=>{this.lightningResponse=r,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.openZapDialog():this.openSnackBar("couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}zap(){var e=this;return(0,v.A)(function*(){e.profileUser&&(e.profileUser.lud06||e.profileUser.lud16)?e.getLightningInfo():e.openSnackBar("user can't receive zaps","dismiss")})()}openZapDialog(){this._dialog.open(Sc,{width:"405px",maxHeight:"90vh",data:this.profileUser})}openReceiveZapDialog(){this._dialog.open(lc,{width:"405px",maxHeight:"90vh",data:this.profileUser})}toggleLike(){this.isLiked=!this.isLiked,this.isLiked&&setTimeout(()=>{this.isLiked=!1,this.isLiked=!0},300)}addEmoji(e){this.eventInput.nativeElement.value+=e.emoji.native,this.showEmojiPicker=!1}toggleEmojiPicker(){this.showCommentEmojiPicker=!1,this.showEmojiPicker=!this.showEmojiPicker}addEmojiTocomment(e){this.commentInput.nativeElement.value+=e.emoji.native,this.showCommentEmojiPicker=!1}detectSystemTheme(){const e=window.matchMedia("(prefers-color-scheme: dark)");this.darkMode=e.matches,e.addEventListener("change",r=>{this.darkMode=r.matches})}togglePreview(){this.isPreview=!this.isPreview}sendEvent(){""!=this.eventInput.nativeElement.value&&this._eventService.sendTextEvent(this.eventInput.nativeElement.value).then(()=>{this._changeDetectorRef.markForCheck()}).catch(e=>{console.error("Failed to send Event:",e)})}copyHex(){this._clipboard.copy(this.routePubKey),this.openSnackBar("hex public key copied","dismiss")}copyNpub(){var e=this._signerService.getNpubFromPubkey(this.routePubKey);this._clipboard.copy(e),this.openSnackBar("npub public key copied","dismiss")}static{this.\u0275fac=function(r){return new(r||t)(o.rXU(o.gRc),o.rXU(Oi.A),o.rXU(Rc.n),o.rXU(ke.up),o.rXU(fe.nX),o.rXU(Pc),o.rXU(Ri.UG),o.rXU(us),o.rXU(Ue.bZ),o.rXU(Bc.P),o.rXU(Nc.m),o.rXU(Dc),o.rXU(jc.n),o.rXU(Pi))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["profile"]],viewQuery:function(r,i){if(1&r&&(o.GBs(Fc,5),o.GBs($c,5)),2&r){let s;o.mGM(s=o.lsd())&&(i.eventInput=s.first),o.mGM(s=o.lsd())&&(i.commentInput=s.first)}},standalone:!0,features:[o.aNF],decls:47,vars:22,consts:[["defaultAvatar",""],["profileMenu","matMenu"],["eventInput",""],["postCardMenu01","matMenu"],["expandableComments","angorCard"],["postCardMenu02","matMenu"],["commentInput",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","shadow"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';",1,"h-40","object-cover","lg:h-80",3,"src","alt"],[1,"bg-card","mx-auto","flex","w-full","max-w-5xl","flex-0","flex-col","items-center","px-8","lg:h-18","lg:flex-row"],[1,"-mt-26","flex-shrink-0","rounded-full","lg:-mt-22"],[4,"ngIf","ngIfElse"],[1,"mt-4","flex","flex-grow","flex-col","items-center","lg:ml-8","lg:mt-0","lg:items-start"],[1,"max-w-full","truncate","text-lg","font-bold","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"text-secondary","max-w-full","truncate","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mx-8","hidden","h-8","flex-shrink-0","border-l-2","lg:flex"],[1,"flex","flex-shrink-0","items-center","space-x-6","lg:mt-0"],["class","mt-6 flex flex-shrink-0 items-center space-x-6 lg:mt-0",4,"ngIf"],[1,"mb-4","mt-8","flex","flex-shrink-0","items-center","space-x-6","lg:m-0","lg:ml-auto"],[4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"my-2"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","",4,"ngIf"],[1,"mx-auto","w-full","max-w-5xl","p-6","sm:p-8"],["class","about-section flex flex-col items-start p-6 mb-6 transition-all duration-300","style","position: relative;",3,"ngStyle",4,"ngIf"],[1,"flex","w-full","flex-col","items-start"],["class","mb-8 flex w-full flex-col p-6 pb-6 sm:p-8",4,"ngIf"],["class","mb-8 flex w-full flex-col bg-primary-50 dark:bg-primary-800",4,"ngIf"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","max-w-fit","rounded-full","object-cover","ring-4",3,"src","alt"],["src","/images/avatars/avatar-placeholder.png","onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","rounded-full","object-cover","ring-4",3,"alt"],[1,"mt-6","flex","flex-shrink-0","items-center","space-x-6","lg:mt-0"],[1,"flex","flex-col","items-center"],[1,"font-bold",3,"matTooltip"],[1,"text-secondary","text-sm","font-medium"],[1,"font-bold"],[1,"text-secondary","text-sm","font-medium",3,"matTooltip"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],[1,"about-section","flex","flex-col","items-start","p-6","mb-6","transition-all","duration-300",2,"position","relative",3,"ngStyle"],[1,"flex","justify-between","items-center","w-full","mb-2"],[1,"text-2xl","font-semibold","leading-tight"],["mat-icon-button","","color","primary","aria-label","Toggle about section",2,"position","absolute","top","16px","right","16px",3,"click"],[1,"about-content","text-base","text-gray-700","transition-all","duration-300",3,"ngStyle"],["class","text-gray-500",4,"ngIf"],[1,"text-gray-500"],[1,"mb-8","flex","w-full","flex-col","p-6","pb-6","sm:p-8"],[1,"flex","justify-between"],[1,"text-xl","font-semibold"],[1,"-mr-4","ml-auto",3,"change","color"],[1,"mt-8","flex","flex-col","items-start","sm:flex-row"],[1,"mb-6","flex","items-center","sm:mb-0"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-12","w-12","min-w-12","rounded-full","object-cover",3,"src","alt"],[1,"sm:hidden"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"placeholder","rows"],[1,"-mx-3","mt-6","flex","items-center","justify-between","sm:mt-8"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"ml-2"],["class","emoji-picker-container-global",4,"ngIf"],["mat-button","",1,"mr-1","hidden","px-3","sm:inline-flex"],["mat-button","",1,"px-3",3,"matMenuTriggerFor"],["mat-menu-item","",1,"sm:hidden"],["mat-button","",1,"mr-1","flex","px-3",3,"click"],[1,"emoji-picker-container-global"],[3,"emojiClick","darkMode"],[1,"mb-8","flex","w-full","flex-col","bg-primary-50","dark:bg-primary-800"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],[1,"relative","mb-4"],[1,"mx-3","flex","items-center","sm:mx-5"],[1,"text-red-500","icon-size-5",3,"ngClass","svgIcon"],["mat-button","",1,"mr-1","px-3"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","h-6","w-6","rounded-full","ring-2","ring-white"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","-ml-3","h-6","w-6","rounded-full","ring-2","ring-white"],[1,"ml-3","text-md","tracking-tight"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"-ml-2","mr-1","px-3","sm:ml-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"click"],[1,"mr-1"],[1,"rotate-0","transition-transform","duration-150","ease-in-out","icon-size-5",3,"ngClass","svgIcon"],["angorCardExpansion",""],[1,"m-0","border-b"],[1,"mx-4","mb-3","mt-6","flex","flex-col","sm:mx-8"],[1,"flex","items-start"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-5","h-12","w-12","rounded-full","object-cover",3,"src","alt"],[1,"mt-3","flex","items-center","justify-between"],["mat-icon-button","",3,"click"],["mat-icon-button",""],["mat-button","",1,"mr-1","flex","px-3"]],template:function(r,i){if(1&r){const s=o.RV6();o.j41(0,"div",7)(1,"div",8)(2,"div"),o.nrm(3,"img",9),o.k0s(),o.j41(4,"div",10)(5,"div",11),o.DNE(6,Wc,2,2,"ng-container",12)(7,Vc,1,1,"ng-template",null,0,o.C5r),o.k0s(),o.j41(9,"div",13)(10,"div",14),o.EFF(11),o.k0s(),o.j41(12,"div",15),o.EFF(13),o.k0s()(),o.nrm(14,"div",16),o.j41(15,"div",17),o.DNE(16,Yc,11,4,"div",18),o.nI1(17,"async"),o.nrm(18,"div",16),o.j41(19,"div",19),o.DNE(20,Kc,3,2,"div",20),o.j41(21,"div")(22,"button",21),o.nrm(23,"mat-icon",22),o.k0s(),o.j41(24,"mat-menu",null,1),o.DNE(26,Zc,5,1,"button",23),o.j41(27,"button",24),o.bIt("click",function(){return o.eBV(s),o.Njj(i.copyHex())}),o.j41(28,"span",25),o.nrm(29,"mat-icon",26),o.j41(30,"span"),o.EFF(31,"Copy Public key (hex)"),o.k0s()()(),o.j41(32,"button",24),o.bIt("click",function(){return o.eBV(s),o.Njj(i.copyNpub())}),o.j41(33,"span",25),o.nrm(34,"mat-icon",26),o.j41(35,"span"),o.EFF(36,"Copy Public key (npub)"),o.k0s()()(),o.DNE(37,Xc,5,1,"button",23),o.nrm(38,"mat-divider",27),o.DNE(39,Qc,5,2,"button",28)(40,Jc,5,1,"button",29)(41,eu,5,1,"button",29),o.k0s()()()()()(),o.j41(42,"div",30),o.DNE(43,nu,10,11,"angor-card",31),o.j41(44,"div",32),o.DNE(45,iu,62,19,"angor-card",33)(46,su,98,33,"angor-card",34),o.k0s()()()}if(2&r){const s=o.sdS(8),u=o.sdS(25);o.R7$(3),o.FS9("alt",(null==i.profileUser?null:i.profileUser.display_name)||(null==i.profileUser?null:i.profileUser.name)||"Banner"),o.Y8G("src",(null==i.profileUser?null:i.profileUser.banner)||"/images/pages/profile/cover.jpg",o.B4B),o.R7$(3),o.Y8G("ngIf",null==i.profileUser?null:i.profileUser.picture)("ngIfElse",s),o.R7$(5),o.SpI(" ",(null==i.profileUser?null:i.profileUser.display_name)||(null==i.profileUser?null:i.profileUser.name)||"Unknown User"," "),o.R7$(2),o.SpI(" ",(null==i.profileUser?null:i.profileUser.username)||(null==i.profileUser?null:i.profileUser.name)," "),o.R7$(3),o.Y8G("ngIf",o.bMT(17,20,i.stats$)),o.R7$(4),o.Y8G("ngIf",!i.isCurrentUserProfile),o.R7$(2),o.Y8G("matMenuTriggerFor",u),o.R7$(),o.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),o.R7$(3),o.Y8G("ngIf",!i.isCurrentUserProfile),o.R7$(3),o.Y8G("svgIcon","heroicons_outline:clipboard-document"),o.R7$(5),o.Y8G("svgIcon","heroicons_outline:clipboard-document"),o.R7$(3),o.Y8G("ngIf",i.isCurrentUserProfile),o.R7$(2),o.Y8G("ngIf",i.isCurrentUserProfile),o.R7$(),o.Y8G("ngIf",!i.isCurrentUserProfile),o.R7$(),o.Y8G("ngIf",!i.isCurrentUserProfile),o.R7$(2),o.Y8G("ngIf",(null==i.profileUser?null:i.profileUser.about)&&""!==i.profileUser.about.trim()),o.R7$(2),o.Y8G("ngIf",i.isCurrentUserProfile),o.R7$(),o.Y8G("ngIf",i.isPreview)}},dependencies:[fe.Wk,y.n,oe.m_,oe.An,P.Hl,P.$z,P.iY,ee.Cn,ee.kk,ee.fb,ee.Cp,H.RG,H.rl,le.fS,le.fg,A.xb,A.EE,B.w,B.q,$.uc,$.oV,f.YU,f.MD,f.bT,f.B3,f.Jj,T.YN,we,z.Ic,D.sG,te.D6,Kn,Ic],styles:[".emoji-picker-container-global{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;width:350px;max-width:100%}.heart-beat{animation:heartBeatAnimation .3s ease-in-out}@keyframes heartBeatAnimation{0%{transform:scale(1)}30%{transform:scale(2)}60%{transform:scale(1)}to{transform:scale(1)}}.loading-spinner{display:flex;justify-content:center;align-items:center;margin:20px 0}.loading-spinner .spinner{border:4px solid rgba(0,0,0,.1);border-left-color:#009fb5;border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.about-section{overflow:hidden;transition:height .3s ease}\n"],encapsulation:2,changeDetection:0})}}return t})()}]},2577:(xe,N,k)=>{const v=k(531),y=k(8715),A=k(465),f=k(5510);function T(P,B,H,oe,le){const ee=[].slice.call(arguments,1),te=ee.length,D="function"==typeof ee[te-1];if(!D&&!v())throw new Error("Callback required as last argument");if(!D){if(te<1)throw new Error("Too few arguments provided");return 1===te?(H=B,B=oe=void 0):2===te&&!B.getContext&&(oe=H,H=B,B=void 0),new Promise(function($,fe){try{const z=y.create(H,oe);$(P(z,B,oe))}catch(z){fe(z)}})}if(te<2)throw new Error("Too few arguments provided");2===te?(le=H,H=B,B=oe=void 0):3===te&&(B.getContext&&typeof le>"u"?(le=oe,oe=void 0):(le=oe,oe=H,H=B,B=void 0));try{const $=y.create(H,oe);le(null,P($,B,oe))}catch($){le($)}}N.mo=T.bind(null,A.render),N.dY=T.bind(null,A.renderToDataURL),N.toString=T.bind(null,function(P,B,H){return f.render(P,H)})},531:xe=>{xe.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},919:(xe,N,k)=>{const E=k(2656).getSymbolSize;N.getRowColCoords=function(y){if(1===y)return[];const A=Math.floor(y/7)+2,f=E(y),T=145===f?26:2*Math.ceil((f-13)/(2*A-2)),P=[f-7];for(let B=1;B<A-1;B++)P[B]=P[B-1]-T;return P.push(6),P.reverse()},N.getPositions=function(y){const A=[],f=N.getRowColCoords(y),T=f.length;for(let P=0;P<T;P++)for(let B=0;B<T;B++)0===P&&0===B||0===P&&B===T-1||P===T-1&&0===B||A.push([f[P],f[B]]);return A}},387:(xe,N,k)=>{const E=k(838),v=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function y(A){this.mode=E.ALPHANUMERIC,this.data=A}y.getBitsLength=function(f){return 11*Math.floor(f/2)+f%2*6},y.prototype.getLength=function(){return this.data.length},y.prototype.getBitsLength=function(){return y.getBitsLength(this.data.length)},y.prototype.write=function(f){let T;for(T=0;T+2<=this.data.length;T+=2){let P=45*v.indexOf(this.data[T]);P+=v.indexOf(this.data[T+1]),f.put(P,11)}this.data.length%2&&f.put(v.indexOf(this.data[T]),6)},xe.exports=y},4481:xe=>{function N(){this.buffer=[],this.length=0}N.prototype={get:function(k){const E=Math.floor(k/8);return 1==(this.buffer[E]>>>7-k%8&1)},put:function(k,E){for(let v=0;v<E;v++)this.putBit(1==(k>>>E-v-1&1))},getLengthInBits:function(){return this.length},putBit:function(k){const E=Math.floor(this.length/8);this.buffer.length<=E&&this.buffer.push(0),k&&(this.buffer[E]|=128>>>this.length%8),this.length++}},xe.exports=N},8038:xe=>{function N(k){if(!k||k<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=k,this.data=new Uint8Array(k*k),this.reservedBit=new Uint8Array(k*k)}N.prototype.set=function(k,E,v,y){const A=k*this.size+E;this.data[A]=v,y&&(this.reservedBit[A]=!0)},N.prototype.get=function(k,E){return this.data[k*this.size+E]},N.prototype.xor=function(k,E,v){this.data[k*this.size+E]^=v},N.prototype.isReserved=function(k,E){return this.reservedBit[k*this.size+E]},xe.exports=N},1736:(xe,N,k)=>{const E=k(3174),v=k(838);function y(A){this.mode=v.BYTE,"string"==typeof A&&(A=E(A)),this.data=new Uint8Array(A)}y.getBitsLength=function(f){return 8*f},y.prototype.getLength=function(){return this.data.length},y.prototype.getBitsLength=function(){return y.getBitsLength(this.data.length)},y.prototype.write=function(A){for(let f=0,T=this.data.length;f<T;f++)A.put(this.data[f],8)},xe.exports=y},2296:(xe,N,k)=>{const E=k(139),v=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],y=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];N.getBlocksCount=function(f,T){switch(T){case E.L:return v[4*(f-1)+0];case E.M:return v[4*(f-1)+1];case E.Q:return v[4*(f-1)+2];case E.H:return v[4*(f-1)+3];default:return}},N.getTotalCodewordsCount=function(f,T){switch(T){case E.L:return y[4*(f-1)+0];case E.M:return y[4*(f-1)+1];case E.Q:return y[4*(f-1)+2];case E.H:return y[4*(f-1)+3];default:return}}},139:(xe,N)=>{N.L={bit:1},N.M={bit:0},N.Q={bit:3},N.H={bit:2},N.isValid=function(v){return v&&typeof v.bit<"u"&&v.bit>=0&&v.bit<4},N.from=function(v,y){if(N.isValid(v))return v;try{return function k(E){if("string"!=typeof E)throw new Error("Param is not a string");switch(E.toLowerCase()){case"l":case"low":return N.L;case"m":case"medium":return N.M;case"q":case"quartile":return N.Q;case"h":case"high":return N.H;default:throw new Error("Unknown EC Level: "+E)}}(v)}catch{return y}}},9202:(xe,N,k)=>{const E=k(2656).getSymbolSize;N.getPositions=function(A){const f=E(A);return[[0,0],[f-7,0],[0,f-7]]}},9211:(xe,N,k)=>{const E=k(2656),A=E.getBCHDigit(1335);N.getEncodedBits=function(T,P){const B=T.bit<<3|P;let H=B<<10;for(;E.getBCHDigit(H)-A>=0;)H^=1335<<E.getBCHDigit(H)-A;return 21522^(B<<10|H)}},6965:(xe,N)=>{const k=new Uint8Array(512),E=new Uint8Array(256);(function(){let y=1;for(let A=0;A<255;A++)k[A]=y,E[y]=A,y<<=1,256&y&&(y^=285);for(let A=255;A<512;A++)k[A]=k[A-255]})(),N.log=function(y){if(y<1)throw new Error("log("+y+")");return E[y]},N.exp=function(y){return k[y]},N.mul=function(y,A){return 0===y||0===A?0:k[E[y]+E[A]]}},1971:(xe,N,k)=>{const E=k(838),v=k(2656);function y(A){this.mode=E.KANJI,this.data=A}y.getBitsLength=function(f){return 13*f},y.prototype.getLength=function(){return this.data.length},y.prototype.getBitsLength=function(){return y.getBitsLength(this.data.length)},y.prototype.write=function(A){let f;for(f=0;f<this.data.length;f++){let T=v.toSJIS(this.data[f]);if(T>=33088&&T<=40956)T-=33088;else{if(!(T>=57408&&T<=60351))throw new Error("Invalid SJIS character: "+this.data[f]+"\nMake sure your charset is UTF-8");T-=49472}T=192*(T>>>8&255)+(255&T),A.put(T,13)}},xe.exports=y},9366:(xe,N)=>{N.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function E(v,y,A){switch(v){case N.Patterns.PATTERN000:return(y+A)%2==0;case N.Patterns.PATTERN001:return y%2==0;case N.Patterns.PATTERN010:return A%3==0;case N.Patterns.PATTERN011:return(y+A)%3==0;case N.Patterns.PATTERN100:return(Math.floor(y/2)+Math.floor(A/3))%2==0;case N.Patterns.PATTERN101:return y*A%2+y*A%3==0;case N.Patterns.PATTERN110:return(y*A%2+y*A%3)%2==0;case N.Patterns.PATTERN111:return(y*A%3+(y+A)%2)%2==0;default:throw new Error("bad maskPattern:"+v)}}N.isValid=function(y){return null!=y&&""!==y&&!isNaN(y)&&y>=0&&y<=7},N.from=function(y){return N.isValid(y)?parseInt(y,10):void 0},N.getPenaltyN1=function(y){const A=y.size;let f=0,T=0,P=0,B=null,H=null;for(let oe=0;oe<A;oe++){T=P=0,B=H=null;for(let le=0;le<A;le++){let ee=y.get(oe,le);ee===B?T++:(T>=5&&(f+=T-5+3),B=ee,T=1),ee=y.get(le,oe),ee===H?P++:(P>=5&&(f+=P-5+3),H=ee,P=1)}T>=5&&(f+=T-5+3),P>=5&&(f+=P-5+3)}return f},N.getPenaltyN2=function(y){const A=y.size;let f=0;for(let T=0;T<A-1;T++)for(let P=0;P<A-1;P++){const B=y.get(T,P)+y.get(T,P+1)+y.get(T+1,P)+y.get(T+1,P+1);(4===B||0===B)&&f++}return 3*f},N.getPenaltyN3=function(y){const A=y.size;let f=0,T=0,P=0;for(let B=0;B<A;B++){T=P=0;for(let H=0;H<A;H++)T=T<<1&2047|y.get(B,H),H>=10&&(1488===T||93===T)&&f++,P=P<<1&2047|y.get(H,B),H>=10&&(1488===P||93===P)&&f++}return 40*f},N.getPenaltyN4=function(y){let A=0;const f=y.data.length;for(let P=0;P<f;P++)A+=y.data[P];return 10*Math.abs(Math.ceil(100*A/f/5)-10)},N.applyMask=function(y,A){const f=A.size;for(let T=0;T<f;T++)for(let P=0;P<f;P++)A.isReserved(P,T)||A.xor(P,T,E(y,P,T))},N.getBestMask=function(y,A){const f=Object.keys(N.Patterns).length;let T=0,P=1/0;for(let B=0;B<f;B++){A(B),N.applyMask(B,y);const H=N.getPenaltyN1(y)+N.getPenaltyN2(y)+N.getPenaltyN3(y)+N.getPenaltyN4(y);N.applyMask(B,y),H<P&&(P=H,T=B)}return T}},838:(xe,N,k)=>{const E=k(1604),v=k(6082);N.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},N.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},N.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},N.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},N.MIXED={bit:-1},N.getCharCountIndicator=function(f,T){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!E.isValid(T))throw new Error("Invalid version: "+T);return T>=1&&T<10?f.ccBits[0]:T<27?f.ccBits[1]:f.ccBits[2]},N.getBestModeForData=function(f){return v.testNumeric(f)?N.NUMERIC:v.testAlphanumeric(f)?N.ALPHANUMERIC:v.testKanji(f)?N.KANJI:N.BYTE},N.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},N.isValid=function(f){return f&&f.bit&&f.ccBits},N.from=function(f,T){if(N.isValid(f))return f;try{return function y(A){if("string"!=typeof A)throw new Error("Param is not a string");switch(A.toLowerCase()){case"numeric":return N.NUMERIC;case"alphanumeric":return N.ALPHANUMERIC;case"kanji":return N.KANJI;case"byte":return N.BYTE;default:throw new Error("Unknown mode: "+A)}}(f)}catch{return T}}},7035:(xe,N,k)=>{const E=k(838);function v(y){this.mode=E.NUMERIC,this.data=y.toString()}v.getBitsLength=function(A){return 10*Math.floor(A/3)+(A%3?A%3*3+1:0)},v.prototype.getLength=function(){return this.data.length},v.prototype.getBitsLength=function(){return v.getBitsLength(this.data.length)},v.prototype.write=function(A){let f,T,P;for(f=0;f+3<=this.data.length;f+=3)T=this.data.substr(f,3),P=parseInt(T,10),A.put(P,10);const B=this.data.length-f;B>0&&(T=this.data.substr(f),P=parseInt(T,10),A.put(P,3*B+1))},xe.exports=v},7767:(xe,N,k)=>{const E=k(6965);N.mul=function(y,A){const f=new Uint8Array(y.length+A.length-1);for(let T=0;T<y.length;T++)for(let P=0;P<A.length;P++)f[T+P]^=E.mul(y[T],A[P]);return f},N.mod=function(y,A){let f=new Uint8Array(y);for(;f.length-A.length>=0;){const T=f[0];for(let B=0;B<A.length;B++)f[B]^=E.mul(A[B],T);let P=0;for(;P<f.length&&0===f[P];)P++;f=f.slice(P)}return f},N.generateECPolynomial=function(y){let A=new Uint8Array([1]);for(let f=0;f<y;f++)A=N.mul(A,new Uint8Array([1,E.exp(f)]));return A}},8715:(xe,N,k)=>{const E=k(2656),v=k(139),y=k(4481),A=k(8038),f=k(919),T=k(9202),P=k(9366),B=k(2296),H=k(6758),oe=k(8925),le=k(9211),ee=k(838),te=k(7939);function ne(he,we,se){const ce=he.size,_=le.getEncodedBits(we,se);let a,c;for(a=0;a<15;a++)c=1==(_>>a&1),he.set(a<6?a:a<8?a+1:ce-15+a,8,c,!0),he.set(8,a<8?ce-a-1:a<9?15-a-1+1:15-a-1,c,!0);he.set(ce-8,8,1,!0)}function je(he,we,se,ce){let _;if(Array.isArray(he))_=te.fromArray(he);else{if("string"!=typeof he)throw new Error("Invalid data");{let x=we;if(!x){const C=te.rawSplit(he);x=oe.getBestVersionForData(C,se)}_=te.fromString(he,x||40)}}const a=oe.getBestVersionForData(_,se);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(we){if(we<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else we=a;const c=function ae(he,we,se){const ce=new y;se.forEach(function(g){ce.put(g.mode.bit,4),ce.put(g.getLength(),ee.getCharCountIndicator(g.mode,he)),g.write(ce)});const c=8*(E.getSymbolTotalCodewords(he)-B.getTotalCodewordsCount(he,we));for(ce.getLengthInBits()+4<=c&&ce.put(0,4);ce.getLengthInBits()%8!=0;)ce.putBit(0);const h=(c-ce.getLengthInBits())/8;for(let g=0;g<h;g++)ce.put(g%2?17:236,8);return function ke(he,we,se){const ce=E.getSymbolTotalCodewords(we),a=ce-B.getTotalCodewordsCount(we,se),c=B.getBlocksCount(we,se),g=c-ce%c,x=Math.floor(ce/c),C=Math.floor(a/c),R=C+1,w=x-C,l=new H(w);let b=0;const ue=new Array(c),me=new Array(c);let ve=0;const Ee=new Uint8Array(he.buffer);for(let Be=0;Be<c;Be++){const Zt=Be<g?C:R;ue[Be]=Ee.slice(b,b+Zt),me[Be]=l.encode(ue[Be]),b+=Zt,ve=Math.max(ve,Zt)}const Ce=new Uint8Array(ce);let at,Se,Ne=0;for(at=0;at<ve;at++)for(Se=0;Se<c;Se++)at<ue[Se].length&&(Ce[Ne++]=ue[Se][at]);for(at=0;at<w;at++)for(Se=0;Se<c;Se++)Ce[Ne++]=me[Se][at];return Ce}(ce,he,we)}(we,se,_),h=E.getSymbolSize(we),g=new A(h);return function D(he,we){const se=he.size,ce=T.getPositions(we);for(let _=0;_<ce.length;_++){const a=ce[_][0],c=ce[_][1];for(let h=-1;h<=7;h++)if(!(a+h<=-1||se<=a+h))for(let g=-1;g<=7;g++)c+g<=-1||se<=c+g||he.set(a+h,c+g,h>=0&&h<=6&&(0===g||6===g)||g>=0&&g<=6&&(0===h||6===h)||h>=2&&h<=4&&g>=2&&g<=4,!0)}}(g,we),function $(he){const we=he.size;for(let se=8;se<we-8;se++){const ce=se%2==0;he.set(se,6,ce,!0),he.set(6,se,ce,!0)}}(g),function fe(he,we){const se=f.getPositions(we);for(let ce=0;ce<se.length;ce++){const _=se[ce][0],a=se[ce][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)he.set(_+c,a+h,-2===c||2===c||-2===h||2===h||0===c&&0===h,!0)}}(g,we),ne(g,se,0),we>=7&&function z(he,we){const se=he.size,ce=oe.getEncodedBits(we);let _,a,c;for(let h=0;h<18;h++)_=Math.floor(h/3),a=h%3+se-8-3,c=1==(ce>>h&1),he.set(_,a,c,!0),he.set(a,_,c,!0)}(g,we),function o(he,we){const se=he.size;let ce=-1,_=se-1,a=7,c=0;for(let h=se-1;h>0;h-=2)for(6===h&&h--;;){for(let g=0;g<2;g++)if(!he.isReserved(_,h-g)){let x=!1;c<we.length&&(x=1==(we[c]>>>a&1)),he.set(_,h-g,x),a--,-1===a&&(c++,a=7)}if(_+=ce,_<0||se<=_){_-=ce,ce=-ce;break}}}(g,c),isNaN(ce)&&(ce=P.getBestMask(g,ne.bind(null,g,se))),P.applyMask(ce,g),ne(g,se,ce),{modules:g,version:we,errorCorrectionLevel:se,maskPattern:ce,segments:_}}N.create=function(we,se){if(typeof we>"u"||""===we)throw new Error("No input text");let _,a,ce=v.M;return typeof se<"u"&&(ce=v.from(se.errorCorrectionLevel,v.M),_=oe.from(se.version),a=P.from(se.maskPattern),se.toSJISFunc&&E.setToSJISFunction(se.toSJISFunc)),je(we,_,ce,a)}},6758:(xe,N,k)=>{const E=k(7767);function v(y){this.genPoly=void 0,this.degree=y,this.degree&&this.initialize(this.degree)}v.prototype.initialize=function(A){this.degree=A,this.genPoly=E.generateECPolynomial(this.degree)},v.prototype.encode=function(A){if(!this.genPoly)throw new Error("Encoder not initialized");const f=new Uint8Array(A.length+this.degree);f.set(A);const T=E.mod(f,this.genPoly),P=this.degree-T.length;if(P>0){const B=new Uint8Array(this.degree);return B.set(T,P),B}return T},xe.exports=v},6082:(xe,N)=>{const k="[0-9]+";let v="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";v=v.replace(/u/g,"\\u");const y="(?:(?![A-Z0-9 $%*+\\-./:]|"+v+")(?:.|[\r\n]))+";N.KANJI=new RegExp(v,"g"),N.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),N.BYTE=new RegExp(y,"g"),N.NUMERIC=new RegExp(k,"g"),N.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const A=new RegExp("^"+v+"$"),f=new RegExp("^"+k+"$"),T=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");N.testKanji=function(B){return A.test(B)},N.testNumeric=function(B){return f.test(B)},N.testAlphanumeric=function(B){return T.test(B)}},7939:(xe,N,k)=>{const E=k(838),v=k(7035),y=k(387),A=k(1736),f=k(1971),T=k(6082),P=k(2656),B=k(243);function H(z){return unescape(encodeURIComponent(z)).length}function oe(z,ne,o){const ae=[];let ke;for(;null!==(ke=z.exec(o));)ae.push({data:ke[0],index:ke.index,mode:ne,length:ke[0].length});return ae}function le(z){const ne=oe(T.NUMERIC,E.NUMERIC,z),o=oe(T.ALPHANUMERIC,E.ALPHANUMERIC,z);let ae,ke;return P.isKanjiModeEnabled()?(ae=oe(T.BYTE,E.BYTE,z),ke=oe(T.KANJI,E.KANJI,z)):(ae=oe(T.BYTE_KANJI,E.BYTE,z),ke=[]),ne.concat(o,ae,ke).sort(function(he,we){return he.index-we.index}).map(function(he){return{data:he.data,mode:he.mode,length:he.length}})}function ee(z,ne){switch(ne){case E.NUMERIC:return v.getBitsLength(z);case E.ALPHANUMERIC:return y.getBitsLength(z);case E.KANJI:return f.getBitsLength(z);case E.BYTE:return A.getBitsLength(z)}}function fe(z,ne){let o;const ae=E.getBestModeForData(z);if(o=E.from(ne,ae),o!==E.BYTE&&o.bit<ae.bit)throw new Error('"'+z+'" cannot be encoded with mode '+E.toString(o)+".\n Suggested mode is: "+E.toString(ae));switch(o===E.KANJI&&!P.isKanjiModeEnabled()&&(o=E.BYTE),o){case E.NUMERIC:return new v(z);case E.ALPHANUMERIC:return new y(z);case E.KANJI:return new f(z);case E.BYTE:return new A(z)}}N.fromArray=function(ne){return ne.reduce(function(o,ae){return"string"==typeof ae?o.push(fe(ae,null)):ae.data&&o.push(fe(ae.data,ae.mode)),o},[])},N.fromString=function(ne,o){const ke=function D(z){const ne=[];for(let o=0;o<z.length;o++){const ae=z[o];switch(ae.mode){case E.NUMERIC:ne.push([ae,{data:ae.data,mode:E.ALPHANUMERIC,length:ae.length},{data:ae.data,mode:E.BYTE,length:ae.length}]);break;case E.ALPHANUMERIC:ne.push([ae,{data:ae.data,mode:E.BYTE,length:ae.length}]);break;case E.KANJI:ne.push([ae,{data:ae.data,mode:E.BYTE,length:H(ae.data)}]);break;case E.BYTE:ne.push([{data:ae.data,mode:E.BYTE,length:H(ae.data)}])}}return ne}(le(ne,P.isKanjiModeEnabled())),je=function $(z,ne){const o={},ae={start:{}};let ke=["start"];for(let je=0;je<z.length;je++){const he=z[je],we=[];for(let se=0;se<he.length;se++){const ce=he[se],_=""+je+se;we.push(_),o[_]={node:ce,lastCount:0},ae[_]={};for(let a=0;a<ke.length;a++){const c=ke[a];o[c]&&o[c].node.mode===ce.mode?(ae[c][_]=ee(o[c].lastCount+ce.length,ce.mode)-ee(o[c].lastCount,ce.mode),o[c].lastCount+=ce.length):(o[c]&&(o[c].lastCount=ce.length),ae[c][_]=ee(ce.length,ce.mode)+4+E.getCharCountIndicator(ce.mode,ne))}}ke=we}for(let je=0;je<ke.length;je++)ae[ke[je]].end=0;return{map:ae,table:o}}(ke,o),he=B.find_path(je.map,"start","end"),we=[];for(let se=1;se<he.length-1;se++)we.push(je.table[he[se]].node);return N.fromArray(function te(z){return z.reduce(function(ne,o){const ae=ne.length-1>=0?ne[ne.length-1]:null;return ae&&ae.mode===o.mode?(ne[ne.length-1].data+=o.data,ne):(ne.push(o),ne)},[])}(we))},N.rawSplit=function(ne){return N.fromArray(le(ne,P.isKanjiModeEnabled()))}},2656:(xe,N)=>{let k;const E=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];N.getSymbolSize=function(y){if(!y)throw new Error('"version" cannot be null or undefined');if(y<1||y>40)throw new Error('"version" should be in range from 1 to 40');return 4*y+17},N.getSymbolTotalCodewords=function(y){return E[y]},N.getBCHDigit=function(v){let y=0;for(;0!==v;)y++,v>>>=1;return y},N.setToSJISFunction=function(y){if("function"!=typeof y)throw new Error('"toSJISFunc" is not a valid function.');k=y},N.isKanjiModeEnabled=function(){return typeof k<"u"},N.toSJIS=function(y){return k(y)}},1604:(xe,N)=>{N.isValid=function(E){return!isNaN(E)&&E>=1&&E<=40}},8925:(xe,N,k)=>{const E=k(2656),v=k(2296),y=k(139),A=k(838),f=k(1604),P=E.getBCHDigit(7973);function H(ee,te){return A.getCharCountIndicator(ee,te)+4}function oe(ee,te){let D=0;return ee.forEach(function($){const fe=H($.mode,te);D+=fe+$.getBitsLength()}),D}N.from=function(te,D){return f.isValid(te)?parseInt(te,10):D},N.getCapacity=function(te,D,$){if(!f.isValid(te))throw new Error("Invalid QR Code version");typeof $>"u"&&($=A.BYTE);const ne=8*(E.getSymbolTotalCodewords(te)-v.getTotalCodewordsCount(te,D));if($===A.MIXED)return ne;const o=ne-H($,te);switch($){case A.NUMERIC:return Math.floor(o/10*3);case A.ALPHANUMERIC:return Math.floor(o/11*2);case A.KANJI:return Math.floor(o/13);default:return Math.floor(o/8)}},N.getBestVersionForData=function(te,D){let $;const fe=y.from(D,y.M);if(Array.isArray(te)){if(te.length>1)return function le(ee,te){for(let D=1;D<=40;D++)if(oe(ee,D)<=N.getCapacity(D,te,A.MIXED))return D}(te,fe);if(0===te.length)return 1;$=te[0]}else $=te;return function B(ee,te,D){for(let $=1;$<=40;$++)if(te<=N.getCapacity($,D,ee))return $}($.mode,$.getLength(),fe)},N.getEncodedBits=function(te){if(!f.isValid(te)||te<7)throw new Error("Invalid QR Code version");let D=te<<12;for(;E.getBCHDigit(D)-P>=0;)D^=7973<<E.getBCHDigit(D)-P;return te<<12|D}},465:(xe,N,k)=>{const E=k(8428);N.render=function(f,T,P){let B=P,H=T;typeof B>"u"&&(!T||!T.getContext)&&(B=T,T=void 0),T||(H=function y(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),B=E.getOptions(B);const oe=E.getImageWidth(f.modules.size,B),le=H.getContext("2d"),ee=le.createImageData(oe,oe);return E.qrToImageData(ee.data,f,B),function v(A,f,T){A.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=T,f.width=T,f.style.height=T+"px",f.style.width=T+"px"}(le,H,oe),le.putImageData(ee,0,0),H},N.renderToDataURL=function(f,T,P){let B=P;return typeof B>"u"&&(!T||!T.getContext)&&(B=T,T=void 0),B||(B={}),N.render(f,T,B).toDataURL(B.type||"image/png",(B.rendererOpts||{}).quality)}},5510:(xe,N,k)=>{const E=k(8428);function v(f,T){const P=f.a/255,B=T+'="'+f.hex+'"';return P<1?B+" "+T+'-opacity="'+P.toFixed(2).slice(1)+'"':B}function y(f,T,P){let B=f+T;return typeof P<"u"&&(B+=" "+P),B}N.render=function(T,P,B){const H=E.getOptions(P),oe=T.modules.size,le=T.modules.data,ee=oe+2*H.margin,te=H.color.light.a?"<path "+v(H.color.light,"fill")+' d="M0 0h'+ee+"v"+ee+'H0z"/>':"",D="<path "+v(H.color.dark,"stroke")+' d="'+function A(f,T,P){let B="",H=0,oe=!1,le=0;for(let ee=0;ee<f.length;ee++){const te=Math.floor(ee%T),D=Math.floor(ee/T);!te&&!oe&&(oe=!0),f[ee]?(le++,ee>0&&te>0&&f[ee-1]||(B+=oe?y("M",te+P,.5+D+P):y("m",H,0),H=0,oe=!1),te+1<T&&f[ee+1]||(B+=y("h",le),le=0)):H++}return B}(le,oe,H.margin)+'"/>',z='<svg xmlns="http://www.w3.org/2000/svg" '+(H.width?'width="'+H.width+'" height="'+H.width+'" ':"")+'viewBox="0 0 '+ee+" "+ee+'" shape-rendering="crispEdges">'+te+D+"</svg>\n";return"function"==typeof B&&B(null,z),z}},8428:(xe,N)=>{function k(E){if("number"==typeof E&&(E=E.toString()),"string"!=typeof E)throw new Error("Color should be defined as hex string");let v=E.slice().replace("#","").split("");if(v.length<3||5===v.length||v.length>8)throw new Error("Invalid hex color: "+E);(3===v.length||4===v.length)&&(v=Array.prototype.concat.apply([],v.map(function(A){return[A,A]}))),6===v.length&&v.push("F","F");const y=parseInt(v.join(""),16);return{r:y>>24&255,g:y>>16&255,b:y>>8&255,a:255&y,hex:"#"+v.slice(0,6).join("")}}N.getOptions=function(v){v||(v={}),v.color||(v.color={});const A=v.width&&v.width>=21?v.width:void 0;return{width:A,scale:A?4:v.scale||4,margin:typeof v.margin>"u"||null===v.margin||v.margin<0?4:v.margin,color:{dark:k(v.color.dark||"#000000ff"),light:k(v.color.light||"#ffffffff")},type:v.type,rendererOpts:v.rendererOpts||{}}},N.getScale=function(v,y){return y.width&&y.width>=v+2*y.margin?y.width/(v+2*y.margin):y.scale},N.getImageWidth=function(v,y){const A=N.getScale(v,y);return Math.floor((v+2*y.margin)*A)},N.qrToImageData=function(v,y,A){const f=y.modules.size,T=y.modules.data,P=N.getScale(f,A),B=Math.floor((f+2*A.margin)*P),H=A.margin*P,oe=[A.color.light,A.color.dark];for(let le=0;le<B;le++)for(let ee=0;ee<B;ee++){let te=4*(le*B+ee),D=A.color.light;le>=H&&ee>=H&&le<B-H&&ee<B-H&&(D=oe[T[Math.floor((le-H)/P)*f+Math.floor((ee-H)/P)]?1:0]),v[te++]=D.r,v[te++]=D.g,v[te++]=D.b,v[te]=D.a}}},917:function(xe,N,k){!function(E,v){"use strict";function y(_,a){if(!_)throw new Error(a||"Assertion failed")}function A(_,a){_.super_=a;var c=function(){};c.prototype=a.prototype,_.prototype=new c,_.prototype.constructor=_}function f(_,a,c){if(f.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,null!==_&&(("le"===a||"be"===a)&&(c=a,a=10),this._init(_||0,a||10,c||"be"))}var T;"object"==typeof E?E.exports=f:v.BN=f,f.BN=f,f.wordSize=26;try{T=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:k(7790).Buffer}catch{}function P(_,a){var c=_.charCodeAt(a);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function B(_,a,c){var h=P(_,c);return c-1>=a&&(h|=P(_,c-1)<<4),h}function H(_,a,c,h){for(var g=0,x=Math.min(_.length,c),C=a;C<x;C++){var R=_.charCodeAt(C)-48;g*=h,g+=R>=49?R-49+10:R>=17?R-17+10:R}return g}f.isBN=function(a){return a instanceof f||null!==a&&"object"==typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)},f.max=function(a,c){return a.cmp(c)>0?a:c},f.min=function(a,c){return a.cmp(c)<0?a:c},f.prototype._init=function(a,c,h){if("number"==typeof a)return this._initNumber(a,c,h);if("object"==typeof a)return this._initArray(a,c,h);"hex"===c&&(c=16),y(c===(0|c)&&c>=2&&c<=36);var g=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(g++,this.negative=1),g<a.length&&(16===c?this._parseHex(a,g,h):(this._parseBase(a,c,g),"le"===h&&this._initArray(this.toArray(),c,h)))},f.prototype._initNumber=function(a,c,h){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(y(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===h&&this._initArray(this.toArray(),c,h)},f.prototype._initArray=function(a,c,h){if(y("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var x,C,R=0;if("be"===h)for(g=a.length-1,x=0;g>=0;g-=3)this.words[x]|=(C=a[g]|a[g-1]<<8|a[g-2]<<16)<<R&67108863,this.words[x+1]=C>>>26-R&67108863,(R+=24)>=26&&(R-=26,x++);else if("le"===h)for(g=0,x=0;g<a.length;g+=3)this.words[x]|=(C=a[g]|a[g+1]<<8|a[g+2]<<16)<<R&67108863,this.words[x+1]=C>>>26-R&67108863,(R+=24)>=26&&(R-=26,x++);return this.strip()},f.prototype._parseHex=function(a,c,h){this.length=Math.ceil((a.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var R,x=0,C=0;if("be"===h)for(g=a.length-1;g>=c;g-=2)R=B(a,c,g)<<x,this.words[C]|=67108863&R,x>=18?(x-=18,this.words[C+=1]|=R>>>26):x+=8;else for(g=(a.length-c)%2==0?c+1:c;g<a.length;g+=2)R=B(a,c,g)<<x,this.words[C]|=67108863&R,x>=18?(x-=18,this.words[C+=1]|=R>>>26):x+=8;this.strip()},f.prototype._parseBase=function(a,c,h){this.words=[0],this.length=1;for(var g=0,x=1;x<=67108863;x*=c)g++;g--,x=x/c|0;for(var C=a.length-h,R=C%g,w=Math.min(C,C-R)+h,l=0,b=h;b<w;b+=g)l=H(a,b,b+g,c),this.imuln(x),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==R){var ue=1;for(l=H(a,b,a.length,c),b=0;b<R;b++)ue*=c;this.imuln(ue),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},f.prototype.copy=function(a){a.words=new Array(this.length);for(var c=0;c<this.length;c++)a.words[c]=this.words[c];a.length=this.length,a.negative=this.negative,a.red=this.red},f.prototype.clone=function(){var a=new f(null);return this.copy(a),a},f.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var oe=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],le=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ee=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function D(_,a,c){c.negative=a.negative^_.negative;var h=_.length+a.length|0;c.length=h,h=h-1|0;var g=0|_.words[0],x=0|a.words[0],C=g*x,w=C/67108864|0;c.words[0]=67108863&C;for(var l=1;l<h;l++){for(var b=w>>>26,ue=67108863&w,me=Math.min(l,a.length-1),ve=Math.max(0,l-_.length+1);ve<=me;ve++)b+=(C=(g=0|_.words[l-ve|0])*(x=0|a.words[ve])+ue)/67108864|0,ue=67108863&C;c.words[l]=0|ue,w=0|b}return 0!==w?c.words[l]=0|w:c.length--,c.strip()}f.prototype.toString=function(a,c){var h;if(c=0|c||1,16===(a=a||10)||"hex"===a){h="";for(var g=0,x=0,C=0;C<this.length;C++){var R=this.words[C],w=(16777215&(R<<g|x)).toString(16);h=0!=(x=R>>>24-g&16777215)||C!==this.length-1?oe[6-w.length]+w+h:w+h,(g+=2)>=26&&(g-=26,C--)}for(0!==x&&(h=x.toString(16)+h);h.length%c!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}if(a===(0|a)&&a>=2&&a<=36){var l=le[a],b=ee[a];h="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var me=ue.modn(b).toString(a);h=(ue=ue.idivn(b)).isZero()?me+h:oe[l-me.length]+me+h}for(this.isZero()&&(h="0"+h);h.length%c!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}y(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(a,c){return y(typeof T<"u"),this.toArrayLike(T,a,c)},f.prototype.toArray=function(a,c){return this.toArrayLike(Array,a,c)},f.prototype.toArrayLike=function(a,c,h){var g=this.byteLength(),x=h||Math.max(1,g);y(g<=x,"byte array longer than desired length"),y(x>0,"Requested array length <= 0"),this.strip();var w,l,C="le"===c,R=new a(x),b=this.clone();if(C){for(l=0;!b.isZero();l++)w=b.andln(255),b.iushrn(8),R[l]=w;for(;l<x;l++)R[l]=0}else{for(l=0;l<x-g;l++)R[l]=0;for(l=0;!b.isZero();l++)w=b.andln(255),b.iushrn(8),R[x-l-1]=w}return R},f.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var c=a,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},f.prototype._zeroBits=function(a){if(0===a)return 26;var c=a,h=0;return 8191&c||(h+=13,c>>>=13),127&c||(h+=7,c>>>=7),15&c||(h+=4,c>>>=4),3&c||(h+=2,c>>>=2),1&c||h++,h},f.prototype.bitLength=function(){var c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(a+=h,26!==h)break}return a},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return 0!==this.negative},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var c=0;c<a.length;c++)this.words[c]=this.words[c]|a.words[c];return this.strip()},f.prototype.ior=function(a){return y(!(this.negative|a.negative)),this.iuor(a)},f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},f.prototype.iuand=function(a){var c;c=this.length>a.length?a:this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&a.words[h];return this.length=c.length,this.strip()},f.prototype.iand=function(a){return y(!(this.negative|a.negative)),this.iuand(a)},f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},f.prototype.iuxor=function(a){var c,h;this.length>a.length?(c=this,h=a):(c=a,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this.strip()},f.prototype.ixor=function(a){return y(!(this.negative|a.negative)),this.iuxor(a)},f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},f.prototype.inotn=function(a){y("number"==typeof a&&a>=0);var c=0|Math.ceil(a/26),h=a%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=67108863&~this.words[g];return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this.strip()},f.prototype.notn=function(a){return this.clone().inotn(a)},f.prototype.setn=function(a,c){y("number"==typeof a&&a>=0);var h=a/26|0,g=a%26;return this._expand(h+1),this.words[h]=c?this.words[h]|1<<g:this.words[h]&~(1<<g),this.strip()},f.prototype.iadd=function(a){var c,h,g;if(0!==this.negative&&0===a.negative)return this.negative=0,c=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,c=this.isub(a),a.negative=1,c._normSign();this.length>a.length?(h=this,g=a):(h=a,g=this);for(var x=0,C=0;C<g.length;C++)this.words[C]=67108863&(c=(0|h.words[C])+(0|g.words[C])+x),x=c>>>26;for(;0!==x&&C<h.length;C++)this.words[C]=67108863&(c=(0|h.words[C])+x),x=c>>>26;if(this.length=h.length,0!==x)this.words[this.length]=x,this.length++;else if(h!==this)for(;C<h.length;C++)this.words[C]=h.words[C];return this},f.prototype.add=function(a){var c;return 0!==a.negative&&0===this.negative?(a.negative=0,c=this.sub(a),a.negative^=1,c):0===a.negative&&0!==this.negative?(this.negative=0,c=a.sub(this),this.negative=1,c):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var c=this.iadd(a);return a.negative=1,c._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g,x,h=this.cmp(a);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(g=this,x=a):(g=a,x=this);for(var C=0,R=0;R<x.length;R++)C=(c=(0|g.words[R])-(0|x.words[R])+C)>>26,this.words[R]=67108863&c;for(;0!==C&&R<g.length;R++)C=(c=(0|g.words[R])+C)>>26,this.words[R]=67108863&c;if(0===C&&R<g.length&&g!==this)for(;R<g.length;R++)this.words[R]=g.words[R];return this.length=Math.max(this.length,R),g!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(a){return this.clone().isub(a)};var $=function(a,c,h){var w,l,b,g=a.words,x=c.words,C=h.words,R=0,ue=0|g[0],me=8191&ue,ve=ue>>>13,Ee=0|g[1],Ce=8191&Ee,Ne=Ee>>>13,at=0|g[2],Se=8191&at,Be=at>>>13,Zt=0|g[3],Ke=8191&Zt,Ze=Zt>>>13,Cr=0|g[4],lt=8191&Cr,ct=Cr>>>13,Tr=0|g[5],Xe=8191&Tr,ut=Tr>>>13,Vn=0|g[6],Qe=8191&Vn,We=Vn>>>13,Yn=0|g[7],dt=8191&Yn,ft=Yn>>>13,Kn=0|g[8],qe=8191&Kn,Ue=Kn>>>13,Sn=0|g[9],Ve=8191&Sn,Je=Sn>>>13,Zn=0|x[0],et=8191&Zn,tt=Zn>>>13,dn=0|x[1],nt=8191&dn,Ye=dn>>>13,Xn=0|x[2],rt=8191&Xn,it=Xn>>>13,Ir=0|x[3],Le=8191&Ir,Ge=Ir>>>13,fn=0|x[4],ht=8191&fn,pt=fn>>>13,hn=0|x[5],Oe=8191&hn,gt=hn>>>13,Qn=0|x[6],Pe=8191&Qn,Fe=Qn>>>13,Jn=0|x[7],mt=8191&Jn,ze=Jn>>>13,er=0|x[8],De=8191&er,$e=er>>>13,An=0|x[9],ot=8191&An,vt=An>>>13;h.negative=a.negative^c.negative,h.length=19;var pn=(R+(w=Math.imul(me,et))|0)+((8191&(l=(l=Math.imul(me,tt))+Math.imul(ve,et)|0))<<13)|0;R=((b=Math.imul(ve,tt))+(l>>>13)|0)+(pn>>>26)|0,pn&=67108863,w=Math.imul(Ce,et),l=(l=Math.imul(Ce,tt))+Math.imul(Ne,et)|0,b=Math.imul(Ne,tt);var tr=(R+(w=w+Math.imul(me,nt)|0)|0)+((8191&(l=(l=l+Math.imul(me,Ye)|0)+Math.imul(ve,nt)|0))<<13)|0;R=((b=b+Math.imul(ve,Ye)|0)+(l>>>13)|0)+(tr>>>26)|0,tr&=67108863,w=Math.imul(Se,et),l=(l=Math.imul(Se,tt))+Math.imul(Be,et)|0,b=Math.imul(Be,tt),w=w+Math.imul(Ce,nt)|0,l=(l=l+Math.imul(Ce,Ye)|0)+Math.imul(Ne,nt)|0,b=b+Math.imul(Ne,Ye)|0;var nr=(R+(w=w+Math.imul(me,rt)|0)|0)+((8191&(l=(l=l+Math.imul(me,it)|0)+Math.imul(ve,rt)|0))<<13)|0;R=((b=b+Math.imul(ve,it)|0)+(l>>>13)|0)+(nr>>>26)|0,nr&=67108863,w=Math.imul(Ke,et),l=(l=Math.imul(Ke,tt))+Math.imul(Ze,et)|0,b=Math.imul(Ze,tt),w=w+Math.imul(Se,nt)|0,l=(l=l+Math.imul(Se,Ye)|0)+Math.imul(Be,nt)|0,b=b+Math.imul(Be,Ye)|0,w=w+Math.imul(Ce,rt)|0,l=(l=l+Math.imul(Ce,it)|0)+Math.imul(Ne,rt)|0,b=b+Math.imul(Ne,it)|0;var Xt=(R+(w=w+Math.imul(me,Le)|0)|0)+((8191&(l=(l=l+Math.imul(me,Ge)|0)+Math.imul(ve,Le)|0))<<13)|0;R=((b=b+Math.imul(ve,Ge)|0)+(l>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,w=Math.imul(lt,et),l=(l=Math.imul(lt,tt))+Math.imul(ct,et)|0,b=Math.imul(ct,tt),w=w+Math.imul(Ke,nt)|0,l=(l=l+Math.imul(Ke,Ye)|0)+Math.imul(Ze,nt)|0,b=b+Math.imul(Ze,Ye)|0,w=w+Math.imul(Se,rt)|0,l=(l=l+Math.imul(Se,it)|0)+Math.imul(Be,rt)|0,b=b+Math.imul(Be,it)|0,w=w+Math.imul(Ce,Le)|0,l=(l=l+Math.imul(Ce,Ge)|0)+Math.imul(Ne,Le)|0,b=b+Math.imul(Ne,Ge)|0;var Cn=(R+(w=w+Math.imul(me,ht)|0)|0)+((8191&(l=(l=l+Math.imul(me,pt)|0)+Math.imul(ve,ht)|0))<<13)|0;R=((b=b+Math.imul(ve,pt)|0)+(l>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,w=Math.imul(Xe,et),l=(l=Math.imul(Xe,tt))+Math.imul(ut,et)|0,b=Math.imul(ut,tt),w=w+Math.imul(lt,nt)|0,l=(l=l+Math.imul(lt,Ye)|0)+Math.imul(ct,nt)|0,b=b+Math.imul(ct,Ye)|0,w=w+Math.imul(Ke,rt)|0,l=(l=l+Math.imul(Ke,it)|0)+Math.imul(Ze,rt)|0,b=b+Math.imul(Ze,it)|0,w=w+Math.imul(Se,Le)|0,l=(l=l+Math.imul(Se,Ge)|0)+Math.imul(Be,Le)|0,b=b+Math.imul(Be,Ge)|0,w=w+Math.imul(Ce,ht)|0,l=(l=l+Math.imul(Ce,pt)|0)+Math.imul(Ne,ht)|0,b=b+Math.imul(Ne,pt)|0;var Tn=(R+(w=w+Math.imul(me,Oe)|0)|0)+((8191&(l=(l=l+Math.imul(me,gt)|0)+Math.imul(ve,Oe)|0))<<13)|0;R=((b=b+Math.imul(ve,gt)|0)+(l>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,w=Math.imul(Qe,et),l=(l=Math.imul(Qe,tt))+Math.imul(We,et)|0,b=Math.imul(We,tt),w=w+Math.imul(Xe,nt)|0,l=(l=l+Math.imul(Xe,Ye)|0)+Math.imul(ut,nt)|0,b=b+Math.imul(ut,Ye)|0,w=w+Math.imul(lt,rt)|0,l=(l=l+Math.imul(lt,it)|0)+Math.imul(ct,rt)|0,b=b+Math.imul(ct,it)|0,w=w+Math.imul(Ke,Le)|0,l=(l=l+Math.imul(Ke,Ge)|0)+Math.imul(Ze,Le)|0,b=b+Math.imul(Ze,Ge)|0,w=w+Math.imul(Se,ht)|0,l=(l=l+Math.imul(Se,pt)|0)+Math.imul(Be,ht)|0,b=b+Math.imul(Be,pt)|0,w=w+Math.imul(Ce,Oe)|0,l=(l=l+Math.imul(Ce,gt)|0)+Math.imul(Ne,Oe)|0,b=b+Math.imul(Ne,gt)|0;var In=(R+(w=w+Math.imul(me,Pe)|0)|0)+((8191&(l=(l=l+Math.imul(me,Fe)|0)+Math.imul(ve,Pe)|0))<<13)|0;R=((b=b+Math.imul(ve,Fe)|0)+(l>>>13)|0)+(In>>>26)|0,In&=67108863,w=Math.imul(dt,et),l=(l=Math.imul(dt,tt))+Math.imul(ft,et)|0,b=Math.imul(ft,tt),w=w+Math.imul(Qe,nt)|0,l=(l=l+Math.imul(Qe,Ye)|0)+Math.imul(We,nt)|0,b=b+Math.imul(We,Ye)|0,w=w+Math.imul(Xe,rt)|0,l=(l=l+Math.imul(Xe,it)|0)+Math.imul(ut,rt)|0,b=b+Math.imul(ut,it)|0,w=w+Math.imul(lt,Le)|0,l=(l=l+Math.imul(lt,Ge)|0)+Math.imul(ct,Le)|0,b=b+Math.imul(ct,Ge)|0,w=w+Math.imul(Ke,ht)|0,l=(l=l+Math.imul(Ke,pt)|0)+Math.imul(Ze,ht)|0,b=b+Math.imul(Ze,pt)|0,w=w+Math.imul(Se,Oe)|0,l=(l=l+Math.imul(Se,gt)|0)+Math.imul(Be,Oe)|0,b=b+Math.imul(Be,gt)|0,w=w+Math.imul(Ce,Pe)|0,l=(l=l+Math.imul(Ce,Fe)|0)+Math.imul(Ne,Pe)|0,b=b+Math.imul(Ne,Fe)|0;var Rn=(R+(w=w+Math.imul(me,mt)|0)|0)+((8191&(l=(l=l+Math.imul(me,ze)|0)+Math.imul(ve,mt)|0))<<13)|0;R=((b=b+Math.imul(ve,ze)|0)+(l>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,w=Math.imul(qe,et),l=(l=Math.imul(qe,tt))+Math.imul(Ue,et)|0,b=Math.imul(Ue,tt),w=w+Math.imul(dt,nt)|0,l=(l=l+Math.imul(dt,Ye)|0)+Math.imul(ft,nt)|0,b=b+Math.imul(ft,Ye)|0,w=w+Math.imul(Qe,rt)|0,l=(l=l+Math.imul(Qe,it)|0)+Math.imul(We,rt)|0,b=b+Math.imul(We,it)|0,w=w+Math.imul(Xe,Le)|0,l=(l=l+Math.imul(Xe,Ge)|0)+Math.imul(ut,Le)|0,b=b+Math.imul(ut,Ge)|0,w=w+Math.imul(lt,ht)|0,l=(l=l+Math.imul(lt,pt)|0)+Math.imul(ct,ht)|0,b=b+Math.imul(ct,pt)|0,w=w+Math.imul(Ke,Oe)|0,l=(l=l+Math.imul(Ke,gt)|0)+Math.imul(Ze,Oe)|0,b=b+Math.imul(Ze,gt)|0,w=w+Math.imul(Se,Pe)|0,l=(l=l+Math.imul(Se,Fe)|0)+Math.imul(Be,Pe)|0,b=b+Math.imul(Be,Fe)|0,w=w+Math.imul(Ce,mt)|0,l=(l=l+Math.imul(Ce,ze)|0)+Math.imul(Ne,mt)|0,b=b+Math.imul(Ne,ze)|0;var Pn=(R+(w=w+Math.imul(me,De)|0)|0)+((8191&(l=(l=l+Math.imul(me,$e)|0)+Math.imul(ve,De)|0))<<13)|0;R=((b=b+Math.imul(ve,$e)|0)+(l>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,w=Math.imul(Ve,et),l=(l=Math.imul(Ve,tt))+Math.imul(Je,et)|0,b=Math.imul(Je,tt),w=w+Math.imul(qe,nt)|0,l=(l=l+Math.imul(qe,Ye)|0)+Math.imul(Ue,nt)|0,b=b+Math.imul(Ue,Ye)|0,w=w+Math.imul(dt,rt)|0,l=(l=l+Math.imul(dt,it)|0)+Math.imul(ft,rt)|0,b=b+Math.imul(ft,it)|0,w=w+Math.imul(Qe,Le)|0,l=(l=l+Math.imul(Qe,Ge)|0)+Math.imul(We,Le)|0,b=b+Math.imul(We,Ge)|0,w=w+Math.imul(Xe,ht)|0,l=(l=l+Math.imul(Xe,pt)|0)+Math.imul(ut,ht)|0,b=b+Math.imul(ut,pt)|0,w=w+Math.imul(lt,Oe)|0,l=(l=l+Math.imul(lt,gt)|0)+Math.imul(ct,Oe)|0,b=b+Math.imul(ct,gt)|0,w=w+Math.imul(Ke,Pe)|0,l=(l=l+Math.imul(Ke,Fe)|0)+Math.imul(Ze,Pe)|0,b=b+Math.imul(Ze,Fe)|0,w=w+Math.imul(Se,mt)|0,l=(l=l+Math.imul(Se,ze)|0)+Math.imul(Be,mt)|0,b=b+Math.imul(Be,ze)|0,w=w+Math.imul(Ce,De)|0,l=(l=l+Math.imul(Ce,$e)|0)+Math.imul(Ne,De)|0,b=b+Math.imul(Ne,$e)|0;var Bt=(R+(w=w+Math.imul(me,ot)|0)|0)+((8191&(l=(l=l+Math.imul(me,vt)|0)+Math.imul(ve,ot)|0))<<13)|0;R=((b=b+Math.imul(ve,vt)|0)+(l>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,w=Math.imul(Ve,nt),l=(l=Math.imul(Ve,Ye))+Math.imul(Je,nt)|0,b=Math.imul(Je,Ye),w=w+Math.imul(qe,rt)|0,l=(l=l+Math.imul(qe,it)|0)+Math.imul(Ue,rt)|0,b=b+Math.imul(Ue,it)|0,w=w+Math.imul(dt,Le)|0,l=(l=l+Math.imul(dt,Ge)|0)+Math.imul(ft,Le)|0,b=b+Math.imul(ft,Ge)|0,w=w+Math.imul(Qe,ht)|0,l=(l=l+Math.imul(Qe,pt)|0)+Math.imul(We,ht)|0,b=b+Math.imul(We,pt)|0,w=w+Math.imul(Xe,Oe)|0,l=(l=l+Math.imul(Xe,gt)|0)+Math.imul(ut,Oe)|0,b=b+Math.imul(ut,gt)|0,w=w+Math.imul(lt,Pe)|0,l=(l=l+Math.imul(lt,Fe)|0)+Math.imul(ct,Pe)|0,b=b+Math.imul(ct,Fe)|0,w=w+Math.imul(Ke,mt)|0,l=(l=l+Math.imul(Ke,ze)|0)+Math.imul(Ze,mt)|0,b=b+Math.imul(Ze,ze)|0,w=w+Math.imul(Se,De)|0,l=(l=l+Math.imul(Se,$e)|0)+Math.imul(Be,De)|0,b=b+Math.imul(Be,$e)|0;var Nt=(R+(w=w+Math.imul(Ce,ot)|0)|0)+((8191&(l=(l=l+Math.imul(Ce,vt)|0)+Math.imul(Ne,ot)|0))<<13)|0;R=((b=b+Math.imul(Ne,vt)|0)+(l>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,w=Math.imul(Ve,rt),l=(l=Math.imul(Ve,it))+Math.imul(Je,rt)|0,b=Math.imul(Je,it),w=w+Math.imul(qe,Le)|0,l=(l=l+Math.imul(qe,Ge)|0)+Math.imul(Ue,Le)|0,b=b+Math.imul(Ue,Ge)|0,w=w+Math.imul(dt,ht)|0,l=(l=l+Math.imul(dt,pt)|0)+Math.imul(ft,ht)|0,b=b+Math.imul(ft,pt)|0,w=w+Math.imul(Qe,Oe)|0,l=(l=l+Math.imul(Qe,gt)|0)+Math.imul(We,Oe)|0,b=b+Math.imul(We,gt)|0,w=w+Math.imul(Xe,Pe)|0,l=(l=l+Math.imul(Xe,Fe)|0)+Math.imul(ut,Pe)|0,b=b+Math.imul(ut,Fe)|0,w=w+Math.imul(lt,mt)|0,l=(l=l+Math.imul(lt,ze)|0)+Math.imul(ct,mt)|0,b=b+Math.imul(ct,ze)|0,w=w+Math.imul(Ke,De)|0,l=(l=l+Math.imul(Ke,$e)|0)+Math.imul(Ze,De)|0,b=b+Math.imul(Ze,$e)|0;var gn=(R+(w=w+Math.imul(Se,ot)|0)|0)+((8191&(l=(l=l+Math.imul(Se,vt)|0)+Math.imul(Be,ot)|0))<<13)|0;R=((b=b+Math.imul(Be,vt)|0)+(l>>>13)|0)+(gn>>>26)|0,gn&=67108863,w=Math.imul(Ve,Le),l=(l=Math.imul(Ve,Ge))+Math.imul(Je,Le)|0,b=Math.imul(Je,Ge),w=w+Math.imul(qe,ht)|0,l=(l=l+Math.imul(qe,pt)|0)+Math.imul(Ue,ht)|0,b=b+Math.imul(Ue,pt)|0,w=w+Math.imul(dt,Oe)|0,l=(l=l+Math.imul(dt,gt)|0)+Math.imul(ft,Oe)|0,b=b+Math.imul(ft,gt)|0,w=w+Math.imul(Qe,Pe)|0,l=(l=l+Math.imul(Qe,Fe)|0)+Math.imul(We,Pe)|0,b=b+Math.imul(We,Fe)|0,w=w+Math.imul(Xe,mt)|0,l=(l=l+Math.imul(Xe,ze)|0)+Math.imul(ut,mt)|0,b=b+Math.imul(ut,ze)|0,w=w+Math.imul(lt,De)|0,l=(l=l+Math.imul(lt,$e)|0)+Math.imul(ct,De)|0,b=b+Math.imul(ct,$e)|0;var Bn=(R+(w=w+Math.imul(Ke,ot)|0)|0)+((8191&(l=(l=l+Math.imul(Ke,vt)|0)+Math.imul(Ze,ot)|0))<<13)|0;R=((b=b+Math.imul(Ze,vt)|0)+(l>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,w=Math.imul(Ve,ht),l=(l=Math.imul(Ve,pt))+Math.imul(Je,ht)|0,b=Math.imul(Je,pt),w=w+Math.imul(qe,Oe)|0,l=(l=l+Math.imul(qe,gt)|0)+Math.imul(Ue,Oe)|0,b=b+Math.imul(Ue,gt)|0,w=w+Math.imul(dt,Pe)|0,l=(l=l+Math.imul(dt,Fe)|0)+Math.imul(ft,Pe)|0,b=b+Math.imul(ft,Fe)|0,w=w+Math.imul(Qe,mt)|0,l=(l=l+Math.imul(Qe,ze)|0)+Math.imul(We,mt)|0,b=b+Math.imul(We,ze)|0,w=w+Math.imul(Xe,De)|0,l=(l=l+Math.imul(Xe,$e)|0)+Math.imul(ut,De)|0,b=b+Math.imul(ut,$e)|0;var It=(R+(w=w+Math.imul(lt,ot)|0)|0)+((8191&(l=(l=l+Math.imul(lt,vt)|0)+Math.imul(ct,ot)|0))<<13)|0;R=((b=b+Math.imul(ct,vt)|0)+(l>>>13)|0)+(It>>>26)|0,It&=67108863,w=Math.imul(Ve,Oe),l=(l=Math.imul(Ve,gt))+Math.imul(Je,Oe)|0,b=Math.imul(Je,gt),w=w+Math.imul(qe,Pe)|0,l=(l=l+Math.imul(qe,Fe)|0)+Math.imul(Ue,Pe)|0,b=b+Math.imul(Ue,Fe)|0,w=w+Math.imul(dt,mt)|0,l=(l=l+Math.imul(dt,ze)|0)+Math.imul(ft,mt)|0,b=b+Math.imul(ft,ze)|0,w=w+Math.imul(Qe,De)|0,l=(l=l+Math.imul(Qe,$e)|0)+Math.imul(We,De)|0,b=b+Math.imul(We,$e)|0;var rr=(R+(w=w+Math.imul(Xe,ot)|0)|0)+((8191&(l=(l=l+Math.imul(Xe,vt)|0)+Math.imul(ut,ot)|0))<<13)|0;R=((b=b+Math.imul(ut,vt)|0)+(l>>>13)|0)+(rr>>>26)|0,rr&=67108863,w=Math.imul(Ve,Pe),l=(l=Math.imul(Ve,Fe))+Math.imul(Je,Pe)|0,b=Math.imul(Je,Fe),w=w+Math.imul(qe,mt)|0,l=(l=l+Math.imul(qe,ze)|0)+Math.imul(Ue,mt)|0,b=b+Math.imul(Ue,ze)|0,w=w+Math.imul(dt,De)|0,l=(l=l+Math.imul(dt,$e)|0)+Math.imul(ft,De)|0,b=b+Math.imul(ft,$e)|0;var mn=(R+(w=w+Math.imul(Qe,ot)|0)|0)+((8191&(l=(l=l+Math.imul(Qe,vt)|0)+Math.imul(We,ot)|0))<<13)|0;R=((b=b+Math.imul(We,vt)|0)+(l>>>13)|0)+(mn>>>26)|0,mn&=67108863,w=Math.imul(Ve,mt),l=(l=Math.imul(Ve,ze))+Math.imul(Je,mt)|0,b=Math.imul(Je,ze),w=w+Math.imul(qe,De)|0,l=(l=l+Math.imul(qe,$e)|0)+Math.imul(Ue,De)|0,b=b+Math.imul(Ue,$e)|0;var Qt=(R+(w=w+Math.imul(dt,ot)|0)|0)+((8191&(l=(l=l+Math.imul(dt,vt)|0)+Math.imul(ft,ot)|0))<<13)|0;R=((b=b+Math.imul(ft,vt)|0)+(l>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,w=Math.imul(Ve,De),l=(l=Math.imul(Ve,$e))+Math.imul(Je,De)|0,b=Math.imul(Je,$e);var Nn=(R+(w=w+Math.imul(qe,ot)|0)|0)+((8191&(l=(l=l+Math.imul(qe,vt)|0)+Math.imul(Ue,ot)|0))<<13)|0;R=((b=b+Math.imul(Ue,vt)|0)+(l>>>13)|0)+(Nn>>>26)|0,Nn&=67108863;var Jt=(R+(w=Math.imul(Ve,ot))|0)+((8191&(l=(l=Math.imul(Ve,vt))+Math.imul(Je,ot)|0))<<13)|0;return R=((b=Math.imul(Je,vt))+(l>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,C[0]=pn,C[1]=tr,C[2]=nr,C[3]=Xt,C[4]=Cn,C[5]=Tn,C[6]=In,C[7]=Rn,C[8]=Pn,C[9]=Bt,C[10]=Nt,C[11]=gn,C[12]=Bn,C[13]=It,C[14]=rr,C[15]=mn,C[16]=Qt,C[17]=Nn,C[18]=Jt,0!==R&&(C[19]=R,h.length++),h};function z(_,a,c){return(new ne).mulp(_,a,c)}function ne(_,a){this.x=_,this.y=a}Math.imul||($=D),f.prototype.mulTo=function(a,c){var h,g=this.length+a.length;return h=10===this.length&&10===a.length?$(this,a,c):g<63?D(this,a,c):g<1024?function fe(_,a,c){c.negative=a.negative^_.negative,c.length=_.length+a.length;for(var h=0,g=0,x=0;x<c.length-1;x++){var C=g;g=0;for(var R=67108863&h,w=Math.min(x,a.length-1),l=Math.max(0,x-_.length+1);l<=w;l++){var ve=(0|_.words[x-l])*(0|a.words[l]),Ee=67108863&ve;R=67108863&(Ee=Ee+R|0),g+=(C=(C=C+(ve/67108864|0)|0)+(Ee>>>26)|0)>>>26,C&=67108863}c.words[x]=R,h=C,C=g}return 0!==h?c.words[x]=h:c.length--,c.strip()}(this,a,c):z(this,a,c),h},ne.prototype.makeRBT=function(a){for(var c=new Array(a),h=f.prototype._countBits(a)-1,g=0;g<a;g++)c[g]=this.revBin(g,h,a);return c},ne.prototype.revBin=function(a,c,h){if(0===a||a===h-1)return a;for(var g=0,x=0;x<c;x++)g|=(1&a)<<c-x-1,a>>=1;return g},ne.prototype.permute=function(a,c,h,g,x,C){for(var R=0;R<C;R++)g[R]=c[a[R]],x[R]=h[a[R]]},ne.prototype.transform=function(a,c,h,g,x,C){this.permute(C,a,c,h,g,x);for(var R=1;R<x;R<<=1)for(var w=R<<1,l=Math.cos(2*Math.PI/w),b=Math.sin(2*Math.PI/w),ue=0;ue<x;ue+=w)for(var me=l,ve=b,Ee=0;Ee<R;Ee++){var Ce=h[ue+Ee],Ne=g[ue+Ee],at=h[ue+Ee+R],Se=g[ue+Ee+R],Be=me*at-ve*Se;Se=me*Se+ve*at,h[ue+Ee]=Ce+(at=Be),g[ue+Ee]=Ne+Se,h[ue+Ee+R]=Ce-at,g[ue+Ee+R]=Ne-Se,Ee!==w&&(Be=l*me-b*ve,ve=l*ve+b*me,me=Be)}},ne.prototype.guessLen13b=function(a,c){var h=1|Math.max(c,a),g=1&h,x=0;for(h=h/2|0;h;h>>>=1)x++;return 1<<x+1+g},ne.prototype.conjugate=function(a,c,h){if(!(h<=1))for(var g=0;g<h/2;g++){var x=a[g];a[g]=a[h-g-1],a[h-g-1]=x,x=c[g],c[g]=-c[h-g-1],c[h-g-1]=-x}},ne.prototype.normalize13b=function(a,c){for(var h=0,g=0;g<c/2;g++){var x=8192*Math.round(a[2*g+1]/c)+Math.round(a[2*g]/c)+h;a[g]=67108863&x,h=x<67108864?0:x/67108864|0}return a},ne.prototype.convert13b=function(a,c,h,g){for(var x=0,C=0;C<c;C++)h[2*C]=8191&(x+=0|a[C]),h[2*C+1]=8191&(x>>>=13),x>>>=13;for(C=2*c;C<g;++C)h[C]=0;y(0===x),y(!(-8192&x))},ne.prototype.stub=function(a){for(var c=new Array(a),h=0;h<a;h++)c[h]=0;return c},ne.prototype.mulp=function(a,c,h){var g=2*this.guessLen13b(a.length,c.length),x=this.makeRBT(g),C=this.stub(g),R=new Array(g),w=new Array(g),l=new Array(g),b=new Array(g),ue=new Array(g),me=new Array(g),ve=h.words;ve.length=g,this.convert13b(a.words,a.length,R,g),this.convert13b(c.words,c.length,b,g),this.transform(R,C,w,l,g,x),this.transform(b,C,ue,me,g,x);for(var Ee=0;Ee<g;Ee++){var Ce=w[Ee]*ue[Ee]-l[Ee]*me[Ee];l[Ee]=w[Ee]*me[Ee]+l[Ee]*ue[Ee],w[Ee]=Ce}return this.conjugate(w,l,g),this.transform(w,l,ve,C,g,x),this.conjugate(ve,C,g),this.normalize13b(ve,g),h.negative=a.negative^c.negative,h.length=a.length+c.length,h.strip()},f.prototype.mul=function(a){var c=new f(null);return c.words=new Array(this.length+a.length),this.mulTo(a,c)},f.prototype.mulf=function(a){var c=new f(null);return c.words=new Array(this.length+a.length),z(this,a,c)},f.prototype.imul=function(a){return this.clone().mulTo(a,this)},f.prototype.imuln=function(a){y("number"==typeof a),y(a<67108864);for(var c=0,h=0;h<this.length;h++){var g=(0|this.words[h])*a,x=(67108863&g)+(67108863&c);c>>=26,c+=g/67108864|0,c+=x>>>26,this.words[h]=67108863&x}return 0!==c&&(this.words[h]=c,this.length++),this},f.prototype.muln=function(a){return this.clone().imuln(a)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(a){var c=function te(_){for(var a=new Array(_.bitLength()),c=0;c<a.length;c++){var g=c%26;a[c]=(_.words[c/26|0]&1<<g)>>>g}return a}(a);if(0===c.length)return new f(1);for(var h=this,g=0;g<c.length&&0===c[g];g++,h=h.sqr());if(++g<c.length)for(var x=h.sqr();g<c.length;g++,x=x.sqr())0!==c[g]&&(h=h.mul(x));return h},f.prototype.iushln=function(a){y("number"==typeof a&&a>=0);var x,c=a%26,h=(a-c)/26,g=67108863>>>26-c<<26-c;if(0!==c){var C=0;for(x=0;x<this.length;x++){var R=this.words[x]&g;this.words[x]=(0|this.words[x])-R<<c|C,C=R>>>26-c}C&&(this.words[x]=C,this.length++)}if(0!==h){for(x=this.length-1;x>=0;x--)this.words[x+h]=this.words[x];for(x=0;x<h;x++)this.words[x]=0;this.length+=h}return this.strip()},f.prototype.ishln=function(a){return y(0===this.negative),this.iushln(a)},f.prototype.iushrn=function(a,c,h){var g;y("number"==typeof a&&a>=0),g=c?(c-c%26)/26:0;var x=a%26,C=Math.min((a-x)/26,this.length),R=67108863^67108863>>>x<<x,w=h;if(g-=C,g=Math.max(0,g),w){for(var l=0;l<C;l++)w.words[l]=this.words[l];w.length=C}if(0!==C)if(this.length>C)for(this.length-=C,l=0;l<this.length;l++)this.words[l]=this.words[l+C];else this.words[0]=0,this.length=1;var b=0;for(l=this.length-1;l>=0&&(0!==b||l>=g);l--){var ue=0|this.words[l];this.words[l]=b<<26-x|ue>>>x,b=ue&R}return w&&0!==b&&(w.words[w.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(a,c,h){return y(0===this.negative),this.iushrn(a,c,h)},f.prototype.shln=function(a){return this.clone().ishln(a)},f.prototype.ushln=function(a){return this.clone().iushln(a)},f.prototype.shrn=function(a){return this.clone().ishrn(a)},f.prototype.ushrn=function(a){return this.clone().iushrn(a)},f.prototype.testn=function(a){y("number"==typeof a&&a>=0);var c=a%26,h=(a-c)/26;return!(this.length<=h||!(this.words[h]&1<<c))},f.prototype.imaskn=function(a){y("number"==typeof a&&a>=0);var c=a%26,h=(a-c)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=h?this:(0!==c&&h++,this.length=Math.min(h,this.length),0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c),this.strip())},f.prototype.maskn=function(a){return this.clone().imaskn(a)},f.prototype.iaddn=function(a){return y("number"==typeof a),y(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},f.prototype._iaddn=function(a){this.words[0]+=a;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},f.prototype.isubn=function(a){if(y("number"==typeof a),y(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},f.prototype.addn=function(a){return this.clone().iaddn(a)},f.prototype.subn=function(a){return this.clone().isubn(a)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(a,c,h){var x;this._expand(a.length+h);var C,R=0;for(x=0;x<a.length;x++){C=(0|this.words[x+h])+R;var w=(0|a.words[x])*c;R=((C-=67108863&w)>>26)-(w/67108864|0),this.words[x+h]=67108863&C}for(;x<this.length-h;x++)R=(C=(0|this.words[x+h])+R)>>26,this.words[x+h]=67108863&C;if(0===R)return this.strip();for(y(-1===R),R=0,x=0;x<this.length;x++)R=(C=-(0|this.words[x])+R)>>26,this.words[x]=67108863&C;return this.negative=1,this.strip()},f.prototype._wordDiv=function(a,c){var h,g=this.clone(),x=a,C=0|x.words[x.length-1];0!=(h=26-this._countBits(C))&&(x=x.ushln(h),g.iushln(h),C=0|x.words[x.length-1]);var l,w=g.length-x.length;if("mod"!==c){(l=new f(null)).length=w+1,l.words=new Array(l.length);for(var b=0;b<l.length;b++)l.words[b]=0}var ue=g.clone()._ishlnsubmul(x,1,w);0===ue.negative&&(g=ue,l&&(l.words[w]=1));for(var me=w-1;me>=0;me--){var ve=67108864*(0|g.words[x.length+me])+(0|g.words[x.length+me-1]);for(ve=Math.min(ve/C|0,67108863),g._ishlnsubmul(x,ve,me);0!==g.negative;)ve--,g.negative=0,g._ishlnsubmul(x,1,me),g.isZero()||(g.negative^=1);l&&(l.words[me]=ve)}return l&&l.strip(),g.strip(),"div"!==c&&0!==h&&g.iushrn(h),{div:l||null,mod:g}},f.prototype.divmod=function(a,c,h){return y(!a.isZero()),this.isZero()?{div:new f(0),mod:new f(0)}:0!==this.negative&&0===a.negative?(C=this.neg().divmod(a,c),"mod"!==c&&(g=C.div.neg()),"div"!==c&&(x=C.mod.neg(),h&&0!==x.negative&&x.iadd(a)),{div:g,mod:x}):0===this.negative&&0!==a.negative?(C=this.divmod(a.neg(),c),"mod"!==c&&(g=C.div.neg()),{div:g,mod:C.mod}):this.negative&a.negative?(C=this.neg().divmod(a.neg(),c),"div"!==c&&(x=C.mod.neg(),h&&0!==x.negative&&x.isub(a)),{div:C.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new f(0),mod:this}:1===a.length?"div"===c?{div:this.divn(a.words[0]),mod:null}:"mod"===c?{div:null,mod:new f(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modn(a.words[0]))}:this._wordDiv(a,c);var g,x,C},f.prototype.div=function(a){return this.divmod(a,"div",!1).div},f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},f.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},f.prototype.divRound=function(a){var c=this.divmod(a);if(c.mod.isZero())return c.div;var h=0!==c.div.negative?c.mod.isub(a):c.mod,g=a.ushrn(1),x=a.andln(1),C=h.cmp(g);return C<0||1===x&&0===C?c.div:0!==c.div.negative?c.div.isubn(1):c.div.iaddn(1)},f.prototype.modn=function(a){y(a<=67108863);for(var c=(1<<26)%a,h=0,g=this.length-1;g>=0;g--)h=(c*h+(0|this.words[g]))%a;return h},f.prototype.idivn=function(a){y(a<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var g=(0|this.words[h])+67108864*c;this.words[h]=g/a|0,c=g%a}return this.strip()},f.prototype.divn=function(a){return this.clone().idivn(a)},f.prototype.egcd=function(a){y(0===a.negative),y(!a.isZero());var c=this,h=a.clone();c=0!==c.negative?c.umod(a):c.clone();for(var g=new f(1),x=new f(0),C=new f(0),R=new f(1),w=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++w;for(var l=h.clone(),b=c.clone();!c.isZero();){for(var ue=0,me=1;!(c.words[0]&me)&&ue<26;++ue,me<<=1);if(ue>0)for(c.iushrn(ue);ue-- >0;)(g.isOdd()||x.isOdd())&&(g.iadd(l),x.isub(b)),g.iushrn(1),x.iushrn(1);for(var ve=0,Ee=1;!(h.words[0]&Ee)&&ve<26;++ve,Ee<<=1);if(ve>0)for(h.iushrn(ve);ve-- >0;)(C.isOdd()||R.isOdd())&&(C.iadd(l),R.isub(b)),C.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(C),x.isub(R)):(h.isub(c),C.isub(g),R.isub(x))}return{a:C,b:R,gcd:h.iushln(w)}},f.prototype._invmp=function(a){y(0===a.negative),y(!a.isZero());var ue,c=this,h=a.clone();c=0!==c.negative?c.umod(a):c.clone();for(var g=new f(1),x=new f(0),C=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,w=1;!(c.words[0]&w)&&R<26;++R,w<<=1);if(R>0)for(c.iushrn(R);R-- >0;)g.isOdd()&&g.iadd(C),g.iushrn(1);for(var l=0,b=1;!(h.words[0]&b)&&l<26;++l,b<<=1);if(l>0)for(h.iushrn(l);l-- >0;)x.isOdd()&&x.iadd(C),x.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(x)):(h.isub(c),x.isub(g))}return(ue=0===c.cmpn(1)?g:x).cmpn(0)<0&&ue.iadd(a),ue},f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var c=this.clone(),h=a.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);for(;;){for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var x=c.cmp(h);if(x<0){var C=c;c=h,h=C}else if(0===x||0===h.cmpn(1))break;c.isub(h)}return h.iushln(g)},f.prototype.invm=function(a){return this.egcd(a).a.umod(a)},f.prototype.isEven=function(){return!(1&this.words[0])},f.prototype.isOdd=function(){return!(1&~this.words[0])},f.prototype.andln=function(a){return this.words[0]&a},f.prototype.bincn=function(a){y("number"==typeof a);var c=a%26,h=(a-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var x=g,C=h;0!==x&&C<this.length;C++){var R=0|this.words[C];x=(R+=x)>>>26,this.words[C]=R&=67108863}return 0!==x&&(this.words[C]=x,this.length++),this},f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},f.prototype.cmpn=function(a){var h,c=a<0;if(0!==this.negative&&!c)return-1;if(0===this.negative&&c)return 1;if(this.strip(),this.length>1)h=1;else{c&&(a=-a),y(a<=67108863,"Number is too big");var g=0|this.words[0];h=g===a?0:g<a?-1:1}return 0!==this.negative?0|-h:h},f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var c=this.ucmp(a);return 0!==this.negative?0|-c:c},f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=0|this.words[h],x=0|a.words[h];if(g!==x){g<x?c=-1:g>x&&(c=1);break}}return c},f.prototype.gtn=function(a){return 1===this.cmpn(a)},f.prototype.gt=function(a){return 1===this.cmp(a)},f.prototype.gten=function(a){return this.cmpn(a)>=0},f.prototype.gte=function(a){return this.cmp(a)>=0},f.prototype.ltn=function(a){return-1===this.cmpn(a)},f.prototype.lt=function(a){return-1===this.cmp(a)},f.prototype.lten=function(a){return this.cmpn(a)<=0},f.prototype.lte=function(a){return this.cmp(a)<=0},f.prototype.eqn=function(a){return 0===this.cmpn(a)},f.prototype.eq=function(a){return 0===this.cmp(a)},f.red=function(a){return new se(a)},f.prototype.toRed=function(a){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},f.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(a){return this.red=a,this},f.prototype.forceRed=function(a){return y(!this.red,"Already a number in reduction context"),this._forceRed(a)},f.prototype.redAdd=function(a){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},f.prototype.redIAdd=function(a){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},f.prototype.redSub=function(a){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},f.prototype.redISub=function(a){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},f.prototype.redShl=function(a){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},f.prototype.redMul=function(a){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},f.prototype.redIMul=function(a){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},f.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(a){return y(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var o={k256:null,p224:null,p192:null,p25519:null};function ae(_,a){this.name=_,this.p=new f(a,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ke(){ae.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function je(){ae.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function he(){ae.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function we(){ae.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function se(_){if("string"==typeof _){var a=f._prime(_);this.m=a.p,this.prime=a}else y(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}function ce(_){se.call(this,_),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ae.prototype._tmp=function(){var a=new f(null);return a.words=new Array(Math.ceil(this.n/13)),a},ae.prototype.ireduce=function(a){var h,c=a;do{this.split(c,this.tmp),h=(c=(c=this.imulK(c)).iadd(this.tmp)).bitLength()}while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return 0===g?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):void 0!==c.strip?c.strip():c._strip(),c},ae.prototype.split=function(a,c){a.iushrn(this.n,0,c)},ae.prototype.imulK=function(a){return a.imul(this.k)},A(ke,ae),ke.prototype.split=function(a,c){for(var h=4194303,g=Math.min(a.length,9),x=0;x<g;x++)c.words[x]=a.words[x];if(c.length=g,a.length<=9)return a.words[0]=0,void(a.length=1);var C=a.words[9];for(c.words[c.length++]=C&h,x=10;x<a.length;x++){var R=0|a.words[x];a.words[x-10]=(R&h)<<4|C>>>22,C=R}a.words[x-10]=C>>>=22,a.length-=0===C&&a.length>10?10:9},ke.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var c=0,h=0;h<a.length;h++){var g=0|a.words[h];a.words[h]=67108863&(c+=977*g),c=64*g+(c/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},A(je,ae),A(he,ae),A(we,ae),we.prototype.imulK=function(a){for(var c=0,h=0;h<a.length;h++){var g=19*(0|a.words[h])+c,x=67108863&g;g>>>=26,a.words[h]=x,c=g}return 0!==c&&(a.words[a.length++]=c),a},f._prime=function(a){if(o[a])return o[a];var c;if("k256"===a)c=new ke;else if("p224"===a)c=new je;else if("p192"===a)c=new he;else{if("p25519"!==a)throw new Error("Unknown prime "+a);c=new we}return o[a]=c,c},se.prototype._verify1=function(a){y(0===a.negative,"red works only with positives"),y(a.red,"red works only with red numbers")},se.prototype._verify2=function(a,c){y(!(a.negative|c.negative),"red works only with positives"),y(a.red&&a.red===c.red,"red works only with red numbers")},se.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},se.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},se.prototype.add=function(a,c){this._verify2(a,c);var h=a.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},se.prototype.iadd=function(a,c){this._verify2(a,c);var h=a.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},se.prototype.sub=function(a,c){this._verify2(a,c);var h=a.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},se.prototype.isub=function(a,c){this._verify2(a,c);var h=a.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},se.prototype.shl=function(a,c){return this._verify1(a),this.imod(a.ushln(c))},se.prototype.imul=function(a,c){return this._verify2(a,c),this.imod(a.imul(c))},se.prototype.mul=function(a,c){return this._verify2(a,c),this.imod(a.mul(c))},se.prototype.isqr=function(a){return this.imul(a,a.clone())},se.prototype.sqr=function(a){return this.mul(a,a)},se.prototype.sqrt=function(a){if(a.isZero())return a.clone();var c=this.m.andln(3);if(y(c%2==1),3===c){var h=this.m.add(new f(1)).iushrn(2);return this.pow(a,h)}for(var g=this.m.subn(1),x=0;!g.isZero()&&0===g.andln(1);)x++,g.iushrn(1);y(!g.isZero());var C=new f(1).toRed(this),R=C.redNeg(),w=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new f(2*l*l).toRed(this);0!==this.pow(l,w).cmp(R);)l.redIAdd(R);for(var b=this.pow(l,g),ue=this.pow(a,g.addn(1).iushrn(1)),me=this.pow(a,g),ve=x;0!==me.cmp(C);){for(var Ee=me,Ce=0;0!==Ee.cmp(C);Ce++)Ee=Ee.redSqr();y(Ce<ve);var Ne=this.pow(b,new f(1).iushln(ve-Ce-1));ue=ue.redMul(Ne),b=Ne.redSqr(),me=me.redMul(b),ve=Ce}return ue},se.prototype.invm=function(a){var c=a._invmp(this.m);return 0!==c.negative?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},se.prototype.pow=function(a,c){if(c.isZero())return new f(1).toRed(this);if(0===c.cmpn(1))return a.clone();var g=new Array(16);g[0]=new f(1).toRed(this),g[1]=a;for(var x=2;x<g.length;x++)g[x]=this.mul(g[x-1],a);var C=g[0],R=0,w=0,l=c.bitLength()%26;for(0===l&&(l=26),x=c.length-1;x>=0;x--){for(var b=c.words[x],ue=l-1;ue>=0;ue--){var me=b>>ue&1;C!==g[0]&&(C=this.sqr(C)),0!==me||0!==R?(R<<=1,R|=me,(4==++w||0===x&&0===ue)&&(C=this.mul(C,g[R]),w=0,R=0)):w=0}l=26}return C},se.prototype.convertTo=function(a){var c=a.umod(this.m);return c===a?c.clone():c},se.prototype.convertFrom=function(a){var c=a.clone();return c.red=null,c},f.mont=function(a){return new ce(a)},A(ce,se),ce.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},ce.prototype.convertFrom=function(a){var c=this.imod(a.mul(this.rinv));return c.red=null,c},ce.prototype.imul=function(a,c){if(a.isZero()||c.isZero())return a.words[0]=0,a.length=1,a;var h=a.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=h.isub(g).iushrn(this.shift),C=x;return x.cmp(this.m)>=0?C=x.isub(this.m):x.cmpn(0)<0&&(C=x.iadd(this.m)),C._forceRed(this)},ce.prototype.mul=function(a,c){if(a.isZero()||c.isZero())return new f(0)._forceRed(this);var h=a.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=h.isub(g).iushrn(this.shift),C=x;return x.cmp(this.m)>=0?C=x.isub(this.m):x.cmpn(0)<0&&(C=x.iadd(this.m)),C._forceRed(this)},ce.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=k.nmd(xe),this)},243:xe=>{"use strict";var N={single_source_shortest_paths:function(k,E,v){var y={},A={};A[E]=0;var T,P,B,H,oe,ee,f=N.PriorityQueue.make();for(f.push(E,0);!f.empty();)for(B in H=(T=f.pop()).cost,oe=k[P=T.value]||{})oe.hasOwnProperty(B)&&(ee=H+oe[B],(typeof A[B]>"u"||A[B]>ee)&&(A[B]=ee,f.push(B,ee),y[B]=P));if(typeof v<"u"&&typeof A[v]>"u"){var $=["Could not find a path from ",E," to ",v,"."].join("");throw new Error($)}return y},extract_shortest_path_from_predecessor_list:function(k,E){for(var v=[],y=E;y;)v.push(y),y=k[y];return v.reverse(),v},find_path:function(k,E,v){var y=N.single_source_shortest_paths(k,E,v);return N.extract_shortest_path_from_predecessor_list(y,v)},PriorityQueue:{make:function(k){var y,E=N.PriorityQueue,v={};for(y in k=k||{},E)E.hasOwnProperty(y)&&(v[y]=E[y]);return v.queue=[],v.sorter=k.sorter||E.default_sorter,v},default_sorter:function(k,E){return k.cost-E.cost},push:function(k,E){this.queue.push({value:k,cost:E}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};xe.exports=N},3174:xe=>{"use strict";xe.exports=function(k){for(var E=[],v=k.length,y=0;y<v;y++){var A=k.charCodeAt(y);if(A>=55296&&A<=56319&&v>y+1){var f=k.charCodeAt(y+1);f>=56320&&f<=57343&&(A=1024*(A-55296)+f-56320+65536,y+=1)}A<128?E.push(A):A<2048?(E.push(A>>6|192),E.push(63&A|128)):A<55296||A>=57344&&A<65536?(E.push(A>>12|224),E.push(A>>6&63|128),E.push(63&A|128)):A>=65536&&A<=1114111?(E.push(A>>18|240),E.push(A>>12&63|128),E.push(A>>6&63|128),E.push(63&A|128)):E.push(239,191,189)}return new Uint8Array(E).buffer}},6371:xe=>{"use strict";var N=Object.prototype.hasOwnProperty,k="~";function E(){}function v(T,P,B){this.fn=T,this.context=P,this.once=B||!1}function y(T,P,B,H,oe){if("function"!=typeof B)throw new TypeError("The listener must be a function");var le=new v(B,H||T,oe),ee=k?k+P:P;return T._events[ee]?T._events[ee].fn?T._events[ee]=[T._events[ee],le]:T._events[ee].push(le):(T._events[ee]=le,T._eventsCount++),T}function A(T,P){0==--T._eventsCount?T._events=new E:delete T._events[P]}function f(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),(new E).__proto__||(k=!1)),f.prototype.eventNames=function(){var B,H,P=[];if(0===this._eventsCount)return P;for(H in B=this._events)N.call(B,H)&&P.push(k?H.slice(1):H);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(B)):P},f.prototype.listeners=function(P){var H=this._events[k?k+P:P];if(!H)return[];if(H.fn)return[H.fn];for(var oe=0,le=H.length,ee=new Array(le);oe<le;oe++)ee[oe]=H[oe].fn;return ee},f.prototype.listenerCount=function(P){var H=this._events[k?k+P:P];return H?H.fn?1:H.length:0},f.prototype.emit=function(P,B,H,oe,le,ee){var te=k?k+P:P;if(!this._events[te])return!1;var fe,z,D=this._events[te],$=arguments.length;if(D.fn){switch(D.once&&this.removeListener(P,D.fn,void 0,!0),$){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,B),!0;case 3:return D.fn.call(D.context,B,H),!0;case 4:return D.fn.call(D.context,B,H,oe),!0;case 5:return D.fn.call(D.context,B,H,oe,le),!0;case 6:return D.fn.call(D.context,B,H,oe,le,ee),!0}for(z=1,fe=new Array($-1);z<$;z++)fe[z-1]=arguments[z];D.fn.apply(D.context,fe)}else{var o,ne=D.length;for(z=0;z<ne;z++)switch(D[z].once&&this.removeListener(P,D[z].fn,void 0,!0),$){case 1:D[z].fn.call(D[z].context);break;case 2:D[z].fn.call(D[z].context,B);break;case 3:D[z].fn.call(D[z].context,B,H);break;case 4:D[z].fn.call(D[z].context,B,H,oe);break;default:if(!fe)for(o=1,fe=new Array($-1);o<$;o++)fe[o-1]=arguments[o];D[z].fn.apply(D[z].context,fe)}}return!0},f.prototype.on=function(P,B,H){return y(this,P,B,H,!1)},f.prototype.once=function(P,B,H){return y(this,P,B,H,!0)},f.prototype.removeListener=function(P,B,H,oe){var le=k?k+P:P;if(!this._events[le])return this;if(!B)return A(this,le),this;var ee=this._events[le];if(ee.fn)ee.fn===B&&(!oe||ee.once)&&(!H||ee.context===H)&&A(this,le);else{for(var te=0,D=[],$=ee.length;te<$;te++)(ee[te].fn!==B||oe&&!ee[te].once||H&&ee[te].context!==H)&&D.push(ee[te]);D.length?this._events[le]=1===D.length?D[0]:D:A(this,le)}return this},f.prototype.removeAllListeners=function(P){var B;return P?this._events[B=k?k+P:P]&&A(this,B):(this._events=new E,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=k,f.EventEmitter=f,xe.exports=f},7790:()=>{},9183:(xe,N,k)=>{"use strict";k.d(N,{D6:()=>ee,LG:()=>oe});var E=k(4438),v=k(177),y=k(6600);const A=["determinateSpinner"];function f(te,D){if(1&te&&(E.qSk(),E.j41(0,"svg",11),E.nrm(1,"circle",12),E.k0s()),2&te){const $=E.XpG();E.BMQ("viewBox",$._viewBox()),E.R7$(),E.xc7("stroke-dasharray",$._strokeCircumference(),"px")("stroke-dashoffset",$._strokeCircumference()/2,"px")("stroke-width",$._circleStrokeWidth(),"%"),E.BMQ("r",$._circleRadius())}}const T=new E.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function P(){return{diameter:B}}}),B=100;let oe=(()=>{class te{get color(){return this._color||this._defaultColor}set color($){this._color=$}constructor($,fe,z){this._elementRef=$,this._defaultColor="primary",this._value=0,this._diameter=B,this._noopAnimations="NoopAnimations"===fe&&!!z&&!z._forceAnimations,this.mode="mat-spinner"===$.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",z&&(z.color&&(this.color=this._defaultColor=z.color),z.diameter&&(this.diameter=z.diameter),z.strokeWidth&&(this.strokeWidth=z.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value($){this._value=Math.max(0,Math.min(100,$||0))}get diameter(){return this._diameter}set diameter($){this._diameter=$||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth($){this._strokeWidth=$||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const $=2*this._circleRadius()+this.strokeWidth;return`0 0 ${$} ${$}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(fe){return new(fe||te)(E.rXU(E.aKT),E.rXU(E.bc$,8),E.rXU(T))}}static{this.\u0275cmp=E.VBU({type:te,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(fe,z){if(1&fe&&E.GBs(A,5),2&fe){let ne;E.mGM(ne=E.lsd())&&(z._determinateCircle=ne.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(fe,z){2&fe&&(E.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===z.mode?z.value:null)("mode",z.mode),E.HbH("mat-"+z.color),E.xc7("width",z.diameter,"px")("height",z.diameter,"px")("--mdc-circular-progress-size",z.diameter+"px")("--mdc-circular-progress-active-indicator-width",z.diameter+"px"),E.AVh("_mat-animation-noopable",z._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===z.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",E.Udg],diameter:[2,"diameter","diameter",E.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",E.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[E.GFd,E.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(fe,z){if(1&fe&&(E.DNE(0,f,2,8,"ng-template",null,0,E.C5r),E.j41(2,"div",2,1),E.qSk(),E.j41(4,"svg",3),E.nrm(5,"circle",4),E.k0s()(),E.joV(),E.j41(6,"div",5)(7,"div",6)(8,"div",7),E.eu8(9,8),E.k0s(),E.j41(10,"div",9),E.eu8(11,8),E.k0s(),E.j41(12,"div",10),E.eu8(13,8),E.k0s()()()),2&fe){const ne=E.sdS(1);E.R7$(4),E.BMQ("viewBox",z._viewBox()),E.R7$(),E.xc7("stroke-dasharray",z._strokeCircumference(),"px")("stroke-dashoffset",z._strokeDashOffset(),"px")("stroke-width",z._circleStrokeWidth(),"%"),E.BMQ("r",z._circleRadius()),E.R7$(4),E.Y8G("ngTemplateOutlet",ne),E.R7$(2),E.Y8G("ngTemplateOutlet",ne),E.R7$(2),E.Y8G("ngTemplateOutlet",ne)}},dependencies:[v.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return te})(),ee=(()=>{class te{static{this.\u0275fac=function(fe){return new(fe||te)}}static{this.\u0275mod=E.$C({type:te})}static{this.\u0275inj=E.G2t({imports:[v.MD,y.yE]})}}return te})()}}]);