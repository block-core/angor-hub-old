(self.webpackChunkangor=self.webpackChunkangor||[]).push([[841],{1146:xt=>{"use strict";for(var j="qpzry9x8gf2tvdw0s3jn54khce6mua7l",M={},C=0;C<32;C++){var w=j.charAt(C);if(void 0!==M[w])throw new TypeError(w+" is ambiguous");M[w]=C}function p(N){var H=N>>25;return(33554431&N)<<5^996825010&-(1&H)^642813549&-(H>>1&1)^513874426&-(H>>2&1)^1027748829&-(H>>3&1)^705979059&-(H>>4&1)}function E(N){for(var H=1,ct=0;ct<N.length;++ct){var W=N.charCodeAt(ct);if(W<33||W>126)return"Invalid prefix ("+N+")";H=p(H)^W>>5}for(H=p(H),ct=0;ct<N.length;++ct){var t=N.charCodeAt(ct);H=p(H)^31&t}return H}function R(N,H){if(N.length<8)return N+" too short";if(N.length>(H=H||90))return"Exceeds length limit";var ct=N.toLowerCase(),W=N.toUpperCase();if(N!==ct&&N!==W)return"Mixed-case string "+N;var t=(N=ct).lastIndexOf("1");if(-1===t)return"No separator character for "+N;if(0===t)return"Missing prefix for "+N;var rt=N.slice(0,t),at=N.slice(t+1);if(at.length<6)return"Data too short";var At=E(rt);if("string"==typeof At)return At;for(var Dt=[],dt=0;dt<at.length;++dt){var yt=at.charAt(dt),it=M[yt];if(void 0===it)return"Unknown character "+yt;At=p(At)^it,!(dt+6>=at.length)&&Dt.push(it)}return 1!==At?"Invalid checksum for "+N:{prefix:rt,words:Dt}}function q(N,H,ct,W){for(var t=0,rt=0,at=(1<<ct)-1,At=[],Dt=0;Dt<N.length;++Dt)for(t=t<<H|N[Dt],rt+=H;rt>=ct;)At.push(t>>(rt-=ct)&at);if(W)rt>0&&At.push(t<<ct-rt&at);else{if(rt>=H)return"Excess padding";if(t<<ct-rt&at)return"Non-zero padding"}return At}xt.exports={decodeUnsafe:function T(){var N=R.apply(null,arguments);if("object"==typeof N)return N},decode:function B(N){var H=R.apply(null,arguments);if("object"==typeof H)return H;throw new Error(H)},encode:function h(N,H,ct){if(N.length+7+H.length>(ct=ct||90))throw new TypeError("Exceeds length limit");var W=E(N=N.toLowerCase());if("string"==typeof W)throw new Error(W);for(var t=N+"1",rt=0;rt<H.length;++rt){var at=H[rt];if(at>>5)throw new Error("Non 5-bit word");W=p(W)^at,t+=j.charAt(at)}for(rt=0;rt<6;++rt)W=p(W);for(W^=1,rt=0;rt<6;++rt)t+=j.charAt(W>>5*(5-rt)&31);return t},toWordsUnsafe:function st(N){var H=q(N,8,5,!0);if(Array.isArray(H))return H},toWords:function ft(N){var H=q(N,8,5,!0);if(Array.isArray(H))return H;throw new Error(H)},fromWordsUnsafe:function tt(N){var H=q(N,5,8,!1);if(Array.isArray(H))return H},fromWords:function lt(N){var H=q(N,5,8,!1);if(Array.isArray(H))return H;throw new Error(H)}}},2862:xt=>{"use strict";var j=Object.prototype.hasOwnProperty,M="~";function C(){}function w(R,T,B){this.fn=R,this.context=T,this.once=B||!1}function p(R,T,B,q,st){if("function"!=typeof B)throw new TypeError("The listener must be a function");var ft=new w(B,q||R,st),tt=M?M+T:T;return R._events[tt]?R._events[tt].fn?R._events[tt]=[R._events[tt],ft]:R._events[tt].push(ft):(R._events[tt]=ft,R._eventsCount++),R}function E(R,T){0==--R._eventsCount?R._events=new C:delete R._events[T]}function h(){this._events=new C,this._eventsCount=0}Object.create&&(C.prototype=Object.create(null),(new C).__proto__||(M=!1)),h.prototype.eventNames=function(){var B,q,T=[];if(0===this._eventsCount)return T;for(q in B=this._events)j.call(B,q)&&T.push(M?q.slice(1):q);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(B)):T},h.prototype.listeners=function(T){var q=this._events[M?M+T:T];if(!q)return[];if(q.fn)return[q.fn];for(var st=0,ft=q.length,tt=new Array(ft);st<ft;st++)tt[st]=q[st].fn;return tt},h.prototype.listenerCount=function(T){var q=this._events[M?M+T:T];return q?q.fn?1:q.length:0},h.prototype.emit=function(T,B,q,st,ft,tt){var lt=M?M+T:T;if(!this._events[lt])return!1;var ct,W,N=this._events[lt],H=arguments.length;if(N.fn){switch(N.once&&this.removeListener(T,N.fn,void 0,!0),H){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,B),!0;case 3:return N.fn.call(N.context,B,q),!0;case 4:return N.fn.call(N.context,B,q,st),!0;case 5:return N.fn.call(N.context,B,q,st,ft),!0;case 6:return N.fn.call(N.context,B,q,st,ft,tt),!0}for(W=1,ct=new Array(H-1);W<H;W++)ct[W-1]=arguments[W];N.fn.apply(N.context,ct)}else{var rt,t=N.length;for(W=0;W<t;W++)switch(N[W].once&&this.removeListener(T,N[W].fn,void 0,!0),H){case 1:N[W].fn.call(N[W].context);break;case 2:N[W].fn.call(N[W].context,B);break;case 3:N[W].fn.call(N[W].context,B,q);break;case 4:N[W].fn.call(N[W].context,B,q,st);break;default:if(!ct)for(rt=1,ct=new Array(H-1);rt<H;rt++)ct[rt-1]=arguments[rt];N[W].fn.apply(N[W].context,ct)}}return!0},h.prototype.on=function(T,B,q){return p(this,T,B,q,!1)},h.prototype.once=function(T,B,q){return p(this,T,B,q,!0)},h.prototype.removeListener=function(T,B,q,st){var ft=M?M+T:T;if(!this._events[ft])return this;if(!B)return E(this,ft),this;var tt=this._events[ft];if(tt.fn)tt.fn===B&&(!st||tt.once)&&(!q||tt.context===q)&&E(this,ft);else{for(var lt=0,N=[],H=tt.length;lt<H;lt++)(tt[lt].fn!==B||st&&!tt[lt].once||q&&tt[lt].context!==q)&&N.push(tt[lt]);N.length?this._events[ft]=1===N.length?N[0]:N:E(this,ft)}return this},h.prototype.removeAllListeners=function(T){var B;return T?this._events[B=M?M+T:T]&&E(this,B):(this._events=new C,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=M,h.EventEmitter=h,xt.exports=h},6841:(xt,j,M)=>{"use strict";M.r(j),M.d(j,{default:()=>ic});var C={};M.r(C),M.d(C,{OG:()=>Kt,My:()=>Gt,Ph:()=>Tt,lX:()=>en,Id:()=>$t,fg:()=>ne,qj:()=>Mt,aT:()=>qt,lq:()=>Ut,z:()=>te,Q5:()=>qe});var w=M(467),p=M(7403),E=M(177),h=M(8834),R=M(1997),T=M(2102),B=M(9213),q=M(9042),st=M(9115),ft=M(4823),tt=M(9192),lt=M(5167),N=M(1413),H=M(6977),ct=M(3813),W=M(9417),t=M(3953),rt=M(2577),at=M(345);const At=["qrcElement"];let Dt=(()=>{class n{constructor(e,i){this.renderer=e,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t.bkB,this.context=null}ngOnChanges(){var e=this;return(0,w.A)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((i,o)=>{(0,rt.dY)(this.qrdata,e,(a,u)=>{a?o(a):i(u)})})}toCanvas(e,i){return new Promise((o,a)=>{(0,rt.mo)(e,this.qrdata,i,u=>{u?a(u):o("success")})})}toSVG(e){return new Promise((i,o)=>{(0,rt.toString)(this.qrdata,e,(a,u)=>{a?o(a):i(u)})})}renderElement(e){for(const i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,w.A)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const i={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},o=e.imageSrc,a=e.imageHeight||40,u=e.imageWidth||40;switch(e.elementType){case"canvas":{const f=e.renderer.createElement("canvas");e.context=f.getContext("2d"),e.toCanvas(f,i).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(f,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(f,"title",`${e.title}`),o&&e.context){e.centerImage=new Image(u,a),o!==e.centerImage.src&&(e.centerImage.crossOrigin="anonymous",e.centerImage.src=o),a!==e.centerImage.height&&(e.centerImage.height=a),u!==e.centerImage.width&&(e.centerImage.width=u);const g=e.centerImage;g&&(g.onload=()=>{e.context?.drawImage(g,f.width/2-u/2,f.height/2-a/2,u,a)})}e.renderElement(f),e.emitQRCodeURL(f)}).catch(g=>{console.error("[angularx-qrcode] canvas error:",g)});break}case"svg":{const f=e.renderer.createElement("div");e.toSVG(i).then(g=>{e.renderer.setProperty(f,"innerHTML",g);const v=f.firstChild;e.renderer.setAttribute(v,"height",`${e.width}`),e.renderer.setAttribute(v,"width",`${e.width}`),e.renderElement(v),e.emitQRCodeURL(v)}).catch(g=>{console.error("[angularx-qrcode] svg error:",g)});break}default:{const f=e.renderer.createElement("img");e.toDataURL(i).then(g=>{e.alt&&f.setAttribute("alt",e.alt),e.ariaLabel&&f.setAttribute("aria-label",e.ariaLabel),f.setAttribute("src",g),e.title&&f.setAttribute("title",e.title),e.renderElement(f),e.emitQRCodeURL(f)}).catch(g=>{console.error("[angularx-qrcode] img/url error:",g)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})()}convertBase64ImageUrlToBlob(e){const i=e.split(";base64,"),o=i[0].split(":")[1],a=atob(i[1]),u=new Uint8Array(a.length);for(let f=0;f<a.length;++f)u[f]=a.charCodeAt(f);return new Blob([u],{type:o})}emitQRCodeURL(e){const i=e.constructor.name;if(i===SVGSVGElement.name){const v=new Blob([e.outerHTML],{type:"image/svg+xml"}),k=URL.createObjectURL(v),A=this.sanitizer.bypassSecurityTrustUrl(k);return void this.qrCodeURL.emit(A)}let o="";i===HTMLCanvasElement.name&&(o=e.toDataURL("image/png")),i===HTMLImageElement.name&&(o=e.src);const a=this.convertBase64ImageUrlToBlob(o),u=URL.createObjectURL(a),f=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(f)}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(t.sFG),t.rXU(at.up))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["qrcode"]],viewQuery:function(i,o){if(1&i&&t.GBs(At,7),2&i){let a;t.mGM(a=t.lsd())&&(o.qrcElement=a.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){1&i&&t.nrm(0,"div",null,0),2&i&&t.HbH(o.cssClass)},encapsulation:2,changeDetection:0})}return n})(),dt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({})}return n})();var yt=M(5351);function b(n,r){this.v=n,this.k=r}function s(n){return new b(n,0)}function d(n){var r,e;function i(a,u){try{var f=n[a](u),g=f.value,v=g instanceof b;Promise.resolve(v?g.v:g).then(function(k){if(v){var A="return"===a?"return":"next";if(!g.k||k.done)return i(A,k);k=n[A](k).value}o(f.done?"return":"normal",k)},function(k){i("throw",k)})}catch(k){o("throw",k)}}function o(a,u){switch(a){case"return":r.resolve({value:u,done:!0});break;case"throw":r.reject(u);break;default:r.resolve({value:u,done:!1})}(r=r.next)?i(r.key,r.arg):e=null}this._invoke=function(a,u){return new Promise(function(f,g){var v={key:a,arg:u,resolve:f,reject:g,next:null};e?e=e.next=v:(r=e=v,i(a,u))})},"function"!=typeof n.return&&(this.return=void 0)}function m(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function S(n,...r){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(n.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${n.length}`)}M(2862),d.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},d.prototype.next=function(n){return this._invoke("next",n)},d.prototype.throw=function(n){return this._invoke("throw",n)},d.prototype.return=function(n){return this._invoke("return",n)};const ot={number:m,bool:function x(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:S,hash:function I(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");m(n.outputLen),m(n.blockLen)},exists:function y(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")},output:function l(n,r){S(n);const e=r.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}},mt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,pt=n=>n instanceof Uint8Array,jt=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Lt=(n,r)=>n<<32-r|n>>>r;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const Nt=Array.from({length:256},(n,r)=>r.toString(16).padStart(2,"0"));function be(n){if(!pt(n))throw new Error("Uint8Array expected");let r="";for(let e=0;e<n.length;e++)r+=Nt[n[e]];return r}function Yt(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const r=n.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const e=new Uint8Array(r/2);for(let i=0;i<e.length;i++){const o=2*i,a=n.slice(o,o+2),u=Number.parseInt(a,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");e[i]=u}return e}function Pe(n){if("string"==typeof n&&(n=function oe(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!pt(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function zt(...n){const r=new Uint8Array(n.reduce((i,o)=>i+o.length,0));let e=0;return n.forEach(i=>{if(!pt(i))throw new Error("Uint8Array expected");r.set(i,e),e+=i.length}),r}class Zt{clone(){return this._cloneInto()}}function Xt(n){const r=i=>n().update(Pe(i)).digest(),e=n();return r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=()=>n(),r}function Ht(n=32){if(mt&&"function"==typeof mt.getRandomValues)return mt.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class se extends Zt{constructor(r,e,i,o){super(),this.blockLen=r,this.outputLen=e,this.padOffset=i,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=jt(this.buffer)}update(r){ot.exists(this);const{view:e,buffer:i,blockLen:o}=this,a=(r=Pe(r)).length;for(let u=0;u<a;){const f=Math.min(o-this.pos,a-u);if(f!==o)i.set(r.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(e,0),this.pos=0);else{const g=jt(r);for(;o<=a-u;u+=o)this.process(g,u)}}return this.length+=r.length,this.roundClean(),this}digestInto(r){ot.exists(this),ot.output(r,this),this.finished=!0;const{buffer:e,view:i,blockLen:o,isLE:a}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(i,0),u=0);for(let A=u;A<o;A++)e[A]=0;(function Bn(n,r,e,i){if("function"==typeof n.setBigUint64)return n.setBigUint64(r,e,i);const o=BigInt(32),a=BigInt(4294967295),u=Number(e>>o&a),f=Number(e&a),v=i?0:4;n.setUint32(r+(i?4:0),u,i),n.setUint32(r+v,f,i)})(i,o-8,BigInt(8*this.length),a),this.process(i,0);const f=jt(r),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const v=g/4,k=this.get();if(v>k.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<v;A++)f.setUint32(4*A,k[A],a)}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const i=r.slice(0,e);return this.destroy(),i}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:e,buffer:i,length:o,finished:a,destroyed:u,pos:f}=this;return r.length=o,r.pos=f,r.finished=a,r.destroyed=u,o%e&&r.buffer.set(i),r}}const ae=(n,r,e)=>n&r^~n&e,jn=(n,r,e)=>n&r^n&e^r&e,le=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ne=new Uint32Array(64);class Jt extends se{constructor(){super(64,32,8,!1),this.A=0|Pt[0],this.B=0|Pt[1],this.C=0|Pt[2],this.D=0|Pt[3],this.E=0|Pt[4],this.F=0|Pt[5],this.G=0|Pt[6],this.H=0|Pt[7]}get(){const{A:r,B:e,C:i,D:o,E:a,F:u,G:f,H:g}=this;return[r,e,i,o,a,u,f,g]}set(r,e,i,o,a,u,f,g){this.A=0|r,this.B=0|e,this.C=0|i,this.D=0|o,this.E=0|a,this.F=0|u,this.G=0|f,this.H=0|g}process(r,e){for(let A=0;A<16;A++,e+=4)Ne[A]=r.getUint32(e,!1);for(let A=16;A<64;A++){const O=Ne[A-15],P=Ne[A-2],L=Lt(O,7)^Lt(O,18)^O>>>3,F=Lt(P,17)^Lt(P,19)^P>>>10;Ne[A]=F+Ne[A-7]+L+Ne[A-16]|0}let{A:i,B:o,C:a,D:u,E:f,F:g,G:v,H:k}=this;for(let A=0;A<64;A++){const P=k+(Lt(f,6)^Lt(f,11)^Lt(f,25))+ae(f,g,v)+le[A]+Ne[A]|0,F=(Lt(i,2)^Lt(i,13)^Lt(i,22))+jn(i,o,a)|0;k=v,v=g,g=f,f=u+P|0,u=a,a=o,o=i,i=P+F|0}i=i+this.A|0,o=o+this.B|0,a=a+this.C|0,u=u+this.D|0,f=f+this.E|0,g=g+this.F|0,v=v+this.G|0,k=k+this.H|0,this.set(i,o,a,u,f,g,v,k)}roundClean(){Ne.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ce extends Jt{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Fe=Xt(()=>new Jt),Xe=(Xt(()=>new ce),BigInt(0),BigInt(1)),ue=BigInt(2),Vt=n=>n instanceof Uint8Array,Nn=Array.from({length:256},(n,r)=>r.toString(16).padStart(2,"0"));function Gt(n){if(!Vt(n))throw new Error("Uint8Array expected");let r="";for(let e=0;e<n.length;e++)r+=Nn[n[e]];return r}function mn(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}function qt(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const r=n.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const e=new Uint8Array(r/2);for(let i=0;i<e.length;i++){const o=2*i,a=n.slice(o,o+2),u=Number.parseInt(a,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");e[i]=u}return e}function Tt(n){return mn(Gt(n))}function en(n){if(!Vt(n))throw new Error("Uint8Array expected");return mn(Gt(Uint8Array.from(n).reverse()))}function Ut(n,r){return qt(n.toString(16).padStart(2*r,"0"))}function te(n,r){return Ut(n,r).reverse()}function Mt(n,r,e){let i;if("string"==typeof r)try{i=qt(r)}catch(a){throw new Error(`${n} must be valid hex string, got "${r}". Cause: ${a}`)}else{if(!Vt(r))throw new Error(`${n} must be hex string or Uint8Array`);i=Uint8Array.from(r)}const o=i.length;if("number"==typeof e&&o!==e)throw new Error(`${n} expected ${e} bytes, got ${o}`);return i}function $t(...n){const r=new Uint8Array(n.reduce((i,o)=>i+o.length,0));let e=0;return n.forEach(i=>{if(!Vt(i))throw new Error("Uint8Array expected");r.set(i,e),e+=i.length}),r}const Kt=n=>(ue<<BigInt(n-1))-Xe,nn=n=>new Uint8Array(n),ee=n=>Uint8Array.from(n);function ne(n,r,e){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof r||r<2)throw new Error("qByteLen must be a number");if("function"!=typeof e)throw new Error("hmacFn must be a function");let i=nn(n),o=nn(n),a=0;const u=()=>{i.fill(1),o.fill(0),a=0},f=(...A)=>e(o,i,...A),g=(A=nn())=>{o=f(ee([0]),A),i=f(),0!==A.length&&(o=f(ee([1]),A),i=f())},v=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const O=[];for(;A<r;){i=f();const P=i.slice();O.push(P),A+=i.length}return $t(...O)};return(A,O)=>{let P;for(u(),g(A);!(P=O(v()));)g();return u(),P}}const gn={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,r)=>r.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function qe(n,r,e={}){const i=(o,a,u)=>{const f=gn[a];if("function"!=typeof f)throw new Error(`Invalid validator "${a}", expected function`);const g=n[o];if(!(u&&void 0===g||f(g,n)))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${a}`)};for(const[o,a]of Object.entries(r))i(o,a,!1);for(const[o,a]of Object.entries(e))i(o,a,!0);return n}const re=BigInt(0),Ot=BigInt(1),Te=BigInt(2),pn=BigInt(3),Je=BigInt(4),rn=BigInt(5),on=BigInt(8);function he(n,r){const e=n%r;return e>=re?e:r+e}function wn(n,r,e){if(e<=re||r<re)throw new Error("Expected power/modulo > 0");if(e===Ot)return re;let i=Ot;for(;r>re;)r&Ot&&(i=i*n%e),n=n*n%e,r>>=Ot;return i}function Me(n,r,e){let i=n;for(;r-- >re;)i*=i,i%=e;return i}function He(n,r){if(n===re||r<=re)throw new Error(`invert: expected positive integers, got n=${n} mod=${r}`);let e=he(n,r),i=r,o=re,a=Ot,u=Ot,f=re;for(;e!==re;){const v=i/e,k=i%e,A=o-u*v,O=a-f*v;i=e,e=k,o=u,a=f,u=A,f=O}if(i!==Ot)throw new Error("invert: does not exist");return he(o,r)}BigInt(9),BigInt(16);const xn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ar(n,r){const e=void 0!==r?r:n.toString(2).length;return{nBitLength:e,nByteLength:Math.ceil(e/8)}}const Lo=BigInt(0),lr=BigInt(1);function si(n){return function Fo(n){qe(n,xn.reduce((i,o)=>(i[o]="function",i),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(n.Fp),qe(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ar(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{Ph:Oo,aT:$o}=C,Qe={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(n){const{Err:r}=Qe;if(n.length<2||2!==n[0])throw new r("Invalid signature integer tag");const e=n[1],i=n.subarray(2,e+2);if(!e||i.length!==e)throw new r("Invalid signature integer: wrong length");if(128&i[0])throw new r("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:Oo(i),l:n.subarray(e+2)}},toSig(n){const{Err:r}=Qe,e="string"==typeof n?$o(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let i=e.length;if(i<2||48!=e[0])throw new r("Invalid signature tag");if(e[1]!==i-2)throw new r("Invalid signature: incorrect length");const{d:o,l:a}=Qe._parseInt(e.subarray(2)),{d:u,l:f}=Qe._parseInt(a);if(f.length)throw new r("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(n){const r=v=>8&Number.parseInt(v[0],16)?"00"+v:v,e=v=>{const k=v.toString(16);return 1&k.length?`0${k}`:k},i=r(e(n.s)),o=r(e(n.r)),a=i.length/2,u=o.length/2,f=e(a),g=e(u);return`30${e(u+a+4)}02${g}${o}02${f}${i}`}},Le=BigInt(0),de=BigInt(1),Pn=(BigInt(2),BigInt(3));function qo(n){const r=function Go(n){const r=si(n);return qe(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}(n),{Fp:e,n:i}=r,o=e.BYTES+1,a=2*e.BYTES+1;function f(G){return he(G,i)}function g(G){return He(G,i)}const{ProjectivePoint:v,normPrivateKeyToScalar:k,weierstrassEquation:A,isWithinCurveOrder:O}=function Do(n){const r=function Uo(n){const r=si(n);qe(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:i,a:o}=r;if(e){if(!i.eql(o,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof e||"bigint"!=typeof e.beta||"function"!=typeof e.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}(n),{Fp:e}=r,i=r.toBytes||((L,F,U)=>{const $=F.toAffine();return $t(Uint8Array.from([4]),e.toBytes($.x),e.toBytes($.y))}),o=r.fromBytes||(L=>{const F=L.subarray(1);return{x:e.fromBytes(F.subarray(0,e.BYTES)),y:e.fromBytes(F.subarray(e.BYTES,2*e.BYTES))}});function a(L){const{a:F,b:U}=r,$=e.sqr(L),Y=e.mul($,L);return e.add(e.add(Y,e.mul(L,F)),U)}if(!e.eql(e.sqr(r.Gy),a(r.Gx)))throw new Error("bad generator point: equation left != right");function u(L){return"bigint"==typeof L&&Le<L&&L<r.n}function f(L){if(!u(L))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(L){const{allowedPrivateKeyLengths:F,nByteLength:U,wrapPrivateKey:$,n:Y}=r;if(F&&"bigint"!=typeof L){if(L instanceof Uint8Array&&(L=Gt(L)),"string"!=typeof L||!F.includes(L.length))throw new Error("Invalid key");L=L.padStart(2*U,"0")}let Z;try{Z="bigint"==typeof L?L:Tt(Mt("private key",L,U))}catch{throw new Error(`private key must be ${U} bytes, hex or bigint, not ${typeof L}`)}return $&&(Z=he(Z,Y)),f(Z),Z}const v=new Map;function k(L){if(!(L instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(F,U,$){if(this.px=F,this.py=U,this.pz=$,null==F||!e.isValid(F))throw new Error("x required");if(null==U||!e.isValid(U))throw new Error("y required");if(null==$||!e.isValid($))throw new Error("z required")}static fromAffine(F){const{x:U,y:$}=F||{};if(!F||!e.isValid(U)||!e.isValid($))throw new Error("invalid affine point");if(F instanceof A)throw new Error("projective point not allowed");const Y=Z=>e.eql(Z,e.ZERO);return Y(U)&&Y($)?A.ZERO:new A(U,$,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(F){const U=e.invertBatch(F.map($=>$.pz));return F.map(($,Y)=>$.toAffine(U[Y])).map(A.fromAffine)}static fromHex(F){const U=A.fromAffine(o(Mt("pointHex",F)));return U.assertValidity(),U}static fromPrivateKey(F){return A.BASE.multiply(g(F))}_setWindowSize(F){this._WINDOW_SIZE=F,v.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:F,y:U}=this.toAffine();if(!e.isValid(F)||!e.isValid(U))throw new Error("bad point: x or y not FE");const $=e.sqr(U),Y=a(F);if(!e.eql($,Y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:F}=this.toAffine();if(e.isOdd)return!e.isOdd(F);throw new Error("Field doesn't support isOdd")}equals(F){k(F);const{px:U,py:$,pz:Y}=this,{px:Z,py:z,pz:Q}=F,D=e.eql(e.mul(U,Q),e.mul(Z,Y)),V=e.eql(e.mul($,Q),e.mul(z,Y));return D&&V}negate(){return new A(this.px,e.neg(this.py),this.pz)}double(){const{a:F,b:U}=r,$=e.mul(U,Pn),{px:Y,py:Z,pz:z}=this;let Q=e.ZERO,D=e.ZERO,V=e.ZERO,J=e.mul(Y,Y),X=e.mul(Z,Z),vt=e.mul(z,z),nt=e.mul(Y,Z);return nt=e.add(nt,nt),V=e.mul(Y,z),V=e.add(V,V),Q=e.mul(F,V),D=e.mul($,vt),D=e.add(Q,D),Q=e.sub(X,D),D=e.add(X,D),D=e.mul(Q,D),Q=e.mul(nt,Q),V=e.mul($,V),vt=e.mul(F,vt),nt=e.sub(J,vt),nt=e.mul(F,nt),nt=e.add(nt,V),V=e.add(J,J),J=e.add(V,J),J=e.add(J,vt),J=e.mul(J,nt),D=e.add(D,J),vt=e.mul(Z,z),vt=e.add(vt,vt),J=e.mul(vt,nt),Q=e.sub(Q,J),V=e.mul(vt,X),V=e.add(V,V),V=e.add(V,V),new A(Q,D,V)}add(F){k(F);const{px:U,py:$,pz:Y}=this,{px:Z,py:z,pz:Q}=F;let D=e.ZERO,V=e.ZERO,J=e.ZERO;const X=r.a,vt=e.mul(r.b,Pn);let nt=e.mul(U,Z),wt=e.mul($,z),_t=e.mul(Y,Q),St=e.add(U,$),G=e.add(Z,z);St=e.mul(St,G),G=e.add(nt,wt),St=e.sub(St,G),G=e.add(U,Y);let K=e.add(Z,Q);return G=e.mul(G,K),K=e.add(nt,_t),G=e.sub(G,K),K=e.add($,Y),D=e.add(z,Q),K=e.mul(K,D),D=e.add(wt,_t),K=e.sub(K,D),J=e.mul(X,G),D=e.mul(vt,_t),J=e.add(D,J),D=e.sub(wt,J),J=e.add(wt,J),V=e.mul(D,J),wt=e.add(nt,nt),wt=e.add(wt,nt),_t=e.mul(X,_t),G=e.mul(vt,G),wt=e.add(wt,_t),_t=e.sub(nt,_t),_t=e.mul(X,_t),G=e.add(G,_t),nt=e.mul(wt,G),V=e.add(V,nt),nt=e.mul(K,G),D=e.mul(St,D),D=e.sub(D,nt),nt=e.mul(St,wt),J=e.mul(K,J),J=e.add(J,nt),new A(D,V,J)}subtract(F){return this.add(F.negate())}is0(){return this.equals(A.ZERO)}wNAF(F){return P.wNAFCached(this,v,F,U=>{const $=e.invertBatch(U.map(Y=>Y.pz));return U.map((Y,Z)=>Y.toAffine($[Z])).map(A.fromAffine)})}multiplyUnsafe(F){const U=A.ZERO;if(F===Le)return U;if(f(F),F===de)return this;const{endo:$}=r;if(!$)return P.unsafeLadder(this,F);let{k1neg:Y,k1:Z,k2neg:z,k2:Q}=$.splitScalar(F),D=U,V=U,J=this;for(;Z>Le||Q>Le;)Z&de&&(D=D.add(J)),Q&de&&(V=V.add(J)),J=J.double(),Z>>=de,Q>>=de;return Y&&(D=D.negate()),z&&(V=V.negate()),V=new A(e.mul(V.px,$.beta),V.py,V.pz),D.add(V)}multiply(F){f(F);let $,Y,U=F;const{endo:Z}=r;if(Z){const{k1neg:z,k1:Q,k2neg:D,k2:V}=Z.splitScalar(U);let{p:J,f:X}=this.wNAF(Q),{p:vt,f:nt}=this.wNAF(V);J=P.constTimeNegate(z,J),vt=P.constTimeNegate(D,vt),vt=new A(e.mul(vt.px,Z.beta),vt.py,vt.pz),$=J.add(vt),Y=X.add(nt)}else{const{p:z,f:Q}=this.wNAF(U);$=z,Y=Q}return A.normalizeZ([$,Y])[0]}multiplyAndAddUnsafe(F,U,$){const Y=A.BASE,Z=(Q,D)=>D!==Le&&D!==de&&Q.equals(Y)?Q.multiply(D):Q.multiplyUnsafe(D),z=Z(this,U).add(Z(F,$));return z.is0()?void 0:z}toAffine(F){const{px:U,py:$,pz:Y}=this,Z=this.is0();null==F&&(F=Z?e.ONE:e.inv(Y));const z=e.mul(U,F),Q=e.mul($,F),D=e.mul(Y,F);if(Z)return{x:e.ZERO,y:e.ZERO};if(!e.eql(D,e.ONE))throw new Error("invZ was invalid");return{x:z,y:Q}}isTorsionFree(){const{h:F,isTorsionFree:U}=r;if(F===de)return!0;if(U)return U(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:F,clearCofactor:U}=r;return F===de?this:U?U(A,this):this.multiplyUnsafe(r.h)}toRawBytes(F=!0){return this.assertValidity(),i(A,this,F)}toHex(F=!0){return Gt(this.toRawBytes(F))}}A.BASE=new A(r.Gx,r.Gy,e.ONE),A.ZERO=new A(e.ZERO,e.ONE,e.ZERO);const O=r.nBitLength,P=function Po(n,r){const e=(o,a)=>{const u=a.negate();return o?u:a},i=o=>({windows:Math.ceil(r/o)+1,windowSize:2**(o-1)});return{constTimeNegate:e,unsafeLadder(o,a){let u=n.ZERO,f=o;for(;a>Lo;)a&lr&&(u=u.add(f)),f=f.double(),a>>=lr;return u},precomputeWindow(o,a){const{windows:u,windowSize:f}=i(a),g=[];let v=o,k=v;for(let A=0;A<u;A++){k=v,g.push(k);for(let O=1;O<f;O++)k=k.add(v),g.push(k);v=k.double()}return g},wNAF(o,a,u){const{windows:f,windowSize:g}=i(o);let v=n.ZERO,k=n.BASE;const A=BigInt(2**o-1),O=2**o,P=BigInt(o);for(let L=0;L<f;L++){const F=L*g;let U=Number(u&A);u>>=P,U>g&&(U-=O,u+=lr);const $=F,Y=F+Math.abs(U)-1,z=U<0;0===U?k=k.add(e(L%2!=0,a[$])):v=v.add(e(z,a[Y]))}return{p:v,f:k}},wNAFCached(o,a,u,f){const g=o._WINDOW_SIZE||1;let v=a.get(o);return v||(v=this.precomputeWindow(o,g),1!==g&&a.set(o,f(v))),this.wNAF(g,v,u)}}}(A,r.endo?Math.ceil(O/2):O);return{CURVE:r,ProjectivePoint:A,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:u}}({...r,toBytes(G,K,ht){const bt=K.toAffine(),et=e.toBytes(bt.x),kt=$t;return ht?kt(Uint8Array.from([K.hasEvenY()?2:3]),et):kt(Uint8Array.from([4]),et,e.toBytes(bt.y))},fromBytes(G){const K=G.length,ht=G[0],bt=G.subarray(1);if(K!==o||2!==ht&&3!==ht){if(K===a&&4===ht)return{x:e.fromBytes(bt.subarray(0,e.BYTES)),y:e.fromBytes(bt.subarray(e.BYTES,2*e.BYTES))};throw new Error(`Point of length ${K} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}{const et=Tt(bt);if(!function u(G){return Le<G&&G<e.ORDER}(et))throw new Error("Point is not on curve");const kt=A(et);let Bt=e.sqrt(kt);return!(1&~ht)!=((Bt&de)===de)&&(Bt=e.neg(Bt)),{x:et,y:Bt}}}}),P=G=>Gt(Ut(G,r.nByteLength));function L(G){return G>i>>de}const U=(G,K,ht)=>Tt(G.slice(K,ht));class ${constructor(K,ht,bt){this.r=K,this.s=ht,this.recovery=bt,this.assertValidity()}static fromCompact(K){const ht=r.nByteLength;return K=Mt("compactSignature",K,2*ht),new $(U(K,0,ht),U(K,ht,2*ht))}static fromDER(K){const{r:ht,s:bt}=Qe.toSig(Mt("DER",K));return new $(ht,bt)}assertValidity(){if(!O(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!O(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(K){return new $(this.r,this.s,K)}recoverPublicKey(K){const{r:ht,s:bt,recovery:et}=this,kt=V(Mt("msgHash",K));if(null==et||![0,1,2,3].includes(et))throw new Error("recovery id invalid");const Bt=2===et||3===et?ht+r.n:ht;if(Bt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ee=v.fromHex((1&et?"03":"02")+P(Bt)),Se=g(Bt),Ie=f(-kt*Se),je=f(bt*Se),Ae=v.BASE.multiplyAndAddUnsafe(Ee,Ie,je);if(!Ae)throw new Error("point at infinify");return Ae.assertValidity(),Ae}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new $(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return qt(this.toDERHex())}toDERHex(){return Qe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qt(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}const Y={isValidPrivateKey(G){try{return k(G),!0}catch{return!1}},normPrivateKeyToScalar:k,randomPrivateKey:()=>{const K=function No(n,r,e=!1){const i=(n=Mt("privateHash",n)).length,o=ar(r).nByteLength+8;if(o<24||i<o||i>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${i}`);return he(e?en(n):Tt(n),r-Ot)+Ot}(r.randomBytes(e.BYTES+8),i);return Ut(K,r.nByteLength)},precompute:(G=8,K=v.BASE)=>(K._setWindowSize(G),K.multiply(BigInt(3)),K)};function z(G){const K=G instanceof Uint8Array,ht="string"==typeof G,bt=(K||ht)&&G.length;return K?bt===o||bt===a:ht?bt===2*o||bt===2*a:G instanceof v}const D=r.bits2int||function(G){const K=Tt(G),ht=8*G.length-r.nBitLength;return ht>0?K>>BigInt(ht):K},V=r.bits2int_modN||function(G){return f(D(G))},J=Kt(r.nBitLength);function X(G){if("bigint"!=typeof G)throw new Error("bigint expected");if(!(Le<=G&&G<J))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Ut(G,r.nByteLength)}const nt={lowS:r.lowS,prehash:!1},wt={lowS:r.lowS,prehash:!1};return v.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function Z(G,K=!0){return v.fromPrivateKey(G).toRawBytes(K)},getSharedSecret:function Q(G,K,ht=!0){if(z(G))throw new Error("first arg must be private key");if(!z(K))throw new Error("second arg must be public key");return v.fromHex(K).multiply(k(G)).toRawBytes(ht)},sign:function _t(G,K,ht=nt){const{seed:bt,k2sig:et}=function vt(G,K,ht=nt){if(["recovered","canonical"].some(Ce=>Ce in ht))throw new Error("sign() legacy options not supported");const{hash:bt,randomBytes:et}=r;let{lowS:kt,prehash:Bt,extraEntropy:It}=ht;null==kt&&(kt=!0),G=Mt("msgHash",G),Bt&&(G=Mt("prehashed msgHash",bt(G)));const Ee=V(G),Se=k(K),Ie=[X(Se),X(Ee)];if(null!=It){const Ce=!0===It?et(e.BYTES):It;Ie.push(Mt("extraEntropy",Ce,e.BYTES))}const je=$t(...Ie),Ae=Ee;return{seed:je,k2sig:function De(Ce){const hn=D(Ce);if(!O(hn))return;const Co=g(hn),Ge=v.BASE.multiply(hn).toAffine(),dn=f(Ge.x);if(dn===Le)return;const er=f(Co*f(Ae+dn*Se));if(er===Le)return;let Ro=(Ge.x===dn?0:2)|Number(Ge.y&de),Io=er;return kt&&L(er)&&(Io=function F(G){return L(G)?f(-G):G}(er),Ro^=1),new $(dn,Io,Ro)}}}(G,K,ht);return ne(r.hash.outputLen,r.nByteLength,r.hmac)(bt,et)},verify:function St(G,K,ht,bt=wt){const et=G;if(K=Mt("msgHash",K),ht=Mt("publicKey",ht),"strict"in bt)throw new Error("options.strict was renamed to lowS");const{lowS:kt,prehash:Bt}=bt;let It,Ee;try{if("string"==typeof et||et instanceof Uint8Array)try{It=$.fromDER(et)}catch(Ge){if(!(Ge instanceof Qe.Err))throw Ge;It=$.fromCompact(et)}else{if("object"!=typeof et||"bigint"!=typeof et.r||"bigint"!=typeof et.s)throw new Error("PARSE");{const{r:Ge,s:dn}=et;It=new $(Ge,dn)}}Ee=v.fromHex(ht)}catch(Ge){if("PARSE"===Ge.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(kt&&It.hasHighS())return!1;Bt&&(K=r.hash(K));const{r:Se,s:Ie}=It,je=V(K),Ae=g(Ie),De=f(je*Ae),Ce=f(Se*Ae),hn=v.BASE.multiplyAndAddUnsafe(Ee,De,Ce)?.toAffine();return!!hn&&f(hn.x)===Se},ProjectivePoint:v,Signature:$,utils:Y}}BigInt(4);class ci extends Zt{constructor(r,e){super(),this.finished=!1,this.destroyed=!1,ot.hash(r);const i=Pe(e);if(this.iHash=r.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?r.create().update(i).digest():i);for(let u=0;u<a.length;u++)a[u]^=54;this.iHash.update(a),this.oHash=r.create();for(let u=0;u<a.length;u++)a[u]^=106;this.oHash.update(a),a.fill(0)}update(r){return ot.exists(this),this.iHash.update(r),this}digestInto(r){ot.exists(this),ot.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:i,finished:o,destroyed:a,blockLen:u,outputLen:f}=this;return r.finished=o,r.destroyed=a,r.blockLen=u,r.outputLen=f,r.oHash=e._cloneInto(r.oHash),r.iHash=i._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sn=(n,r,e)=>new ci(n,r).update(e).digest();function Zo(n){return{hash:n,hmac:(r,...e)=>sn(n,r,zt(...e)),randomBytes:Ht}}sn.create=(n,r)=>new ci(n,r);const Un=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),On=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ui=BigInt(1),$n=BigInt(2),fi=(n,r)=>(n+r/$n)/r;function hi(n){const r=Un,e=BigInt(3),i=BigInt(6),o=BigInt(11),a=BigInt(22),u=BigInt(23),f=BigInt(44),g=BigInt(88),v=n*n*n%r,k=v*v*n%r,A=Me(k,e,r)*k%r,O=Me(A,e,r)*k%r,P=Me(O,$n,r)*v%r,L=Me(P,o,r)*P%r,F=Me(L,a,r)*L%r,U=Me(F,f,r)*F%r,$=Me(U,g,r)*U%r,Y=Me($,f,r)*F%r,Z=Me(Y,e,r)*k%r,z=Me(Z,u,r)*L%r,Q=Me(z,i,r)*v%r,D=Me(Q,$n,r);if(!ur.eql(ur.sqr(D),n))throw new Error("Cannot find square root");return D}const ur=function jo(n,r,e=!1,i={}){if(n<=re)throw new Error(`Expected Fp ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:a}=ar(n,r);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=function _n(n){if(n%Je===pn){const r=(n+Ot)/Je;return function(i,o){const a=i.pow(o,r);if(!i.eql(i.sqr(a),o))throw new Error("Cannot find square root");return a}}if(n%on===rn){const r=(n-rn)/on;return function(i,o){const a=i.mul(o,Te),u=i.pow(a,r),f=i.mul(o,u),g=i.mul(i.mul(f,Te),u),v=i.mul(f,i.sub(g,i.ONE));if(!i.eql(i.sqr(v),o))throw new Error("Cannot find square root");return v}}return function bn(n){const r=(n-Ot)/Te;let e,i,o;for(e=n-Ot,i=0;e%Te===re;e/=Te,i++);for(o=Te;o<n&&wn(o,r,n)!==n-Ot;o++);if(1===i){const u=(n+Ot)/Je;return function(g,v){const k=g.pow(v,u);if(!g.eql(g.sqr(k),v))throw new Error("Cannot find square root");return k}}const a=(e+Ot)/Te;return function(f,g){if(f.pow(g,r)===f.neg(f.ONE))throw new Error("Cannot find square root");let v=i,k=f.pow(f.mul(f.ONE,o),e),A=f.pow(g,a),O=f.pow(g,e);for(;!f.eql(O,f.ONE);){if(f.eql(O,f.ZERO))return f.ZERO;let P=1;for(let F=f.sqr(O);P<v&&!f.eql(F,f.ONE);P++)F=f.sqr(F);const L=f.pow(k,Ot<<BigInt(v-P-1));k=f.sqr(L),A=f.mul(A,L),O=f.mul(O,k),v=P}return A}}(n)}(n),f=Object.freeze({ORDER:n,BITS:o,BYTES:a,MASK:Kt(o),ZERO:re,ONE:Ot,create:g=>he(g,n),isValid:g=>{if("bigint"!=typeof g)throw new Error("Invalid field element: expected bigint, got "+typeof g);return re<=g&&g<n},is0:g=>g===re,isOdd:g=>(g&Ot)===Ot,neg:g=>he(-g,n),eql:(g,v)=>g===v,sqr:g=>he(g*g,n),add:(g,v)=>he(g+v,n),sub:(g,v)=>he(g-v,n),mul:(g,v)=>he(g*v,n),pow:(g,v)=>function To(n,r,e){if(e<re)throw new Error("Expected power > 0");if(e===re)return n.ONE;if(e===Ot)return r;let i=n.ONE,o=r;for(;e>re;)e&Ot&&(i=n.mul(i,o)),o=n.sqr(o),e>>=Ot;return i}(f,g,v),div:(g,v)=>he(g*He(v,n),n),sqrN:g=>g*g,addN:(g,v)=>g+v,subN:(g,v)=>g-v,mulN:(g,v)=>g*v,inv:g=>He(g,n),sqrt:i.sqrt||(g=>u(f,g)),invertBatch:g=>function Bo(n,r){const e=new Array(r.length),i=r.reduce((a,u,f)=>n.is0(u)?a:(e[f]=a,n.mul(a,u)),n.ONE),o=n.inv(i);return r.reduceRight((a,u,f)=>n.is0(u)?a:(e[f]=n.mul(a,e[f]),n.mul(a,u)),o),e}(f,g),cmov:(g,v,k)=>k?v:g,toBytes:g=>e?te(g,a):Ut(g,a),fromBytes:g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return e?en(g):Tt(g)}});return Object.freeze(f)}(Un,void 0,void 0,{sqrt:hi}),an=function Xo(n,r){const e=i=>qo({...n,...Zo(i)});return Object.freeze({...e(r),create:e})}({a:BigInt(0),b:BigInt(7),Fp:ur,n:On,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const r=On,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-ui*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=e,u=BigInt("0x100000000000000000000000000000000"),f=fi(a*n,r),g=fi(-i*n,r);let v=he(n-f*e-g*o,r),k=he(-f*i-g*a,r);const A=v>u,O=k>u;if(A&&(v=r-v),O&&(k=r-k),v>u||k>u)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:A,k1:v,k2neg:O,k2:k}}}},Fe),Dn=BigInt(0),di=n=>"bigint"==typeof n&&Dn<n&&n<Un,mi={};function Gn(n,...r){let e=mi[n];if(void 0===e){const i=Fe(Uint8Array.from(n,o=>o.charCodeAt(0)));e=$t(i,i),mi[n]=e}return Fe($t(e,...r))}const fr=n=>n.toRawBytes(!0).slice(1),hr=n=>Ut(n,32),dr=n=>he(n,Un),kn=n=>he(n,On),mr=an.ProjectivePoint;function gr(n){let r=an.utils.normPrivateKeyToScalar(n),e=mr.fromPrivateKey(r);return{scalar:e.hasEvenY()?r:kn(-r),bytes:fr(e)}}function gi(n){if(!di(n))throw new Error("bad x: need 0 < x < p");const r=dr(n*n);let i=hi(dr(r*n+BigInt(7)));i%$n!==Dn&&(i=dr(-i));const o=new mr(n,i,ui);return o.assertValidity(),o}function pi(...n){return kn(Tt(Gn("BIP0340/challenge",...n)))}function vi(n,r,e){const i=Mt("signature",n,64),o=Mt("message",r),a=Mt("publicKey",e,32);try{const u=gi(Tt(a)),f=Tt(i.subarray(0,32));if(!di(f))return!1;const g=Tt(i.subarray(32,64));if(!(n=>"bigint"==typeof n&&Dn<n&&n<On)(g))return!1;const v=pi(hr(f),fr(u),o),k=((n,r,e)=>mr.BASE.multiplyAndAddUnsafe(n,r,e))(u,g,kn(-v));return!(!k||!k.hasEvenY()||k.toAffine().x!==f)}catch{return!1}}const ln={getPublicKey:function ts(n){return gr(n).bytes},sign:function es(n,r,e=Ht(32)){const i=Mt("message",n),{bytes:o,scalar:a}=gr(r),u=Mt("auxRand",e,32),f=hr(a^Tt(Gn("BIP0340/aux",u))),g=Gn("BIP0340/nonce",f,o,i),v=kn(Tt(g));if(v===Dn)throw new Error("sign failed: k is zero");const{bytes:k,scalar:A}=gr(v),O=pi(k,o,i),P=new Uint8Array(64);if(P.set(k,0),P.set(hr(kn(A+O*a)),32),!vi(P,i,o))throw new Error("sign: Invalid signature produced");return P},verify:vi,utils:{randomPrivateKey:an.utils.randomPrivateKey,lift_x:gi,pointToBytes:fr,numberToBytesBE:Ut,bytesToNumberBE:Tt,taggedHash:Gn,mod:he}};var yi=M(5693),pr=M(9673),ns=M(9608);const Ue=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function wr(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function br(n){if("string"==typeof n&&(n=wr(n)),!(n=>n instanceof Uint8Array)(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function _r(n,r){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof r&&n.length!==r)throw new Error(`Uint8Array length ${r} expected`)}function xr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function wi(n,...r){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(n.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${n.length}`)}const Re={number:xr,bool:function ls(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:wi,hash:function cs(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("hash must be wrapped by utils.wrapConstructor");xr(n.outputLen),xr(n.blockLen)},exists:function us(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")},output:function fs(n,r){wi(n);const e=r.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}},ke=(n,r)=>255&n[r++]|(255&n[r++])<<8;class hs{constructor(r){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,_r(r=br(r),32);const e=ke(r,0),i=ke(r,2),o=ke(r,4),a=ke(r,6),u=ke(r,8),f=ke(r,10),g=ke(r,12),v=ke(r,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|i<<3),this.r[2]=7939&(i>>>10|o<<6),this.r[3]=8191&(o>>>7|a<<9),this.r[4]=255&(a>>>4|u<<12),this.r[5]=u>>>1&8190,this.r[6]=8191&(u>>>14|f<<2),this.r[7]=8065&(f>>>11|g<<5),this.r[8]=8191&(g>>>8|v<<8),this.r[9]=v>>>5&127;for(let k=0;k<8;k++)this.pad[k]=ke(r,16+2*k)}process(r,e,i=!1){const o=i?0:2048,{h:a,r:u}=this,f=u[0],g=u[1],v=u[2],k=u[3],A=u[4],O=u[5],P=u[6],L=u[7],F=u[8],U=u[9],$=ke(r,e+0),Y=ke(r,e+2),Z=ke(r,e+4),z=ke(r,e+6),Q=ke(r,e+8),D=ke(r,e+10),V=ke(r,e+12),J=ke(r,e+14);let X=a[0]+(8191&$),vt=a[1]+(8191&($>>>13|Y<<3)),nt=a[2]+(8191&(Y>>>10|Z<<6)),wt=a[3]+(8191&(Z>>>7|z<<9)),_t=a[4]+(8191&(z>>>4|Q<<12)),St=a[5]+(Q>>>1&8191),G=a[6]+(8191&(Q>>>14|D<<2)),K=a[7]+(8191&(D>>>11|V<<5)),ht=a[8]+(8191&(V>>>8|J<<8)),bt=a[9]+(J>>>5|o),et=0,kt=et+X*f+vt*(5*U)+nt*(5*F)+wt*(5*L)+_t*(5*P);et=kt>>>13,kt&=8191,kt+=St*(5*O)+G*(5*A)+K*(5*k)+ht*(5*v)+bt*(5*g),et+=kt>>>13,kt&=8191;let Bt=et+X*g+vt*f+nt*(5*U)+wt*(5*F)+_t*(5*L);et=Bt>>>13,Bt&=8191,Bt+=St*(5*P)+G*(5*O)+K*(5*A)+ht*(5*k)+bt*(5*v),et+=Bt>>>13,Bt&=8191;let It=et+X*v+vt*g+nt*f+wt*(5*U)+_t*(5*F);et=It>>>13,It&=8191,It+=St*(5*L)+G*(5*P)+K*(5*O)+ht*(5*A)+bt*(5*k),et+=It>>>13,It&=8191;let Ee=et+X*k+vt*v+nt*g+wt*f+_t*(5*U);et=Ee>>>13,Ee&=8191,Ee+=St*(5*F)+G*(5*L)+K*(5*P)+ht*(5*O)+bt*(5*A),et+=Ee>>>13,Ee&=8191;let Se=et+X*A+vt*k+nt*v+wt*g+_t*f;et=Se>>>13,Se&=8191,Se+=St*(5*U)+G*(5*F)+K*(5*L)+ht*(5*P)+bt*(5*O),et+=Se>>>13,Se&=8191;let Ie=et+X*O+vt*A+nt*k+wt*v+_t*g;et=Ie>>>13,Ie&=8191,Ie+=St*f+G*(5*U)+K*(5*F)+ht*(5*L)+bt*(5*P),et+=Ie>>>13,Ie&=8191;let je=et+X*P+vt*O+nt*A+wt*k+_t*v;et=je>>>13,je&=8191,je+=St*g+G*f+K*(5*U)+ht*(5*F)+bt*(5*L),et+=je>>>13,je&=8191;let Ae=et+X*L+vt*P+nt*O+wt*A+_t*k;et=Ae>>>13,Ae&=8191,Ae+=St*v+G*g+K*f+ht*(5*U)+bt*(5*F),et+=Ae>>>13,Ae&=8191;let De=et+X*F+vt*L+nt*P+wt*O+_t*A;et=De>>>13,De&=8191,De+=St*k+G*v+K*g+ht*f+bt*(5*U),et+=De>>>13,De&=8191;let Ce=et+X*U+vt*F+nt*L+wt*P+_t*O;et=Ce>>>13,Ce&=8191,Ce+=St*A+G*k+K*v+ht*g+bt*f,et+=Ce>>>13,Ce&=8191,et=(et<<2)+et|0,et=et+kt|0,kt=8191&et,et>>>=13,Bt+=et,a[0]=kt,a[1]=Bt,a[2]=It,a[3]=Ee,a[4]=Se,a[5]=Ie,a[6]=je,a[7]=Ae,a[8]=De,a[9]=Ce}finalize(){const{h:r,pad:e}=this,i=new Uint16Array(10);let o=r[1]>>>13;r[1]&=8191;for(let f=2;f<10;f++)r[f]+=o,o=r[f]>>>13,r[f]&=8191;r[0]+=5*o,o=r[0]>>>13,r[0]&=8191,r[1]+=o,o=r[1]>>>13,r[1]&=8191,r[2]+=o,i[0]=r[0]+5,o=i[0]>>>13,i[0]&=8191;for(let f=1;f<10;f++)i[f]=r[f]+o,o=i[f]>>>13,i[f]&=8191;i[9]-=8192;let a=(1^o)-1;for(let f=0;f<10;f++)i[f]&=a;a=~a;for(let f=0;f<10;f++)r[f]=r[f]&a|i[f];r[0]=65535&(r[0]|r[1]<<13),r[1]=65535&(r[1]>>>3|r[2]<<10),r[2]=65535&(r[2]>>>6|r[3]<<7),r[3]=65535&(r[3]>>>9|r[4]<<4),r[4]=65535&(r[4]>>>12|r[5]<<1|r[6]<<14),r[5]=65535&(r[6]>>>2|r[7]<<11),r[6]=65535&(r[7]>>>5|r[8]<<8),r[7]=65535&(r[8]>>>8|r[9]<<5);let u=r[0]+e[0];r[0]=65535&u;for(let f=1;f<8;f++)u=(r[f]+e[f]|0)+(u>>>16)|0,r[f]=65535&u}update(r){Re.exists(this);const{buffer:e,blockLen:i}=this,o=(r=br(r)).length;for(let a=0;a<o;){const u=Math.min(i-this.pos,o-a);if(u!==i)e.set(r.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(e,0,!1),this.pos=0);else for(;i<=o-a;a+=i)this.process(r,a)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(r){Re.exists(this),Re.output(r,this),this.finished=!0;const{buffer:e,h:i}=this;let{pos:o}=this;if(o){for(e[o++]=1;o<16;o++)e[o]=0;this.process(e,0,!0)}this.finalize();let a=0;for(let u=0;u<8;u++)r[a++]=i[u]>>>0,r[a++]=i[u]>>>8;return r}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const i=r.slice(0,e);return this.destroy(),i}}!function ds(n){const r=(i,o)=>n(o).update(br(i)).digest(),e=n(new Uint8Array(32));r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=i=>n(i)}(n=>new hs(n));const ms=wr("expand 16-byte k"),gs=wr("expand 32-byte k"),ps=Ue(ms),vs=Ue(gs),bi=n=>!(n.byteOffset%4),gt=(n,r)=>n<<r|n>>>32-r;const _i=(n=>{const{core:r,rounds:e,counterRight:i,counterLen:o,allow128bitKeys:a,extendNonceFn:u,blockLen:f}=function ss(n,r){if(void 0!==r&&("object"!=typeof r||!(n=>"[object Object]"===Object.prototype.toString.call(n)&&n.constructor===Object)(r)))throw new Error("options must be object or undefined");return Object.assign(n,r)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);Re.number(o),Re.number(e),Re.number(f),Re.bool(i),Re.bool(a);const g=f/4;if(f%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(v,k,A,O,P=0)=>{if(Re.bytes(v),Re.bytes(k),Re.bytes(A),O||(O=new Uint8Array(A.length)),Re.bytes(O),Re.number(P),P<0||P>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(O.length<A.length)throw new Error(`Salsa/ChaCha: output (${O.length}) is shorter than data (${A.length})`);const L=[];let F,U;if(32===v.length)F=v,U=vs;else{if(16!==v.length||!a)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${v.length}`);F=new Uint8Array(32),F.set(v),F.set(v,16),U=ps,L.push(F)}if(u){if(k.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");F=u(U,F,k.subarray(0,16),new Uint8Array(32)),L.push(F),k=k.subarray(16)}const $=16-o;if(k.length!==$)throw new Error(`Salsa/ChaCha: nonce must be ${$} or 16 bytes`);if(12!==$){const X=new Uint8Array(12);X.set(k,i?0:12-k.length),L.push(k=X)}const Y=new Uint8Array(f),Z=Ue(Y),z=Ue(F),Q=Ue(k),D=bi(A)&&Ue(A),V=bi(O)&&Ue(O);L.push(Z);const J=A.length;for(let X=0,vt=P;X<J;vt++){if(r(U,z,Q,Z,vt,e),vt>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const nt=Math.min(f,J-X);if(nt===f&&V&&D){const wt=X/4;if(X%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let _t=0;_t<g;_t++)V[wt+_t]=D[wt+_t]^Z[_t];X+=f}else{for(let wt=0;wt<nt;wt++)O[X+wt]=A[X+wt]^Y[wt];X+=nt}}for(let X=0;X<L.length;X++)L[X].fill(0);return O}})({core:function Sn(n,r,e,i,o,a=20){let u=n[0],f=n[1],g=n[2],v=n[3],k=r[0],A=r[1],O=r[2],P=r[3],L=r[4],F=r[5],U=r[6],$=r[7],Y=o,Z=e[0],z=e[1],Q=e[2],D=u,V=f,J=g,X=v,vt=k,nt=A,wt=O,_t=P,St=L,G=F,K=U,ht=$,bt=Y,et=Z,kt=z,Bt=Q;for(let Ee=0;Ee<a;Ee+=2)D=D+vt|0,bt=gt(bt^D,16),St=St+bt|0,vt=gt(vt^St,12),D=D+vt|0,bt=gt(bt^D,8),St=St+bt|0,vt=gt(vt^St,7),V=V+nt|0,et=gt(et^V,16),G=G+et|0,nt=gt(nt^G,12),V=V+nt|0,et=gt(et^V,8),G=G+et|0,nt=gt(nt^G,7),J=J+wt|0,kt=gt(kt^J,16),K=K+kt|0,wt=gt(wt^K,12),J=J+wt|0,kt=gt(kt^J,8),K=K+kt|0,wt=gt(wt^K,7),X=X+_t|0,Bt=gt(Bt^X,16),ht=ht+Bt|0,_t=gt(_t^ht,12),X=X+_t|0,Bt=gt(Bt^X,8),ht=ht+Bt|0,_t=gt(_t^ht,7),D=D+nt|0,Bt=gt(Bt^D,16),K=K+Bt|0,nt=gt(nt^K,12),D=D+nt|0,Bt=gt(Bt^D,8),K=K+Bt|0,nt=gt(nt^K,7),V=V+wt|0,bt=gt(bt^V,16),ht=ht+bt|0,wt=gt(wt^ht,12),V=V+wt|0,bt=gt(bt^V,8),ht=ht+bt|0,wt=gt(wt^ht,7),J=J+_t|0,et=gt(et^J,16),St=St+et|0,_t=gt(_t^St,12),J=J+_t|0,et=gt(et^J,8),St=St+et|0,_t=gt(_t^St,7),X=X+vt|0,kt=gt(kt^X,16),G=G+kt|0,vt=gt(vt^G,12),X=X+vt|0,kt=gt(kt^X,8),G=G+kt|0,vt=gt(vt^G,7);let It=0;i[It++]=u+D|0,i[It++]=f+V|0,i[It++]=g+J|0,i[It++]=v+X|0,i[It++]=k+vt|0,i[It++]=A+nt|0,i[It++]=O+wt|0,i[It++]=P+_t|0,i[It++]=L+St|0,i[It++]=F+G|0,i[It++]=U+K|0,i[It++]=$+ht|0,i[It++]=Y+bt|0,i[It++]=Z+et|0,i[It++]=z+kt|0,i[It++]=Q+Bt|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),Er=new Uint8Array([0]),ki=new Uint8Array;var Es=Object.defineProperty,_e=(n,r)=>{for(var e in r)Es(n,e,{get:r[e],enumerable:!0})};function Mi(){return be(ln.utils.randomPrivateKey())}function kr(n){return be(ln.getPublicKey(n))}_e({},{MessageNode:()=>Si,MessageQueue:()=>Ai,insertEventIntoAscendingList:()=>Ss,insertEventIntoDescendingList:()=>Ms,normalizeURL:()=>Mr,utf8Decoder:()=>Oe,utf8Encoder:()=>Be});var Oe=new TextDecoder("utf-8"),Be=new TextEncoder;function Mr(n){let r=new URL(n);return r.pathname=r.pathname.replace(/\/+/g,"/"),r.pathname.endsWith("/")&&(r.pathname=r.pathname.slice(0,-1)),("80"===r.port&&"ws:"===r.protocol||"443"===r.port&&"wss:"===r.protocol)&&(r.port=""),r.searchParams.sort(),r.hash="",r.toString()}function Ms(n,r){let o,e=0,i=n.length-1,a=e;if(i<0)a=0;else if(r.created_at<n[i].created_at)a=i+1;else if(r.created_at>=n[e].created_at)a=e;else for(;;){if(i<=e+1){a=i;break}if(o=Math.floor(e+(i-e)/2),n[o].created_at>r.created_at)e=o;else{if(!(n[o].created_at<r.created_at)){a=o;break}i=o}}return n[a]?.id!==r.id?[...n.slice(0,a),r,...n.slice(a)]:n}function Ss(n,r){let o,e=0,i=n.length-1,a=e;if(i<0)a=0;else if(r.created_at>n[i].created_at)a=i+1;else if(r.created_at<=n[e].created_at)a=e;else for(;;){if(i<=e+1){a=i;break}if(o=Math.floor(e+(i-e)/2),n[o].created_at<r.created_at)e=o;else{if(!(n[o].created_at>r.created_at)){a=o;break}i=o}}return n[a]?.id!==r.id?[...n.slice(0,a),r,...n.slice(a)]:n}var Si=class{_value;_next;get value(){return this._value}set value(n){this._value=n}get next(){return this._next}set next(n){this._next=n}constructor(n){this._value=n,this._next=null}},Ai=class{_first;_last;get first(){return this._first}set first(n){this._first=n}get last(){return this._last}set last(n){this._last=n}_size;get size(){return this._size}set size(n){this._size=n}constructor(){this._first=null,this._last=null,this._size=0}enqueue(n){const r=new Si(n);return 0!==this._size&&this._last?(this._last.next=r,this._last=r):(this._first=r,this._last=r),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let n=this._first;return this._first=n.next,n.next=null,this._size--,n.value}},cn=Symbol("verified");function Ye(n,r){const e=n;return e.pubkey=kr(r),e.id=An(e),e.sig=function Ci(n,r){return be(ln.sign(An(n),r))}(e,r),e[cn]=!0,e}function An(n){let r=Fe(Be.encode(function Rs(n){if(!Sr(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}(n)));return be(r)}var Is=n=>n instanceof Object;function Sr(n){if(!Is(n)||"number"!=typeof n.kind||"string"!=typeof n.content||"number"!=typeof n.created_at||"string"!=typeof n.pubkey||!n.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(n.tags))return!1;for(let r=0;r<n.tags.length;r++){let e=n.tags[r];if(!Array.isArray(e))return!1;for(let i=0;i<e.length;i++)if("object"==typeof e[i])return!1}return!0}function qn(n){if("boolean"==typeof n[cn])return n[cn];const r=An(n);if(r!==n.id)return n[cn]=!1;try{return n[cn]=ln.verify(n.sig,r,n.pubkey)}catch{return n[cn]=!1}}function Fs(n,r){if(n.ids&&-1===n.ids.indexOf(r.id)&&!n.ids.some(e=>r.id.startsWith(e))||n.kinds&&-1===n.kinds.indexOf(r.kind)||n.authors&&-1===n.authors.indexOf(r.pubkey)&&!n.authors.some(e=>r.pubkey.startsWith(e)))return!1;for(let e in n)if("#"===e[0]){let o=n[`#${e.slice(1)}`];if(o&&!r.tags.find(([a,u])=>a===e.slice(1)&&-1!==o.indexOf(u)))return!1}return!(n.since&&r.created_at<n.since||n.until&&r.created_at>n.until)}function Yn(n,r){let e=r.length+3,i=n.indexOf(`"${r}":`)+e,o=n.slice(i).indexOf('"')+i+1;return n.slice(o,o+64)}function Ii(n,r){let e=r.length,i=n.indexOf(`"${r}":`)+e+3,o=n.slice(i),a=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,a),10)}function Fi(n){let r=n.slice(0,22).indexOf('"EVENT"');if(-1===r)return null;let e=n.slice(r+7+1).indexOf('"');if(-1===e)return null;let i=r+7+1+e,o=n.slice(i+1,80).indexOf('"');return-1===o?null:n.slice(i+1,i+1+o)}function js(n,r){return r===Yn(n,"id")}function Ns(n,r){return r===Yn(n,"pubkey")}function Ls(n,r){return r===Ii(n,"kind")}function Bi(n,r={}){let{listTimeout:e=3e3,getTimeout:i=3e3,countTimeout:o=3e3}=r;var a,k,u={},f={connect:[],disconnect:[],error:[],notice:[],auth:[]},g={},v={};function O(){return(O=(0,w.A)(function*(){return k||(k=new Promise((z,Q)=>{try{a=new WebSocket(n)}catch(X){Q(X)}a.onopen=()=>{f.connect.forEach(X=>X()),z()},a.onerror=()=>{k=void 0,f.error.forEach(X=>X()),Q()},a.onclose=(0,w.A)(function*(){k=void 0,f.disconnect.forEach(X=>X())});let V,D=new Ai;function J(){if(0===D.size)return clearInterval(V),void(V=null);var X=D.dequeue();if(!X)return;let vt=Fi(X);if(vt){let nt=u[vt];if(nt&&nt.alreadyHaveEvent&&nt.alreadyHaveEvent(Yn(X,"id"),n))return}try{let nt=JSON.parse(X);switch(nt[0]){case"EVENT":{let G=nt[1],K=nt[2];return void(Sr(K)&&u[G]&&(u[G].skipVerification||qn(K))&&function Ri(n,r){for(let e=0;e<n.length;e++)if(Fs(n[e],r))return!0;return!1}(u[G].filters,K)&&(g[G]?.event||[]).forEach(ht=>ht(K)))}case"COUNT":let wt=nt[1],_t=nt[2];return void(u[wt]&&(g[wt]?.count||[]).forEach(G=>G(_t)));case"EOSE":{let G=nt[1];return void(G in g&&(g[G].eose.forEach(K=>K()),g[G].eose=[]))}case"OK":{let G=nt[1],K=nt[2],ht=nt[3]||"";if(G in v){let{resolve:bt,reject:et}=v[G];K?bt(null):et(new Error(ht))}return}case"NOTICE":let St=nt[1];return void f.notice.forEach(G=>G(St));case"AUTH":{let G=nt[1];return void f.auth?.forEach(K=>K(G))}}}catch{return}}a.onmessage=X=>{D.enqueue(X.data),V||(V=setInterval(J,0))}}))})).apply(this,arguments)}function P(){return 1===a?.readyState}function F(){return F=(0,w.A)(function*(){P()||(yield function A(){return O.apply(this,arguments)}())}),F.apply(this,arguments)}function U(z){return $.apply(this,arguments)}function $(){return($=(0,w.A)(function*(z){let Q=JSON.stringify(z);if(P()||(yield new Promise(D=>setTimeout(D,1e3)),P()))try{a.send(Q)}catch(D){console.log(D)}})).apply(this,arguments)}const Y=(z,{verb:Q="REQ",skipVerification:D=!1,alreadyHaveEvent:V=null,id:J=Math.random().toString().slice(2)}={})=>{let X=J;u[X]={id:X,filters:z,skipVerification:D,alreadyHaveEvent:V},U([Q,X,...z]);let vt={sub:(nt,wt={})=>Y(nt||z,{skipVerification:wt.skipVerification||D,alreadyHaveEvent:wt.alreadyHaveEvent||V,id:X}),unsub:()=>{delete u[X],delete g[X],U(["CLOSE",X])},on:(nt,wt)=>{g[X]=g[X]||{event:[],count:[],eose:[]},g[X][nt].push(wt)},off:(nt,wt)=>{let _t=g[X],St=_t[nt].indexOf(wt);St>=0&&_t[nt].splice(St,1)},get events(){return function ji(n){return Ar.apply(this,arguments)}(vt)}};return vt};function Z(z,Q){return new Promise((D,V)=>{if(!z.id)return void V(new Error(`event ${z} has no id`));let J=z.id;U([Q,z]),v[J]={resolve:D,reject:V}})}return{url:n,sub:Y,on:(z,Q)=>{f[z].push(Q),"connect"===z&&1===a?.readyState&&Q()},off:(z,Q)=>{let D=f[z].indexOf(Q);-1!==D&&f[z].splice(D,1)},list:(z,Q)=>new Promise(D=>{let V=Y(z,Q),J=[],X=setTimeout(()=>{V.unsub(),D(J)},e);V.on("eose",()=>{V.unsub(),clearTimeout(X),D(J)}),V.on("event",vt=>{J.push(vt)})}),get:(z,Q)=>new Promise(D=>{let V=Y([z],Q),J=setTimeout(()=>{V.unsub(),D(null)},i);V.on("event",X=>{V.unsub(),clearTimeout(J),D(X)})}),count:z=>new Promise(Q=>{let D=Y(z,{...Y,verb:"COUNT"}),V=setTimeout(()=>{D.unsub(),Q(null)},o);D.on("count",J=>{D.unsub(),clearTimeout(V),Q(J)})}),publish:z=>(0,w.A)(function*(){yield Z(z,"EVENT")})(),auth:z=>(0,w.A)(function*(){yield Z(z,"AUTH")})(),connect:function L(){return F.apply(this,arguments)},close(){f={connect:[],disconnect:[],error:[],notice:[],auth:[]},g={},v={},a?.readyState===WebSocket.OPEN&&a.close()},get status(){return a?.readyState??3}}}function Ar(){return Ar=function c(n){return function(){return new d(n.apply(this,arguments))}}(function*(n){let r;const e=[],i=o=>{r?(r(o),r=void 0):e.push(o)};n.on("event",i);try{for(;;)e.length>0?yield e.shift():yield yield s(new Promise(a=>{r=a}))}finally{n.off("event",i)}}),Ar.apply(this,arguments)}_e({},{getHex64:()=>Yn,getInt:()=>Ii,getSubscriptionId:()=>Fi,matchEventId:()=>js,matchEventKind:()=>Ls,matchEventPubkey:()=>Ns});var Cr={};_e(Cr,{BECH32_REGEX:()=>Li,decode:()=>Cn,naddrEncode:()=>qs,neventEncode:()=>Gs,noteEncode:()=>$s,nprofileEncode:()=>Ds,npubEncode:()=>Os,nrelayEncode:()=>Ys,nsecEncode:()=>Us});var Ni=5e3,Li=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Cn(n){let{prefix:r,words:e}=ct.I.decode(n,Ni),i=new Uint8Array(ct.I.fromWords(e));switch(r){case"nprofile":{let o=zn(i);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:be(o[0][0]),relays:o[1]?o[1].map(a=>Oe.decode(a)):[]}}}case"nevent":{let o=zn(i);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:be(o[0][0]),relays:o[1]?o[1].map(a=>Oe.decode(a)):[],author:o[2]?.[0]?be(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(be(o[3][0]),16):void 0}}}case"naddr":{let o=zn(i);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Oe.decode(o[0][0]),pubkey:be(o[2][0]),kind:parseInt(be(o[3][0]),16),relays:o[1]?o[1].map(a=>Oe.decode(a)):[]}}}case"nrelay":{let o=zn(i);if(!o[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Oe.decode(o[0][0])}}case"nsec":case"npub":case"note":return{type:r,data:be(i)};default:throw new Error(`unknown prefix ${r}`)}}function zn(n){let r={},e=n;for(;e.length>0;){let i=e[0],o=e[1];if(!o)throw new Error(`malformed TLV ${i}`);let a=e.slice(2,2+o);if(e=e.slice(2+o),a.length<o)throw new Error(`not enough data to read on TLV ${i}`);r[i]=r[i]||[],r[i].push(a)}return r}function Us(n){return Rr("nsec",n)}function Os(n){return Rr("npub",n)}function $s(n){return Rr("note",n)}function Rn(n,r){let e=ct.I.toWords(r);return ct.I.encode(n,e,Ni)}function Rr(n,r){return Rn(n,Yt(r))}function Ds(n){return Rn("nprofile",Hn({0:[Yt(n.pubkey)],1:(n.relays||[]).map(e=>Be.encode(e))}))}function Gs(n){let r;return null!=n.kind&&(r=function Ps(n){const r=new Uint8Array(4);return r[0]=n>>24&255,r[1]=n>>16&255,r[2]=n>>8&255,r[3]=255&n,r}(n.kind)),Rn("nevent",Hn({0:[Yt(n.id)],1:(n.relays||[]).map(i=>Be.encode(i)),2:n.author?[Yt(n.author)]:[],3:r?[new Uint8Array(r)]:[]}))}function qs(n){let r=new ArrayBuffer(4);return new DataView(r).setUint32(0,n.kind,!1),Rn("naddr",Hn({0:[Be.encode(n.identifier)],1:(n.relays||[]).map(i=>Be.encode(i)),2:[Yt(n.pubkey)],3:[new Uint8Array(r)]}))}function Ys(n){return Rn("nrelay",Hn({0:[Be.encode(n)]}))}function Hn(n){let r=[];return Object.entries(n).forEach(([e,i])=>{i.forEach(o=>{let a=new Uint8Array(o.length+2);a.set([parseInt(e)],0),a.set([o.length],1),a.set(o,2),r.push(a)})}),zt(...r)}var Ir={};function Pi(n,r,e){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,w.A)(function*(n,r,e){const o=Ui(an.getSharedSecret(n,"02"+r));let a=Uint8Array.from(Ht(16)),u=Be.encode(e),f=yield crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["encrypt"]),g=yield crypto.subtle.encrypt({name:"AES-CBC",iv:a},f,u);return`${ct.K3.encode(new Uint8Array(g))}?iv=${ct.K3.encode(new Uint8Array(a.buffer))}`})).apply(this,arguments)}function Hs(n,r,e){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,w.A)(function*(n,r,e){let[i,o]=e.split("?iv="),u=Ui(an.getSharedSecret(n,"02"+r)),f=yield crypto.subtle.importKey("raw",u,{name:"AES-CBC"},!1,["decrypt"]),g=ct.K3.decode(i),v=ct.K3.decode(o),k=yield crypto.subtle.decrypt({name:"AES-CBC",iv:v},f,g);return Oe.decode(k)})).apply(this,arguments)}function Ui(n){return n.slice(1,33)}_e(Ir,{decrypt:()=>Hs,encrypt:()=>Pi}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),_e({},{NIP05_REGEX:()=>Oi,queryProfile:()=>Zs,searchDomain:()=>Ks,useFetchImplementation:()=>Ws});var Vn,Oi=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Vn=fetch}catch{}function Ws(n){Vn=n}function Ks(n){return Br.apply(this,arguments)}function Br(){return(Br=(0,w.A)(function*(n,r=""){try{return(yield(yield Vn(`https://${n}/.well-known/nostr.json?name=${r}`)).json()).names}catch{return{}}})).apply(this,arguments)}function Zs(n){return jr.apply(this,arguments)}function jr(){return(jr=(0,w.A)(function*(n){const r=n.match(Oi);if(!r)return null;const[e,i="_",o]=r;try{const a=yield Vn(`https://${o}/.well-known/nostr.json?name=${i}`),{names:u,relays:f}=function Xs(n){const r={names:{}};for(const[e,i]of Object.entries(n.names))"string"==typeof e&&"string"==typeof i&&(r.names[e]=i);if(n.relays){r.relays={};for(const[e,i]of Object.entries(n.relays))"string"==typeof e&&Array.isArray(i)&&(r.relays[e]=i.filter(o=>"string"==typeof o))}return r}(yield a.json()),g=u[i];return g?{pubkey:g,relays:f?.[g]}:null}catch{return null}})).apply(this,arguments)}function Qs(n,r){let i=ns.c.fromMasterSeed((0,pr.kw)(n,r)).derive("m/44'/1237'/0'/0/0").privateKey;if(!i)throw new Error("could not derive private key");return be(i)}function ta(){return(0,pr.we)(yi.p)}function ea(n){return(0,pr.JB)(n,yi.p)}function ra(n){const r={reply:void 0,root:void 0,mentions:[],profiles:[]},e=[];for(const i of n.tags)"e"===i[0]&&i[1]&&e.push(i),"p"===i[0]&&i[1]&&r.profiles.push({pubkey:i[1],relays:i[2]?[i[2]]:[]});for(let i=0;i<e.length;i++){const o=e[i],[a,u,f,g]=o,v={id:u,relays:f?[f]:[]},A=i===e.length-1;"root"!==g?"reply"!==g?"mention"!==g?0===i?r.root=v:A?r.reply=v:r.mentions.push(v):r.mentions.push(v):r.reply=v:r.root=v}return r}function $i(n){let r=0;for(let e=0;e<n.length;e++){const i=parseInt(n[e],16);if(0!==i){r+=Math.clz32(i)-28;break}r+=4}return r}function oa(n,r){let e=0;const i=n,o=["nonce",e.toString(),r.toString()];for(i.tags.push(o);;){const a=Math.floor((new Date).getTime()/1e3);if(a!==i.created_at&&(e=0,i.created_at=a),o[1]=(++e).toString(),i.id=An(i),$i(i.id)>=r)break}return i}function aa(n,r,e,i){return Ye({kind:6,tags:[...n.tags??[],["e",r.id,e],["p",r.pubkey]],content:""===n.content?"":JSON.stringify(r),created_at:n.created_at},i)}function Di(n){if(6!==n.kind)return;let r,e;for(let i=n.tags.length-1;i>=0&&(void 0===r||void 0===e);i--){const o=n.tags[i];o.length>=2&&("e"===o[0]&&void 0===r?r=o:"p"===o[0]&&void 0===e&&(e=o))}return void 0!==r?{id:r[1],relays:[r[2],e?.[2]].filter(i=>"string"==typeof i),author:e?.[1]}:void 0}function la(n,{skipVerification:r}={}){const e=Di(n);if(void 0===e||""===n.content)return;let i;try{i=JSON.parse(n.content)}catch{return}return i.id===e.id&&(r||qn(i))?i:void 0}_e({},{generateSeedWords:()=>ta,privateKeyFromSeedWords:()=>Qs,validateWords:()=>ea}),_e({},{parse:()=>ra}),_e({},{getPow:()=>$i,minePow:()=>oa}),_e({},{finishRepostEvent:()=>aa,getRepostedEvent:()=>la,getRepostedEventPointer:()=>Di}),_e({},{NOSTR_URI_REGEX:()=>Wn,parse:()=>fa,test:()=>ua});var Wn=new RegExp(`nostr:(${Li.source})`);function ua(n){return"string"==typeof n&&new RegExp(`^${Wn.source}$`).test(n)}function fa(n){const r=n.match(new RegExp(`^${Wn.source}$`));if(!r)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:r[0],value:r[1],decoded:Cn(r[1])}}function da(n,r,e){const i=r.tags.filter(o=>o.length>=2&&("e"===o[0]||"p"===o[0]));return Ye({...n,kind:7,tags:[...n.tags??[],...i,["e",r.id],["p",r.pubkey]],content:n.content??"+"},e)}function ma(n){if(7!==n.kind)return;let r,e;for(let i=n.tags.length-1;i>=0&&(void 0===r||void 0===e);i--){const o=n.tags[i];o.length>=2&&("e"===o[0]&&void 0===r?r=o:"p"===o[0]&&void 0===e&&(e=o))}return void 0!==r&&void 0!==e?{id:r[1],relays:[r[2],e[2]].filter(i=>void 0!==i),author:e[1]}:void 0}function pa(n,r){let e=[];(r.kind||-1)>=0&&e.push(`kind=${r.kind}`),r.until&&e.push(`created_at<${r.until}`),r.since&&e.push(`created_at>${r.since}`);let i=e.join("&");if(""===i)throw new Error("refusing to create a delegation without any conditions");let o=Fe(Be.encode(`nostr:delegation:${r.pubkey}:${i}`)),a=be(ln.sign(o,n));return{from:kr(n),to:r.pubkey,cond:i,sig:a}}function va(n){let r=n.tags.find(f=>"delegation"===f[0]&&f.length>=4);if(!r)return null;let e=r[1],i=r[2],o=r[3],a=i.split("&");for(let f=0;f<a.length;f++){let[g,v,k]=a[f].split(/\b/);if("kind"!==g||"="!==v||n.kind!==parseInt(k)){if("created_at"===g&&"<"===v&&n.created_at<parseInt(k))continue;if("created_at"===g&&">"===v&&n.created_at>parseInt(k))continue;return null}}let u=Fe(Be.encode(`nostr:delegation:${n.pubkey}:${i}`));return ln.verify(o,u,e)?e:null}_e({},{finishReactionEvent:()=>da,getReactedEventPointer:()=>ma}),_e({},{createDelegation:()=>pa,getDelegator:()=>va}),_e({},{matchAll:()=>wa,regex:()=>Nr,replaceAll:()=>ba});var Nr=()=>new RegExp(`\\b${Wn.source}\\b`,"g");function*wa(n){const r=n.matchAll(Nr());for(const e of r)try{const[i,o]=e;yield{uri:i,value:o,decoded:Cn(o),start:e.index,end:e.index+i.length}}catch{}}function ba(n,r){return n.replaceAll(Nr(),(e,i)=>r({uri:e,value:i,decoded:Cn(i)}))}_e({},{channelCreateEvent:()=>xa,channelHideMessageEvent:()=>Ma,channelMessageEvent:()=>ka,channelMetadataEvent:()=>Ea,channelMuteUserEvent:()=>Sa});var Lr,xa=(n,r)=>{let e;if("object"==typeof n.content)e=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;e=n.content}return Ye({kind:40,tags:[...n.tags??[]],content:e,created_at:n.created_at},r)},Ea=(n,r)=>{let e;if("object"==typeof n.content)e=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;e=n.content}return Ye({kind:41,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:e,created_at:n.created_at},r)},ka=(n,r)=>{const e=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&e.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),Ye({kind:42,tags:[...e,...n.tags??[]],content:n.content,created_at:n.created_at},r)},Ma=(n,r)=>{let e;if("object"==typeof n.content)e=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;e=n.content}return Ye({kind:43,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:e,created_at:n.created_at},r)},Sa=(n,r)=>{let e;if("object"==typeof n.content)e=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;e=n.content}return Ye({kind:44,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:e,created_at:n.created_at},r)};_e({},{useFetchImplementation:()=>Ca,validateGithub:()=>Ra});try{Lr=fetch}catch{}function Ca(n){Lr=n}function Ra(n,r,e){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,w.A)(function*(n,r,e){try{return(yield(yield Lr(`https://gist.github.com/${r}/${e}/raw`)).text())===`Verifying that I control the following Nostr public key: ${n}`}catch{return!1}})).apply(this,arguments)}_e({},{authenticate:()=>Fa});var Fa=function(){var n=(0,w.A)(function*({challenge:r,relay:e,sign:i}){const o={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",r]],content:""};return e.auth(yield i(o))});return function(e){return n.apply(this,arguments)}}();_e({},{decrypt:()=>ja,encrypt:()=>Ba,utils:()=>tn});var Or,tn={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(n,r)=>an.getSharedSecret(n,"02"+r).subarray(1,33),getMessageKeys(n,r){const e=((n,r,e,i,o)=>function _s(n,r,e,i=32){if(ot.hash(n),ot.number(i),i>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(i/n.outputLen);void 0===e&&(e=ki);const a=new Uint8Array(o*n.outputLen),u=sn.create(n,r),f=u._cloneInto(),g=new Uint8Array(u.outputLen);for(let v=0;v<o;v++)Er[0]=v+1,f.update(0===v?ki:g).update(e).update(Er).digestInto(g),a.set(g,n.outputLen*v),u._cloneInto(f);return u.destroy(),f.destroy(),g.fill(0),Er.fill(0),a.slice(0,i)}(n,function bs(n,r,e){return ot.hash(n),void 0===e&&(e=new Uint8Array(n.outputLen)),sn(n,Pe(e),Pe(r))}(n,r,e),i,o))(Fe,n,r,"nip44-v2",76);return{encryption:e.subarray(0,32),nonce:e.subarray(32,44),auth:e.subarray(44,76)}},calcPadding(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("expected positive integer");if(n<=32)return 32;const r=1<<Math.floor(Math.log2(n-1))+1,e=r<=256?32:r/8;return e*(Math.floor((n-1)/e)+1)},pad(n){const r=Be.encode(n),e=r.length;if(e<1||e>=tn.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const i=tn.v2.calcPadding(e),o=new Uint8Array(i-e),a=new Uint8Array(2);return new DataView(a.buffer).setUint16(0,e),zt(a,r,o)},unpad(n){const r=new DataView(n.buffer).getUint16(0),e=n.subarray(2,2+r);if(0===r||e.length!==r||n.length!==2+tn.v2.calcPadding(r))throw new Error("invalid padding");return Oe.decode(e)}}};function Ba(n,r,e={}){const i=e.version??2;if(2!==i)throw new Error("unknown encryption version "+i);const o=e.salt??Ht(32);_r(o,32);const a=tn.v2.getMessageKeys(n,o),u=tn.v2.pad(r),f=_i(a.encryption,a.nonce,u),g=sn(Fe,a.auth,f);return ct.K3.encode(zt(new Uint8Array([i]),o,f,g))}function ja(n,r){const e=tn.v2;_r(n,32);const i=r.length;if(i<e.minCiphertextSize||i>=e.maxCiphertextSize)throw new Error("invalid ciphertext length: "+i);if("#"===r[0])throw new Error("unknown encryption version");let o;try{o=ct.K3.decode(r)}catch(O){throw new Error("invalid base64: "+O.message)}const a=o.subarray(0,1)[0];if(2!==a)throw new Error("unknown encryption version "+a);const u=o.subarray(1,33),f=o.subarray(33,-32),g=o.subarray(-32),v=e.getMessageKeys(n,u);if(!function as(n,r){if(n.length!==r.length)throw new Error("equalBytes: Different size of Uint8Arrays");let e=!0;for(let i=0;i<n.length;i++)e&&(e=n[i]===r[i]);return e}(sn(Fe,v.auth,f),g))throw new Error("invalid MAC");const A=_i(v.encryption,v.nonce,f);return e.unpad(A)}function La(n){const{pathname:r,searchParams:e}=new URL(n),i=r,o=e.get("relay"),a=e.get("secret");if(!i||!o||!a)throw new Error("invalid connection string");return{pubkey:i,relay:o,secret:a}}function Pa(n){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,w.A)(function*({pubkey:n,secret:r,invoice:e}){const o=yield Pi(r,n,JSON.stringify({method:"pay_invoice",params:{invoice:e}}));return Ye({kind:23194,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",n]]},r)})).apply(this,arguments)}_e({},{makeNwcRequestEvent:()=>Pa,parseConnectionString:()=>La}),_e({},{getZapEndpoint:()=>$a,makeZapReceipt:()=>qa,makeZapRequest:()=>Da,useFetchImplementation:()=>Oa,validateZapRequest:()=>Ga});try{Or=fetch}catch{}function Oa(n){Or=n}function $a(n){return $r.apply(this,arguments)}function $r(){return($r=(0,w.A)(function*(n){try{let r="",{lud06:e,lud16:i}=JSON.parse(n.content);if(e){let{words:u}=ct.I.decode(e,1e3),f=ct.I.fromWords(u);r=Oe.decode(f)}else{if(!i)return null;{let[u,f]=i.split("@");r=`https://${f}/.well-known/lnurlp/${u}`}}let a=yield(yield Or(r)).json();if(a.allowsNostr&&a.nostrPubkey)return a.callback}catch{}return null})).apply(this,arguments)}function Da({profile:n,event:r,amount:e,relays:i,comment:o=""}){if(!e)throw new Error("amount not given");if(!n)throw new Error("profile not given");let a={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",n],["amount",e.toString()],["relays",...i]]};return r&&a.tags.push(["e",r]),a}function Ga(n){let r;try{r=JSON.parse(n)}catch{return"Invalid zap request JSON."}if(!Sr(r))return"Zap request is not a valid Nostr event.";if(!qn(r))return"Invalid signature on zap request.";let e=r.tags.find(([a,u])=>"p"===a&&u);if(!e)return"Zap request doesn't have a 'p' tag.";if(!e[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let i=r.tags.find(([a,u])=>"e"===a&&u);return i&&!i[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":r.tags.find(([a,u])=>"relays"===a&&u)?null:"Zap request doesn't have a 'relays' tag."}function qa({zapRequest:n,preimage:r,bolt11:e,paidAt:i}){let a=JSON.parse(n).tags.filter(([f])=>"e"===f||"p"===f||"a"===f),u={kind:9735,created_at:Math.round(i.getTime()/1e3),content:"",tags:[...a,["bolt11",e],["description",n]]};return r&&u.tags.push(["preimage",r]),u}_e({},{getToken:()=>za,unpackEventFromToken:()=>qi,validateEvent:()=>Yi,validateToken:()=>Ha});var Gi="Nostr ";function za(n,r,e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,w.A)(function*(n,r,e,i=!1){if(!n||!r)throw new Error("Missing loginUrl or httpMethod");const o=function Cs(n=255){return{kind:n,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",n],["method",r]],o.created_at=Math.round((new Date).getTime()/1e3);const a=yield e(o);return(i?Gi:"")+ct.K3.encode(Be.encode(JSON.stringify(a)))})).apply(this,arguments)}function Ha(n,r,e){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,w.A)(function*(n,r,e){const i=yield qi(n).catch(a=>{throw a});return yield Yi(i,r,e).catch(a=>{throw a})})).apply(this,arguments)}function qi(n){return qr.apply(this,arguments)}function qr(){return(qr=(0,w.A)(function*(n){if(!n)throw new Error("Missing token");n=n.replace(Gi,"");const r=Oe.decode(ct.K3.decode(n));if(!r||0===r.length||!r.startsWith("{"))throw new Error("Invalid token");return JSON.parse(r)})).apply(this,arguments)}function Yi(n,r,e){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,w.A)(function*(n,r,e){if(!n)throw new Error("Invalid nostr event");if(!qn(n))throw new Error("Invalid nostr event, signature invalid");if(27235!==n.kind)throw new Error("Invalid nostr event, kind invalid");if(!n.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-n.created_at>60)throw new Error("Invalid nostr event, expired");const i=n.tags.find(a=>"u"===a[0]);if(1!==i?.length&&i?.[1]!==r)throw new Error("Invalid nostr event, url tag invalid");const o=n.tags.find(a=>"method"===a[0]);if(1!==o?.length&&o?.[1].toLowerCase()!==e.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0})).apply(this,arguments)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Rt.apply(this,arguments)}const Vi=n=>n.reduce((r,e)=>r+e.toString(16).padStart(2,"0"),"");class Wi extends Error{constructor(r,e,i,o){let a=r.toString();e&&(a+=` ${e}`),a+=": ",a+=o.message?o.message:JSON.stringify(o),super(a),this.status=void 0,this.statusText=void 0,this.headers=void 0,this.error=void 0,this.status=r,this.statusText=e,this.headers=i,this.error=o}}const Va=["auth","endpoint","params","request_body","method","max_retries","base_url","user_agent","headers"],Wa="https://api.getalby.com";function Ki(n,r){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,w.A)(function*(n,r,e=0){const i=yield fetch(n,r);if(429===i.status&&e>0){const o=Number(i.headers.get("x-rate-limit-reset")),a=Number(i.headers.get("x-rate-limit-remaining")),u=1e3*o-Date.now();let f=1e3;return 0===a&&(f=u),yield new Promise(g=>setTimeout(g,f)),Ki(n,r,e-1)}return i})).apply(this,arguments)}function Vr(){return(Vr=(0,w.A)(function*(n){let{auth:r,endpoint:e,params:i={},request_body:o,method:a,max_retries:u,base_url:f=Wa,user_agent:g,headers:v}=n,k=function zr(n,r){if(null==n)return{};var e,i,o={},a=Object.keys(n);for(i=0;i<a.length;i++)r.indexOf(e=a[i])>=0||(o[e]=n[e]);return o}(n,Va);const A=new URL(f+e);A.search=function zi(n){return Object.entries(n).map(([r,e])=>r&&e?`${r}=${e}`:"").filter(r=>r).join("&")}(i);const O="POST"===a&&!!o,P=r?yield r.getAuthHeader(A.href,a):void 0,L=yield Ki(A.toString(),Rt({headers:Rt({},O?{"Content-Type":"application/json; charset=utf-8"}:void 0,P,v,{"User-Agent":g??"@getalby/sdk","X-User-Agent":g??"@getalby/sdk"}),method:a,body:O?JSON.stringify(o):void 0},k),u);if(!L.ok){const F=yield L.json();throw new Wi(L.status,L.statusText,L.headers,F)}return L})).apply(this,arguments)}function xe(n){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,w.A)(function*(n){return(yield function Ka(n){return Vr.apply(this,arguments)}(n)).json()}),Wr.apply(this,arguments)}class Xi{constructor(r){this.bearer_token=void 0,this.bearer_token=r}getAuthHeader(){return{Authorization:`Bearer ${this.bearer_token}`}}}class Ke extends Error{constructor(r,e){super(r),this.error=void 0,this.code=void 0,this.error=r,this.code=e}}class Ji extends Ke{}class Kr extends Ke{}class Zr extends Kr{}class Xr extends Kr{}class Jr extends Ke{}class Qr extends Ke{}class Kn extends Ke{}class Qi extends Ke{}class to extends Ke{}const eo={alby:{authorizationUrl:"https://nwc.getalby.com/apps/new",relayUrl:"wss://relay.getalby.com/v1",walletPubkey:"69effe7b49a6dd5cf525bd0905917a5005ffe480b58eeb8e861418cf3ae760d9"}};class In{static parseWalletConnectUrl(r){r=r.replace("nostrwalletconnect://","http://").replace("nostr+walletconnect://","http://").replace("nostrwalletconnect:","http://").replace("nostr+walletconnect:","http://");const e=new URL(r),i=e.searchParams.get("relay");if(!i)throw new Error("No relay URL found in connection string");const o={walletPubkey:e.host,relayUrl:i},a=e.searchParams.get("secret");a&&(o.secret=a);const u=e.searchParams.get("lud16");return u&&(o.lud16=u),o}static withNewSecret(r){return(r=r||{}).secret=Mi(),new In(r)}constructor(r){var e;this.relay=void 0,this.relayUrl=void 0,this.secret=void 0,this.lud16=void 0,this.walletPubkey=void 0,this.options=void 0,r&&r.nostrWalletConnectUrl&&(r=Rt({},In.parseWalletConnectUrl(r.nostrWalletConnectUrl),r));const i=eo[(null==(e=r)?void 0:e.providerName)||"alby"];this.options=Rt({},i,r||{}),this.relayUrl=this.options.relayUrl,this.relay=Bi(this.relayUrl),this.options.secret&&(this.secret=this.options.secret.toLowerCase().startsWith("nsec")?Cr.decode(this.options.secret).data:this.options.secret),this.lud16=this.options.lud16,this.walletPubkey=this.options.walletPubkey.toLowerCase().startsWith("npub")?Cr.decode(this.options.walletPubkey).data:this.options.walletPubkey,void 0===globalThis.WebSocket&&console.error("WebSocket is undefined. Make sure to `import websocket-polyfill` for nodejs environments")}get nostrWalletConnectUrl(){return this.getNostrWalletConnectUrl()}getNostrWalletConnectUrl(r=!0){let e=`nostr+walletconnect://${this.walletPubkey}?relay=${this.relayUrl}&pubkey=${this.publicKey}`;return r&&(e=`${e}&secret=${this.secret}`),e}get connected(){return 1===this.relay.status}get publicKey(){if(!this.secret)throw new Error("Missing secret key");return kr(this.secret)}getPublicKey(){return Promise.resolve(this.publicKey)}signEvent(r){if(!this.secret)throw new Error("Missing secret key");return Promise.resolve(Ye(r,this.secret))}getEventHash(r){return An(r)}close(){return this.relay.close()}encrypt(r,e){var i=this;return(0,w.A)(function*(){if(!i.secret)throw new Error("Missing secret");return yield Ir.encrypt(i.secret,r,e)})()}decrypt(r,e){var i=this;return(0,w.A)(function*(){if(!i.secret)throw new Error("Missing secret");return yield Ir.decrypt(i.secret,r,e)})()}getAuthorizationUrl(r){if(!this.options.authorizationUrl)throw new Error("Missing authorizationUrl option");const e=new URL(this.options.authorizationUrl);return null!=r&&r.name&&e.searchParams.set("name",r?.name),e.searchParams.set("pubkey",this.publicKey),null!=r&&r.returnTo&&e.searchParams.set("return_to",r.returnTo),null!=r&&r.budgetRenewal&&e.searchParams.set("budget_renewal",r.budgetRenewal),null!=r&&r.expiresAt&&e.searchParams.set("expires_at",Math.floor(r.expiresAt.getTime()/1e3).toString()),null!=r&&r.maxAmount&&e.searchParams.set("max_amount",r.maxAmount.toString()),void 0!==r?.editable&&e.searchParams.set("editable",r.editable.toString()),null!=r&&r.requestMethods&&e.searchParams.set("request_methods",r.requestMethods.join(" ")),e}initNWC(r={}){r.name||(r.name=document.location.host);const e=this.getAuthorizationUrl(r),i=window.outerHeight/2+window.screenY-300,o=window.outerWidth/2+window.screenX-200;return new Promise((a,u)=>{const f=window.open(e.toString(),`${document.title} - Wallet Connect`,`height=600,width=400,top=${i},left=${o}`);if(!f)return void u(new Error("failed to execute window.open"));const g=k=>{const A=k.data;A&&"nwc:success"===A.type&&k.origin===`${e.protocol}//${e.host}`&&(a(A),clearInterval(v),window.removeEventListener("message",g),f&&f.close())},v=setInterval(()=>{f&&f.closed&&(clearInterval(v),window.removeEventListener("message",g),u(new Error("Popup closed")))},500);window.addEventListener("message",g)})}getWalletServiceSupportedMethods(){var r=this;return(0,w.A)(function*(){return console.warn("getWalletServiceSupportedMethods is deprecated. Please use getWalletServiceInfo instead."),(yield r.getWalletServiceInfo()).capabilities})()}getWalletServiceInfo(){var r=this;return(0,w.A)(function*(){var e;yield r._checkConnected();const i=yield r.relay.list([{kinds:[13194],limit:1,authors:[r.walletPubkey]}],{eoseSubTimeout:1e4});if(!i.length)throw new Error("no info event (kind 13194) returned from relay");const o=i[0].content,a=i[0].tags.find(u=>"notifications"===u[0]);return{capabilities:o.split(/[ |,]/g),notifications:(null==a||null==(e=a[1])?void 0:e.split(" "))||[]}})()}getInfo(){var r=this;return(0,w.A)(function*(){try{return yield r.executeNip47Request("get_info",{},e=>!!e.methods)}catch(e){throw console.error("Failed to request get_info",e),e}})()}getBalance(){var r=this;return(0,w.A)(function*(){try{return yield r.executeNip47Request("get_balance",{},e=>void 0!==e.balance)}catch(e){throw console.error("Failed to request get_balance",e),e}})()}payInvoice(r){var e=this;return(0,w.A)(function*(){try{return yield e.executeNip47Request("pay_invoice",r,i=>!!i.preimage)}catch(i){throw console.error("Failed to request pay_invoice",i),i}})()}payKeysend(r){var e=this;return(0,w.A)(function*(){try{return yield e.executeNip47Request("pay_keysend",r,i=>!!i.preimage)}catch(i){throw console.error("Failed to request pay_keysend",i),i}})()}signMessage(r){var e=this;return(0,w.A)(function*(){try{return yield e.executeNip47Request("sign_message",r,i=>i.message===r.message&&!!i.signature)}catch(i){throw console.error("Failed to request sign_message",i),i}})()}multiPayInvoice(r){var e=this;return(0,w.A)(function*(){try{return{invoices:yield e.executeMultiNip47Request("multi_pay_invoice",r,r.invoices.length,i=>!!i.preimage),errors:[]}}catch(i){throw console.error("Failed to request multi_pay_invoice",i),i}})()}multiPayKeysend(r){var e=this;return(0,w.A)(function*(){try{return{keysends:yield e.executeMultiNip47Request("multi_pay_keysend",r,r.keysends.length,i=>!!i.preimage),errors:[]}}catch(i){throw console.error("Failed to request multi_pay_keysend",i),i}})()}makeInvoice(r){var e=this;return(0,w.A)(function*(){try{if(!r.amount)throw new Error("No amount specified");return yield e.executeNip47Request("make_invoice",r,i=>!!i.invoice)}catch(i){throw console.error("Failed to request make_invoice",i),i}})()}lookupInvoice(r){var e=this;return(0,w.A)(function*(){try{return yield e.executeNip47Request("lookup_invoice",r,i=>!!i.invoice)}catch(i){throw console.error("Failed to request lookup_invoice",i),i}})()}listTransactions(r){var e=this;return(0,w.A)(function*(){try{return yield e.executeNip47Request("list_transactions",r,i=>!!i.transactions)}catch(i){throw console.error("Failed to request list_transactions",i),i}})()}subscribeNotifications(r,e){var i=this;return(0,w.A)(function*(){var o=i;let a,u,f,g=!0;return(0,w.A)(function*(){for(;g;){try{yield o._checkConnected(),f=o.relay.sub([{kinds:[23196],authors:[o.walletPubkey],"#p":[o.publicKey]}]),console.info("subscribed to relay"),f.on("event",function(){var v=(0,w.A)(function*(k){const A=yield o.decrypt(o.walletPubkey,k.content);let O;try{O=JSON.parse(A)}catch(P){return void console.error("Failed to parse decrypted event content",P)}O.notification?(!e||e.indexOf(O.notification_type)>-1)&&r(O):console.error("No notification in response",O)});return function(k){return v.apply(this,arguments)}}()),yield new Promise(v=>{a=()=>{v()},u=()=>{console.info("relay disconnected"),a?.()},o.relay.on("disconnect",u)}),void 0!==u&&o.relay.off("disconnect",u)}catch(v){console.error("error subscribing to notifications",v||"unknown relay error")}g&&(yield new Promise(v=>setTimeout(v,1e3)))}})(),()=>{var v;g=!1,a?.(),null==(v=f)||v.unsub()}})()}executeNip47Request(r,e,i){var o=this;return(0,w.A)(function*(){var a=o;return yield o._checkConnected(),new Promise((u,f)=>{(0,w.A)(function*(){const g={method:r,params:e},v=yield a.encrypt(a.walletPubkey,JSON.stringify(g)),k={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",a.walletPubkey]],content:v,pubkey:a.publicKey},A=yield a.signEvent(k),O=a.relay.sub([{kinds:[23195],authors:[a.walletPubkey],"#e":[A.id]}]),P=setTimeout(function(){O.unsub(),f(new Xr(`reply timeout: event ${A.id}`,"INTERNAL"))},6e4);O.on("event",function(){var F=(0,w.A)(function*(U){clearTimeout(P),O.unsub();const $=yield a.decrypt(a.walletPubkey,U.content);let Y;try{Y=JSON.parse($)}catch{return clearTimeout(P),O.unsub(),void f(new Qr("failed to deserialize response","INTERNAL"))}var Z,z;Y.result?i(Y.result)?u(Y.result):(clearTimeout(P),O.unsub(),f(new Kn("response from NWC failed validation: "+JSON.stringify(Y.result),"INTERNAL"))):(clearTimeout(P),O.unsub(),f(new Ji((null==(Z=Y.error)?void 0:Z.message)||"unknown Error",(null==(z=Y.error)?void 0:z.code)||"INTERNAL")))});return function(U){return F.apply(this,arguments)}}());const L=setTimeout(function(){O.unsub(),f(new Zr(`publish timeout: ${A.id}`,"INTERNAL"))},5e3);try{yield a.relay.publish(A),clearTimeout(L)}catch(F){clearTimeout(L),f(new Jr(`failed to publish: ${F}`,"INTERNAL"))}})()})})()}executeMultiNip47Request(r,e,i,o){var a=this;return(0,w.A)(function*(){var u=a;yield a._checkConnected();const f=[];return new Promise((g,v)=>{(0,w.A)(function*(){const k={method:r,params:e},A=yield u.encrypt(u.walletPubkey,JSON.stringify(k)),O={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",u.walletPubkey]],content:A,pubkey:u.publicKey},P=yield u.signEvent(O),L=u.relay.sub([{kinds:[23195],authors:[u.walletPubkey],"#e":[P.id]}]),F=setTimeout(function(){L.unsub(),v(new Xr(`reply timeout: event ${P.id}`,"INTERNAL"))},6e4);L.on("event",function(){var $=(0,w.A)(function*(Y){const Z=yield u.decrypt(u.walletPubkey,Y.content);let z;try{z=JSON.parse(Z)}catch{clearTimeout(F),L.unsub(),v(new Qr("failed to deserialize response","INTERNAL"))}if(z.result){var Q;if(!o(z.result))return clearTimeout(F),L.unsub(),void v(new Kn("Response from NWC failed validation: "+JSON.stringify(z.result),"INTERNAL"));const J=null==(Q=Y.tags.find(X=>"d"===X[0]))?void 0:Q[1];if(void 0===J)return clearTimeout(F),L.unsub(),void v(new Kn("No d tag found in response event","INTERNAL"));f.push(Rt({},z.result,{dTag:J})),f.length===i&&(clearTimeout(F),L.unsub(),g(f))}else{var D,V;clearTimeout(F),L.unsub(),v(new Qi(null==(D=z.error)?void 0:D.message,null==(V=z.error)?void 0:V.code))}});return function(Y){return $.apply(this,arguments)}}());const U=setTimeout(function(){L.unsub(),v(new Zr(`Publish timeout: ${P.id}`,"INTERNAL"))},5e3);try{yield u.relay.publish(P),clearTimeout(U)}catch($){clearTimeout(U),v(new Jr(`Failed to publish: ${$}`,"INTERNAL"))}})()})})()}_checkConnected(){var r=this;return(0,w.A)(function*(){if(!r.secret)throw new Error("Missing secret key");try{yield r.relay.connect()}catch{throw console.error("failed to connect to relay",r.relayUrl),new to("Failed to connect to "+r.relayUrl,"OTHER")}})()}}const Ja={get_info:"getInfo",get_balance:"getBalance",make_invoice:"makeInvoice",pay_invoice:"sendPayment",pay_keysend:"payKeysend",lookup_invoice:"lookupInvoice",list_transactions:"listTransactions",multi_pay_invoice:"sendMultiPayment",multi_pay_keysend:"multiKeysend",sign_message:"signMessage"};class Zn{get relay(){return console.warn("relay is deprecated. Please use client.relay instead."),this.client.relay}get relayUrl(){return console.warn("relayUrl is deprecated. Please use client.relayUrl instead."),this.client.relayUrl}get walletPubkey(){return console.warn("walletPubkey is deprecated. Please use client.walletPubkey instead."),this.client.walletPubkey}get options(){return this.client.options}get secret(){return console.warn("secret is deprecated. Please use client.secret instead."),this.client.secret}static withNewSecret(r){return(r=r||{}).secret=Mi(),new Zn(r)}constructor(r){this._enabled=!1,this.client=void 0,this.subscribers=void 0,this.client=new In(r),this.subscribers={}}on(r,e){this.subscribers[r]=e}notify(r,e){const i=this.subscribers[r];i&&i(e)}getNostrWalletConnectUrl(r=!0){return console.warn("getNostrWalletConnectUrl is deprecated. Please use client.getNostrWalletConnectUrl instead."),this.client.getNostrWalletConnectUrl(r)}get nostrWalletConnectUrl(){return console.warn("nostrWalletConnectUrl is deprecated. Please use client.nostrWalletConnectUrl instead."),this.client.nostrWalletConnectUrl}get connected(){return console.warn("connected is deprecated. Please use client.connected instead."),this.client.connected}get publicKey(){return console.warn("publicKey is deprecated. Please use client.publicKey instead."),this.client.publicKey}getPublicKey(){return this.client.getPublicKey()}signEvent(r){return this.client.signEvent(r)}getEventHash(r){return console.warn("getEventHash is deprecated. Please use client.getEventHash instead."),this.client.getEventHash(r)}enable(){var r=this;return(0,w.A)(function*(){r._enabled=!0})()}close(){return this.client.close()}encrypt(r,e){var i=this;return(0,w.A)(function*(){return console.warn("encrypt is deprecated. Please use client.encrypt instead."),i.client.encrypt(r,e)})()}decrypt(r,e){var i=this;return(0,w.A)(function*(){return console.warn("decrypt is deprecated. Please use client.decrypt instead."),i.client.decrypt(r,e)})()}getAuthorizationUrl(r){return console.warn("getAuthorizationUrl is deprecated. Please use client.getAuthorizationUrl instead."),this.client.getAuthorizationUrl(r)}initNWC(r={}){return console.warn("initNWC is deprecated. Please use client.initNWC instead."),this.client.initNWC(r)}getInfo(){var r=this;return(0,w.A)(function*(){yield r.checkEnabled();const e=["lightning","nostr"],i="Alby JS SDK";try{const o=yield r.client.getInfo(),a={methods:o.methods.map(u=>Ja[u]),node:{alias:o.alias,pubkey:o.pubkey,color:o.color},supports:e,version:i};return r.notify("getInfo",a),a}catch(o){return console.error("Using minimal getInfo",o),{methods:["sendPayment"],node:{},supports:e,version:i}}})()}getBalance(){var r=this;return(0,w.A)(function*(){yield r.checkEnabled();const e=yield r.client.getBalance(),i={balance:Math.floor(e.balance/1e3),currency:"sats"};return r.notify("getBalance",i),i})()}sendPayment(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const i={preimage:(yield e.client.payInvoice({invoice:r})).preimage};return e.notify("sendPayment",i),i})()}sendPaymentAsync(r){var e=this;return(0,w.A)(function*(){return yield e.checkEnabled(),e.client.payInvoice({invoice:r}),e.notify("sendPaymentAsync",{}),{}})()}keysend(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const i={preimage:(yield e.client.payKeysend(no(r))).preimage};return e.notify("keysend",i),i})()}signMessage(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const i=yield e.client.signMessage({message:r}),o={message:i.message,signature:i.signature};return e.notify("keysend",o),o})()}makeInvoice(r){var e=this;return(0,w.A)(function*(){var i;yield e.checkEnabled();const o="object"==typeof r?r:void 0,a=+(null!=(i=o?.amount)?i:r);if(!a)throw new Error("No amount specified");const u={paymentRequest:(yield e.client.makeInvoice({amount:1e3*a,description:o?.defaultMemo})).invoice};return e.notify("makeInvoice",u),u})()}lookupInvoice(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const i=yield e.client.lookupInvoice({invoice:r.paymentRequest,payment_hash:r.paymentHash}),o={preimage:i.preimage,paymentRequest:i.invoice,paid:!!i.settled_at};return e.notify("lookupInvoice",o),o})()}listTransactions(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const i={transactions:(yield e.client.listTransactions(r)).transactions.map(Qa)};return e.notify("listTransactions",i),i})()}sendMultiPayment(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const o={payments:(yield e.client.multiPayInvoice({invoices:r.map((a,u)=>({invoice:a,id:u.toString()}))})).invoices.map(a=>{const u=r[parseInt(a.dTag)];if(!u)throw new Error("Could not find paymentRequest matching response d tag");return{paymentRequest:u,preimage:a.preimage}}),errors:[]};return e.notify("sendMultiPayment",o),o})()}multiKeysend(r){var e=this;return(0,w.A)(function*(){yield e.checkEnabled();const o={keysends:(yield e.client.multiPayKeysend({keysends:r.map((a,u)=>Rt({},no(a),{id:u.toString()}))})).keysends.map(a=>{const u=r[parseInt(a.dTag)];if(!u)throw new Error("Could not find keysend matching response d tag");return{keysend:u,preimage:a.preimage}}),errors:[]};return e.notify("multiKeysend",o),o})()}lnurl(r){throw new Error("Method not implemented.")}request(r,e){throw new Error("Method not implemented.")}verifyMessage(r,e){throw new Error("Method not implemented.")}checkEnabled(){var r=this;return(0,w.A)(function*(){if(!r._enabled)throw new Error("please call enable() and await the promise before calling this function")})()}}function Qa(n){return Rt({},n,{amount:Math.floor(n.amount/1e3),fees_paid:n.fees_paid?Math.floor(n.fees_paid/1e3):0})}function no(n){return{amount:1e3*+n.amount,pubkey:n.destination,tlv_records:n.customRecords?Object.entries(n.customRecords).map(r=>({type:parseInt(r[0]),value:Vi((new TextEncoder).encode(r[1]))})):[]}}const tl=Zn;function ro(n){const r={};return n.recipient.customKey&&n.recipient.customValue&&(r[n.recipient.customKey]=n.recipient.customValue),r[7629169]=JSON.stringify(n.boostagram),{destination:n.recipient.address,amount:n.amount,custom_records:r}}class io{constructor(r,e){this.auth=void 0,this.defaultRequestOptions=void 0,this.auth="string"==typeof r?new Xi(r):r,this.defaultRequestOptions=Rt({},e,{user_agent:e?.user_agent})}accountBalance(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/balance",params:r,method:"GET"}))}accountSummary(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/summary",params:r,method:"GET"}))}accountInformation(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/me",params:r,method:"GET"}))}accountValue4Value(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/user/value4value",params:r,method:"GET"}))}incomingInvoices(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices/incoming",params:r,method:"GET"}))}outgoingInvoices(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices/outgoing",params:r,method:"GET"}))}invoices(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices",params:r,method:"GET"}))}getInvoice(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/invoices/${r}`,method:"GET"}))}decodeInvoice(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/decode/bolt11/${r}`,method:"GET"}))}createInvoice(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/invoices",request_body:r,method:"POST"}))}keysend(r,e){let i,o;return Array.isArray(r)?(i="/payments/keysend/multi",o={keysends:r.map(a=>Rt({},a,{custom_records:a.customRecords}))}):(i="/payments/keysend",o=Rt({},r,{custom_records:r.customRecords})),xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:i,request_body:o,method:"POST"}))}sendPayment(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/payments/bolt11",request_body:r,method:"POST"}))}sendBoostagram(r,e){let i,o;return Array.isArray(r)?(i="/payments/keysend/multi",o={keysends:r.map(a=>ro(a))}):(i="/payments/keysend",o=ro(r)),xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:i,request_body:o,method:"POST"}))}sendToAlbyAccount(r,e){return console.warn("sendToAlbyAccount is deprecated. Please use sendBoostagramToAlbyAccount instead."),this.sendBoostagramToAlbyAccount(r,e)}sendBoostagramToAlbyAccount(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/payments/keysend",request_body:{destination:"030a58b8653d32b99200a2334cfe913e51dc7d155aa0116c176657a4f1722677a3",custom_records:{696969:r.account},amount:r.amount,memo:r.memo},method:"POST"}))}createWebhookEndpoint(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/webhook_endpoints",request_body:r,method:"POST"}))}deleteWebhookEndpoint(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:`/webhook_endpoints/${r}`,method:"DELETE"}))}getSwapInfo(r){return xe(Rt({auth:this.auth},this.defaultRequestOptions,r,{endpoint:"/swaps/info",method:"GET"}))}createSwap(r,e){return xe(Rt({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/swaps",method:"POST",request_body:r}))}}for(var Xn={__proto__:null,NostrWebLNProvider:Zn,NWC:tl,OauthWeblnProvider:class{constructor(n){this.client=void 0,this.auth=void 0,this.oauth=void 0,this.subscribers=void 0,this.isExecuting=void 0,this.auth=n.auth,this.client=new io(n.auth),this.oauth=!0,this.subscribers={},this.isExecuting=!1}on(n,r){this.subscribers[n]=r}notify(n,r){const e=this.subscribers[n];e&&e(r)}enable(){var n=this;return(0,w.A)(function*(){var r;if(!n.isExecuting){if(null!=(r=n.auth.token)&&r.access_token)return{enabled:!0};if(typeof window>"u"||void 0===window.document)throw new Error("Missing access token");try{n.isExecuting=!0,yield n.openAuthorization()}finally{n.isExecuting=!1}}})()}sendPayment(n){var r=this;return(0,w.A)(function*(){if(!r.isExecuting)try{r.isExecuting=!0;const e=yield r.client.sendPayment({invoice:n});return r.notify("sendPayment",e),{preimage:e.payment_preimage}}catch(e){let i="Unknown Error";throw e instanceof Error&&(i=e.message),new Error(i)}finally{r.isExecuting=!1}})()}keysend(n){var r=this;return(0,w.A)(function*(){if(!r.isExecuting)try{r.isExecuting=!0;const e=yield r.client.keysend(n);return r.notify("keysend",e),{preimage:e.payment_preimage}}catch(e){let i="Unknown Error";throw e instanceof Error&&(i=e.message),new Error(i)}finally{r.isExecuting=!1}})()}getInfo(){return(0,w.A)(function*(){return{alias:"Alby"}})()}makeInvoice(n){var r=this;return(0,w.A)(function*(){if(!r.isExecuting)try{r.isExecuting=!0;const e=yield r.client.createInvoice({amount:parseInt(n.amount.toString()),description:n.defaultMemo});return r.notify("makeInvoice",e),{paymentRequest:e.payment_request}}catch(e){let i="Unknown Error";throw e instanceof Error&&(i=e.message),new Error(i)}finally{r.isExecuting=!1}})()}openAuthorization(){var n=this;return(0,w.A)(function*(){var r=n;const e=window.outerHeight/2+window.screenY-350,i=window.outerWidth/2+window.screenX-300,o=yield n.auth.generateAuthURL({code_challenge_method:"S256"});return new Promise((a,u)=>{const f=window.open(o,`${document.title} - WebLN enable`,`height=700,width=600,top=${e},left=${i}`);let g=!1;window.addEventListener("message",function(){var v=(0,w.A)(function*(k){const A=k.data;if(A&&"alby:oauth:success"===A.type&&k.origin===`${document.location.protocol}//${document.location.host}`&&!g){g=!0,console.info("Processing OAuth code response");const O=A.payload.code;try{yield r.auth.requestAccessToken(O),r.client=new io(r.auth),f&&f.close(),r.notify("enable"),a({enabled:!0})}catch(P){console.error(P),u({enabled:!1})}}});return function(k){return v.apply(this,arguments)}}())})})()}}},oo=M(1146),el=M(3838),ze=M(917),so={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},ao={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},lo={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},co={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},uo={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Fn=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],nl={m:new ze.BN(1e3,10),u:new ze.BN(1e6,10),n:new ze.BN(1e9,10),p:new ze.BN(1e12,10)},rl=new ze.BN("2100000000000000000",10),fo=new ze.BN(1e11,10),ti={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},ho={},Jn=0,ei=Object.keys(ti);Jn<ei.length;Jn++){var il=ei[Jn],ol=ti[ei[Jn]].toString();ho[ol]=il}var sl={1:function(n){return Ze(n,!0)},16:function(n){return Ze(n,!0)},13:function(n){return Ze(n,!0).toString("utf8")},19:function(n){return Ze(n,!0)},23:function(n){return Ze(n,!0)},27:function(n){return Ze(n,!0)},6:Qn,24:Qn,3:function cl(n){for(var e,i,o,a,u,r=[],f=Ze(n,!0);f.length>0;)e=f.slice(0,33).toString("hex"),i=f.slice(33,41).toString("hex"),o=parseInt(f.slice(41,45).toString("hex"),16),a=parseInt(f.slice(45,49).toString("hex"),16),u=parseInt(f.slice(49,51).toString("hex"),16),f=f.slice(51),r.push({pubkey:e,short_channel_id:i,fee_base_msat:o,fee_proportional_millionths:a,cltv_expiry_delta:u});return r},5:function ul(n){for(var r=n.slice().reverse().map(function(o){return[!!(1&o),!!(2&o),!!(4&o),!!(8&o),!!(16&o)]}).reduce(function(o,a){return o.concat(a)},[]);r.length<2*Fn.length;)r.push(!1);var e={extra_bits:{}};if(Fn.forEach(function(o,a){var u;r[2*a]?u="required":r[2*a+1]&&(u="supported"),e[o]=u}),r.length>2*Fn.length){var i=r.slice(2*Fn.length);e.extra_bits={start_bit:2*Fn.length,bits:i,required:i.reduce(function(o,a,u){return u%2!=0?o||!1:o||a},!1)}}return e}};function al(n){return function(r){return{tagCode:parseInt(n),words:oo.encode("unknown",r,Number.MAX_SAFE_INTEGER)}}}function Qn(n){return n.reverse().reduce(function(r,e,i){return r+e*Math.pow(32,i)},0)}function Ze(n,r){var e=el.hp.from(function ll(n,r,e){for(var i=0,o=0,a=(1<<e)-1,u=[],f=0;f<n.length;++f)for(i=i<<r|n[f],o+=r;o>=e;)u.push(i>>(o-=e)&a);return o>0&&u.push(i<<e-o&a),u}(n,5,8));return r&&5*n.length%8!=0&&(e=e.slice(0,-1)),e}var mo=M(2798),go=M(882),ni=M(7673),ri=M(9437),dl=M(1626);let po=(()=>{class n{constructor(e){this.http=e}getLightning(e){return this.http.get(e).pipe((0,ri.W)(i=>(console.error("Failed to fetch Lightning response:",i),(0,ni.of)({status:"Failed"}))))}getLightningInvoice(e,i){return this.http.get(`${e}?amount=${i}`).pipe((0,ri.W)(a=>(console.error("Failed to fetch Lightning invoice:",a),(0,ni.of)({pr:"",status:"Failed"}))))}getLightningAddress(e){try{const[i,o]=e.split("@");return`https://${o}/.well-known/lnurlp/${i}`}catch{return console.error("Invalid Lightning address format:",e),""}}sendZapRequest(e,i,o,a){const u=encodeURIComponent(JSON.stringify(i));return this.http.get(`${e}?amount=${o}&nostr=${u}&lnurl=${a}`).pipe((0,ri.W)(g=>(console.error("Failed to send zap request:",g),(0,ni.of)({pr:"",status:"Failed"}))))}login(){return(0,w.A)(function*(){try{return window.webln&&!window.webln.isEnabled()&&(yield window.webln.enable()),!0}catch(e){return console.error("WebLN login failed:",e),!1}})()}hasWebln(){return!!window.webln}sendPayment(e){var i=this;return(0,w.A)(function*(){try{return i.hasWebln()?yield window.webln.sendPayment(e):(console.error("WebLN is not available"),null)}catch(o){throw console.error("Payment failed:",o),o}})()}payInvoice(e){var i=this;return(0,w.A)(function*(){if((yield i.login())&&i.hasWebln())try{return!!(yield i.sendPayment(e))}catch(a){return console.error("Failed to pay invoice:",a),!1}return console.error("WebLN not available or login failed"),!1})()}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(dl.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $e=M(9969),un=M(6939),ml=M(6860),gl=M(9888),vo=M(9327),yo=M(7987);function pl(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"button",2),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.action())}),t.EFF(2),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.SpI(" ",e.data.action," ")}}const vl=["label"];function yl(n,r){}const wl=Math.pow(2,31)-1;class ii{constructor(r,e){this._overlayRef=e,this._afterDismissed=new N.B,this._afterOpened=new N.B,this._onAction=new N.B,this._dismissedByAction=!1,this.containerInstance=r,r._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(r){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(r,wl))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const wo=new t.nKC("MatSnackBarData");class tr{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let bo=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}return n})(),_o=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}return n})(),xo=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}return n})(),bl=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(ii),t.rXU(wo))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.DNE(2,pl,3,1,"div",1)),2&i&&(t.R7$(),t.SpI(" ",o.data.message,"\n"),t.R7$(),t.vxM(o.hasAction?2:-1))},dependencies:[h.$z,bo,_o,xo],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return n})();const _l={snackBarState:(0,$e.hZ)("state",[(0,$e.wk)("void, hidden",(0,$e.iF)({transform:"scale(0.8)",opacity:0})),(0,$e.wk)("visible",(0,$e.iF)({transform:"scale(1)",opacity:1})),(0,$e.kY)("* => visible",(0,$e.i0)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,$e.kY)("* => void, * => hidden",(0,$e.i0)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,$e.iF)({opacity:0})))])};let xl=0,Eo=(()=>{class n extends un.lb{constructor(e,i,o,a,u){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=u,this._document=(0,t.WQX)(E.qQ),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new N.B,this._onExit=new N.B,this._onEnter=new N.B,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+xl++,this.attachDomPortal=f=>{this._assertNotAttached();const g=this._portalOutlet.attachDomPortal(f);return this._afterPortalAttached(),g},this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:o}=e;if(("void"===o&&"void"!==i||"hidden"===o)&&this._completeExit(),"visible"===o){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(u=>e.classList.add(u)):e.classList.add(i)),this._exposeToModals();const o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){const e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<i.length;o++){const a=i[o],u=a.getAttribute("aria-owns");this._trackedModals.add(a),u?-1===u.indexOf(e)&&a.setAttribute("aria-owns",u+" "+e):a.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const i=e.getAttribute("aria-owns");if(i){const o=i.replace(this._liveElementId,"").trim();o.length>0?e.setAttribute("aria-owns",o):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(o=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(t.SKi),t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(ml.OD),t.rXU(tr))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,o){if(1&i&&(t.GBs(un.I3,7),t.GBs(vl,7)),2&i){let a;t.mGM(a=t.lsd())&&(o._portalOutlet=a.first),t.mGM(a=t.lsd())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(i,o){1&i&&t.Kam("@state.done",function(u){return o.onAnimationEnd(u)}),2&i&&t.zvX("@state",o._animationState)},standalone:!0,features:[t.Vt3,t.aNF],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,o){1&i&&(t.j41(0,"div",1)(1,"div",2,0)(3,"div",3),t.DNE(4,yl,0,0,"ng-template",4),t.k0s(),t.nrm(5,"div"),t.k0s()()),2&i&&(t.R7$(5),t.BMQ("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[un.I3],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[_l.snackBarState]}})}return n})();const kl=new t.nKC("mat-snack-bar-default-options",{providedIn:"root",factory:function El(){return new tr}});let oi=(()=>{class n{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,i,o,a,u,f){this._overlay=e,this._live=i,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=u,this._defaultConfig=f,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=bl,this.snackBarContainerComponent=Eo,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",o){const a={...this._defaultConfig,...o};return a.data={message:e,action:i},a.announcementMessage===e&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const a=t.zZn.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:tr,useValue:i}]}),u=new un.A8(this.snackBarContainerComponent,i.viewContainerRef,a),f=e.attach(u);return f.instance.snackBarConfig=i,f.instance}_attach(e,i){const o={...new tr,...this._defaultConfig,...i},a=this._createOverlay(o),u=this._attachSnackBarContainer(a,o),f=new ii(u,a);if(e instanceof t.C4Q){const g=new un.VA(e,null,{$implicit:o.data,snackBarRef:f});f.instance=u.attachTemplatePortal(g)}else{const g=this._createInjector(o,f),v=new un.A8(e,void 0,g),k=u.attachComponentPortal(v);f.instance=k.instance}return this._breakpointObserver.observe(vo.Rp.HandsetPortrait).pipe((0,H.Q)(a.detachments())).subscribe(g=>{a.overlayElement.classList.toggle(this.handsetCssClass,g.matches)}),o.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(f,o),this._openedSnackBarRef=f,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new yo.rR;i.direction=e.direction;let o=this._overlay.position().global();const a="rtl"===e.direction,u="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!a||"end"===e.horizontalPosition&&a,f=!u&&"center"!==e.horizontalPosition;return u?o.left("0"):f?o.right("0"):o.centerHorizontally(),"top"===e.verticalPosition?o.top("0"):o.bottom("0"),i.positionStrategy=o,this._overlay.create(i)}_createInjector(e,i){return t.zZn.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:ii,useValue:i},{provide:wo,useValue:e.data}]})}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(yo.hJ),t.KVO(gl.Ai),t.KVO(t.zZn),t.KVO(vo.QP),t.KVO(n,12),t.KVO(kl))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ml{constructor(r,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),o=i.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",i.setAttribute("aria-hidden","true"),i.value=r,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){const r=this._textarea;let e=!1;try{if(r){const i=this._document.activeElement;r.select(),r.setSelectionRange(0,r.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){const r=this._textarea;r&&(r.remove(),this._textarea=void 0)}}let ko=(()=>{class n{constructor(e){this._document=e}copy(e){const i=this.beginCopy(e),o=i.copy();return i.destroy(),o}beginCopy(e){return new Ml(e,this._document)}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(E.qQ))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sl(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.sats=o.value)}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(2),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Al(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-dialog-content")(1,"div",1),t.DNE(2,Sl,5,2,"button",2),t.k0s(),t.nrm(3,"mat-divider"),t.j41(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Zap Amount"),t.k0s(),t.j41(7,"input",4),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.sats,o)||(a.sats=o),t.Njj(o)}),t.k0s()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeDialog())}),t.nrm(10,"mat-icon",7),t.k0s(),t.j41(11,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.sendZap())}),t.EFF(12," Create invoice "),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.zapButtons),t.R7$(5),t.R50("ngModel",e.sats),t.R7$(2),t.Y8G("matTooltip","Close"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-mark")}}function Cl(n,r){if(1&n&&(t.j41(0,"div",14)(1,"span"),t.EFF(2),t.k0s(),t.nrm(3,"mat-divider")(4,"qrcode",15),t.k0s()),2&n){const e=t.XpG(2);t.R7$(2),t.SpI("Scan with phone to pay (",e.invoiceAmount," sats)"),t.R7$(2),t.Y8G("qrdata",e.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M")}}function Rl(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-dialog-content"),t.DNE(1,Cl,5,4,"div",10),t.j41(2,"mat-dialog-actions",11)(3,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeDialog())}),t.nrm(4,"mat-icon",7),t.k0s(),t.j41(5,"button",12),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.copyInvoice())}),t.nrm(6,"mat-icon",7),t.k0s(),t.j41(7,"button",12),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.payInvoice())}),t.nrm(8,"mat-icon",13),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.displayQRCode),t.R7$(2),t.Y8G("matTooltip","Close"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-mark"),t.R7$(),t.Y8G("matTooltip","Copy Invoice"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:clipboard-document"),t.R7$(),t.Y8G("matTooltip","Pay Invoice"),t.R7$(),t.Y8G("svgIcon","feather:zap")}}let Il=(()=>{class n{constructor(e,i,o,a,u){this.dialogRef=e,this.metadata=i,this.lightning=o,this.snackBar=a,this.clipboard=u,this.lightningInvoice="",this.showInvoiceSection=!1,this.displayQRCode=!1,this.invoiceAmount="?",this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}],this.getLightningInfo()}getLightningInfo(){let e="";if(this.metadata?.lud06){const{words:i}=ct.I.decode(this.metadata.lud06,5e3),o=new Uint8Array(ct.I.fromWords(i));e=(new TextDecoder).decode(Uint8Array.from(o))}else if(this.metadata?.lud16?.toLowerCase().startsWith("lnurl")){const{words:i}=ct.I.decode(this.metadata.lud16,5e3),o=new Uint8Array(ct.I.fromWords(i));e=(new TextDecoder).decode(Uint8Array.from(o))}else this.metadata?.lud16&&(e=this.lightning.getLightningAddress(this.metadata.lud16));""!==e?this.lightning.getLightning(e).subscribe(i=>{this.lightningResponse=i,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.showInvoiceSection=!0:this.openSnackBar("Couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}getLightningInvoice(e){var i=this;this.lightningResponse&&this.lightningResponse.callback&&this.lightning.getLightningInvoice(this.lightningResponse.callback,e).subscribe(function(){var o=(0,w.A)(function*(a){i.lightningInvoice=a.pr,i.setInvoiceAmount(i.lightningInvoice),i.showInvoiceSection=!0,i.showQRCode()});return function(a){return o.apply(this,arguments)}}())}setInvoiceAmount(e){if(e){const o=function hl(n,r){if("string"!=typeof n)throw new Error("Lightning Payment Request must be string");if("ln"!==n.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");var e=[],i=oo.decode(n,Number.MAX_SAFE_INTEGER);n=n.toLowerCase();var o=i.prefix,a=i.words,u=n.slice(o.length+1),f=a.slice(-104);a=a.slice(0,-104);var g=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(g&&!g[2]&&(g=o.match(/^ln(\S+)$/)),!g)throw new Error("Not a proper lightning payment request");e.push({name:"lightning_network",letters:"ln"});var k,v=g[1];if(r){if(void 0===r.bech32||void 0===r.pubKeyHash||void 0===r.scriptHash||!Array.isArray(r.validWitnessVersions))throw new Error("Invalid network");k=r}else switch(v){case so.bech32:k=so;break;case ao.bech32:k=ao;break;case lo.bech32:k=lo;break;case co.bech32:k=co;break;case uo.bech32:k=uo}if(!k||k.bech32!==v)throw new Error("Unknown coin bech32 prefix");e.push({name:"coin_network",letters:v,value:k});var O,A=g[2];A?(O=function fl(n,r){var e,i;if(n.slice(-1).match(/^[munp]$/))e=n.slice(-1),i=n.slice(0,-1);else{if(n.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");i=n}if(!i.match(/^\d+$/))throw new Error("Not a valid human readable amount");var o=new ze.BN(i,10),a=e?o.mul(fo).div(nl[e]):o.mul(fo);if("p"===e&&!o.mod(new ze.BN(10,10)).eq(new ze.BN(0,10))||a.gt(rl))throw new Error("Amount is outside of valid range");return r?a.toString():a}(A+g[3],!0),e.push({name:"amount",letters:g[2]+g[3],value:O})):O=null,e.push({name:"separator",letters:"1"});var F,U,$,Y,L=Qn(a.slice(0,7));for(a=a.slice(7),e.push({name:"timestamp",letters:u.slice(0,7),value:L}),u=u.slice(7);a.length>0;){var Z=a[0].toString();F=ho[Z]||"unknown_tag",U=sl[Z]||al(Z),$=Qn((a=a.slice(1)).slice(0,2)),Y=(a=a.slice(2)).slice(0,$),a=a.slice($),e.push({name:F,tag:u[0],letters:u.slice(0,3+$),value:U(Y)}),u=u.slice(3+$)}e.push({name:"signature",letters:u.slice(0,104),value:Ze(f,!0)}),u=u.slice(104),e.push({name:"checksum",letters:u});var z={paymentRequest:n,sections:e,get expiry(){var J=e.find(function(X){return"expiry"===X.name});if(J)return V("timestamp")+J.value},get route_hints(){return e.filter(function(J){return"route_hint"===J.name}).map(function(J){return J.value})}},Q=function(J){if("route_hint"===J)return"continue";Object.defineProperty(z,J,{get:function(){return V(J)}})};for(var D in ti)Q(D);return z;function V(J){var X=e.find(function(vt){return vt.name===J});return X?X.value:void 0}}(e).sections.find(a=>"amount"===a.name);o&&(this.invoiceAmount=String(Number(o.value)/1e3))}}showQRCode(){this.displayQRCode=!this.displayQRCode}sendZap(){this.getLightningInvoice(String(1e3*Number(this.sats)))}payInvoice(){var e=this;return(0,w.A)(function*(){if(!e.lightningInvoice)return void console.error("Lightning invoice is not set");const i=new Xn.NostrWebLNProvider({nostrWalletConnectUrl:yield e.loadNWCUrl()});i.enable().then(()=>i.sendPayment(e.lightningInvoice)).then(o=>{o&&o.preimage?(console.log(`Payment successful, preimage: ${o.preimage}`),e.openSnackBar("Zapped!","dismiss"),e.dialogRef.close()):e.listenForPaymentStatus(i)}).catch(o=>{console.error("Payment failed:",o),e.openSnackBar("Failed to pay invoice","dismiss"),e.listenForPaymentStatus(i)})})()}loadNWCUrl(){const e=Xn.NostrWebLNProvider.withNewSecret();return e.initNWC({name:"Angor Hub"}).then(()=>e.getNostrWalletConnectUrl()).catch(i=>{throw console.error("Error initializing NWC:",i),i})}listenForPaymentStatus(e){const i=()=>{e.sendPayment(this.lightningInvoice).then(o=>{o&&o.preimage?(console.log("Payment confirmed, preimage:",o.preimage),this.openSnackBar("Payment confirmed!","dismiss"),this.dialogRef.close()):setTimeout(i,5e3)}).catch(o=>{console.error("Error checking payment status:",o),setTimeout(i,5e3)})};i()}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(e,i){this.snackBar.open(e,i,{duration:1300})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(yt.CP),t.rXU(yt.Vh),t.rXU(po),t.rXU(oi),t.rXU(ko))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-send-dialog"]],standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-icon-button","","color","warn",3,"click","matTooltip"],[3,"svgIcon"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],["align","center"],["mat-icon-button","",3,"click","matTooltip"],["color","#f79318",3,"svgIcon"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"]],template:function(i,o){1&i&&(t.j41(0,"h1"),t.EFF(1,"\u26a1 Send Zap"),t.k0s(),t.DNE(2,Al,13,4,"mat-dialog-content",0)(3,Rl,9,7,"mat-dialog-content",0)),2&i&&(t.R7$(2),t.Y8G("ngIf",!o.showInvoiceSection||!o.lightningInvoice),t.R7$(),t.Y8G("ngIf",o.showInvoiceSection&&o.lightningInvoice))},dependencies:[go.vg,h.Hl,h.$z,h.iY,h.$0,B.m_,B.An,W.YN,W.me,W.Q0,W.BC,W.vS,T.nJ,T.rl,W.X1,E.MD,E.Sq,E.bT,mo.Ve,T.RG,q.fS,q.fg,yt.Yi,yt.E7,dt,Dt,R.q,ft.oV],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}return n})();function Fl(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.invoiceAmount=o.value)}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(2),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Tl(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-dialog-content")(1,"div",1),t.DNE(2,Fl,5,2,"button",2),t.k0s(),t.nrm(3,"mat-divider"),t.j41(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Zap Amount"),t.k0s(),t.j41(7,"input",4),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.invoiceAmount,o)||(a.invoiceAmount=o),t.Njj(o)}),t.k0s()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeDialog())}),t.nrm(10,"mat-icon",7),t.k0s(),t.j41(11,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.generateInvoice())}),t.EFF(12," Generate Invoice "),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.zapButtons),t.R7$(5),t.R50("ngModel",e.invoiceAmount),t.R7$(2),t.Y8G("matTooltip","Close"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-mark")}}function Bl(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",11)(1,"span"),t.EFF(2),t.k0s(),t.nrm(3,"mat-divider")(4,"qrcode",12),t.j41(5,"mat-dialog-actions",13)(6,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.closeDialog())}),t.nrm(7,"mat-icon",7),t.k0s(),t.j41(8,"button",14),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.copyInvoice())}),t.nrm(9,"mat-icon",7),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(2),t.SpI("Scan with phone to pay (",e.invoiceAmount," sats)"),t.R7$(2),t.Y8G("qrdata",e.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M"),t.R7$(2),t.Y8G("matTooltip","Close"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:x-mark"),t.R7$(),t.Y8G("matTooltip","Copy Invoice"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:clipboard-document")}}function jl(n,r){if(1&n&&(t.j41(0,"mat-dialog-content"),t.DNE(1,Bl,10,8,"div",10),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.displayQRCode)}}let Nl=(()=>{class n{constructor(e,i,o){this.dialogRef=e,this.snackBar=i,this.clipboard=o,this.invoiceAmount="",this.lightningInvoice="",this.displayQRCode=!1,this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}]}generateInvoice(){var e=this;return(0,w.A)(function*(){if(!e.invoiceAmount||Number(e.invoiceAmount)<=0)e.openSnackBar("Please enter a valid amount","dismiss");else try{e.nwc=new Xn.NostrWebLNProvider({nostrWalletConnectUrl:yield e.loadNWCUrl()}),yield e.nwc.enable();const i=yield e.nwc.makeInvoice({amount:Number(e.invoiceAmount)});e.lightningInvoice=i.paymentRequest,e.showQRCode()}catch(i){console.error("Error generating invoice:",i),e.openSnackBar("Failed to generate invoice","dismiss")}})()}loadNWCUrl(){return(0,w.A)(function*(){try{const e=Xn.NostrWebLNProvider.withNewSecret();return yield e.initNWC({name:"Angor Hub"}),e.getNostrWalletConnectUrl()}catch(e){throw console.error("Error initializing NWC:",e),new Error("Failed to initialize NWC provider")}})()}showQRCode(){this.displayQRCode=!this.displayQRCode}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(e,i){this.snackBar.open(e,i,{duration:1300})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(yt.CP),t.rXU(oi),t.rXU(ko))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-receive-dialog"]],standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-icon-button","","color","warn",3,"click","matTooltip"],[3,"svgIcon"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"],["align","center"],["mat-icon-button","",3,"click","matTooltip"]],template:function(i,o){1&i&&(t.j41(0,"h2"),t.EFF(1,"\u26a1 Receive Zap"),t.k0s(),t.DNE(2,Tl,13,4,"mat-dialog-content",0)(3,jl,2,1,"mat-dialog-content",0)),2&i&&(t.R7$(2),t.Y8G("ngIf",!o.displayQRCode),t.R7$(),t.Y8G("ngIf",o.displayQRCode))},dependencies:[go.vg,h.Hl,h.$z,h.iY,h.$0,B.m_,B.An,W.YN,W.me,W.Q0,W.BC,W.vS,T.nJ,T.rl,W.X1,E.MD,E.Sq,E.bT,mo.Ve,T.RG,q.fS,q.fg,yt.Yi,yt.E7,dt,Dt,R.q,ft.oV],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}return n})();var Ll=M(1553),Mo=M(4930),Pl=M(4224),Ul=M(6231);let Ol=(()=>{class n{constructor(e,i){this.relayService=e,this.signerService=i,this.followersSubject=new N.B,this.followingSubject=new N.B}getFollowersObservable(){return this.followersSubject.asObservable()}getFollowingObservable(){return this.followingSubject.asObservable()}getFollowers(e){var i=this;return(0,w.A)(function*(){yield i.relayService.ensureConnectedRelays();const o=i.relayService.getPool(),a=i.relayService.getConnectedRelays();if(0===a.length)throw new Error("No connected relays");const u=[{kinds:[3],"#p":[e]}],f=[];return new Promise(g=>{const v=o.subscribeMany(a,u,{onevent:k=>{f.push(k),i.followersSubject.next(k)},oneose(){v.close(),g(f)}})})})()}getFollowing(e){var i=this;return(0,w.A)(function*(){yield i.relayService.ensureConnectedRelays();const o=i.relayService.getPool(),a=i.relayService.getConnectedRelays();if(0===a.length)throw new Error("No connected relays");const u=[{kinds:[3],authors:[e]}],f=[];return new Promise(g=>{const v=o.subscribeMany(a,u,{onevent:k=>{k.tags.filter(O=>"p"===O[0]).forEach(O=>{f.push(O[1]),i.followingSubject.next(k)})},oneose(){v.close(),g(f)}})})})()}follow(e){var i=this;return(0,w.A)(function*(){yield i.relayService.ensureConnectedRelays(),i.relayService.getPool();const a=i.getFollowingList();if(a.includes(e))return void console.log(`Already following ${e}`);const u=[...a,e];i.setFollowingList(u);const f=i.signerService.getUnsignedEvent(3,u.map(k=>["p",k]),"");let v;if(yield i.signerService.isUsingExtension())v=yield i.signerService.signEventWithExtension(f);else{const k=yield i.signerService.getDecryptedSecretKey();if(!k)throw new Error("Secret key is missing. Unable to follow.");v=i.signerService.getSignedEvent(f,k)}i.relayService.publishEventToRelays(v),console.log(`Now following ${e}`)})()}unfollow(e){var i=this;return(0,w.A)(function*(){yield i.relayService.ensureConnectedRelays();const o=i.getFollowingList();if(!o.includes(e))return void console.log(`Not following ${e}`);const a=o.filter(v=>v!==e);i.setFollowingList(a);const u=i.signerService.getUnsignedEvent(3,a.map(v=>["p",v]),"");let g;if(yield i.signerService.isUsingExtension())g=yield i.signerService.signEventWithExtension(u);else{const v=yield i.signerService.getDecryptedSecretKey();if(!v)throw new Error("Secret key is missing. Unable to unfollow.");g=i.signerService.getSignedEvent(u,v)}i.relayService.publishEventToRelays(g),console.log(`Unfollowed ${e}`)})()}getFollowingListAsTags(){const e=this.getFollowingList(),i=[],o=this.relayService.getConnectedRelays();return e.forEach(a=>{o.forEach(u=>{i.push(["p",a,u,localStorage.getItem(`${a}`)||""])})}),i}setFollowingListFromTags(e){const i=[];e.forEach(o=>{i.push(o[1])}),this.setFollowingList(i)}setFollowingList(e){const o=Array.from(new Set(e)).filter(a=>a).join(",");localStorage.setItem("following",o)}getFollowingList(){const e=localStorage.getItem("following");return null===e||""===e?[]:e.split(",").filter(o=>/[a-f0-9]{64}/.test(o))}static#t=this.\u0275fac=function(i){return new(i||n)(t.KVO(Ul.b),t.KVO(Mo.A))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fn=()=>["./"],So=n=>({"mt-8":n}),$l=n=>({"rotate-180":n}),Dl=()=>["/explore"],Ao=()=>[0,1,2,3],Gl=n=>["/profile",n];function ql(n,r){if(1&n&&(t.qex(0),t.nrm(1,"img",141),t.bVm()),2&n){const e=t.XpG();t.R7$(),t.FS9("alt",(null==e.metadata?null:e.metadata.display_name)||(null==e.metadata?null:e.metadata.name)||"Avatar"),t.Y8G("src",e.getSafeUrl(null==e.metadata?null:e.metadata.picture),t.B4B)}}function Yl(n,r){if(1&n&&t.nrm(0,"img",142),2&n){const e=t.XpG();t.FS9("alt",(null==e.metadata?null:e.metadata.display_name)||(null==e.metadata?null:e.metadata.name)||"Avatar")}}function zl(n,r){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",143),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleFollow())}),t.nrm(2,"mat-icon",144),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("matTooltip",e.isFollowing?"Unfollow":"Follow"),t.R7$(),t.Y8G("svgIcon",e.isFollowing?"heroicons_outline:user-minus":"heroicons_outline:user-plus")}}function Hl(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",145),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.zap())}),t.j41(1,"span",46),t.nrm(2,"mat-icon",74),t.j41(3,"span"),t.EFF(4,"Send Zap"),t.k0s()()()}2&n&&(t.R7$(2),t.Y8G("svgIcon","feather:zap"))}function Vl(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",145),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.openReceiveZapDialog())}),t.j41(1,"span",46),t.nrm(2,"mat-icon",74),t.j41(3,"span"),t.EFF(4,"Receive Zap"),t.k0s()()()}2&n&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:qr-code"))}function Wl(n,r){1&n&&(t.j41(0,"button",146)(1,"span",46),t.nrm(2,"mat-icon",74),t.j41(3,"span"),t.EFF(4,"Edit your profile"),t.k0s()()()),2&n&&(t.Y8G("routerLink","/settings/profile"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:pencil-square"))}function Kl(n,r){1&n&&(t.j41(0,"button",44)(1,"span",46),t.nrm(2,"mat-icon",74),t.j41(3,"span"),t.EFF(4,"Report"),t.k0s()()()),2&n&&(t.R7$(2),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"))}function Zl(n,r){1&n&&(t.j41(0,"button",44)(1,"span",46),t.nrm(2,"mat-icon",74),t.j41(3,"span"),t.EFF(4,"Turn on notifications"),t.k0s()()()),2&n&&(t.R7$(2),t.Y8G("svgIcon","heroicons_solid:bell"))}function Xl(n,r){if(1&n&&(t.j41(0,"angor-card",147)(1,"div",42),t.EFF(2,"About"),t.k0s(),t.j41(3,"div",117),t.EFF(4),t.k0s(),t.j41(5,"a",148),t.EFF(6," See complete about "),t.k0s()()),2&n){const e=t.XpG();t.R7$(4),t.SpI(" ",(null==e.metadata?null:e.metadata.about)||""," "),t.R7$(),t.Y8G("color","primary")("routerLink",t.lJ4(3,fn))}}function Jl(n,r){if(1&n&&t.nrm(0,"img",154),2&n){const e=r.$implicit,i=t.XpG(2).$implicit,o=t.XpG(3);t.Y8G("src",null!=o.suggestions[4*i+e]&&null!=o.suggestions[4*i+e].metadata&&o.suggestions[4*i+e].metadata.picture?o.suggestions[4*i+e].metadata.picture:"images/avatars/avatar-placeholder.png",t.B4B)("alt",null!=o.suggestions[4*i+e]&&null!=o.suggestions[4*i+e].metadata&&o.suggestions[4*i+e].metadata.name?o.suggestions[4*i+e].metadata.name:"image")("matTooltip",null!=o.suggestions[4*i+e]&&null!=o.suggestions[4*i+e].metadata&&o.suggestions[4*i+e].metadata.name?o.suggestions[4*i+e].metadata.name:"")("routerLink",t.eq3(4,Gl,o.suggestions[4*i+e].pubkey))}}function Ql(n,r){1&n&&(t.qex(0),t.DNE(1,Jl,1,6,"img",153),t.bVm()),2&n&&(t.R7$(),t.Y8G("ngForOf",t.lJ4(1,Ao)))}function tc(n,r){if(1&n&&(t.j41(0,"div",152),t.DNE(1,Ql,2,2,"ng-container",29),t.k0s()),2&n){const e=r.$implicit,i=t.XpG(3);t.R7$(),t.Y8G("ngIf",i.suggestions.length>4*e)}}function ec(n,r){1&n&&(t.j41(0,"div",70),t.DNE(1,tc,2,1,"div",151),t.k0s()),2&n&&(t.R7$(),t.Y8G("ngForOf",t.lJ4(1,Ao)))}function nc(n,r){if(1&n&&(t.j41(0,"angor-card",149)(1,"div",41)(2,"div",42),t.EFF(3," Suggestion "),t.k0s(),t.j41(4,"div",43)(5,"button",30),t.nrm(6,"mat-icon",31),t.k0s(),t.j41(7,"mat-menu",null,12)(9,"button",146),t.EFF(10," Explore project "),t.k0s()()()(),t.DNE(11,ec,2,2,"div",150),t.k0s()),2&n){const e=t.sdS(8),i=t.XpG();t.Y8G("ngClass",t.eq3(5,So,null==i.metadata?null:i.metadata.about)),t.R7$(5),t.Y8G("matMenuTriggerFor",e),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(3),t.Y8G("routerLink",t.lJ4(7,Dl)),t.R7$(2),t.Y8G("ngIf",i.suggestions&&i.suggestions.length>0)}}function rc(n,r){if(1&n&&(t.j41(0,"angor-card",155)(1,"div",156),t.EFF(2,"Create Post"),t.k0s(),t.j41(3,"div",157)(4,"div",158),t.nrm(5,"img",159),t.j41(6,"div",160),t.EFF(7),t.k0s()(),t.j41(8,"mat-form-field",100),t.nrm(9,"textarea",101),t.k0s()(),t.j41(10,"div",161)(11,"button",81),t.nrm(12,"mat-icon",31),t.j41(13,"span",83),t.EFF(14,"Photo / Video"),t.k0s()(),t.j41(15,"button",162),t.nrm(16,"mat-icon",31),t.j41(17,"span",83),t.EFF(18,"Tag Friends"),t.k0s()(),t.j41(19,"button",162),t.nrm(20,"mat-icon",31),t.j41(21,"span",83),t.EFF(22,"Feeling"),t.k0s()(),t.j41(23,"button",163),t.nrm(24,"mat-icon",31),t.k0s(),t.j41(25,"mat-menu",null,13)(27,"button",164)(28,"span",46),t.nrm(29,"mat-icon",74),t.j41(30,"span"),t.EFF(31,"Tag Friends"),t.k0s()()(),t.j41(32,"button",164)(33,"span",46),t.nrm(34,"mat-icon",74),t.j41(35,"span"),t.EFF(36,"Feeling"),t.k0s()()(),t.j41(37,"button",44)(38,"span",46),t.nrm(39,"mat-icon",74),t.j41(40,"span"),t.EFF(41,"Live"),t.k0s()()(),t.j41(42,"button",44)(43,"span",46),t.nrm(44,"mat-icon",74),t.j41(45,"span"),t.EFF(46,"Gif"),t.k0s()()(),t.j41(47,"button",44)(48,"span",46),t.nrm(49,"mat-icon",74),t.j41(50,"span"),t.EFF(51,"Check in"),t.k0s()()()()()()),2&n){const e=t.sdS(26),i=t.XpG();t.R7$(5),t.FS9("alt",(null==i.currentUserMetadata?null:i.currentUserMetadata.display_name)||(null==i.currentUserMetadata?null:i.currentUserMetadata.name)||"Avatar"),t.Y8G("src",(null==i.currentUserMetadata?null:i.currentUserMetadata.picture)||"images/avatars/avatar-placeholder.png",t.B4B),t.R7$(2),t.JRh((null==i.currentUserMetadata?null:i.currentUserMetadata.name)||"Unknown User"),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("placeholder","What's on your mind?")("rows",3),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:photo"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:user-circle"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:face-smile"),t.R7$(3),t.Y8G("matMenuTriggerFor",e),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-horizontal"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:user-circle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:face-smile"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:play"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:sparkles"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:map-pin")}}const ic=[{path:"",component:(()=>{class n{constructor(e,i,o,a,u,f,g,v,k,A){this._changeDetectorRef=e,this._metadataService=i,this._signerService=o,this._indexedDBService=a,this._sanitizer=u,this._route=f,this._socialService=g,this.snackBar=v,this.lightning=k,this._dialog=A,this.isLoading=!0,this.errorMessage=null,this._unsubscribeAll=new N.B,this.followers=[],this.following=[],this.allPublicKeys=[],this.suggestions=[],this.isCurrentUserProfile=!1,this.isFollowing=!1,this.lightningResponse=null,this.lightningInvoice=null,this.paymentInvoice="",this.invoiceAmount="?"}ngOnInit(){this._route.paramMap.subscribe(e=>{const i=e.get("pubkey");this.routePubKey=i;const o=this._signerService.getPublicKey();this.isCurrentUserProfile=i===o,this.loadProfile(i||o),i||(this.isCurrentUserProfile=!0),this.loadCurrentUserProfile()}),this._indexedDBService.getMetadataStream().pipe((0,H.Q)(this._unsubscribeAll)).subscribe(e=>{e&&e.pubkey===this.userPubKey&&(this.currentUserMetadata=e.metadata,this._changeDetectorRef.detectChanges())}),this.routePubKey&&this._indexedDBService.getMetadataStream().pipe((0,H.Q)(this._unsubscribeAll)).subscribe(e=>{e&&e.pubkey===this.routePubKey&&(this.metadata=e.metadata,this._changeDetectorRef.detectChanges())}),this._socialService.getFollowersObservable().pipe((0,H.Q)(this._unsubscribeAll)).subscribe(e=>{this.followers.push(e.pubkey),this._changeDetectorRef.detectChanges()}),this._socialService.getFollowingObservable().pipe((0,H.Q)(this._unsubscribeAll)).subscribe(e=>{e.tags.filter(o=>"p"===o[0]).forEach(o=>{this.following.push({nostrPubKey:o[1]})}),this._changeDetectorRef.detectChanges()}),this.updateSuggestionList()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadProfile(e){var i=this;return(0,w.A)(function*(){if(i.isLoading=!0,i.errorMessage=null,i.metadata=null,i.followers=[],i.following=[],i._changeDetectorRef.detectChanges(),!e)return i.errorMessage="No public key found. Please log in again.",i.isLoading=!1,void i._changeDetectorRef.detectChanges();try{const o=yield i._metadataService.fetchMetadataWithCache(e);o&&(i.metadata=o,i._changeDetectorRef.detectChanges()),yield i._socialService.getFollowers(e);const a=i._signerService.getPublicKey();i.isFollowing=i.followers.includes(a),yield i._socialService.getFollowing(e),i._metadataService.getMetadataStream().pipe((0,H.Q)(i._unsubscribeAll)).subscribe(u=>{u&&u.pubkey===e&&(i.metadata=u,i._changeDetectorRef.detectChanges())})}catch(o){console.error("Failed to load profile data:",o),i.errorMessage="Failed to load profile data. Please try again later.",i._changeDetectorRef.detectChanges()}finally{i.isLoading=!1,i._changeDetectorRef.detectChanges()}})()}loadCurrentUserProfile(){var e=this;return(0,w.A)(function*(){try{e.currentUserMetadata=null,e.userPubKey=e._signerService.getPublicKey();const i=yield e._metadataService.fetchMetadataWithCache(e.userPubKey);i&&(e.currentUserMetadata=i,e._changeDetectorRef.detectChanges()),e._metadataService.getMetadataStream().pipe((0,H.Q)(e._unsubscribeAll)).subscribe(o=>{o&&o.pubkey===e.userPubKey&&(e.currentUserMetadata=o,e._changeDetectorRef.detectChanges())})}catch(i){console.error("Failed to load profile data:",i),e.errorMessage="Failed to load profile data. Please try again later.",e._changeDetectorRef.detectChanges()}finally{e._changeDetectorRef.detectChanges()}})()}updateSuggestionList(){this._indexedDBService.getSuggestionUsers().then(e=>{this.suggestions=e,this._changeDetectorRef.detectChanges()}).catch(e=>{console.error("Error updating suggestion list:",e)})}getSafeUrl(e){return this._sanitizer.bypassSecurityTrustUrl(e)}toggleFollow(){var e=this;return(0,w.A)(function*(){try{const i=e._signerService.getPublicKey(),o=e.routePubKey||e.userPubKey;if(!o||!i)return void console.error("Public key missing. Unable to toggle follow.");e.isFollowing?(yield e._socialService.unfollow(o),console.log(`Unfollowed ${o}`),e.followers=e.followers.filter(a=>a!==i)):(yield e._socialService.follow(o),console.log(`Followed ${o}`),e.followers.push(i)),e.isFollowing=!e.isFollowing,e._changeDetectorRef.detectChanges()}catch(i){console.error("Failed to toggle follow:",i)}})()}openSnackBar(e,i){this.snackBar.open(e,i,{duration:1300})}getLightningInfo(){let e="";if(this.metadata?.lud06){const{words:i}=ct.I.decode(this.metadata.lud06,5e3),o=new Uint8Array(ct.I.fromWords(i));e=(new TextDecoder).decode(Uint8Array.from(o))}else if(this.metadata?.lud16?.toLowerCase().startsWith("lnurl")){const{words:i}=ct.I.decode(this.metadata.lud16,5e3),o=new Uint8Array(ct.I.fromWords(i));e=(new TextDecoder).decode(Uint8Array.from(o))}else this.metadata?.lud16&&(e=this.lightning.getLightningAddress(this.metadata.lud16));""!==e?this.lightning.getLightning(e).subscribe(i=>{this.lightningResponse=i,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.openZapDialog():this.openSnackBar("couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}zap(){var e=this;return(0,w.A)(function*(){e.metadata&&(e.metadata.lud06||e.metadata.lud16)?e.getLightningInfo():e.openSnackBar("user can't receive zaps","dismiss")})()}openZapDialog(){this._dialog.open(Il,{width:"405px",maxHeight:"90vh",data:this.metadata})}openReceiveZapDialog(){this._dialog.open(Nl,{width:"405px",maxHeight:"90vh",data:this.metadata})}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(t.gRc),t.rXU(Ll.T),t.rXU(Mo.A),t.rXU(Pl.n),t.rXU(at.up),t.rXU(tt.nX),t.rXU(Ol),t.rXU(oi),t.rXU(po),t.rXU(yt.bZ))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["profile"]],standalone:!0,features:[t.aNF],decls:821,vars:125,consts:[["defaultAvatar",""],["profileMenu","matMenu"],["listCard02Menu","matMenu"],["listCard01Menu","matMenu"],["listCard04Menu","matMenu"],["expandableCard02","angorCard"],["postCardMenu02","matMenu"],["postCardMenu08","matMenu"],["postCardMenu04","matMenu"],["postCardMenu10","matMenu"],["postCardMenu03","matMenu"],["postCardMenu09","matMenu"],["listCard08Menu","matMenu"],["postCardMenu01","matMenu"],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","shadow"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';",1,"h-40","object-cover","lg:h-80",3,"src","alt"],[1,"bg-card","mx-auto","flex","w-full","max-w-5xl","flex-0","flex-col","items-center","px-8","lg:h-18","lg:flex-row"],[1,"-mt-26","rounded-full","lg:-mt-22","flex-shrink-0"],[4,"ngIf","ngIfElse"],[1,"mt-4","flex","flex-col","items-center","lg:ml-8","lg:mt-0","lg:items-start","flex-grow"],[1,"text-lg","font-bold","leading-tight","max-w-full","lg:max-w-[25rem]","truncate",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"text-secondary","leading-tight","max-w-full","lg:max-w-[25rem]","truncate",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mx-8","hidden","h-8","border-l-2","lg:flex","flex-shrink-0"],[1,"mt-6","flex","items-center","space-x-6","lg:mt-0","flex-shrink-0"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-secondary","text-sm","font-medium"],[1,"mb-4","mt-8","flex","items-center","space-x-6","lg:m-0","lg:ml-auto","flex-shrink-0"],[4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"my-2"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","",4,"ngIf"],[1,"mx-auto","flex","w-full","max-w-5xl","flex-auto","justify-center","p-6","sm:p-8"],[1,"mr-8","hidden","flex-col","items-start","lg:flex"],["class","flex w-full max-w-80 flex-col p-8",4,"ngIf"],["class","flex w-full max-w-80 flex-col px-8 pb-4 pt-6",3,"ngClass",4,"ngIf"],[1,"mt-8","flex","w-full","max-w-80","flex-col","px-8","pb-4","pt-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-menu-item",""],[1,"mt-5","flex","flex-col"],[1,"flex","items-center"],["src","images/cards/coffee-shop-01-320x200.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],[1,"flex","min-w-0","flex-col"],[1,"font-medium","leading-none"],[1,"mt-1","truncate","text-md","leading-none"],[1,"text-secondary","mt-2","text-md","leading-none"],[1,"mt-6","flex","items-center"],["src","images/cards/coffee-shop-02-512x512.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],["src","images/cards/coffee-shop-03-320x320.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],["src","images/cards/sneakers-01-320x200.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],[1,"-mx-3","mt-6","flex","items-center"],["mat-button","",1,"px-3",3,"color","routerLink"],[1,"flex"],[1,"mr-2","mt-0.5","icon-size-5",3,"svgIcon"],[1,"mt-5","flex"],[1,"text-secondary","whitespace-nowrap","hover:underline",3,"routerLink"],[1,"-mx-3","mt-4","flex","items-center"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"mr-4","h-10","w-10","rounded-full"],[1,"leading-tight"],[1,"mt-8","flex"],[1,"flex","flex-col","items-start"],["class","flex w-full max-w-140 flex-col p-6 pb-6 sm:p-8",4,"ngIf"],[1,"flex","w-full","max-w-140","flex-col",3,"ngClass"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],[1,"relative","mb-4"],["src","images/cards/14-640x480.jpg","alt","Card cover image",1,"h-80","object-cover"],[1,"absolute","bottom-0","left-0","m-4","flex","h-8","w-8","cursor-pointer","items-center","justify-center","rounded-full","bg-gray-700",3,"matTooltip","matTooltipPosition"],[1,"text-gray-100","icon-size-4",3,"svgIcon"],[1,"mx-3","flex","items-center","sm:mx-5"],["mat-button","",1,"mr-1","px-3"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","h-6","w-6","rounded-full","ring-2","ring-white"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","-ml-3","h-6","w-6","rounded-full","ring-2","ring-white"],[1,"ml-3","text-md","tracking-tight"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"-ml-2","mr-1","px-3","sm:ml-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"click"],[1,"mr-1"],[1,"rotate-0","transition-transform","duration-150","ease-in-out","icon-size-5",3,"ngClass","svgIcon"],["angorCardExpansion",""],[1,"m-0","border-b"],[1,"mx-4","mb-3","mt-6","flex","flex-col","sm:mx-8"],[1,"flex","items-start"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-5","h-12","w-12","rounded-full","object-cover",3,"src","alt"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"placeholder","rows"],[1,"-mr-3","ml-auto","mt-3","flex","items-center"],["mat-icon-button",""],[1,"mx-4","my-0","border-b","sm:mx-8"],[1,"max-h-120","overflow-y-auto"],[1,"relative","mx-4","my-6","flex","flex-col","sm:mx-8"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"mr-4","h-8","w-8","rounded-full"],[1,"mt-0.5","flex","flex-col"],[1,"text-secondary","mt-2","flex","items-center","text-sm"],[1,"mr-2","cursor-pointer","hover:underline"],[1,"mr-2"],[1,"ml-12","mt-8","flex","items-start"],[1,"mt-8","flex","items-start"],[1,"mt-8","flex","w-full","max-w-140","flex-col"],[1,"mx-6","mb-1","mt-6","flex","items-center","sm:mx-8"],[1,"m-6","sm:mx-8"],[1,"mt-4"],["mat-button","",1,"px-3","sm:-mr-3"],[1,"mx-6","mb-4","flex","sm:mx-8"],[1,"flex","h-80","pr-1"],["src","images/cards/17-640x480.jpg","alt","Card cover image",1,"rounded","object-cover"],[1,"flex","flex-col","pl-1"],[1,"flex","h-40","pb-1"],["src","images/cards/18-640x480.jpg","alt","Card cover image",1,"rounded","object-cover"],[1,"flex","h-40","pt-1"],["src","images/cards/19-640x480.jpg","alt","Card cover image",1,"rounded","object-cover"],[1,"mx-6","mb-4","sm:mx-8"],[1,"flex","flex-col","overflow-hidden","rounded","border"],[1,"flex","h-80"],["src","images/cards/36-640x480.jpg","alt","Card cover image",1,"object-cover"],[1,"m-4"],[1,"text-lg","font-medium"],[1,"text-secondary","mt-1"],[1,"text-hint","mt-2","text-sm"],["src","images/cards/15-640x480.jpg","alt","Card cover image",1,"rounded","object-cover"],[1,"flex","h-80","pl-1"],["src","images/cards/16-640x480.jpg","alt","Card cover image",1,"rounded","object-cover"],[1,"flex","overflow-hidden","rounded","border"],[1,"w-40","flex-0"],["src","images/cards/35-640x480.jpg","alt","Card cover image",1,"h-full","w-full","object-cover"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","min-h-32","min-w-32","h-32","w-32","rounded-full","ring-4","object-cover","max-w-fit",3,"src","alt"],["src","/images/avatars/avatar-placeholder.png","onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","min-h-32","min-w-32","h-32","w-32","rounded-full","ring-4","object-cover",3,"alt"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink"],[1,"flex","w-full","max-w-80","flex-col","p-8"],["mat-flat-button","",1,"mt-8","px-6",3,"color","routerLink"],[1,"flex","w-full","max-w-80","flex-col","px-8","pb-4","pt-6",3,"ngClass"],["class","flex flex-col",4,"ngIf"],["class","mt-6 flex justify-between",4,"ngFor","ngForOf"],[1,"mt-6","flex","justify-between"],["class","h-14 w-14 rounded-full object-cover","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","role","button",3,"src","alt","matTooltip","routerLink",4,"ngFor","ngForOf"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","role","button",1,"h-14","w-14","rounded-full","object-cover",3,"src","alt","matTooltip","routerLink"],[1,"flex","w-full","max-w-140","flex-col","p-6","pb-6","sm:p-8"],[1,"text-xl","font-semibold"],[1,"mt-8","flex","flex-col","items-start","sm:flex-row"],[1,"mb-6","flex","items-center","sm:mb-0"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-12","w-12","min-w-12","rounded-full","object-cover",3,"src","alt"],[1,"sm:hidden"],[1,"-mx-3","mt-6","flex","items-center","sm:mt-8"],["mat-button","",1,"mr-1","hidden","px-3","sm:inline-flex"],["mat-button","",1,"px-3",3,"matMenuTriggerFor"],["mat-menu-item","",1,"sm:hidden"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"div",14)(1,"div",15)(2,"div"),t.nrm(3,"img",16),t.k0s(),t.j41(4,"div",17)(5,"div",18),t.DNE(6,ql,2,2,"ng-container",19)(7,Yl,1,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(9,"div",20)(10,"div",21),t.EFF(11),t.k0s(),t.j41(12,"div",22),t.EFF(13),t.k0s()(),t.nrm(14,"div",23),t.j41(15,"div",24)(16,"div",25)(17,"span",26),t.EFF(18),t.k0s(),t.j41(19,"span",27),t.EFF(20,"FOLLOWERS"),t.k0s()(),t.j41(21,"div",25)(22,"span",26),t.EFF(23),t.k0s(),t.j41(24,"span",27),t.EFF(25,"FOLLOWING"),t.k0s()()(),t.nrm(26,"div",23),t.j41(27,"div",28),t.DNE(28,zl,3,2,"div",29),t.j41(29,"div")(30,"button",30),t.nrm(31,"mat-icon",31),t.k0s(),t.j41(32,"mat-menu",null,1),t.DNE(34,Hl,5,1,"button",32)(35,Vl,5,1,"button",32),t.nrm(36,"mat-divider",33),t.DNE(37,Wl,5,2,"button",34)(38,Kl,5,1,"button",35)(39,Zl,5,1,"button",35),t.k0s()()()()(),t.j41(40,"div",36)(41,"div",37),t.DNE(42,Xl,7,4,"angor-card",38)(43,nc,12,8,"angor-card",39),t.j41(44,"angor-card",40)(45,"div",41)(46,"div",42),t.EFF(47," Groups "),t.k0s(),t.j41(48,"div",43)(49,"button",30),t.nrm(50,"mat-icon",31),t.k0s(),t.j41(51,"mat-menu",null,2)(53,"button",44),t.EFF(54,"Search for groups"),t.k0s()()()(),t.j41(55,"div",45)(56,"div",46),t.nrm(57,"img",47),t.j41(58,"div",48)(59,"div",49),t.EFF(60," The Port Cafe "),t.k0s(),t.j41(61,"div",50),t.EFF(62," Best cafe of the downtown New York "),t.k0s(),t.j41(63,"div",51),t.EFF(64," 1.2k followers "),t.k0s()()(),t.j41(65,"div",52),t.nrm(66,"img",53),t.j41(67,"div",48)(68,"div",49),t.EFF(69," Design House LLC. "),t.k0s(),t.j41(70,"div",50),t.EFF(71," UI/UX, brand and product design "),t.k0s(),t.j41(72,"div",51),t.EFF(73," 957 followers "),t.k0s()()(),t.j41(74,"div",52),t.nrm(75,"img",54),t.j41(76,"div",48)(77,"div",49),t.EFF(78," Crax Laser Tag "),t.k0s(),t.j41(79,"div",50),t.EFF(80," 30% off with group of 6 people "),t.k0s(),t.j41(81,"div",51),t.EFF(82," 342 followers "),t.k0s()()(),t.j41(83,"div",52),t.nrm(84,"img",55),t.j41(85,"div",48)(86,"div",49),t.EFF(87," Roadster Clothing Inc. "),t.k0s(),t.j41(88,"div",50),t.EFF(89," $25 off on orders $500 and over "),t.k0s(),t.j41(90,"div",51),t.EFF(91," 4.7k followers "),t.k0s()()()(),t.j41(92,"div",56)(93,"a",57),t.EFF(94," See all groups "),t.k0s()()(),t.j41(95,"angor-card",40)(96,"div",41)(97,"div",42),t.EFF(98,"News"),t.k0s(),t.j41(99,"div",43)(100,"button",30),t.nrm(101,"mat-icon",31),t.k0s(),t.j41(102,"mat-menu",null,3)(104,"button",44),t.EFF(105,"Mark all as read"),t.k0s()()()(),t.j41(106,"div",45)(107,"div",58),t.nrm(108,"mat-icon",59),t.j41(109,"div")(110,"b"),t.EFF(111,"20% OFF"),t.k0s(),t.EFF(112," in your favorite hats shop on next Friday. "),t.k0s()(),t.j41(113,"div",60),t.nrm(114,"mat-icon",59),t.j41(115,"div"),t.EFF(116," Upcoming meetups within 20 miles. "),t.j41(117,"a",61),t.EFF(118,"See details "),t.k0s()()(),t.j41(119,"div",60),t.nrm(120,"mat-icon",59),t.j41(121,"div"),t.EFF(122," Concerts from your favorite bands available within 100 miles. "),t.j41(123,"a",61),t.EFF(124,"See details "),t.k0s()()()(),t.j41(125,"div",62)(126,"a",57),t.EFF(127," See all news "),t.k0s()()(),t.j41(128,"angor-card",40)(129,"div",41)(130,"div",42),t.EFF(131," Activity Feed "),t.k0s(),t.j41(132,"div",43)(133,"button",30),t.nrm(134,"mat-icon",31),t.k0s(),t.j41(135,"mat-menu",null,4)(137,"button",44),t.EFF(138,"Clear activities"),t.k0s()()()(),t.j41(139,"div",45)(140,"div",58),t.nrm(141,"img",63),t.j41(142,"div",48)(143,"div",64),t.EFF(144," Amelia Edwards commented on John Silverton's photo "),t.k0s(),t.j41(145,"div",51),t.EFF(146," 4 minutes ago "),t.k0s()()(),t.j41(147,"div",65),t.nrm(148,"img",63),t.j41(149,"div",48)(150,"div",64),t.EFF(151," Lew Silverton changed his profile photo "),t.k0s(),t.j41(152,"div",51),t.EFF(153," 25 minutes ago "),t.k0s()()(),t.j41(154,"div",65),t.nrm(155,"img",63),t.j41(156,"div",48)(157,"div",64),t.EFF(158," Display Name liked your photo "),t.k0s(),t.j41(159,"div",51),t.EFF(160," 3 hours ago "),t.k0s()()(),t.j41(161,"div",65),t.nrm(162,"img",63),t.j41(163,"div",48)(164,"div",64),t.EFF(165," Marleah Eagleston commented on John Silverton's photo "),t.k0s(),t.j41(166,"div",51),t.EFF(167," Yesterday "),t.k0s()()()(),t.j41(168,"div",56)(169,"a",57),t.EFF(170," See entire activity feed "),t.k0s()()()(),t.j41(171,"div",66),t.DNE(172,rc,52,16,"angor-card",67),t.j41(173,"angor-card",68,5)(175,"div",69),t.nrm(176,"img",63),t.j41(177,"div",70)(178,"span",71),t.EFF(179,"Caroline Lundu"),t.k0s(),t.j41(180,"span",72),t.EFF(181,"29 minutes ago"),t.k0s()(),t.j41(182,"button",73),t.nrm(183,"mat-icon",31),t.k0s(),t.j41(184,"mat-menu",null,6)(186,"button",44)(187,"span",46),t.nrm(188,"mat-icon",74),t.j41(189,"span"),t.EFF(190,"Save post"),t.k0s()()(),t.j41(191,"button",44)(192,"span",46),t.nrm(193,"mat-icon",74),t.j41(194,"span"),t.EFF(195,"Hide post"),t.k0s()()(),t.j41(196,"button",44)(197,"span",46),t.nrm(198,"mat-icon",74),t.j41(199,"span"),t.EFF(200,"Snooze for 30 days"),t.k0s()()(),t.j41(201,"button",44)(202,"span",46),t.nrm(203,"mat-icon",74),t.j41(204,"span"),t.EFF(205,"Hide all"),t.k0s()()(),t.nrm(206,"mat-divider",33),t.j41(207,"button",44)(208,"span",46),t.nrm(209,"mat-icon",74),t.j41(210,"span"),t.EFF(211,"Report post"),t.k0s()()(),t.j41(212,"button",44)(213,"span",46),t.nrm(214,"mat-icon",74),t.j41(215,"span"),t.EFF(216,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(217,"div",75),t.EFF(218," Look at that sky! I so want to be there.. Can we arrange a trip? Is that a possibility? Please!!! "),t.k0s(),t.j41(219,"div",76),t.nrm(220,"img",77),t.j41(221,"div",78),t.nrm(222,"mat-icon",79),t.k0s()(),t.j41(223,"div",80)(224,"button",81),t.nrm(225,"mat-icon",82),t.j41(226,"span",83),t.EFF(227,"Unlike"),t.k0s()(),t.j41(228,"button",81),t.nrm(229,"mat-icon",31),t.j41(230,"span",83),t.EFF(231,"Comment"),t.k0s()(),t.j41(232,"button",81),t.nrm(233,"mat-icon",31),t.j41(234,"span",83),t.EFF(235,"Share"),t.k0s()()(),t.nrm(236,"hr",84),t.j41(237,"div",85)(238,"div",46),t.nrm(239,"img",86)(240,"img",87)(241,"img",87)(242,"img",87),t.j41(243,"div",88),t.EFF(244," You and 24 more liked this "),t.k0s()(),t.nrm(245,"div",89),t.j41(246,"div",90)(247,"button",91),t.EFF(248," 4 shares "),t.k0s(),t.j41(249,"button",92),t.bIt("click",function(){t.eBV(a);const f=t.sdS(174);return t.Njj(f.expanded=!f.expanded)}),t.j41(250,"span",93),t.EFF(251,"5 Comments"),t.k0s(),t.nrm(252,"mat-icon",94),t.k0s()()(),t.qex(253,95),t.nrm(254,"hr",96),t.j41(255,"div",97)(256,"div",98),t.nrm(257,"img",99),t.j41(258,"mat-form-field",100),t.nrm(259,"textarea",101),t.k0s()(),t.j41(260,"div",102)(261,"button",103),t.nrm(262,"mat-icon",31),t.k0s(),t.j41(263,"button",103),t.nrm(264,"mat-icon",31),t.k0s(),t.j41(265,"button",103),t.nrm(266,"mat-icon",31),t.k0s()()(),t.nrm(267,"hr",104),t.j41(268,"div",105)(269,"div",106)(270,"div",98),t.nrm(271,"img",107),t.j41(272,"div",108)(273,"span")(274,"b"),t.EFF(275,"Rutherford Brannan"),t.k0s(),t.EFF(276," Oh, I\u2019m in.. Let\u2019s arrange a trip for the next weekend if you want! "),t.k0s(),t.j41(277,"div",109)(278,"span",110),t.EFF(279,"Like"),t.k0s(),t.j41(280,"span",110),t.EFF(281,"Reply"),t.k0s(),t.j41(282,"span",110),t.EFF(283,"Hide replies"),t.k0s(),t.j41(284,"span",111),t.EFF(285,"\u2022"),t.k0s(),t.j41(286,"span"),t.EFF(287,"17 min"),t.k0s()()()(),t.j41(288,"div",112),t.nrm(289,"img",107),t.j41(290,"div",108)(291,"span")(292,"b"),t.EFF(293,"Caroline Lundu"),t.k0s(),t.EFF(294," Yes!! Let's talk about it on lunch! "),t.k0s(),t.j41(295,"div",109)(296,"span",110),t.EFF(297,"Like"),t.k0s(),t.j41(298,"span",110),t.EFF(299,"Reply"),t.k0s(),t.j41(300,"span",111),t.EFF(301,"\u2022"),t.k0s(),t.j41(302,"span"),t.EFF(303,"15 min"),t.k0s()()()(),t.j41(304,"div",112),t.nrm(305,"img",107),t.j41(306,"div",108)(307,"span")(308,"b"),t.EFF(309,"Barbara Cotilla"),t.k0s(),t.EFF(310," Count me in !!! "),t.k0s(),t.j41(311,"div",109)(312,"span",110),t.EFF(313,"Like"),t.k0s(),t.j41(314,"span",110),t.EFF(315,"Reply"),t.k0s(),t.j41(316,"span",111),t.EFF(317,"\u2022"),t.k0s(),t.j41(318,"span"),t.EFF(319,"12 min"),t.k0s()()()(),t.j41(320,"div",113),t.nrm(321,"img",107),t.j41(322,"div",108)(323,"span")(324,"b"),t.EFF(325,"Alan Marti"),t.k0s(),t.EFF(326," The color of the sky doesn\u2019t look natural at all, do you really think this is natural? I\u2019d say Photoshop! Your trip isn't going to worth it since you won't be seeing this exact sky. "),t.k0s(),t.j41(327,"div",109)(328,"span",110),t.EFF(329,"Like"),t.k0s(),t.j41(330,"span",110),t.EFF(331,"Reply"),t.k0s(),t.j41(332,"span",110),t.EFF(333,"Hide replies"),t.k0s(),t.j41(334,"span",111),t.EFF(335,"\u2022"),t.k0s(),t.j41(336,"span"),t.EFF(337,"24 min"),t.k0s()()()(),t.j41(338,"div",112),t.nrm(339,"img",107),t.j41(340,"div",108)(341,"span")(342,"b"),t.EFF(343,"Caroline Lundu"),t.k0s(),t.EFF(344," Hey, Alan! You must be fun at parties! "),t.k0s(),t.j41(345,"div",109)(346,"span",110),t.EFF(347,"Like"),t.k0s(),t.j41(348,"span",110),t.EFF(349,"Reply"),t.k0s(),t.j41(350,"span",111),t.EFF(351,"\u2022"),t.k0s(),t.j41(352,"span"),t.EFF(353,"22 min"),t.k0s()()()(),t.j41(354,"div",112),t.nrm(355,"img",107),t.j41(356,"div",108)(357,"span")(358,"b"),t.EFF(359,"Alan Marti"),t.k0s(),t.EFF(360," Caroline, I'm telling the truth, and if you cannot stand the truth, maybe we shouldn't be friends anymore... "),t.k0s(),t.j41(361,"div",109)(362,"span",110),t.EFF(363,"Like"),t.k0s(),t.j41(364,"span",110),t.EFF(365,"Reply"),t.k0s(),t.j41(366,"span",111),t.EFF(367,"\u2022"),t.k0s(),t.j41(368,"span"),t.EFF(369,"20 min"),t.k0s()()()(),t.j41(370,"div",112),t.nrm(371,"img",107),t.j41(372,"div",108)(373,"span")(374,"b"),t.EFF(375,"Caroline Lundu"),t.k0s(),t.EFF(376," Dude! Relax! I'm just messing with you... "),t.k0s(),t.j41(377,"div",109)(378,"span",110),t.EFF(379,"Like"),t.k0s(),t.j41(380,"span",110),t.EFF(381,"Reply"),t.k0s(),t.j41(382,"span",111),t.EFF(383,"\u2022"),t.k0s(),t.j41(384,"span"),t.EFF(385,"18 min"),t.k0s()()()(),t.j41(386,"div",112),t.nrm(387,"img",107),t.j41(388,"div",108)(389,"span")(390,"b"),t.EFF(391,"Alan Marti"),t.k0s(),t.EFF(392," Sorry! I had a bad morning, let's talk about this in couple hours, I need to relax a bit :( "),t.k0s(),t.j41(393,"div",109)(394,"span",110),t.EFF(395,"Like"),t.k0s(),t.j41(396,"span",110),t.EFF(397,"Reply"),t.k0s(),t.j41(398,"span",111),t.EFF(399,"\u2022"),t.k0s(),t.j41(400,"span"),t.EFF(401,"16 min"),t.k0s()()()(),t.j41(402,"div",113),t.nrm(403,"img",107),t.j41(404,"div",108)(405,"span")(406,"b"),t.EFF(407,"Marleah Eagleston"),t.k0s(),t.EFF(408," Count me in, too! "),t.k0s(),t.j41(409,"div",109)(410,"span",110),t.EFF(411,"Like"),t.k0s(),t.j41(412,"span",110),t.EFF(413,"Reply"),t.k0s(),t.j41(414,"span",111),t.EFF(415,"\u2022"),t.k0s(),t.j41(416,"span"),t.EFF(417,"34 min"),t.k0s()()()()()(),t.bVm(),t.k0s(),t.j41(418,"angor-card",114)(419,"div",115),t.nrm(420,"img",63),t.j41(421,"div",70)(422,"span",71),t.EFF(423,"Caroline Lundu"),t.k0s(),t.j41(424,"span",72),t.EFF(425,"29 minutes ago"),t.k0s()(),t.j41(426,"button",73),t.nrm(427,"mat-icon",31),t.k0s(),t.j41(428,"mat-menu",null,7)(430,"button",44)(431,"span",46),t.nrm(432,"mat-icon",74),t.j41(433,"span"),t.EFF(434,"Save post"),t.k0s()()(),t.j41(435,"button",44)(436,"span",46),t.nrm(437,"mat-icon",74),t.j41(438,"span"),t.EFF(439,"Hide post"),t.k0s()()(),t.j41(440,"button",44)(441,"span",46),t.nrm(442,"mat-icon",74),t.j41(443,"span"),t.EFF(444,"Snooze for 30 days"),t.k0s()()(),t.j41(445,"button",44)(446,"span",46),t.nrm(447,"mat-icon",74),t.j41(448,"span"),t.EFF(449,"Hide all"),t.k0s()()(),t.nrm(450,"mat-divider",33),t.j41(451,"button",44)(452,"span",46),t.nrm(453,"mat-icon",74),t.j41(454,"span"),t.EFF(455,"Report post"),t.k0s()()(),t.j41(456,"button",44)(457,"span",46),t.nrm(458,"mat-icon",74),t.j41(459,"span"),t.EFF(460,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(461,"div",116)(462,"p"),t.EFF(463," We'll put a happy little sky in here. We touch the canvas, the canvas takes what it wants. A little happy sunlight shining through there. Let's build some happy little clouds up here. I was blessed with a very steady hand; and it comes in very handy when you're doing these little delicate things. This is the fun part. "),t.k0s(),t.j41(464,"p",117),t.EFF(465," Isn't it great to do something you can't fail at? Little trees and bushes grow however makes them happy. Trees get lonely too, so we'll give him a little friend. There are no mistakes. You can fix anything that happens. "),t.k0s()(),t.j41(466,"div",80)(467,"button",81),t.nrm(468,"mat-icon",82),t.j41(469,"span",83),t.EFF(470,"Unlike"),t.k0s()(),t.j41(471,"button",81),t.nrm(472,"mat-icon",31),t.j41(473,"span",83),t.EFF(474,"Comment"),t.k0s()(),t.j41(475,"button",81),t.nrm(476,"mat-icon",31),t.j41(477,"span",83),t.EFF(478,"Share"),t.k0s()()(),t.nrm(479,"hr",84),t.j41(480,"div",85)(481,"div",46),t.nrm(482,"img",86)(483,"img",87)(484,"img",87)(485,"img",87),t.j41(486,"div",88),t.EFF(487," You and 24 more liked this "),t.k0s()(),t.nrm(488,"div",89),t.j41(489,"div",90)(490,"button",91),t.EFF(491," 4 shares "),t.k0s(),t.j41(492,"button",118),t.EFF(493," No comments "),t.k0s()()()(),t.j41(494,"angor-card",114)(495,"div",69),t.nrm(496,"img",63),t.j41(497,"div",70)(498,"span",71),t.EFF(499,"Marleah Eagleston"),t.k0s(),t.j41(500,"span",72),t.EFF(501,"29 minutes ago"),t.k0s()(),t.j41(502,"button",73),t.nrm(503,"mat-icon",31),t.k0s(),t.j41(504,"mat-menu",null,8)(506,"button",44)(507,"span",46),t.nrm(508,"mat-icon",74),t.j41(509,"span"),t.EFF(510,"Save post"),t.k0s()()(),t.j41(511,"button",44)(512,"span",46),t.nrm(513,"mat-icon",74),t.j41(514,"span"),t.EFF(515,"Hide post"),t.k0s()()(),t.j41(516,"button",44)(517,"span",46),t.nrm(518,"mat-icon",74),t.j41(519,"span"),t.EFF(520,"Snooze for 30 days"),t.k0s()()(),t.j41(521,"button",44)(522,"span",46),t.nrm(523,"mat-icon",74),t.j41(524,"span"),t.EFF(525,"Hide all"),t.k0s()()(),t.nrm(526,"mat-divider",33),t.j41(527,"button",44)(528,"span",46),t.nrm(529,"mat-icon",74),t.j41(530,"span"),t.EFF(531,"Report post"),t.k0s()()(),t.j41(532,"button",44)(533,"span",46),t.nrm(534,"mat-icon",74),t.j41(535,"span"),t.EFF(536,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(537,"div",75),t.EFF(538," Look at that sky! I so want to be there.. Can we arrange a trip? Is that a possibility? Please!!! "),t.k0s(),t.j41(539,"div",119)(540,"div",120),t.nrm(541,"img",121),t.k0s(),t.j41(542,"div",122)(543,"div",123),t.nrm(544,"img",124),t.k0s(),t.j41(545,"div",125),t.nrm(546,"img",126),t.k0s()()(),t.j41(547,"div",80)(548,"button",81),t.nrm(549,"mat-icon",82),t.j41(550,"span",83),t.EFF(551,"Unlike"),t.k0s()(),t.j41(552,"button",81),t.nrm(553,"mat-icon",31),t.j41(554,"span",83),t.EFF(555,"Comment"),t.k0s()(),t.j41(556,"button",81),t.nrm(557,"mat-icon",31),t.j41(558,"span",83),t.EFF(559,"Share"),t.k0s()()(),t.nrm(560,"hr",84),t.j41(561,"div",85)(562,"div",46),t.nrm(563,"img",86)(564,"img",87)(565,"img",87)(566,"img",87),t.j41(567,"div",88),t.EFF(568," You and 24 more liked this "),t.k0s()(),t.nrm(569,"div",89),t.j41(570,"div",90)(571,"button",91),t.EFF(572," 4 shares "),t.k0s(),t.j41(573,"button",118),t.EFF(574," No comments "),t.k0s()()()(),t.j41(575,"angor-card",114)(576,"div",69),t.nrm(577,"img",63),t.j41(578,"div",70)(579,"span",49),t.EFF(580,"Caroline Lundu"),t.k0s(),t.j41(581,"span",72),t.EFF(582,"29 minutes ago"),t.k0s()(),t.j41(583,"button",73),t.nrm(584,"mat-icon",31),t.k0s(),t.j41(585,"mat-menu",null,9)(587,"button",44)(588,"span",46),t.nrm(589,"mat-icon",74),t.j41(590,"span"),t.EFF(591,"Save post"),t.k0s()()(),t.j41(592,"button",44)(593,"span",46),t.nrm(594,"mat-icon",74),t.j41(595,"span"),t.EFF(596,"Hide post"),t.k0s()()(),t.j41(597,"button",44)(598,"span",46),t.nrm(599,"mat-icon",74),t.j41(600,"span"),t.EFF(601,"Snooze for 30 days"),t.k0s()()(),t.j41(602,"button",44)(603,"span",46),t.nrm(604,"mat-icon",74),t.j41(605,"span"),t.EFF(606,"Hide all"),t.k0s()()(),t.nrm(607,"mat-divider",33),t.j41(608,"button",44)(609,"span",46),t.nrm(610,"mat-icon",74),t.j41(611,"span"),t.EFF(612,"Report post"),t.k0s()()(),t.j41(613,"button",44)(614,"span",46),t.nrm(615,"mat-icon",74),t.j41(616,"span"),t.EFF(617,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(618,"div",75),t.EFF(619," Hey!! I never saw this one, it was amazing.. I think I\u2019m going to buy myself a set and try his technique at home! "),t.k0s(),t.j41(620,"div",127)(621,"div",128)(622,"div",129),t.nrm(623,"img",130),t.k0s(),t.j41(624,"div",131)(625,"div",132),t.EFF(626," Take a look behind the scenes of Rob Boss episodes "),t.k0s(),t.j41(627,"div",133),t.EFF(628," We'll put a happy little sky in here. We touch the canvas, the canvas takes what it wants. A little happy sunlight shining through there. "),t.k0s(),t.j41(629,"div",134),t.EFF(630," example.com "),t.k0s()()()(),t.j41(631,"div",80)(632,"button",81),t.nrm(633,"mat-icon",82),t.j41(634,"span",83),t.EFF(635,"Unlike"),t.k0s()(),t.j41(636,"button",81),t.nrm(637,"mat-icon",31),t.j41(638,"span",83),t.EFF(639,"Comment"),t.k0s()(),t.j41(640,"button",81),t.nrm(641,"mat-icon",31),t.j41(642,"span",83),t.EFF(643,"Share"),t.k0s()()(),t.nrm(644,"hr",84),t.j41(645,"div",85)(646,"div",46),t.nrm(647,"img",86)(648,"img",87)(649,"img",87)(650,"img",87),t.j41(651,"div",88),t.EFF(652," You and 24 more liked this "),t.k0s()(),t.nrm(653,"div",89),t.j41(654,"div",90)(655,"button",91),t.EFF(656," 4 shares "),t.k0s(),t.j41(657,"button",118),t.EFF(658," No comments "),t.k0s()()()(),t.j41(659,"angor-card",114)(660,"div",69),t.nrm(661,"img",63),t.j41(662,"div",70)(663,"span",71),t.EFF(664,"Marleah Eagleston"),t.k0s(),t.j41(665,"span",72),t.EFF(666,"29 minutes ago"),t.k0s()(),t.j41(667,"button",73),t.nrm(668,"mat-icon",31),t.k0s(),t.j41(669,"mat-menu",null,10)(671,"button",44)(672,"span",46),t.nrm(673,"mat-icon",74),t.j41(674,"span"),t.EFF(675,"Save post"),t.k0s()()(),t.j41(676,"button",44)(677,"span",46),t.nrm(678,"mat-icon",74),t.j41(679,"span"),t.EFF(680,"Hide post"),t.k0s()()(),t.j41(681,"button",44)(682,"span",46),t.nrm(683,"mat-icon",74),t.j41(684,"span"),t.EFF(685,"Snooze for 30 days"),t.k0s()()(),t.j41(686,"button",44)(687,"span",46),t.nrm(688,"mat-icon",74),t.j41(689,"span"),t.EFF(690,"Hide all"),t.k0s()()(),t.nrm(691,"mat-divider",33),t.j41(692,"button",44)(693,"span",46),t.nrm(694,"mat-icon",74),t.j41(695,"span"),t.EFF(696,"Report post"),t.k0s()()(),t.j41(697,"button",44)(698,"span",46),t.nrm(699,"mat-icon",74),t.j41(700,"span"),t.EFF(701,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(702,"div",75),t.EFF(703," Look at that sky! I so want to be there.. Can we arrange a trip? Is that a possibility? Please!!! "),t.k0s(),t.j41(704,"div",119)(705,"div",120),t.nrm(706,"img",135),t.k0s(),t.j41(707,"div",136),t.nrm(708,"img",137),t.k0s()(),t.j41(709,"div",80)(710,"button",81),t.nrm(711,"mat-icon",82),t.j41(712,"span",83),t.EFF(713,"Unlike"),t.k0s()(),t.j41(714,"button",81),t.nrm(715,"mat-icon",31),t.j41(716,"span",83),t.EFF(717,"Comment"),t.k0s()(),t.j41(718,"button",81),t.nrm(719,"mat-icon",31),t.j41(720,"span",83),t.EFF(721,"Share"),t.k0s()()(),t.nrm(722,"hr",84),t.j41(723,"div",85)(724,"div",46),t.nrm(725,"img",86)(726,"img",87)(727,"img",87)(728,"img",87),t.j41(729,"div",88),t.EFF(730," You and 24 more liked this "),t.k0s()(),t.nrm(731,"div",89),t.j41(732,"div",90)(733,"button",91),t.EFF(734," 4 shares "),t.k0s(),t.j41(735,"button",118),t.EFF(736," No comments "),t.k0s()()()(),t.j41(737,"angor-card",114)(738,"div",69),t.nrm(739,"img",63),t.j41(740,"div",70)(741,"span",71),t.EFF(742,"Caroline Lundu"),t.k0s(),t.j41(743,"span",72),t.EFF(744,"29 minutes ago"),t.k0s()(),t.j41(745,"button",73),t.nrm(746,"mat-icon",31),t.k0s(),t.j41(747,"mat-menu",null,11)(749,"button",44)(750,"span",46),t.nrm(751,"mat-icon",74),t.j41(752,"span"),t.EFF(753,"Save post"),t.k0s()()(),t.j41(754,"button",44)(755,"span",46),t.nrm(756,"mat-icon",74),t.j41(757,"span"),t.EFF(758,"Hide post"),t.k0s()()(),t.j41(759,"button",44)(760,"span",46),t.nrm(761,"mat-icon",74),t.j41(762,"span"),t.EFF(763,"Snooze for 30 days"),t.k0s()()(),t.j41(764,"button",44)(765,"span",46),t.nrm(766,"mat-icon",74),t.j41(767,"span"),t.EFF(768,"Hide all"),t.k0s()()(),t.nrm(769,"mat-divider",33),t.j41(770,"button",44)(771,"span",46),t.nrm(772,"mat-icon",74),t.j41(773,"span"),t.EFF(774,"Report post"),t.k0s()()(),t.j41(775,"button",44)(776,"span",46),t.nrm(777,"mat-icon",74),t.j41(778,"span"),t.EFF(779,"Turn on notifications for this post"),t.k0s()()()()(),t.j41(780,"div",75),t.EFF(781," Hey!! I never saw this episode, it was amazing.. I think I\u2019m going to buy myself a set and try his technique at home! "),t.k0s(),t.j41(782,"div",127)(783,"div",138)(784,"div",139),t.nrm(785,"img",140),t.k0s(),t.j41(786,"div",131)(787,"div",132),t.EFF(788," Rob Boss - Season 09 Episode 04 "),t.k0s(),t.j41(789,"div",133),t.EFF(790," We'll put a happy little sky in here. We touch the canvas, the canvas takes what it wants. A little happy sunlight shining through there. "),t.k0s(),t.j41(791,"div",134),t.EFF(792," example.com "),t.k0s()()()(),t.j41(793,"div",80)(794,"button",81),t.nrm(795,"mat-icon",82),t.j41(796,"span",83),t.EFF(797,"Unlike"),t.k0s()(),t.j41(798,"button",81),t.nrm(799,"mat-icon",31),t.j41(800,"span",83),t.EFF(801,"Comment"),t.k0s()(),t.j41(802,"button",81),t.nrm(803,"mat-icon",31),t.j41(804,"span",83),t.EFF(805,"Share"),t.k0s()()(),t.nrm(806,"hr",84),t.j41(807,"div",85)(808,"div",46),t.nrm(809,"img",86)(810,"img",87)(811,"img",87)(812,"img",87),t.j41(813,"div",88),t.EFF(814," You and 24 more liked this "),t.k0s()(),t.nrm(815,"div",89),t.j41(816,"div",90)(817,"button",91),t.EFF(818," 4 shares "),t.k0s(),t.j41(819,"button",118),t.EFF(820," No comments "),t.k0s()()()()()()()}if(2&i){const a=t.sdS(8),u=t.sdS(33),f=t.sdS(52),g=t.sdS(103),v=t.sdS(136),k=t.sdS(174),A=t.sdS(185),O=t.sdS(429),P=t.sdS(505),L=t.sdS(586),F=t.sdS(670),U=t.sdS(748);t.R7$(3),t.FS9("alt",(null==o.metadata?null:o.metadata.display_name)||(null==o.metadata?null:o.metadata.name)||"Banner"),t.Y8G("src",(null==o.metadata?null:o.metadata.banner)||"/images/pages/profile/cover.jpg",t.B4B),t.R7$(3),t.Y8G("ngIf",null==o.metadata?null:o.metadata.picture)("ngIfElse",a),t.R7$(5),t.SpI(" ",(null==o.metadata?null:o.metadata.display_name)||(null==o.metadata?null:o.metadata.name)||"Unknown User"," "),t.R7$(2),t.SpI(" ",(null==o.metadata?null:o.metadata.username)||(null==o.metadata?null:o.metadata.name)," "),t.R7$(5),t.JRh(o.followers.length),t.R7$(5),t.JRh(o.following.length),t.R7$(5),t.Y8G("ngIf",!o.isCurrentUserProfile),t.R7$(2),t.Y8G("matMenuTriggerFor",u),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(3),t.Y8G("ngIf",!o.isCurrentUserProfile),t.R7$(),t.Y8G("ngIf",o.isCurrentUserProfile),t.R7$(2),t.Y8G("ngIf",o.isCurrentUserProfile),t.R7$(),t.Y8G("ngIf",!o.isCurrentUserProfile),t.R7$(),t.Y8G("ngIf",!o.isCurrentUserProfile),t.R7$(3),t.Y8G("ngIf",(null==o.metadata?null:o.metadata.about)&&""!==o.metadata.about.trim()),t.R7$(),t.Y8G("ngIf",o.suggestions.length>0),t.R7$(6),t.Y8G("matMenuTriggerFor",f),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(43),t.Y8G("color","primary")("routerLink",t.lJ4(116,fn)),t.R7$(7),t.Y8G("matMenuTriggerFor",g),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(7),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(3),t.Y8G("routerLink",t.lJ4(117,fn)),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(3),t.Y8G("routerLink",t.lJ4(118,fn)),t.R7$(3),t.Y8G("color","primary")("routerLink",t.lJ4(119,fn)),t.R7$(7),t.Y8G("matMenuTriggerFor",v),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(35),t.Y8G("color","primary")("routerLink",t.lJ4(120,fn)),t.R7$(3),t.Y8G("ngIf",o.isCurrentUserProfile),t.R7$(),t.Y8G("ngClass",t.eq3(121,So,o.isCurrentUserProfile)),t.R7$(9),t.Y8G("matMenuTriggerFor",A),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(7),t.Y8G("matTooltip","Barmouth / UK")("matTooltipPosition","right"),t.R7$(),t.Y8G("svgIcon","heroicons_solid:map-pin"),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(19),t.Y8G("ngClass",t.eq3(123,$l,k.expanded))("svgIcon","heroicons_mini:chevron-down"),t.R7$(5),t.FS9("alt",(null==o.currentUserMetadata?null:o.currentUserMetadata.display_name)||(null==o.currentUserMetadata?null:o.currentUserMetadata.name)||"Avatar"),t.Y8G("src",(null==o.currentUserMetadata?null:o.currentUserMetadata.picture)||"images/avatars/avatar-placeholder.png",t.B4B),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("placeholder","Write a comment...")("rows",3),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:sparkles"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:face-smile"),t.R7$(2),t.Y8G("svgIcon","heroicons_solid:photo"),t.R7$(160),t.Y8G("matMenuTriggerFor",O),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(10),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(26),t.Y8G("matMenuTriggerFor",P),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(15),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(26),t.Y8G("matMenuTriggerFor",L),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(18),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(26),t.Y8G("matMenuTriggerFor",F),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(12),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(26),t.Y8G("matMenuTriggerFor",U),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(18),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share")}},dependencies:[tt.Wk,lt.n,B.m_,B.An,h.Hl,h.It,h.$z,h.iY,st.Cn,st.kk,st.fb,st.Cp,T.RG,T.rl,q.fS,q.fg,p.xb,p.EE,R.w,R.q,ft.uc,ft.oV,E.YU,E.MD,E.Sq,E.bT,W.YN,dt],encapsulation:2,changeDetection:0})}return n})()}]},2577:(xt,j,M)=>{const w=M(531),p=M(8715),E=M(465),h=M(5510);function R(T,B,q,st,ft){const tt=[].slice.call(arguments,1),lt=tt.length,N="function"==typeof tt[lt-1];if(!N&&!w())throw new Error("Callback required as last argument");if(!N){if(lt<1)throw new Error("Too few arguments provided");return 1===lt?(q=B,B=st=void 0):2===lt&&!B.getContext&&(st=q,q=B,B=void 0),new Promise(function(H,ct){try{const W=p.create(q,st);H(T(W,B,st))}catch(W){ct(W)}})}if(lt<2)throw new Error("Too few arguments provided");2===lt?(ft=q,q=B,B=st=void 0):3===lt&&(B.getContext&&typeof ft>"u"?(ft=st,st=void 0):(ft=st,st=q,q=B,B=void 0));try{const H=p.create(q,st);ft(null,T(H,B,st))}catch(H){ft(H)}}j.mo=R.bind(null,E.render),j.dY=R.bind(null,E.renderToDataURL),j.toString=R.bind(null,function(T,B,q){return h.render(T,q)})},531:xt=>{xt.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},919:(xt,j,M)=>{const C=M(2656).getSymbolSize;j.getRowColCoords=function(p){if(1===p)return[];const E=Math.floor(p/7)+2,h=C(p),R=145===h?26:2*Math.ceil((h-13)/(2*E-2)),T=[h-7];for(let B=1;B<E-1;B++)T[B]=T[B-1]-R;return T.push(6),T.reverse()},j.getPositions=function(p){const E=[],h=j.getRowColCoords(p),R=h.length;for(let T=0;T<R;T++)for(let B=0;B<R;B++)0===T&&0===B||0===T&&B===R-1||T===R-1&&0===B||E.push([h[T],h[B]]);return E}},387:(xt,j,M)=>{const C=M(838),w=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function p(E){this.mode=C.ALPHANUMERIC,this.data=E}p.getBitsLength=function(h){return 11*Math.floor(h/2)+h%2*6},p.prototype.getLength=function(){return this.data.length},p.prototype.getBitsLength=function(){return p.getBitsLength(this.data.length)},p.prototype.write=function(h){let R;for(R=0;R+2<=this.data.length;R+=2){let T=45*w.indexOf(this.data[R]);T+=w.indexOf(this.data[R+1]),h.put(T,11)}this.data.length%2&&h.put(w.indexOf(this.data[R]),6)},xt.exports=p},4481:xt=>{function j(){this.buffer=[],this.length=0}j.prototype={get:function(M){const C=Math.floor(M/8);return 1==(this.buffer[C]>>>7-M%8&1)},put:function(M,C){for(let w=0;w<C;w++)this.putBit(1==(M>>>C-w-1&1))},getLengthInBits:function(){return this.length},putBit:function(M){const C=Math.floor(this.length/8);this.buffer.length<=C&&this.buffer.push(0),M&&(this.buffer[C]|=128>>>this.length%8),this.length++}},xt.exports=j},8038:xt=>{function j(M){if(!M||M<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=M,this.data=new Uint8Array(M*M),this.reservedBit=new Uint8Array(M*M)}j.prototype.set=function(M,C,w,p){const E=M*this.size+C;this.data[E]=w,p&&(this.reservedBit[E]=!0)},j.prototype.get=function(M,C){return this.data[M*this.size+C]},j.prototype.xor=function(M,C,w){this.data[M*this.size+C]^=w},j.prototype.isReserved=function(M,C){return this.reservedBit[M*this.size+C]},xt.exports=j},1736:(xt,j,M)=>{const C=M(3174),w=M(838);function p(E){this.mode=w.BYTE,"string"==typeof E&&(E=C(E)),this.data=new Uint8Array(E)}p.getBitsLength=function(h){return 8*h},p.prototype.getLength=function(){return this.data.length},p.prototype.getBitsLength=function(){return p.getBitsLength(this.data.length)},p.prototype.write=function(E){for(let h=0,R=this.data.length;h<R;h++)E.put(this.data[h],8)},xt.exports=p},2296:(xt,j,M)=>{const C=M(139),w=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],p=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];j.getBlocksCount=function(h,R){switch(R){case C.L:return w[4*(h-1)+0];case C.M:return w[4*(h-1)+1];case C.Q:return w[4*(h-1)+2];case C.H:return w[4*(h-1)+3];default:return}},j.getTotalCodewordsCount=function(h,R){switch(R){case C.L:return p[4*(h-1)+0];case C.M:return p[4*(h-1)+1];case C.Q:return p[4*(h-1)+2];case C.H:return p[4*(h-1)+3];default:return}}},139:(xt,j)=>{j.L={bit:1},j.M={bit:0},j.Q={bit:3},j.H={bit:2},j.isValid=function(w){return w&&typeof w.bit<"u"&&w.bit>=0&&w.bit<4},j.from=function(w,p){if(j.isValid(w))return w;try{return function M(C){if("string"!=typeof C)throw new Error("Param is not a string");switch(C.toLowerCase()){case"l":case"low":return j.L;case"m":case"medium":return j.M;case"q":case"quartile":return j.Q;case"h":case"high":return j.H;default:throw new Error("Unknown EC Level: "+C)}}(w)}catch{return p}}},9202:(xt,j,M)=>{const C=M(2656).getSymbolSize;j.getPositions=function(E){const h=C(E);return[[0,0],[h-7,0],[0,h-7]]}},9211:(xt,j,M)=>{const C=M(2656),E=C.getBCHDigit(1335);j.getEncodedBits=function(R,T){const B=R.bit<<3|T;let q=B<<10;for(;C.getBCHDigit(q)-E>=0;)q^=1335<<C.getBCHDigit(q)-E;return 21522^(B<<10|q)}},6965:(xt,j)=>{const M=new Uint8Array(512),C=new Uint8Array(256);(function(){let p=1;for(let E=0;E<255;E++)M[E]=p,C[p]=E,p<<=1,256&p&&(p^=285);for(let E=255;E<512;E++)M[E]=M[E-255]})(),j.log=function(p){if(p<1)throw new Error("log("+p+")");return C[p]},j.exp=function(p){return M[p]},j.mul=function(p,E){return 0===p||0===E?0:M[C[p]+C[E]]}},1971:(xt,j,M)=>{const C=M(838),w=M(2656);function p(E){this.mode=C.KANJI,this.data=E}p.getBitsLength=function(h){return 13*h},p.prototype.getLength=function(){return this.data.length},p.prototype.getBitsLength=function(){return p.getBitsLength(this.data.length)},p.prototype.write=function(E){let h;for(h=0;h<this.data.length;h++){let R=w.toSJIS(this.data[h]);if(R>=33088&&R<=40956)R-=33088;else{if(!(R>=57408&&R<=60351))throw new Error("Invalid SJIS character: "+this.data[h]+"\nMake sure your charset is UTF-8");R-=49472}R=192*(R>>>8&255)+(255&R),E.put(R,13)}},xt.exports=p},9366:(xt,j)=>{j.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function C(w,p,E){switch(w){case j.Patterns.PATTERN000:return(p+E)%2==0;case j.Patterns.PATTERN001:return p%2==0;case j.Patterns.PATTERN010:return E%3==0;case j.Patterns.PATTERN011:return(p+E)%3==0;case j.Patterns.PATTERN100:return(Math.floor(p/2)+Math.floor(E/3))%2==0;case j.Patterns.PATTERN101:return p*E%2+p*E%3==0;case j.Patterns.PATTERN110:return(p*E%2+p*E%3)%2==0;case j.Patterns.PATTERN111:return(p*E%3+(p+E)%2)%2==0;default:throw new Error("bad maskPattern:"+w)}}j.isValid=function(p){return null!=p&&""!==p&&!isNaN(p)&&p>=0&&p<=7},j.from=function(p){return j.isValid(p)?parseInt(p,10):void 0},j.getPenaltyN1=function(p){const E=p.size;let h=0,R=0,T=0,B=null,q=null;for(let st=0;st<E;st++){R=T=0,B=q=null;for(let ft=0;ft<E;ft++){let tt=p.get(st,ft);tt===B?R++:(R>=5&&(h+=R-5+3),B=tt,R=1),tt=p.get(ft,st),tt===q?T++:(T>=5&&(h+=T-5+3),q=tt,T=1)}R>=5&&(h+=R-5+3),T>=5&&(h+=T-5+3)}return h},j.getPenaltyN2=function(p){const E=p.size;let h=0;for(let R=0;R<E-1;R++)for(let T=0;T<E-1;T++){const B=p.get(R,T)+p.get(R,T+1)+p.get(R+1,T)+p.get(R+1,T+1);(4===B||0===B)&&h++}return 3*h},j.getPenaltyN3=function(p){const E=p.size;let h=0,R=0,T=0;for(let B=0;B<E;B++){R=T=0;for(let q=0;q<E;q++)R=R<<1&2047|p.get(B,q),q>=10&&(1488===R||93===R)&&h++,T=T<<1&2047|p.get(q,B),q>=10&&(1488===T||93===T)&&h++}return 40*h},j.getPenaltyN4=function(p){let E=0;const h=p.data.length;for(let T=0;T<h;T++)E+=p.data[T];return 10*Math.abs(Math.ceil(100*E/h/5)-10)},j.applyMask=function(p,E){const h=E.size;for(let R=0;R<h;R++)for(let T=0;T<h;T++)E.isReserved(T,R)||E.xor(T,R,C(p,T,R))},j.getBestMask=function(p,E){const h=Object.keys(j.Patterns).length;let R=0,T=1/0;for(let B=0;B<h;B++){E(B),j.applyMask(B,p);const q=j.getPenaltyN1(p)+j.getPenaltyN2(p)+j.getPenaltyN3(p)+j.getPenaltyN4(p);j.applyMask(B,p),q<T&&(T=q,R=B)}return R}},838:(xt,j,M)=>{const C=M(1604),w=M(6082);j.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},j.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},j.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},j.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},j.MIXED={bit:-1},j.getCharCountIndicator=function(h,R){if(!h.ccBits)throw new Error("Invalid mode: "+h);if(!C.isValid(R))throw new Error("Invalid version: "+R);return R>=1&&R<10?h.ccBits[0]:R<27?h.ccBits[1]:h.ccBits[2]},j.getBestModeForData=function(h){return w.testNumeric(h)?j.NUMERIC:w.testAlphanumeric(h)?j.ALPHANUMERIC:w.testKanji(h)?j.KANJI:j.BYTE},j.toString=function(h){if(h&&h.id)return h.id;throw new Error("Invalid mode")},j.isValid=function(h){return h&&h.bit&&h.ccBits},j.from=function(h,R){if(j.isValid(h))return h;try{return function p(E){if("string"!=typeof E)throw new Error("Param is not a string");switch(E.toLowerCase()){case"numeric":return j.NUMERIC;case"alphanumeric":return j.ALPHANUMERIC;case"kanji":return j.KANJI;case"byte":return j.BYTE;default:throw new Error("Unknown mode: "+E)}}(h)}catch{return R}}},7035:(xt,j,M)=>{const C=M(838);function w(p){this.mode=C.NUMERIC,this.data=p.toString()}w.getBitsLength=function(E){return 10*Math.floor(E/3)+(E%3?E%3*3+1:0)},w.prototype.getLength=function(){return this.data.length},w.prototype.getBitsLength=function(){return w.getBitsLength(this.data.length)},w.prototype.write=function(E){let h,R,T;for(h=0;h+3<=this.data.length;h+=3)R=this.data.substr(h,3),T=parseInt(R,10),E.put(T,10);const B=this.data.length-h;B>0&&(R=this.data.substr(h),T=parseInt(R,10),E.put(T,3*B+1))},xt.exports=w},7767:(xt,j,M)=>{const C=M(6965);j.mul=function(p,E){const h=new Uint8Array(p.length+E.length-1);for(let R=0;R<p.length;R++)for(let T=0;T<E.length;T++)h[R+T]^=C.mul(p[R],E[T]);return h},j.mod=function(p,E){let h=new Uint8Array(p);for(;h.length-E.length>=0;){const R=h[0];for(let B=0;B<E.length;B++)h[B]^=C.mul(E[B],R);let T=0;for(;T<h.length&&0===h[T];)T++;h=h.slice(T)}return h},j.generateECPolynomial=function(p){let E=new Uint8Array([1]);for(let h=0;h<p;h++)E=j.mul(E,new Uint8Array([1,C.exp(h)]));return E}},8715:(xt,j,M)=>{const C=M(2656),w=M(139),p=M(4481),E=M(8038),h=M(919),R=M(9202),T=M(9366),B=M(2296),q=M(6758),st=M(8925),ft=M(9211),tt=M(838),lt=M(7939);function t(dt,yt,it){const ut=dt.size,b=ft.getEncodedBits(yt,it);let s,c;for(s=0;s<15;s++)c=1==(b>>s&1),dt.set(s<6?s:s<8?s+1:ut-15+s,8,c,!0),dt.set(8,s<8?ut-s-1:s<9?15-s-1+1:15-s-1,c,!0);dt.set(ut-8,8,1,!0)}function Dt(dt,yt,it,ut){let b;if(Array.isArray(dt))b=lt.fromArray(dt);else{if("string"!=typeof dt)throw new Error("Invalid data");{let x=yt;if(!x){const S=lt.rawSplit(dt);x=st.getBestVersionForData(S,it)}b=lt.fromString(dt,x||40)}}const s=st.getBestVersionForData(b,it);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(yt){if(yt<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else yt=s;const c=function at(dt,yt,it){const ut=new p;it.forEach(function(m){ut.put(m.mode.bit,4),ut.put(m.getLength(),tt.getCharCountIndicator(m.mode,dt)),m.write(ut)});const c=8*(C.getSymbolTotalCodewords(dt)-B.getTotalCodewordsCount(dt,yt));for(ut.getLengthInBits()+4<=c&&ut.put(0,4);ut.getLengthInBits()%8!=0;)ut.putBit(0);const d=(c-ut.getLengthInBits())/8;for(let m=0;m<d;m++)ut.put(m%2?17:236,8);return function At(dt,yt,it){const ut=C.getSymbolTotalCodewords(yt),s=ut-B.getTotalCodewordsCount(yt,it),c=B.getBlocksCount(yt,it),m=c-ut%c,x=Math.floor(ut/c),S=Math.floor(s/c),I=S+1,y=x-S,l=new q(y);let _=0;const ot=new Array(c),mt=new Array(c);let pt=0;const Et=new Uint8Array(dt.buffer);for(let Nt=0;Nt<c;Nt++){const be=Nt<m?S:I;ot[Nt]=Et.slice(_,_+be),mt[Nt]=l.encode(ot[Nt]),_+=be,pt=Math.max(pt,be)}const Ft=new Uint8Array(ut);let Lt,Ct,jt=0;for(Lt=0;Lt<pt;Lt++)for(Ct=0;Ct<c;Ct++)Lt<ot[Ct].length&&(Ft[jt++]=ot[Ct][Lt]);for(Lt=0;Lt<y;Lt++)for(Ct=0;Ct<c;Ct++)Ft[jt++]=mt[Ct][Lt];return Ft}(ut,dt,yt)}(yt,it,b),d=C.getSymbolSize(yt),m=new E(d);return function N(dt,yt){const it=dt.size,ut=R.getPositions(yt);for(let b=0;b<ut.length;b++){const s=ut[b][0],c=ut[b][1];for(let d=-1;d<=7;d++)if(!(s+d<=-1||it<=s+d))for(let m=-1;m<=7;m++)c+m<=-1||it<=c+m||dt.set(s+d,c+m,d>=0&&d<=6&&(0===m||6===m)||m>=0&&m<=6&&(0===d||6===d)||d>=2&&d<=4&&m>=2&&m<=4,!0)}}(m,yt),function H(dt){const yt=dt.size;for(let it=8;it<yt-8;it++){const ut=it%2==0;dt.set(it,6,ut,!0),dt.set(6,it,ut,!0)}}(m),function ct(dt,yt){const it=h.getPositions(yt);for(let ut=0;ut<it.length;ut++){const b=it[ut][0],s=it[ut][1];for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)dt.set(b+c,s+d,-2===c||2===c||-2===d||2===d||0===c&&0===d,!0)}}(m,yt),t(m,it,0),yt>=7&&function W(dt,yt){const it=dt.size,ut=st.getEncodedBits(yt);let b,s,c;for(let d=0;d<18;d++)b=Math.floor(d/3),s=d%3+it-8-3,c=1==(ut>>d&1),dt.set(b,s,c,!0),dt.set(s,b,c,!0)}(m,yt),function rt(dt,yt){const it=dt.size;let ut=-1,b=it-1,s=7,c=0;for(let d=it-1;d>0;d-=2)for(6===d&&d--;;){for(let m=0;m<2;m++)if(!dt.isReserved(b,d-m)){let x=!1;c<yt.length&&(x=1==(yt[c]>>>s&1)),dt.set(b,d-m,x),s--,-1===s&&(c++,s=7)}if(b+=ut,b<0||it<=b){b-=ut,ut=-ut;break}}}(m,c),isNaN(ut)&&(ut=T.getBestMask(m,t.bind(null,m,it))),T.applyMask(ut,m),t(m,it,ut),{modules:m,version:yt,errorCorrectionLevel:it,maskPattern:ut,segments:b}}j.create=function(yt,it){if(typeof yt>"u"||""===yt)throw new Error("No input text");let b,s,ut=w.M;return typeof it<"u"&&(ut=w.from(it.errorCorrectionLevel,w.M),b=st.from(it.version),s=T.from(it.maskPattern),it.toSJISFunc&&C.setToSJISFunction(it.toSJISFunc)),Dt(yt,b,ut,s)}},6758:(xt,j,M)=>{const C=M(7767);function w(p){this.genPoly=void 0,this.degree=p,this.degree&&this.initialize(this.degree)}w.prototype.initialize=function(E){this.degree=E,this.genPoly=C.generateECPolynomial(this.degree)},w.prototype.encode=function(E){if(!this.genPoly)throw new Error("Encoder not initialized");const h=new Uint8Array(E.length+this.degree);h.set(E);const R=C.mod(h,this.genPoly),T=this.degree-R.length;if(T>0){const B=new Uint8Array(this.degree);return B.set(R,T),B}return R},xt.exports=w},6082:(xt,j)=>{const M="[0-9]+";let w="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";w=w.replace(/u/g,"\\u");const p="(?:(?![A-Z0-9 $%*+\\-./:]|"+w+")(?:.|[\r\n]))+";j.KANJI=new RegExp(w,"g"),j.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),j.BYTE=new RegExp(p,"g"),j.NUMERIC=new RegExp(M,"g"),j.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const E=new RegExp("^"+w+"$"),h=new RegExp("^"+M+"$"),R=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");j.testKanji=function(B){return E.test(B)},j.testNumeric=function(B){return h.test(B)},j.testAlphanumeric=function(B){return R.test(B)}},7939:(xt,j,M)=>{const C=M(838),w=M(7035),p=M(387),E=M(1736),h=M(1971),R=M(6082),T=M(2656),B=M(243);function q(W){return unescape(encodeURIComponent(W)).length}function st(W,t,rt){const at=[];let At;for(;null!==(At=W.exec(rt));)at.push({data:At[0],index:At.index,mode:t,length:At[0].length});return at}function ft(W){const t=st(R.NUMERIC,C.NUMERIC,W),rt=st(R.ALPHANUMERIC,C.ALPHANUMERIC,W);let at,At;return T.isKanjiModeEnabled()?(at=st(R.BYTE,C.BYTE,W),At=st(R.KANJI,C.KANJI,W)):(at=st(R.BYTE_KANJI,C.BYTE,W),At=[]),t.concat(rt,at,At).sort(function(dt,yt){return dt.index-yt.index}).map(function(dt){return{data:dt.data,mode:dt.mode,length:dt.length}})}function tt(W,t){switch(t){case C.NUMERIC:return w.getBitsLength(W);case C.ALPHANUMERIC:return p.getBitsLength(W);case C.KANJI:return h.getBitsLength(W);case C.BYTE:return E.getBitsLength(W)}}function ct(W,t){let rt;const at=C.getBestModeForData(W);if(rt=C.from(t,at),rt!==C.BYTE&&rt.bit<at.bit)throw new Error('"'+W+'" cannot be encoded with mode '+C.toString(rt)+".\n Suggested mode is: "+C.toString(at));switch(rt===C.KANJI&&!T.isKanjiModeEnabled()&&(rt=C.BYTE),rt){case C.NUMERIC:return new w(W);case C.ALPHANUMERIC:return new p(W);case C.KANJI:return new h(W);case C.BYTE:return new E(W)}}j.fromArray=function(t){return t.reduce(function(rt,at){return"string"==typeof at?rt.push(ct(at,null)):at.data&&rt.push(ct(at.data,at.mode)),rt},[])},j.fromString=function(t,rt){const At=function N(W){const t=[];for(let rt=0;rt<W.length;rt++){const at=W[rt];switch(at.mode){case C.NUMERIC:t.push([at,{data:at.data,mode:C.ALPHANUMERIC,length:at.length},{data:at.data,mode:C.BYTE,length:at.length}]);break;case C.ALPHANUMERIC:t.push([at,{data:at.data,mode:C.BYTE,length:at.length}]);break;case C.KANJI:t.push([at,{data:at.data,mode:C.BYTE,length:q(at.data)}]);break;case C.BYTE:t.push([{data:at.data,mode:C.BYTE,length:q(at.data)}])}}return t}(ft(t,T.isKanjiModeEnabled())),Dt=function H(W,t){const rt={},at={start:{}};let At=["start"];for(let Dt=0;Dt<W.length;Dt++){const dt=W[Dt],yt=[];for(let it=0;it<dt.length;it++){const ut=dt[it],b=""+Dt+it;yt.push(b),rt[b]={node:ut,lastCount:0},at[b]={};for(let s=0;s<At.length;s++){const c=At[s];rt[c]&&rt[c].node.mode===ut.mode?(at[c][b]=tt(rt[c].lastCount+ut.length,ut.mode)-tt(rt[c].lastCount,ut.mode),rt[c].lastCount+=ut.length):(rt[c]&&(rt[c].lastCount=ut.length),at[c][b]=tt(ut.length,ut.mode)+4+C.getCharCountIndicator(ut.mode,t))}}At=yt}for(let Dt=0;Dt<At.length;Dt++)at[At[Dt]].end=0;return{map:at,table:rt}}(At,rt),dt=B.find_path(Dt.map,"start","end"),yt=[];for(let it=1;it<dt.length-1;it++)yt.push(Dt.table[dt[it]].node);return j.fromArray(function lt(W){return W.reduce(function(t,rt){const at=t.length-1>=0?t[t.length-1]:null;return at&&at.mode===rt.mode?(t[t.length-1].data+=rt.data,t):(t.push(rt),t)},[])}(yt))},j.rawSplit=function(t){return j.fromArray(ft(t,T.isKanjiModeEnabled()))}},2656:(xt,j)=>{let M;const C=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];j.getSymbolSize=function(p){if(!p)throw new Error('"version" cannot be null or undefined');if(p<1||p>40)throw new Error('"version" should be in range from 1 to 40');return 4*p+17},j.getSymbolTotalCodewords=function(p){return C[p]},j.getBCHDigit=function(w){let p=0;for(;0!==w;)p++,w>>>=1;return p},j.setToSJISFunction=function(p){if("function"!=typeof p)throw new Error('"toSJISFunc" is not a valid function.');M=p},j.isKanjiModeEnabled=function(){return typeof M<"u"},j.toSJIS=function(p){return M(p)}},1604:(xt,j)=>{j.isValid=function(C){return!isNaN(C)&&C>=1&&C<=40}},8925:(xt,j,M)=>{const C=M(2656),w=M(2296),p=M(139),E=M(838),h=M(1604),T=C.getBCHDigit(7973);function q(tt,lt){return E.getCharCountIndicator(tt,lt)+4}function st(tt,lt){let N=0;return tt.forEach(function(H){const ct=q(H.mode,lt);N+=ct+H.getBitsLength()}),N}j.from=function(lt,N){return h.isValid(lt)?parseInt(lt,10):N},j.getCapacity=function(lt,N,H){if(!h.isValid(lt))throw new Error("Invalid QR Code version");typeof H>"u"&&(H=E.BYTE);const t=8*(C.getSymbolTotalCodewords(lt)-w.getTotalCodewordsCount(lt,N));if(H===E.MIXED)return t;const rt=t-q(H,lt);switch(H){case E.NUMERIC:return Math.floor(rt/10*3);case E.ALPHANUMERIC:return Math.floor(rt/11*2);case E.KANJI:return Math.floor(rt/13);default:return Math.floor(rt/8)}},j.getBestVersionForData=function(lt,N){let H;const ct=p.from(N,p.M);if(Array.isArray(lt)){if(lt.length>1)return function ft(tt,lt){for(let N=1;N<=40;N++)if(st(tt,N)<=j.getCapacity(N,lt,E.MIXED))return N}(lt,ct);if(0===lt.length)return 1;H=lt[0]}else H=lt;return function B(tt,lt,N){for(let H=1;H<=40;H++)if(lt<=j.getCapacity(H,N,tt))return H}(H.mode,H.getLength(),ct)},j.getEncodedBits=function(lt){if(!h.isValid(lt)||lt<7)throw new Error("Invalid QR Code version");let N=lt<<12;for(;C.getBCHDigit(N)-T>=0;)N^=7973<<C.getBCHDigit(N)-T;return lt<<12|N}},465:(xt,j,M)=>{const C=M(8428);j.render=function(h,R,T){let B=T,q=R;typeof B>"u"&&(!R||!R.getContext)&&(B=R,R=void 0),R||(q=function p(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),B=C.getOptions(B);const st=C.getImageWidth(h.modules.size,B),ft=q.getContext("2d"),tt=ft.createImageData(st,st);return C.qrToImageData(tt.data,h,B),function w(E,h,R){E.clearRect(0,0,h.width,h.height),h.style||(h.style={}),h.height=R,h.width=R,h.style.height=R+"px",h.style.width=R+"px"}(ft,q,st),ft.putImageData(tt,0,0),q},j.renderToDataURL=function(h,R,T){let B=T;return typeof B>"u"&&(!R||!R.getContext)&&(B=R,R=void 0),B||(B={}),j.render(h,R,B).toDataURL(B.type||"image/png",(B.rendererOpts||{}).quality)}},5510:(xt,j,M)=>{const C=M(8428);function w(h,R){const T=h.a/255,B=R+'="'+h.hex+'"';return T<1?B+" "+R+'-opacity="'+T.toFixed(2).slice(1)+'"':B}function p(h,R,T){let B=h+R;return typeof T<"u"&&(B+=" "+T),B}j.render=function(R,T,B){const q=C.getOptions(T),st=R.modules.size,ft=R.modules.data,tt=st+2*q.margin,lt=q.color.light.a?"<path "+w(q.color.light,"fill")+' d="M0 0h'+tt+"v"+tt+'H0z"/>':"",N="<path "+w(q.color.dark,"stroke")+' d="'+function E(h,R,T){let B="",q=0,st=!1,ft=0;for(let tt=0;tt<h.length;tt++){const lt=Math.floor(tt%R),N=Math.floor(tt/R);!lt&&!st&&(st=!0),h[tt]?(ft++,tt>0&&lt>0&&h[tt-1]||(B+=st?p("M",lt+T,.5+N+T):p("m",q,0),q=0,st=!1),lt+1<R&&h[tt+1]||(B+=p("h",ft),ft=0)):q++}return B}(ft,st,q.margin)+'"/>',W='<svg xmlns="http://www.w3.org/2000/svg" '+(q.width?'width="'+q.width+'" height="'+q.width+'" ':"")+'viewBox="0 0 '+tt+" "+tt+'" shape-rendering="crispEdges">'+lt+N+"</svg>\n";return"function"==typeof B&&B(null,W),W}},8428:(xt,j)=>{function M(C){if("number"==typeof C&&(C=C.toString()),"string"!=typeof C)throw new Error("Color should be defined as hex string");let w=C.slice().replace("#","").split("");if(w.length<3||5===w.length||w.length>8)throw new Error("Invalid hex color: "+C);(3===w.length||4===w.length)&&(w=Array.prototype.concat.apply([],w.map(function(E){return[E,E]}))),6===w.length&&w.push("F","F");const p=parseInt(w.join(""),16);return{r:p>>24&255,g:p>>16&255,b:p>>8&255,a:255&p,hex:"#"+w.slice(0,6).join("")}}j.getOptions=function(w){w||(w={}),w.color||(w.color={});const E=w.width&&w.width>=21?w.width:void 0;return{width:E,scale:E?4:w.scale||4,margin:typeof w.margin>"u"||null===w.margin||w.margin<0?4:w.margin,color:{dark:M(w.color.dark||"#000000ff"),light:M(w.color.light||"#ffffffff")},type:w.type,rendererOpts:w.rendererOpts||{}}},j.getScale=function(w,p){return p.width&&p.width>=w+2*p.margin?p.width/(w+2*p.margin):p.scale},j.getImageWidth=function(w,p){const E=j.getScale(w,p);return Math.floor((w+2*p.margin)*E)},j.qrToImageData=function(w,p,E){const h=p.modules.size,R=p.modules.data,T=j.getScale(h,E),B=Math.floor((h+2*E.margin)*T),q=E.margin*T,st=[E.color.light,E.color.dark];for(let ft=0;ft<B;ft++)for(let tt=0;tt<B;tt++){let lt=4*(ft*B+tt),N=E.color.light;ft>=q&&tt>=q&&ft<B-q&&tt<B-q&&(N=st[R[Math.floor((ft-q)/T)*h+Math.floor((tt-q)/T)]?1:0]),w[lt++]=N.r,w[lt++]=N.g,w[lt++]=N.b,w[lt]=N.a}}},917:function(xt,j,M){!function(C,w){"use strict";function p(b,s){if(!b)throw new Error(s||"Assertion failed")}function E(b,s){b.super_=s;var c=function(){};c.prototype=s.prototype,b.prototype=new c,b.prototype.constructor=b}function h(b,s,c){if(h.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,null!==b&&(("le"===s||"be"===s)&&(c=s,s=10),this._init(b||0,s||10,c||"be"))}var R;"object"==typeof C?C.exports=h:w.BN=h,h.BN=h,h.wordSize=26;try{R=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:M(7790).Buffer}catch{}function T(b,s){var c=b.charCodeAt(s);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function B(b,s,c){var d=T(b,c);return c-1>=s&&(d|=T(b,c-1)<<4),d}function q(b,s,c,d){for(var m=0,x=Math.min(b.length,c),S=s;S<x;S++){var I=b.charCodeAt(S)-48;m*=d,m+=I>=49?I-49+10:I>=17?I-17+10:I}return m}h.isBN=function(s){return s instanceof h||null!==s&&"object"==typeof s&&s.constructor.wordSize===h.wordSize&&Array.isArray(s.words)},h.max=function(s,c){return s.cmp(c)>0?s:c},h.min=function(s,c){return s.cmp(c)<0?s:c},h.prototype._init=function(s,c,d){if("number"==typeof s)return this._initNumber(s,c,d);if("object"==typeof s)return this._initArray(s,c,d);"hex"===c&&(c=16),p(c===(0|c)&&c>=2&&c<=36);var m=0;"-"===(s=s.toString().replace(/\s+/g,""))[0]&&(m++,this.negative=1),m<s.length&&(16===c?this._parseHex(s,m,d):(this._parseBase(s,c,m),"le"===d&&this._initArray(this.toArray(),c,d)))},h.prototype._initNumber=function(s,c,d){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[67108863&s],this.length=1):s<4503599627370496?(this.words=[67108863&s,s/67108864&67108863],this.length=2):(p(s<9007199254740992),this.words=[67108863&s,s/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),c,d)},h.prototype._initArray=function(s,c,d){if(p("number"==typeof s.length),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var x,S,I=0;if("be"===d)for(m=s.length-1,x=0;m>=0;m-=3)this.words[x]|=(S=s[m]|s[m-1]<<8|s[m-2]<<16)<<I&67108863,this.words[x+1]=S>>>26-I&67108863,(I+=24)>=26&&(I-=26,x++);else if("le"===d)for(m=0,x=0;m<s.length;m+=3)this.words[x]|=(S=s[m]|s[m+1]<<8|s[m+2]<<16)<<I&67108863,this.words[x+1]=S>>>26-I&67108863,(I+=24)>=26&&(I-=26,x++);return this.strip()},h.prototype._parseHex=function(s,c,d){this.length=Math.ceil((s.length-c)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var I,x=0,S=0;if("be"===d)for(m=s.length-1;m>=c;m-=2)I=B(s,c,m)<<x,this.words[S]|=67108863&I,x>=18?(x-=18,this.words[S+=1]|=I>>>26):x+=8;else for(m=(s.length-c)%2==0?c+1:c;m<s.length;m+=2)I=B(s,c,m)<<x,this.words[S]|=67108863&I,x>=18?(x-=18,this.words[S+=1]|=I>>>26):x+=8;this.strip()},h.prototype._parseBase=function(s,c,d){this.words=[0],this.length=1;for(var m=0,x=1;x<=67108863;x*=c)m++;m--,x=x/c|0;for(var S=s.length-d,I=S%m,y=Math.min(S,S-I)+d,l=0,_=d;_<y;_+=m)l=q(s,_,_+m,c),this.imuln(x),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==I){var ot=1;for(l=q(s,_,s.length,c),_=0;_<I;_++)ot*=c;this.imuln(ot),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},h.prototype.copy=function(s){s.words=new Array(this.length);for(var c=0;c<this.length;c++)s.words[c]=this.words[c];s.length=this.length,s.negative=this.negative,s.red=this.red},h.prototype.clone=function(){var s=new h(null);return this.copy(s),s},h.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var st=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ft=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function N(b,s,c){c.negative=s.negative^b.negative;var d=b.length+s.length|0;c.length=d,d=d-1|0;var m=0|b.words[0],x=0|s.words[0],S=m*x,y=S/67108864|0;c.words[0]=67108863&S;for(var l=1;l<d;l++){for(var _=y>>>26,ot=67108863&y,mt=Math.min(l,s.length-1),pt=Math.max(0,l-b.length+1);pt<=mt;pt++)_+=(S=(m=0|b.words[l-pt|0])*(x=0|s.words[pt])+ot)/67108864|0,ot=67108863&S;c.words[l]=0|ot,y=0|_}return 0!==y?c.words[l]=0|y:c.length--,c.strip()}h.prototype.toString=function(s,c){var d;if(c=0|c||1,16===(s=s||10)||"hex"===s){d="";for(var m=0,x=0,S=0;S<this.length;S++){var I=this.words[S],y=(16777215&(I<<m|x)).toString(16);d=0!=(x=I>>>24-m&16777215)||S!==this.length-1?st[6-y.length]+y+d:y+d,(m+=2)>=26&&(m-=26,S--)}for(0!==x&&(d=x.toString(16)+d);d.length%c!=0;)d="0"+d;return 0!==this.negative&&(d="-"+d),d}if(s===(0|s)&&s>=2&&s<=36){var l=ft[s],_=tt[s];d="";var ot=this.clone();for(ot.negative=0;!ot.isZero();){var mt=ot.modn(_).toString(s);d=(ot=ot.idivn(_)).isZero()?mt+d:st[l-mt.length]+mt+d}for(this.isZero()&&(d="0"+d);d.length%c!=0;)d="0"+d;return 0!==this.negative&&(d="-"+d),d}p(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var s=this.words[0];return 2===this.length?s+=67108864*this.words[1]:3===this.length&&1===this.words[2]?s+=4503599627370496+67108864*this.words[1]:this.length>2&&p(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-s:s},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(s,c){return p(typeof R<"u"),this.toArrayLike(R,s,c)},h.prototype.toArray=function(s,c){return this.toArrayLike(Array,s,c)},h.prototype.toArrayLike=function(s,c,d){var m=this.byteLength(),x=d||Math.max(1,m);p(m<=x,"byte array longer than desired length"),p(x>0,"Requested array length <= 0"),this.strip();var y,l,S="le"===c,I=new s(x),_=this.clone();if(S){for(l=0;!_.isZero();l++)y=_.andln(255),_.iushrn(8),I[l]=y;for(;l<x;l++)I[l]=0}else{for(l=0;l<x-m;l++)I[l]=0;for(l=0;!_.isZero();l++)y=_.andln(255),_.iushrn(8),I[x-l-1]=y}return I},h.prototype._countBits=Math.clz32?function(s){return 32-Math.clz32(s)}:function(s){var c=s,d=0;return c>=4096&&(d+=13,c>>>=13),c>=64&&(d+=7,c>>>=7),c>=8&&(d+=4,c>>>=4),c>=2&&(d+=2,c>>>=2),d+c},h.prototype._zeroBits=function(s){if(0===s)return 26;var c=s,d=0;return 8191&c||(d+=13,c>>>=13),127&c||(d+=7,c>>>=7),15&c||(d+=4,c>>>=4),3&c||(d+=2,c>>>=2),1&c||d++,d},h.prototype.bitLength=function(){var c=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+c},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,c=0;c<this.length;c++){var d=this._zeroBits(this.words[c]);if(s+=d,26!==d)break}return s},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(s){return 0!==this.negative?this.abs().inotn(s).iaddn(1):this.clone()},h.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var c=0;c<s.length;c++)this.words[c]=this.words[c]|s.words[c];return this.strip()},h.prototype.ior=function(s){return p(!(this.negative|s.negative)),this.iuor(s)},h.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},h.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},h.prototype.iuand=function(s){var c;c=this.length>s.length?s:this;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]&s.words[d];return this.length=c.length,this.strip()},h.prototype.iand=function(s){return p(!(this.negative|s.negative)),this.iuand(s)},h.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},h.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},h.prototype.iuxor=function(s){var c,d;this.length>s.length?(c=this,d=s):(c=s,d=this);for(var m=0;m<d.length;m++)this.words[m]=c.words[m]^d.words[m];if(this!==c)for(;m<c.length;m++)this.words[m]=c.words[m];return this.length=c.length,this.strip()},h.prototype.ixor=function(s){return p(!(this.negative|s.negative)),this.iuxor(s)},h.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},h.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},h.prototype.inotn=function(s){p("number"==typeof s&&s>=0);var c=0|Math.ceil(s/26),d=s%26;this._expand(c),d>0&&c--;for(var m=0;m<c;m++)this.words[m]=67108863&~this.words[m];return d>0&&(this.words[m]=~this.words[m]&67108863>>26-d),this.strip()},h.prototype.notn=function(s){return this.clone().inotn(s)},h.prototype.setn=function(s,c){p("number"==typeof s&&s>=0);var d=s/26|0,m=s%26;return this._expand(d+1),this.words[d]=c?this.words[d]|1<<m:this.words[d]&~(1<<m),this.strip()},h.prototype.iadd=function(s){var c,d,m;if(0!==this.negative&&0===s.negative)return this.negative=0,c=this.isub(s),this.negative^=1,this._normSign();if(0===this.negative&&0!==s.negative)return s.negative=0,c=this.isub(s),s.negative=1,c._normSign();this.length>s.length?(d=this,m=s):(d=s,m=this);for(var x=0,S=0;S<m.length;S++)this.words[S]=67108863&(c=(0|d.words[S])+(0|m.words[S])+x),x=c>>>26;for(;0!==x&&S<d.length;S++)this.words[S]=67108863&(c=(0|d.words[S])+x),x=c>>>26;if(this.length=d.length,0!==x)this.words[this.length]=x,this.length++;else if(d!==this)for(;S<d.length;S++)this.words[S]=d.words[S];return this},h.prototype.add=function(s){var c;return 0!==s.negative&&0===this.negative?(s.negative=0,c=this.sub(s),s.negative^=1,c):0===s.negative&&0!==this.negative?(this.negative=0,c=s.sub(this),this.negative=1,c):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},h.prototype.isub=function(s){if(0!==s.negative){s.negative=0;var c=this.iadd(s);return s.negative=1,c._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m,x,d=this.cmp(s);if(0===d)return this.negative=0,this.length=1,this.words[0]=0,this;d>0?(m=this,x=s):(m=s,x=this);for(var S=0,I=0;I<x.length;I++)S=(c=(0|m.words[I])-(0|x.words[I])+S)>>26,this.words[I]=67108863&c;for(;0!==S&&I<m.length;I++)S=(c=(0|m.words[I])+S)>>26,this.words[I]=67108863&c;if(0===S&&I<m.length&&m!==this)for(;I<m.length;I++)this.words[I]=m.words[I];return this.length=Math.max(this.length,I),m!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(s){return this.clone().isub(s)};var H=function(s,c,d){var y,l,_,m=s.words,x=c.words,S=d.words,I=0,ot=0|m[0],mt=8191&ot,pt=ot>>>13,Et=0|m[1],Ft=8191&Et,jt=Et>>>13,Lt=0|m[2],Ct=8191&Lt,Nt=Lt>>>13,be=0|m[3],Yt=8191&be,ie=be>>>13,nr=0|m[4],Wt=8191&nr,oe=nr>>>13,Pe=0|m[5],zt=8191&Pe,Zt=Pe>>>13,Tn=0|m[6],me=8191&Tn,Xt=Tn>>>13,rr=0|m[7],ge=8191&rr,Ht=rr>>>13,Bn=0|m[8],se=8191&Bn,ae=Bn>>>13,jn=0|m[9],le=8191&jn,Pt=jn>>>13,Ne=0|x[0],Jt=8191&Ne,ce=Ne>>>13,Fe=0|x[1],pe=8191&Fe,Qt=Fe>>>13,Xe=0|x[2],ue=8191&Xe,Vt=Xe>>>13,Nn=0|x[3],Gt=8191&Nn,fe=Nn>>>13,mn=0|x[4],qt=8191&mn,Tt=mn>>>13,en=0|x[5],Ut=8191&en,te=en>>>13,ir=0|x[6],Mt=8191&ir,$t=ir>>>13,or=0|x[7],ve=8191&or,ye=or>>>13,sr=0|x[8],we=8191&sr,Kt=sr>>>13,nn=0|x[9],ee=8191&nn,ne=nn>>>13;d.negative=s.negative^c.negative,d.length=19;var gn=(I+(y=Math.imul(mt,Jt))|0)+((8191&(l=(l=Math.imul(mt,ce))+Math.imul(pt,Jt)|0))<<13)|0;I=((_=Math.imul(pt,ce))+(l>>>13)|0)+(gn>>>26)|0,gn&=67108863,y=Math.imul(Ft,Jt),l=(l=Math.imul(Ft,ce))+Math.imul(jt,Jt)|0,_=Math.imul(jt,ce);var qe=(I+(y=y+Math.imul(mt,pe)|0)|0)+((8191&(l=(l=l+Math.imul(mt,Qt)|0)+Math.imul(pt,pe)|0))<<13)|0;I=((_=_+Math.imul(pt,Qt)|0)+(l>>>13)|0)+(qe>>>26)|0,qe&=67108863,y=Math.imul(Ct,Jt),l=(l=Math.imul(Ct,ce))+Math.imul(Nt,Jt)|0,_=Math.imul(Nt,ce),y=y+Math.imul(Ft,pe)|0,l=(l=l+Math.imul(Ft,Qt)|0)+Math.imul(jt,pe)|0,_=_+Math.imul(jt,Qt)|0;var re=(I+(y=y+Math.imul(mt,ue)|0)|0)+((8191&(l=(l=l+Math.imul(mt,Vt)|0)+Math.imul(pt,ue)|0))<<13)|0;I=((_=_+Math.imul(pt,Vt)|0)+(l>>>13)|0)+(re>>>26)|0,re&=67108863,y=Math.imul(Yt,Jt),l=(l=Math.imul(Yt,ce))+Math.imul(ie,Jt)|0,_=Math.imul(ie,ce),y=y+Math.imul(Ct,pe)|0,l=(l=l+Math.imul(Ct,Qt)|0)+Math.imul(Nt,pe)|0,_=_+Math.imul(Nt,Qt)|0,y=y+Math.imul(Ft,ue)|0,l=(l=l+Math.imul(Ft,Vt)|0)+Math.imul(jt,ue)|0,_=_+Math.imul(jt,Vt)|0;var Ot=(I+(y=y+Math.imul(mt,Gt)|0)|0)+((8191&(l=(l=l+Math.imul(mt,fe)|0)+Math.imul(pt,Gt)|0))<<13)|0;I=((_=_+Math.imul(pt,fe)|0)+(l>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,y=Math.imul(Wt,Jt),l=(l=Math.imul(Wt,ce))+Math.imul(oe,Jt)|0,_=Math.imul(oe,ce),y=y+Math.imul(Yt,pe)|0,l=(l=l+Math.imul(Yt,Qt)|0)+Math.imul(ie,pe)|0,_=_+Math.imul(ie,Qt)|0,y=y+Math.imul(Ct,ue)|0,l=(l=l+Math.imul(Ct,Vt)|0)+Math.imul(Nt,ue)|0,_=_+Math.imul(Nt,Vt)|0,y=y+Math.imul(Ft,Gt)|0,l=(l=l+Math.imul(Ft,fe)|0)+Math.imul(jt,Gt)|0,_=_+Math.imul(jt,fe)|0;var Te=(I+(y=y+Math.imul(mt,qt)|0)|0)+((8191&(l=(l=l+Math.imul(mt,Tt)|0)+Math.imul(pt,qt)|0))<<13)|0;I=((_=_+Math.imul(pt,Tt)|0)+(l>>>13)|0)+(Te>>>26)|0,Te&=67108863,y=Math.imul(zt,Jt),l=(l=Math.imul(zt,ce))+Math.imul(Zt,Jt)|0,_=Math.imul(Zt,ce),y=y+Math.imul(Wt,pe)|0,l=(l=l+Math.imul(Wt,Qt)|0)+Math.imul(oe,pe)|0,_=_+Math.imul(oe,Qt)|0,y=y+Math.imul(Yt,ue)|0,l=(l=l+Math.imul(Yt,Vt)|0)+Math.imul(ie,ue)|0,_=_+Math.imul(ie,Vt)|0,y=y+Math.imul(Ct,Gt)|0,l=(l=l+Math.imul(Ct,fe)|0)+Math.imul(Nt,Gt)|0,_=_+Math.imul(Nt,fe)|0,y=y+Math.imul(Ft,qt)|0,l=(l=l+Math.imul(Ft,Tt)|0)+Math.imul(jt,qt)|0,_=_+Math.imul(jt,Tt)|0;var pn=(I+(y=y+Math.imul(mt,Ut)|0)|0)+((8191&(l=(l=l+Math.imul(mt,te)|0)+Math.imul(pt,Ut)|0))<<13)|0;I=((_=_+Math.imul(pt,te)|0)+(l>>>13)|0)+(pn>>>26)|0,pn&=67108863,y=Math.imul(me,Jt),l=(l=Math.imul(me,ce))+Math.imul(Xt,Jt)|0,_=Math.imul(Xt,ce),y=y+Math.imul(zt,pe)|0,l=(l=l+Math.imul(zt,Qt)|0)+Math.imul(Zt,pe)|0,_=_+Math.imul(Zt,Qt)|0,y=y+Math.imul(Wt,ue)|0,l=(l=l+Math.imul(Wt,Vt)|0)+Math.imul(oe,ue)|0,_=_+Math.imul(oe,Vt)|0,y=y+Math.imul(Yt,Gt)|0,l=(l=l+Math.imul(Yt,fe)|0)+Math.imul(ie,Gt)|0,_=_+Math.imul(ie,fe)|0,y=y+Math.imul(Ct,qt)|0,l=(l=l+Math.imul(Ct,Tt)|0)+Math.imul(Nt,qt)|0,_=_+Math.imul(Nt,Tt)|0,y=y+Math.imul(Ft,Ut)|0,l=(l=l+Math.imul(Ft,te)|0)+Math.imul(jt,Ut)|0,_=_+Math.imul(jt,te)|0;var Je=(I+(y=y+Math.imul(mt,Mt)|0)|0)+((8191&(l=(l=l+Math.imul(mt,$t)|0)+Math.imul(pt,Mt)|0))<<13)|0;I=((_=_+Math.imul(pt,$t)|0)+(l>>>13)|0)+(Je>>>26)|0,Je&=67108863,y=Math.imul(ge,Jt),l=(l=Math.imul(ge,ce))+Math.imul(Ht,Jt)|0,_=Math.imul(Ht,ce),y=y+Math.imul(me,pe)|0,l=(l=l+Math.imul(me,Qt)|0)+Math.imul(Xt,pe)|0,_=_+Math.imul(Xt,Qt)|0,y=y+Math.imul(zt,ue)|0,l=(l=l+Math.imul(zt,Vt)|0)+Math.imul(Zt,ue)|0,_=_+Math.imul(Zt,Vt)|0,y=y+Math.imul(Wt,Gt)|0,l=(l=l+Math.imul(Wt,fe)|0)+Math.imul(oe,Gt)|0,_=_+Math.imul(oe,fe)|0,y=y+Math.imul(Yt,qt)|0,l=(l=l+Math.imul(Yt,Tt)|0)+Math.imul(ie,qt)|0,_=_+Math.imul(ie,Tt)|0,y=y+Math.imul(Ct,Ut)|0,l=(l=l+Math.imul(Ct,te)|0)+Math.imul(Nt,Ut)|0,_=_+Math.imul(Nt,te)|0,y=y+Math.imul(Ft,Mt)|0,l=(l=l+Math.imul(Ft,$t)|0)+Math.imul(jt,Mt)|0,_=_+Math.imul(jt,$t)|0;var rn=(I+(y=y+Math.imul(mt,ve)|0)|0)+((8191&(l=(l=l+Math.imul(mt,ye)|0)+Math.imul(pt,ve)|0))<<13)|0;I=((_=_+Math.imul(pt,ye)|0)+(l>>>13)|0)+(rn>>>26)|0,rn&=67108863,y=Math.imul(se,Jt),l=(l=Math.imul(se,ce))+Math.imul(ae,Jt)|0,_=Math.imul(ae,ce),y=y+Math.imul(ge,pe)|0,l=(l=l+Math.imul(ge,Qt)|0)+Math.imul(Ht,pe)|0,_=_+Math.imul(Ht,Qt)|0,y=y+Math.imul(me,ue)|0,l=(l=l+Math.imul(me,Vt)|0)+Math.imul(Xt,ue)|0,_=_+Math.imul(Xt,Vt)|0,y=y+Math.imul(zt,Gt)|0,l=(l=l+Math.imul(zt,fe)|0)+Math.imul(Zt,Gt)|0,_=_+Math.imul(Zt,fe)|0,y=y+Math.imul(Wt,qt)|0,l=(l=l+Math.imul(Wt,Tt)|0)+Math.imul(oe,qt)|0,_=_+Math.imul(oe,Tt)|0,y=y+Math.imul(Yt,Ut)|0,l=(l=l+Math.imul(Yt,te)|0)+Math.imul(ie,Ut)|0,_=_+Math.imul(ie,te)|0,y=y+Math.imul(Ct,Mt)|0,l=(l=l+Math.imul(Ct,$t)|0)+Math.imul(Nt,Mt)|0,_=_+Math.imul(Nt,$t)|0,y=y+Math.imul(Ft,ve)|0,l=(l=l+Math.imul(Ft,ye)|0)+Math.imul(jt,ve)|0,_=_+Math.imul(jt,ye)|0;var on=(I+(y=y+Math.imul(mt,we)|0)|0)+((8191&(l=(l=l+Math.imul(mt,Kt)|0)+Math.imul(pt,we)|0))<<13)|0;I=((_=_+Math.imul(pt,Kt)|0)+(l>>>13)|0)+(on>>>26)|0,on&=67108863,y=Math.imul(le,Jt),l=(l=Math.imul(le,ce))+Math.imul(Pt,Jt)|0,_=Math.imul(Pt,ce),y=y+Math.imul(se,pe)|0,l=(l=l+Math.imul(se,Qt)|0)+Math.imul(ae,pe)|0,_=_+Math.imul(ae,Qt)|0,y=y+Math.imul(ge,ue)|0,l=(l=l+Math.imul(ge,Vt)|0)+Math.imul(Ht,ue)|0,_=_+Math.imul(Ht,Vt)|0,y=y+Math.imul(me,Gt)|0,l=(l=l+Math.imul(me,fe)|0)+Math.imul(Xt,Gt)|0,_=_+Math.imul(Xt,fe)|0,y=y+Math.imul(zt,qt)|0,l=(l=l+Math.imul(zt,Tt)|0)+Math.imul(Zt,qt)|0,_=_+Math.imul(Zt,Tt)|0,y=y+Math.imul(Wt,Ut)|0,l=(l=l+Math.imul(Wt,te)|0)+Math.imul(oe,Ut)|0,_=_+Math.imul(oe,te)|0,y=y+Math.imul(Yt,Mt)|0,l=(l=l+Math.imul(Yt,$t)|0)+Math.imul(ie,Mt)|0,_=_+Math.imul(ie,$t)|0,y=y+Math.imul(Ct,ve)|0,l=(l=l+Math.imul(Ct,ye)|0)+Math.imul(Nt,ve)|0,_=_+Math.imul(Nt,ye)|0,y=y+Math.imul(Ft,we)|0,l=(l=l+Math.imul(Ft,Kt)|0)+Math.imul(jt,we)|0,_=_+Math.imul(jt,Kt)|0;var vn=(I+(y=y+Math.imul(mt,ee)|0)|0)+((8191&(l=(l=l+Math.imul(mt,ne)|0)+Math.imul(pt,ee)|0))<<13)|0;I=((_=_+Math.imul(pt,ne)|0)+(l>>>13)|0)+(vn>>>26)|0,vn&=67108863,y=Math.imul(le,pe),l=(l=Math.imul(le,Qt))+Math.imul(Pt,pe)|0,_=Math.imul(Pt,Qt),y=y+Math.imul(se,ue)|0,l=(l=l+Math.imul(se,Vt)|0)+Math.imul(ae,ue)|0,_=_+Math.imul(ae,Vt)|0,y=y+Math.imul(ge,Gt)|0,l=(l=l+Math.imul(ge,fe)|0)+Math.imul(Ht,Gt)|0,_=_+Math.imul(Ht,fe)|0,y=y+Math.imul(me,qt)|0,l=(l=l+Math.imul(me,Tt)|0)+Math.imul(Xt,qt)|0,_=_+Math.imul(Xt,Tt)|0,y=y+Math.imul(zt,Ut)|0,l=(l=l+Math.imul(zt,te)|0)+Math.imul(Zt,Ut)|0,_=_+Math.imul(Zt,te)|0,y=y+Math.imul(Wt,Mt)|0,l=(l=l+Math.imul(Wt,$t)|0)+Math.imul(oe,Mt)|0,_=_+Math.imul(oe,$t)|0,y=y+Math.imul(Yt,ve)|0,l=(l=l+Math.imul(Yt,ye)|0)+Math.imul(ie,ve)|0,_=_+Math.imul(ie,ye)|0,y=y+Math.imul(Ct,we)|0,l=(l=l+Math.imul(Ct,Kt)|0)+Math.imul(Nt,we)|0,_=_+Math.imul(Nt,Kt)|0;var yn=(I+(y=y+Math.imul(Ft,ee)|0)|0)+((8191&(l=(l=l+Math.imul(Ft,ne)|0)+Math.imul(jt,ee)|0))<<13)|0;I=((_=_+Math.imul(jt,ne)|0)+(l>>>13)|0)+(yn>>>26)|0,yn&=67108863,y=Math.imul(le,ue),l=(l=Math.imul(le,Vt))+Math.imul(Pt,ue)|0,_=Math.imul(Pt,Vt),y=y+Math.imul(se,Gt)|0,l=(l=l+Math.imul(se,fe)|0)+Math.imul(ae,Gt)|0,_=_+Math.imul(ae,fe)|0,y=y+Math.imul(ge,qt)|0,l=(l=l+Math.imul(ge,Tt)|0)+Math.imul(Ht,qt)|0,_=_+Math.imul(Ht,Tt)|0,y=y+Math.imul(me,Ut)|0,l=(l=l+Math.imul(me,te)|0)+Math.imul(Xt,Ut)|0,_=_+Math.imul(Xt,te)|0,y=y+Math.imul(zt,Mt)|0,l=(l=l+Math.imul(zt,$t)|0)+Math.imul(Zt,Mt)|0,_=_+Math.imul(Zt,$t)|0,y=y+Math.imul(Wt,ve)|0,l=(l=l+Math.imul(Wt,ye)|0)+Math.imul(oe,ve)|0,_=_+Math.imul(oe,ye)|0,y=y+Math.imul(Yt,we)|0,l=(l=l+Math.imul(Yt,Kt)|0)+Math.imul(ie,we)|0,_=_+Math.imul(ie,Kt)|0;var he=(I+(y=y+Math.imul(Ct,ee)|0)|0)+((8191&(l=(l=l+Math.imul(Ct,ne)|0)+Math.imul(Nt,ee)|0))<<13)|0;I=((_=_+Math.imul(Nt,ne)|0)+(l>>>13)|0)+(he>>>26)|0,he&=67108863,y=Math.imul(le,Gt),l=(l=Math.imul(le,fe))+Math.imul(Pt,Gt)|0,_=Math.imul(Pt,fe),y=y+Math.imul(se,qt)|0,l=(l=l+Math.imul(se,Tt)|0)+Math.imul(ae,qt)|0,_=_+Math.imul(ae,Tt)|0,y=y+Math.imul(ge,Ut)|0,l=(l=l+Math.imul(ge,te)|0)+Math.imul(Ht,Ut)|0,_=_+Math.imul(Ht,te)|0,y=y+Math.imul(me,Mt)|0,l=(l=l+Math.imul(me,$t)|0)+Math.imul(Xt,Mt)|0,_=_+Math.imul(Xt,$t)|0,y=y+Math.imul(zt,ve)|0,l=(l=l+Math.imul(zt,ye)|0)+Math.imul(Zt,ve)|0,_=_+Math.imul(Zt,ye)|0,y=y+Math.imul(Wt,we)|0,l=(l=l+Math.imul(Wt,Kt)|0)+Math.imul(oe,we)|0,_=_+Math.imul(oe,Kt)|0;var wn=(I+(y=y+Math.imul(Yt,ee)|0)|0)+((8191&(l=(l=l+Math.imul(Yt,ne)|0)+Math.imul(ie,ee)|0))<<13)|0;I=((_=_+Math.imul(ie,ne)|0)+(l>>>13)|0)+(wn>>>26)|0,wn&=67108863,y=Math.imul(le,qt),l=(l=Math.imul(le,Tt))+Math.imul(Pt,qt)|0,_=Math.imul(Pt,Tt),y=y+Math.imul(se,Ut)|0,l=(l=l+Math.imul(se,te)|0)+Math.imul(ae,Ut)|0,_=_+Math.imul(ae,te)|0,y=y+Math.imul(ge,Mt)|0,l=(l=l+Math.imul(ge,$t)|0)+Math.imul(Ht,Mt)|0,_=_+Math.imul(Ht,$t)|0,y=y+Math.imul(me,ve)|0,l=(l=l+Math.imul(me,ye)|0)+Math.imul(Xt,ve)|0,_=_+Math.imul(Xt,ye)|0,y=y+Math.imul(zt,we)|0,l=(l=l+Math.imul(zt,Kt)|0)+Math.imul(Zt,we)|0,_=_+Math.imul(Zt,Kt)|0;var Me=(I+(y=y+Math.imul(Wt,ee)|0)|0)+((8191&(l=(l=l+Math.imul(Wt,ne)|0)+Math.imul(oe,ee)|0))<<13)|0;I=((_=_+Math.imul(oe,ne)|0)+(l>>>13)|0)+(Me>>>26)|0,Me&=67108863,y=Math.imul(le,Ut),l=(l=Math.imul(le,te))+Math.imul(Pt,Ut)|0,_=Math.imul(Pt,te),y=y+Math.imul(se,Mt)|0,l=(l=l+Math.imul(se,$t)|0)+Math.imul(ae,Mt)|0,_=_+Math.imul(ae,$t)|0,y=y+Math.imul(ge,ve)|0,l=(l=l+Math.imul(ge,ye)|0)+Math.imul(Ht,ve)|0,_=_+Math.imul(Ht,ye)|0,y=y+Math.imul(me,we)|0,l=(l=l+Math.imul(me,Kt)|0)+Math.imul(Xt,we)|0,_=_+Math.imul(Xt,Kt)|0;var He=(I+(y=y+Math.imul(zt,ee)|0)|0)+((8191&(l=(l=l+Math.imul(zt,ne)|0)+Math.imul(Zt,ee)|0))<<13)|0;I=((_=_+Math.imul(Zt,ne)|0)+(l>>>13)|0)+(He>>>26)|0,He&=67108863,y=Math.imul(le,Mt),l=(l=Math.imul(le,$t))+Math.imul(Pt,Mt)|0,_=Math.imul(Pt,$t),y=y+Math.imul(se,ve)|0,l=(l=l+Math.imul(se,ye)|0)+Math.imul(ae,ve)|0,_=_+Math.imul(ae,ye)|0,y=y+Math.imul(ge,we)|0,l=(l=l+Math.imul(ge,Kt)|0)+Math.imul(Ht,we)|0,_=_+Math.imul(Ht,Kt)|0;var bn=(I+(y=y+Math.imul(me,ee)|0)|0)+((8191&(l=(l=l+Math.imul(me,ne)|0)+Math.imul(Xt,ee)|0))<<13)|0;I=((_=_+Math.imul(Xt,ne)|0)+(l>>>13)|0)+(bn>>>26)|0,bn&=67108863,y=Math.imul(le,ve),l=(l=Math.imul(le,ye))+Math.imul(Pt,ve)|0,_=Math.imul(Pt,ye),y=y+Math.imul(se,we)|0,l=(l=l+Math.imul(se,Kt)|0)+Math.imul(ae,we)|0,_=_+Math.imul(ae,Kt)|0;var _n=(I+(y=y+Math.imul(ge,ee)|0)|0)+((8191&(l=(l=l+Math.imul(ge,ne)|0)+Math.imul(Ht,ee)|0))<<13)|0;I=((_=_+Math.imul(Ht,ne)|0)+(l>>>13)|0)+(_n>>>26)|0,_n&=67108863,y=Math.imul(le,we),l=(l=Math.imul(le,Kt))+Math.imul(Pt,we)|0,_=Math.imul(Pt,Kt);var Ln=(I+(y=y+Math.imul(se,ee)|0)|0)+((8191&(l=(l=l+Math.imul(se,ne)|0)+Math.imul(ae,ee)|0))<<13)|0;I=((_=_+Math.imul(ae,ne)|0)+(l>>>13)|0)+(Ln>>>26)|0,Ln&=67108863;var xn=(I+(y=Math.imul(le,ee))|0)+((8191&(l=(l=Math.imul(le,ne))+Math.imul(Pt,ee)|0))<<13)|0;return I=((_=Math.imul(Pt,ne))+(l>>>13)|0)+(xn>>>26)|0,xn&=67108863,S[0]=gn,S[1]=qe,S[2]=re,S[3]=Ot,S[4]=Te,S[5]=pn,S[6]=Je,S[7]=rn,S[8]=on,S[9]=vn,S[10]=yn,S[11]=he,S[12]=wn,S[13]=Me,S[14]=He,S[15]=bn,S[16]=_n,S[17]=Ln,S[18]=xn,0!==I&&(S[19]=I,d.length++),d};function W(b,s,c){return(new t).mulp(b,s,c)}function t(b,s){this.x=b,this.y=s}Math.imul||(H=N),h.prototype.mulTo=function(s,c){var d,m=this.length+s.length;return d=10===this.length&&10===s.length?H(this,s,c):m<63?N(this,s,c):m<1024?function ct(b,s,c){c.negative=s.negative^b.negative,c.length=b.length+s.length;for(var d=0,m=0,x=0;x<c.length-1;x++){var S=m;m=0;for(var I=67108863&d,y=Math.min(x,s.length-1),l=Math.max(0,x-b.length+1);l<=y;l++){var pt=(0|b.words[x-l])*(0|s.words[l]),Et=67108863&pt;I=67108863&(Et=Et+I|0),m+=(S=(S=S+(pt/67108864|0)|0)+(Et>>>26)|0)>>>26,S&=67108863}c.words[x]=I,d=S,S=m}return 0!==d?c.words[x]=d:c.length--,c.strip()}(this,s,c):W(this,s,c),d},t.prototype.makeRBT=function(s){for(var c=new Array(s),d=h.prototype._countBits(s)-1,m=0;m<s;m++)c[m]=this.revBin(m,d,s);return c},t.prototype.revBin=function(s,c,d){if(0===s||s===d-1)return s;for(var m=0,x=0;x<c;x++)m|=(1&s)<<c-x-1,s>>=1;return m},t.prototype.permute=function(s,c,d,m,x,S){for(var I=0;I<S;I++)m[I]=c[s[I]],x[I]=d[s[I]]},t.prototype.transform=function(s,c,d,m,x,S){this.permute(S,s,c,d,m,x);for(var I=1;I<x;I<<=1)for(var y=I<<1,l=Math.cos(2*Math.PI/y),_=Math.sin(2*Math.PI/y),ot=0;ot<x;ot+=y)for(var mt=l,pt=_,Et=0;Et<I;Et++){var Ft=d[ot+Et],jt=m[ot+Et],Lt=d[ot+Et+I],Ct=m[ot+Et+I],Nt=mt*Lt-pt*Ct;Ct=mt*Ct+pt*Lt,d[ot+Et]=Ft+(Lt=Nt),m[ot+Et]=jt+Ct,d[ot+Et+I]=Ft-Lt,m[ot+Et+I]=jt-Ct,Et!==y&&(Nt=l*mt-_*pt,pt=l*pt+_*mt,mt=Nt)}},t.prototype.guessLen13b=function(s,c){var d=1|Math.max(c,s),m=1&d,x=0;for(d=d/2|0;d;d>>>=1)x++;return 1<<x+1+m},t.prototype.conjugate=function(s,c,d){if(!(d<=1))for(var m=0;m<d/2;m++){var x=s[m];s[m]=s[d-m-1],s[d-m-1]=x,x=c[m],c[m]=-c[d-m-1],c[d-m-1]=-x}},t.prototype.normalize13b=function(s,c){for(var d=0,m=0;m<c/2;m++){var x=8192*Math.round(s[2*m+1]/c)+Math.round(s[2*m]/c)+d;s[m]=67108863&x,d=x<67108864?0:x/67108864|0}return s},t.prototype.convert13b=function(s,c,d,m){for(var x=0,S=0;S<c;S++)d[2*S]=8191&(x+=0|s[S]),d[2*S+1]=8191&(x>>>=13),x>>>=13;for(S=2*c;S<m;++S)d[S]=0;p(0===x),p(!(-8192&x))},t.prototype.stub=function(s){for(var c=new Array(s),d=0;d<s;d++)c[d]=0;return c},t.prototype.mulp=function(s,c,d){var m=2*this.guessLen13b(s.length,c.length),x=this.makeRBT(m),S=this.stub(m),I=new Array(m),y=new Array(m),l=new Array(m),_=new Array(m),ot=new Array(m),mt=new Array(m),pt=d.words;pt.length=m,this.convert13b(s.words,s.length,I,m),this.convert13b(c.words,c.length,_,m),this.transform(I,S,y,l,m,x),this.transform(_,S,ot,mt,m,x);for(var Et=0;Et<m;Et++){var Ft=y[Et]*ot[Et]-l[Et]*mt[Et];l[Et]=y[Et]*mt[Et]+l[Et]*ot[Et],y[Et]=Ft}return this.conjugate(y,l,m),this.transform(y,l,pt,S,m,x),this.conjugate(pt,S,m),this.normalize13b(pt,m),d.negative=s.negative^c.negative,d.length=s.length+c.length,d.strip()},h.prototype.mul=function(s){var c=new h(null);return c.words=new Array(this.length+s.length),this.mulTo(s,c)},h.prototype.mulf=function(s){var c=new h(null);return c.words=new Array(this.length+s.length),W(this,s,c)},h.prototype.imul=function(s){return this.clone().mulTo(s,this)},h.prototype.imuln=function(s){p("number"==typeof s),p(s<67108864);for(var c=0,d=0;d<this.length;d++){var m=(0|this.words[d])*s,x=(67108863&m)+(67108863&c);c>>=26,c+=m/67108864|0,c+=x>>>26,this.words[d]=67108863&x}return 0!==c&&(this.words[d]=c,this.length++),this},h.prototype.muln=function(s){return this.clone().imuln(s)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(s){var c=function lt(b){for(var s=new Array(b.bitLength()),c=0;c<s.length;c++){var m=c%26;s[c]=(b.words[c/26|0]&1<<m)>>>m}return s}(s);if(0===c.length)return new h(1);for(var d=this,m=0;m<c.length&&0===c[m];m++,d=d.sqr());if(++m<c.length)for(var x=d.sqr();m<c.length;m++,x=x.sqr())0!==c[m]&&(d=d.mul(x));return d},h.prototype.iushln=function(s){p("number"==typeof s&&s>=0);var x,c=s%26,d=(s-c)/26,m=67108863>>>26-c<<26-c;if(0!==c){var S=0;for(x=0;x<this.length;x++){var I=this.words[x]&m;this.words[x]=(0|this.words[x])-I<<c|S,S=I>>>26-c}S&&(this.words[x]=S,this.length++)}if(0!==d){for(x=this.length-1;x>=0;x--)this.words[x+d]=this.words[x];for(x=0;x<d;x++)this.words[x]=0;this.length+=d}return this.strip()},h.prototype.ishln=function(s){return p(0===this.negative),this.iushln(s)},h.prototype.iushrn=function(s,c,d){var m;p("number"==typeof s&&s>=0),m=c?(c-c%26)/26:0;var x=s%26,S=Math.min((s-x)/26,this.length),I=67108863^67108863>>>x<<x,y=d;if(m-=S,m=Math.max(0,m),y){for(var l=0;l<S;l++)y.words[l]=this.words[l];y.length=S}if(0!==S)if(this.length>S)for(this.length-=S,l=0;l<this.length;l++)this.words[l]=this.words[l+S];else this.words[0]=0,this.length=1;var _=0;for(l=this.length-1;l>=0&&(0!==_||l>=m);l--){var ot=0|this.words[l];this.words[l]=_<<26-x|ot>>>x,_=ot&I}return y&&0!==_&&(y.words[y.length++]=_),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(s,c,d){return p(0===this.negative),this.iushrn(s,c,d)},h.prototype.shln=function(s){return this.clone().ishln(s)},h.prototype.ushln=function(s){return this.clone().iushln(s)},h.prototype.shrn=function(s){return this.clone().ishrn(s)},h.prototype.ushrn=function(s){return this.clone().iushrn(s)},h.prototype.testn=function(s){p("number"==typeof s&&s>=0);var c=s%26,d=(s-c)/26;return!(this.length<=d||!(this.words[d]&1<<c))},h.prototype.imaskn=function(s){p("number"==typeof s&&s>=0);var c=s%26,d=(s-c)/26;return p(0===this.negative,"imaskn works only with positive numbers"),this.length<=d?this:(0!==c&&d++,this.length=Math.min(d,this.length),0!==c&&(this.words[this.length-1]&=67108863^67108863>>>c<<c),this.strip())},h.prototype.maskn=function(s){return this.clone().imaskn(s)},h.prototype.iaddn=function(s){return p("number"==typeof s),p(s<67108864),s<0?this.isubn(-s):0!==this.negative?1===this.length&&(0|this.words[0])<s?(this.words[0]=s-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},h.prototype._iaddn=function(s){this.words[0]+=s;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},h.prototype.isubn=function(s){if(p("number"==typeof s),p(s<67108864),s<0)return this.iaddn(-s);if(0!==this.negative)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},h.prototype.addn=function(s){return this.clone().iaddn(s)},h.prototype.subn=function(s){return this.clone().isubn(s)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(s,c,d){var x;this._expand(s.length+d);var S,I=0;for(x=0;x<s.length;x++){S=(0|this.words[x+d])+I;var y=(0|s.words[x])*c;I=((S-=67108863&y)>>26)-(y/67108864|0),this.words[x+d]=67108863&S}for(;x<this.length-d;x++)I=(S=(0|this.words[x+d])+I)>>26,this.words[x+d]=67108863&S;if(0===I)return this.strip();for(p(-1===I),I=0,x=0;x<this.length;x++)I=(S=-(0|this.words[x])+I)>>26,this.words[x]=67108863&S;return this.negative=1,this.strip()},h.prototype._wordDiv=function(s,c){var d,m=this.clone(),x=s,S=0|x.words[x.length-1];0!=(d=26-this._countBits(S))&&(x=x.ushln(d),m.iushln(d),S=0|x.words[x.length-1]);var l,y=m.length-x.length;if("mod"!==c){(l=new h(null)).length=y+1,l.words=new Array(l.length);for(var _=0;_<l.length;_++)l.words[_]=0}var ot=m.clone()._ishlnsubmul(x,1,y);0===ot.negative&&(m=ot,l&&(l.words[y]=1));for(var mt=y-1;mt>=0;mt--){var pt=67108864*(0|m.words[x.length+mt])+(0|m.words[x.length+mt-1]);for(pt=Math.min(pt/S|0,67108863),m._ishlnsubmul(x,pt,mt);0!==m.negative;)pt--,m.negative=0,m._ishlnsubmul(x,1,mt),m.isZero()||(m.negative^=1);l&&(l.words[mt]=pt)}return l&&l.strip(),m.strip(),"div"!==c&&0!==d&&m.iushrn(d),{div:l||null,mod:m}},h.prototype.divmod=function(s,c,d){return p(!s.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===s.negative?(S=this.neg().divmod(s,c),"mod"!==c&&(m=S.div.neg()),"div"!==c&&(x=S.mod.neg(),d&&0!==x.negative&&x.iadd(s)),{div:m,mod:x}):0===this.negative&&0!==s.negative?(S=this.divmod(s.neg(),c),"mod"!==c&&(m=S.div.neg()),{div:m,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),c),"div"!==c&&(x=S.mod.neg(),d&&0!==x.negative&&x.isub(s)),{div:S.div,mod:x}):s.length>this.length||this.cmp(s)<0?{div:new h(0),mod:this}:1===s.length?"div"===c?{div:this.divn(s.words[0]),mod:null}:"mod"===c?{div:null,mod:new h(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new h(this.modn(s.words[0]))}:this._wordDiv(s,c);var m,x,S},h.prototype.div=function(s){return this.divmod(s,"div",!1).div},h.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},h.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},h.prototype.divRound=function(s){var c=this.divmod(s);if(c.mod.isZero())return c.div;var d=0!==c.div.negative?c.mod.isub(s):c.mod,m=s.ushrn(1),x=s.andln(1),S=d.cmp(m);return S<0||1===x&&0===S?c.div:0!==c.div.negative?c.div.isubn(1):c.div.iaddn(1)},h.prototype.modn=function(s){p(s<=67108863);for(var c=(1<<26)%s,d=0,m=this.length-1;m>=0;m--)d=(c*d+(0|this.words[m]))%s;return d},h.prototype.idivn=function(s){p(s<=67108863);for(var c=0,d=this.length-1;d>=0;d--){var m=(0|this.words[d])+67108864*c;this.words[d]=m/s|0,c=m%s}return this.strip()},h.prototype.divn=function(s){return this.clone().idivn(s)},h.prototype.egcd=function(s){p(0===s.negative),p(!s.isZero());var c=this,d=s.clone();c=0!==c.negative?c.umod(s):c.clone();for(var m=new h(1),x=new h(0),S=new h(0),I=new h(1),y=0;c.isEven()&&d.isEven();)c.iushrn(1),d.iushrn(1),++y;for(var l=d.clone(),_=c.clone();!c.isZero();){for(var ot=0,mt=1;!(c.words[0]&mt)&&ot<26;++ot,mt<<=1);if(ot>0)for(c.iushrn(ot);ot-- >0;)(m.isOdd()||x.isOdd())&&(m.iadd(l),x.isub(_)),m.iushrn(1),x.iushrn(1);for(var pt=0,Et=1;!(d.words[0]&Et)&&pt<26;++pt,Et<<=1);if(pt>0)for(d.iushrn(pt);pt-- >0;)(S.isOdd()||I.isOdd())&&(S.iadd(l),I.isub(_)),S.iushrn(1),I.iushrn(1);c.cmp(d)>=0?(c.isub(d),m.isub(S),x.isub(I)):(d.isub(c),S.isub(m),I.isub(x))}return{a:S,b:I,gcd:d.iushln(y)}},h.prototype._invmp=function(s){p(0===s.negative),p(!s.isZero());var ot,c=this,d=s.clone();c=0!==c.negative?c.umod(s):c.clone();for(var m=new h(1),x=new h(0),S=d.clone();c.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;!(c.words[0]&y)&&I<26;++I,y<<=1);if(I>0)for(c.iushrn(I);I-- >0;)m.isOdd()&&m.iadd(S),m.iushrn(1);for(var l=0,_=1;!(d.words[0]&_)&&l<26;++l,_<<=1);if(l>0)for(d.iushrn(l);l-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);c.cmp(d)>=0?(c.isub(d),m.isub(x)):(d.isub(c),x.isub(m))}return(ot=0===c.cmpn(1)?m:x).cmpn(0)<0&&ot.iadd(s),ot},h.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var c=this.clone(),d=s.clone();c.negative=0,d.negative=0;for(var m=0;c.isEven()&&d.isEven();m++)c.iushrn(1),d.iushrn(1);for(;;){for(;c.isEven();)c.iushrn(1);for(;d.isEven();)d.iushrn(1);var x=c.cmp(d);if(x<0){var S=c;c=d,d=S}else if(0===x||0===d.cmpn(1))break;c.isub(d)}return d.iushln(m)},h.prototype.invm=function(s){return this.egcd(s).a.umod(s)},h.prototype.isEven=function(){return!(1&this.words[0])},h.prototype.isOdd=function(){return!(1&~this.words[0])},h.prototype.andln=function(s){return this.words[0]&s},h.prototype.bincn=function(s){p("number"==typeof s);var c=s%26,d=(s-c)/26,m=1<<c;if(this.length<=d)return this._expand(d+1),this.words[d]|=m,this;for(var x=m,S=d;0!==x&&S<this.length;S++){var I=0|this.words[S];x=(I+=x)>>>26,this.words[S]=I&=67108863}return 0!==x&&(this.words[S]=x,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(s){var d,c=s<0;if(0!==this.negative&&!c)return-1;if(0===this.negative&&c)return 1;if(this.strip(),this.length>1)d=1;else{c&&(s=-s),p(s<=67108863,"Number is too big");var m=0|this.words[0];d=m===s?0:m<s?-1:1}return 0!==this.negative?0|-d:d},h.prototype.cmp=function(s){if(0!==this.negative&&0===s.negative)return-1;if(0===this.negative&&0!==s.negative)return 1;var c=this.ucmp(s);return 0!==this.negative?0|-c:c},h.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var c=0,d=this.length-1;d>=0;d--){var m=0|this.words[d],x=0|s.words[d];if(m!==x){m<x?c=-1:m>x&&(c=1);break}}return c},h.prototype.gtn=function(s){return 1===this.cmpn(s)},h.prototype.gt=function(s){return 1===this.cmp(s)},h.prototype.gten=function(s){return this.cmpn(s)>=0},h.prototype.gte=function(s){return this.cmp(s)>=0},h.prototype.ltn=function(s){return-1===this.cmpn(s)},h.prototype.lt=function(s){return-1===this.cmp(s)},h.prototype.lten=function(s){return this.cmpn(s)<=0},h.prototype.lte=function(s){return this.cmp(s)<=0},h.prototype.eqn=function(s){return 0===this.cmpn(s)},h.prototype.eq=function(s){return 0===this.cmp(s)},h.red=function(s){return new it(s)},h.prototype.toRed=function(s){return p(!this.red,"Already a number in reduction context"),p(0===this.negative,"red works only with positives"),s.convertTo(this)._forceRed(s)},h.prototype.fromRed=function(){return p(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(s){return this.red=s,this},h.prototype.forceRed=function(s){return p(!this.red,"Already a number in reduction context"),this._forceRed(s)},h.prototype.redAdd=function(s){return p(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},h.prototype.redIAdd=function(s){return p(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},h.prototype.redSub=function(s){return p(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},h.prototype.redISub=function(s){return p(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},h.prototype.redShl=function(s){return p(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},h.prototype.redMul=function(s){return p(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},h.prototype.redIMul=function(s){return p(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},h.prototype.redSqr=function(){return p(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return p(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return p(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return p(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return p(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(s){return p(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var rt={k256:null,p224:null,p192:null,p25519:null};function at(b,s){this.name=b,this.p=new h(s,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function At(){at.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Dt(){at.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function dt(){at.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function yt(){at.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function it(b){if("string"==typeof b){var s=h._prime(b);this.m=s.p,this.prime=s}else p(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}function ut(b){it.call(this,b),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}at.prototype._tmp=function(){var s=new h(null);return s.words=new Array(Math.ceil(this.n/13)),s},at.prototype.ireduce=function(s){var d,c=s;do{this.split(c,this.tmp),d=(c=(c=this.imulK(c)).iadd(this.tmp)).bitLength()}while(d>this.n);var m=d<this.n?-1:c.ucmp(this.p);return 0===m?(c.words[0]=0,c.length=1):m>0?c.isub(this.p):void 0!==c.strip?c.strip():c._strip(),c},at.prototype.split=function(s,c){s.iushrn(this.n,0,c)},at.prototype.imulK=function(s){return s.imul(this.k)},E(At,at),At.prototype.split=function(s,c){for(var d=4194303,m=Math.min(s.length,9),x=0;x<m;x++)c.words[x]=s.words[x];if(c.length=m,s.length<=9)return s.words[0]=0,void(s.length=1);var S=s.words[9];for(c.words[c.length++]=S&d,x=10;x<s.length;x++){var I=0|s.words[x];s.words[x-10]=(I&d)<<4|S>>>22,S=I}s.words[x-10]=S>>>=22,s.length-=0===S&&s.length>10?10:9},At.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var c=0,d=0;d<s.length;d++){var m=0|s.words[d];s.words[d]=67108863&(c+=977*m),c=64*m+(c/67108864|0)}return 0===s.words[s.length-1]&&(s.length--,0===s.words[s.length-1]&&s.length--),s},E(Dt,at),E(dt,at),E(yt,at),yt.prototype.imulK=function(s){for(var c=0,d=0;d<s.length;d++){var m=19*(0|s.words[d])+c,x=67108863&m;m>>>=26,s.words[d]=x,c=m}return 0!==c&&(s.words[s.length++]=c),s},h._prime=function(s){if(rt[s])return rt[s];var c;if("k256"===s)c=new At;else if("p224"===s)c=new Dt;else if("p192"===s)c=new dt;else{if("p25519"!==s)throw new Error("Unknown prime "+s);c=new yt}return rt[s]=c,c},it.prototype._verify1=function(s){p(0===s.negative,"red works only with positives"),p(s.red,"red works only with red numbers")},it.prototype._verify2=function(s,c){p(!(s.negative|c.negative),"red works only with positives"),p(s.red&&s.red===c.red,"red works only with red numbers")},it.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},it.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},it.prototype.add=function(s,c){this._verify2(s,c);var d=s.add(c);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},it.prototype.iadd=function(s,c){this._verify2(s,c);var d=s.iadd(c);return d.cmp(this.m)>=0&&d.isub(this.m),d},it.prototype.sub=function(s,c){this._verify2(s,c);var d=s.sub(c);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},it.prototype.isub=function(s,c){this._verify2(s,c);var d=s.isub(c);return d.cmpn(0)<0&&d.iadd(this.m),d},it.prototype.shl=function(s,c){return this._verify1(s),this.imod(s.ushln(c))},it.prototype.imul=function(s,c){return this._verify2(s,c),this.imod(s.imul(c))},it.prototype.mul=function(s,c){return this._verify2(s,c),this.imod(s.mul(c))},it.prototype.isqr=function(s){return this.imul(s,s.clone())},it.prototype.sqr=function(s){return this.mul(s,s)},it.prototype.sqrt=function(s){if(s.isZero())return s.clone();var c=this.m.andln(3);if(p(c%2==1),3===c){var d=this.m.add(new h(1)).iushrn(2);return this.pow(s,d)}for(var m=this.m.subn(1),x=0;!m.isZero()&&0===m.andln(1);)x++,m.iushrn(1);p(!m.isZero());var S=new h(1).toRed(this),I=S.redNeg(),y=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,y).cmp(I);)l.redIAdd(I);for(var _=this.pow(l,m),ot=this.pow(s,m.addn(1).iushrn(1)),mt=this.pow(s,m),pt=x;0!==mt.cmp(S);){for(var Et=mt,Ft=0;0!==Et.cmp(S);Ft++)Et=Et.redSqr();p(Ft<pt);var jt=this.pow(_,new h(1).iushln(pt-Ft-1));ot=ot.redMul(jt),_=jt.redSqr(),mt=mt.redMul(_),pt=Ft}return ot},it.prototype.invm=function(s){var c=s._invmp(this.m);return 0!==c.negative?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},it.prototype.pow=function(s,c){if(c.isZero())return new h(1).toRed(this);if(0===c.cmpn(1))return s.clone();var m=new Array(16);m[0]=new h(1).toRed(this),m[1]=s;for(var x=2;x<m.length;x++)m[x]=this.mul(m[x-1],s);var S=m[0],I=0,y=0,l=c.bitLength()%26;for(0===l&&(l=26),x=c.length-1;x>=0;x--){for(var _=c.words[x],ot=l-1;ot>=0;ot--){var mt=_>>ot&1;S!==m[0]&&(S=this.sqr(S)),0!==mt||0!==I?(I<<=1,I|=mt,(4==++y||0===x&&0===ot)&&(S=this.mul(S,m[I]),y=0,I=0)):y=0}l=26}return S},it.prototype.convertTo=function(s){var c=s.umod(this.m);return c===s?c.clone():c},it.prototype.convertFrom=function(s){var c=s.clone();return c.red=null,c},h.mont=function(s){return new ut(s)},E(ut,it),ut.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},ut.prototype.convertFrom=function(s){var c=this.imod(s.mul(this.rinv));return c.red=null,c},ut.prototype.imul=function(s,c){if(s.isZero()||c.isZero())return s.words[0]=0,s.length=1,s;var d=s.imul(c),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=d.isub(m).iushrn(this.shift),S=x;return x.cmp(this.m)>=0?S=x.isub(this.m):x.cmpn(0)<0&&(S=x.iadd(this.m)),S._forceRed(this)},ut.prototype.mul=function(s,c){if(s.isZero()||c.isZero())return new h(0)._forceRed(this);var d=s.mul(c),m=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=d.isub(m).iushrn(this.shift),S=x;return x.cmp(this.m)>=0?S=x.isub(this.m):x.cmpn(0)<0&&(S=x.iadd(this.m)),S._forceRed(this)},ut.prototype.invm=function(s){return this.imod(s._invmp(this.m).mul(this.r2))._forceRed(this)}}(xt=M.nmd(xt),this)},243:xt=>{"use strict";var j={single_source_shortest_paths:function(M,C,w){var p={},E={};E[C]=0;var R,T,B,q,st,tt,h=j.PriorityQueue.make();for(h.push(C,0);!h.empty();)for(B in q=(R=h.pop()).cost,st=M[T=R.value]||{})st.hasOwnProperty(B)&&(tt=q+st[B],(typeof E[B]>"u"||E[B]>tt)&&(E[B]=tt,h.push(B,tt),p[B]=T));if(typeof w<"u"&&typeof E[w]>"u"){var H=["Could not find a path from ",C," to ",w,"."].join("");throw new Error(H)}return p},extract_shortest_path_from_predecessor_list:function(M,C){for(var w=[],p=C;p;)w.push(p),p=M[p];return w.reverse(),w},find_path:function(M,C,w){var p=j.single_source_shortest_paths(M,C,w);return j.extract_shortest_path_from_predecessor_list(p,w)},PriorityQueue:{make:function(M){var p,C=j.PriorityQueue,w={};for(p in M=M||{},C)C.hasOwnProperty(p)&&(w[p]=C[p]);return w.queue=[],w.sorter=M.sorter||C.default_sorter,w},default_sorter:function(M,C){return M.cost-C.cost},push:function(M,C){this.queue.push({value:M,cost:C}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};xt.exports=j},3174:xt=>{"use strict";xt.exports=function(M){for(var C=[],w=M.length,p=0;p<w;p++){var E=M.charCodeAt(p);if(E>=55296&&E<=56319&&w>p+1){var h=M.charCodeAt(p+1);h>=56320&&h<=57343&&(E=1024*(E-55296)+h-56320+65536,p+=1)}E<128?C.push(E):E<2048?(C.push(E>>6|192),C.push(63&E|128)):E<55296||E>=57344&&E<65536?(C.push(E>>12|224),C.push(E>>6&63|128),C.push(63&E|128)):E>=65536&&E<=1114111?(C.push(E>>18|240),C.push(E>>12&63|128),C.push(E>>6&63|128),C.push(63&E|128)):C.push(239,191,189)}return new Uint8Array(C).buffer}},7790:()=>{}}]);