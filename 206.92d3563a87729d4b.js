"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[206],{7206:(U,h,n)=>{n.r(h),n.d(h,{default:()=>W});var l=n(467),y=n(9345),d=n(177),e=n(4438),m=n(8834),C=n(3),u=n(2408),f=n(9213),v=n(9042),P=n(7575),R=n(7250),x=n(450),I=n(4823),b=n(9183),j=n(5245),$=n(7291),F=n(1413),c=n(6977),k=n(8141),w=n(9437),E=n(7673),S=n(8098),D=n(8729),G=n(497),B=n(833);const T=i=>["/chat",i];function _(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(),s=e.sdS(20);return e.Njj(o.resetSearch(s))}),e.nrm(1,"mat-icon",28),e.k0s()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_solid:x-mark"))}function N(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG(),s=e.sdS(20);return e.Njj(o.filterByQuery(s.value))}),e.nrm(1,"mat-icon",28),e.k0s()}2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_solid:magnifying-glass"))}function M(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",59),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.goToProjectDetails(o))}),e.EFF(1),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function Y(i,a){if(1&i&&(e.j41(0,"div",60),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function A(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",61)(1,"div",62)(2,"button",63),e.nrm(3,"mat-icon",64),e.k0s()(),e.j41(4,"div",62)(5,"button",65),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.toggleBookmark(o.nostrPubKey))}),e.nrm(6,"mat-icon",64),e.nI1(7,"async"),e.k0s()()()}if(2&i){let t;const r=e.XpG().$implicit,o=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(5,T,r.nostrPubKey)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:chat-bubble-left-right"),e.R7$(3),e.Y8G("svgIcon",null!=(t=e.bMT(7,3,o.bookmarks$))&&t.includes(r.nostrPubKey)?"heroicons_solid:bookmark":"heroicons_outline:bookmark")}}function X(i,a){if(1&i){const t=e.RV6();e.j41(0,"angor-card",23)(1,"div",30),e.nrm(2,"img",31),e.k0s(),e.j41(3,"div",32)(4,"div",33),e.nrm(5,"img",34),e.k0s(),e.j41(6,"div",35),e.nrm(7,"countdown-timer",36),e.k0s()(),e.j41(8,"div",37)(9,"div",38)(10,"div",39),e.DNE(11,M,2,1,"div",40)(12,Y,2,1,"div",41),e.j41(13,"div",42),e.EFF(14),e.k0s()(),e.DNE(15,A,8,7,"div",43),e.k0s(),e.nrm(16,"hr",44),e.j41(17,"div",45)(18,"div",46),e.nrm(19,"mat-icon",47),e.j41(20,"div",48)(21,"span",49),e.EFF(22,"Target Amount"),e.k0s(),e.j41(23,"span",50),e.EFF(24),e.nI1(25,"number"),e.k0s()()(),e.j41(26,"div",46),e.nrm(27,"mat-icon",47),e.j41(28,"div",48)(29,"span",49),e.EFF(30,"Start Date"),e.k0s(),e.j41(31,"span",50),e.EFF(32),e.nI1(33,"date"),e.k0s()()(),e.j41(34,"div",46),e.nrm(35,"mat-icon",47),e.j41(36,"div",48)(37,"span",49),e.EFF(38,"Penalty Days"),e.k0s(),e.j41(39,"span",50),e.EFF(40),e.k0s()()(),e.j41(41,"div",46),e.nrm(42,"mat-icon",47),e.j41(43,"div",48)(44,"span",49),e.EFF(45,"Expiry Date"),e.k0s(),e.j41(46,"span",50),e.EFF(47),e.nI1(48,"date"),e.k0s()()(),e.j41(49,"div",46),e.nrm(50,"mat-icon",47),e.j41(51,"div",48)(52,"span",49),e.EFF(53,"Stages"),e.k0s(),e.j41(54,"span",50),e.EFF(55),e.k0s()()(),e.j41(56,"div",46),e.nrm(57,"mat-icon",47),e.j41(58,"div",48)(59,"span",49),e.EFF(60,"Seeders"),e.k0s(),e.j41(61,"span",50),e.EFF(62),e.k0s()()()(),e.j41(63,"div",51)(64,"a",52)(65,"span",53),e.nrm(66,"mat-icon",54),e.j41(67,"span",55),e.EFF(68,"Invest Now"),e.k0s()()(),e.j41(69,"button",56),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.goToProjectDetails(o))}),e.j41(70,"span",53),e.nrm(71,"mat-icon",57),e.j41(72,"span",58),e.EFF(73,"View Details"),e.k0s()()()()()()}if(2&i){const t=a.$implicit,r=e.XpG();e.R7$(2),e.Y8G("src",t.banner||"/images/pages/profile/cover.jpg",e.B4B),e.R7$(3),e.Y8G("src",t.picture||"images/avatars/avatar-placeholder.png",e.B4B),e.R7$(2),e.Y8G("startDate",t.startDate)("expiryDate",t.expiryDate),e.R7$(4),e.Y8G("ngIf",t.displayName||t.name),e.R7$(),e.Y8G("ngIf",!t.name&&!t.displayName),e.R7$(2),e.SpI(" ",t.about||"No description available"," "),e.R7$(),e.Y8G("ngIf",t.displayName||t.name),e.R7$(4),e.Y8G("svgIcon","heroicons_outline:currency-dollar"),e.R7$(5),e.Lme("",e.bMT(25,24,t.targetAmount)," ","mainnet"===r.indexerService.getNetwork()?"BTC":"TBTC",""),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:calendar"),e.R7$(5),e.JRh(e.bMT(33,26,1e3*t.startDate)),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:clock"),e.R7$(5),e.SpI("",t.penaltyDays," days"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:calendar"),e.R7$(5),e.JRh(e.bMT(48,28,1e3*t.expiryDate)),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:chart-bar"),e.R7$(5),e.JRh((null==t.stages?null:t.stages.length)||0),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:user-group"),e.R7$(5),e.JRh((null==t.projectSeeders||null==t.projectSeeders.secretHashes?null:t.projectSeeders.secretHashes.length)||0),e.R7$(2),e.Y8G("href",("mainnet"===r.indexerService.getNetwork()?"https://beta.angor.io/view/":"https://test.angor.io/view/")+t.projectIdentifier,e.B4B),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:circle-stack"),e.R7$(5),e.Y8G("svgIcon","heroicons_outline:document-text")}}function K(i,a){1&i&&(e.j41(0,"div",66),e.nrm(1,"mat-icon",67),e.j41(2,"div",68),e.EFF(3," No projects "),e.k0s()()),2&i&&(e.R7$(),e.Y8G("svgIcon","heroicons_outline:archive-box-x-mark"))}function L(i,a){if(1&i&&e.DNE(0,K,4,1,"div",66),2&i){const t=e.XpG();e.vxM(0===t.projectDetails().length?0:-1)}}function V(i,a){1&i&&(e.j41(0,"div",24),e.nrm(1,"mat-progress-spinner",69),e.j41(2,"div",70),e.EFF(3," Loading projects... "),e.k0s()())}function Q(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"button",71),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.loadMoreProjects())}),e.EFF(2),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading()),e.R7$(),e.SpI(" ",t.loading()?"Loading...":"Load More Projects"," ")}}function z(i,a){if(1&i&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage()," ")}}const W=[{path:"",component:(()=>{class i{constructor(){this.projectService=(0,e.WQX)(D.i),this.storageService=(0,e.WQX)($.n),this.changeDetectorRef=(0,e.WQX)(e.gRc),this.router=(0,e.WQX)(j.Ix),this.bookmarkService=(0,e.WQX)(S.U),this.indexerService=(0,e.WQX)(B.F),this.projects=[],this.projectDetails=(0,e.vPA)([]),this.filteredProjects=[],this.loading=(0,e.vPA)(!1),this.errorMessage=(0,e.vPA)(""),this.noMoreProjects=!1,this.showCloseSearchButton=(0,e.vPA)(!1),this.bookmarkedProjectNpubs=[],this.initialLoadComplete=(0,e.vPA)(!1),this._unsubscribeAll=new F.B,this.bookmarks$=this.bookmarkService.bookmarks$}ngOnInit(){var t=this;return(0,l.A)(function*(){yield t.bookmarkService.initializeForCurrentUser(),t.loadInitialProjects(),t.subscribeToProjectsUpdates(),t.subscribeToLoading(),t.subscribeToNoMoreProjects(),t.subscribeToBookmarkChanges()})()}loadInitialProjects(){this.projectService.resetProjects(),this.loading.set(!0),this.initialLoadComplete.set(!1),this.projectService.fetchProjects().pipe((0,c.Q)(this._unsubscribeAll)).subscribe({next:t=>{this.projects=t,this.filteredProjects=this.projectDetails(),this.updateBookmarkStatus(),this.fetchProjectDetails(t),this.initialLoadComplete.set(!0),this.changeDetectorRef.detectChanges(),console.log(t)}})}subscribeToBookmarkChanges(){this.bookmarks$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.bookmarkedProjectNpubs=t,this.updateBookmarkStatus(),this.changeDetectorRef.detectChanges()})}updateBookmarkStatus(){this.projectDetails().forEach(t=>{t.isBookmarked=this.bookmarkedProjectNpubs.includes(t.nostrPubKey)}),this.filteredProjects=[...this.projectDetails()]}fetchMetadataForProjects(t){var r=this;return(0,l.A)(function*(){for(const o of t)try{const s=yield r.storageService.getProfile(o.nostrPubKey);s?r.updateProjectMetadata(o,s):console.warn(`No metadata found for project with pubKey: ${o.nostrPubKey}`)}catch(s){console.error(`Error fetching metadata for pubKey: ${o.nostrPubKey}`,s)}})()}fetchProjectDetails(t){var r=this;return(0,l.A)(function*(){for(const o of t)try{const s=yield r.storageService.getProjectDetails(o.projectIdentifier);if(s){r.projectDetails.update(g=>[...g,s]);const p=yield r.storageService.getProfile(s.nostrPubKey);p?r.updateProjectMetadata(s,p):console.warn(`No metadata found for project with nostrPubKey: ${s.nostrPubKey}`)}else console.warn(`No details found for project with eventId: ${o.nostrEventId}`)}catch(s){console.error(`Error fetching details for eventId: ${o.nostrEventId}`,s)}})()}subscribeToProjectsUpdates(){this.storageService.profile$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{if(t&&t.pubKey){const r=this.projectDetails().find(o=>o.nostrPubKey===t.pubKey);r&&(this.updateProjectMetadata(r,t.metadata),this.changeDetectorRef.detectChanges())}})}updateProjectMetadata(t,r){t.displayName=r.name||t.displayName,t.about=r.about||t.about,t.picture=r.picture||t.picture,t.banner=r.banner||t.banner}loadMoreProjects(){this.projectService.fetchProjects().pipe((0,c.Q)(this._unsubscribeAll)).subscribe({next:t=>{const r=t.filter(o=>!this.projects.some(s=>s.projectIdentifier===o.projectIdentifier));this.projects=[...this.projects,...r],this.filteredProjects=[...this.projectDetails()],this.fetchProjectDetails(r),this.changeDetectorRef.detectChanges()},error:t=>{this.errorMessage.set("Error loading more projects"),this.changeDetectorRef.detectChanges()}})}subscribeToLoading(){this.projectService.loading$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.loading.set(t),this.changeDetectorRef.detectChanges()})}subscribeToNoMoreProjects(){this.projectService.noMoreProjects$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.noMoreProjects=t,this.changeDetectorRef.detectChanges()})}trackByFn(t,r){return r.projectIdentifier||t}goToProjectDetails(t){this.indexerService.getNetwork(),this.projectService.fetchProjectStats(t.projectIdentifier).pipe((0,k.M)(s=>{this.storageService.saveProjectStats(t.projectIdentifier,s)}),(0,k.M)(()=>{this.router.navigate(["/profile",t.nostrPubKey,t.projectIdentifier])}),(0,w.W)(s=>(console.error(`Failed to navigate to project details for ${t.projectIdentifier}:`,s),(0,E.of)(null)))).subscribe()}filterByQuery(t){if(!t||""===t.trim())return this.filteredProjects=[...this.projectDetails()],this.showCloseSearchButton.set(!1),void this.changeDetectorRef.detectChanges();const r=t.toLowerCase();this.filteredProjects=this.projectDetails().filter(o=>o.displayName&&o.displayName.toLowerCase().includes(r)||o.about&&o.about.toLowerCase().includes(r)||o.displayName&&o.displayName.toLowerCase().includes(r)||o.nostrPubKey&&o.nostrPubKey.toLowerCase().includes(r)||o.projectIdentifier&&o.projectIdentifier.toLowerCase().includes(r)),this.showCloseSearchButton.set(this.projects.length>0),this.changeDetectorRef.detectChanges()}resetSearch(t){t.value="",this.filterByQuery(""),this.showCloseSearchButton.set(!1)}toggleBookmark(t){var r=this;return(0,l.A)(function*(){(yield r.bookmarkService.isBookmarked(t))?yield r.bookmarkService.removeBookmark(t):yield r.bookmarkService.addBookmark(t)})()}isProjectBookmarked(t){var r=this;return(0,l.A)(function*(){return yield r.bookmarkService.isBookmarked(t)})()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["explore"]],decls:33,vars:9,consts:[["query",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"dark","relative","flex-0","overflow-hidden","bg-gray-800","px-4","py-8","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"pointer-events-none","absolute","inset-0"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","z-10","flex","flex-col","items-center"],[1,"text-xl","font-semibold"],[1,"mt-1","text-center","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-7xl"],[1,"text-secondary","mt-6","max-w-2xl","text-center","tracking-tight","sm:text-2xl"],[1,"p-6","sm:p-10"],[1,"mx-auto","flex","w-full","max-w-xs","flex-auto","flex-col","sm:max-w-5xl"],[1,"flex","w-full","max-w-xs","flex-col","items-center","justify-between","sm:max-w-none","sm:flex-row"],[1,"flex","w-full","items-center","space-x-2","sm:w-auto"],[1,"mt-4","w-full","sm:w-80",3,"keyup.enter","subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Search ...","matInput",""],["mat-icon-button","","color","warn",1,"mt-4"],["mat-icon-button","","color","success",1,"mt-4"],[1,"mt-8","sm:ml-auto","sm:mt-0",3,"color"],[1,"mx-auto","flex","w-full","flex-auto","flex-col","sm:max-w-5xl"],[1,"mt-10","grid","w-full","min-w-0","grid-cols-1","gap-6","sm:grid-cols-1","md:grid-cols-1","lg:grid-cols-2"],[1,"filter-info","flex","w-full","flex-col"],[1,"flex","flex-auto","flex-col","items-center","justify-center"],[1,"mt-10","flex","justify-center"],[1,"error-message"],["mat-icon-button","","color","warn",1,"mt-4",3,"click"],[3,"svgIcon"],["mat-icon-button","","color","success",1,"mt-4",3,"click"],[1,"flex","h-32"],["alt","Card cover image","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","alt","Card cover image",1,"object-cover",3,"src"],[1,"flex","px-8","items-center","justify-between"],[1,"bg-card","-mt-12","rounded-full","p-1","shadow-lg","profile-picture"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Project logo",1,"h-24","w-24","rounded-full","object-cover",3,"src"],[1,"ml-auto"],[3,"startDate","expiryDate"],[1,"flex","flex-col","px-8","pb-6","pt-4"],[1,"flex","items-center","justify-between"],[1,"min-w-0","flex-1"],["class","truncate text-2xl font-semibold leading-tight","role","button",3,"click",4,"ngIf"],["class","truncate text-2xl font-semibold leading-tight",4,"ngIf"],[1,"text-secondary","mt-1","truncate","leading-tight"],["class","absolute right-2 top-2 flex space-x-2",4,"ngIf"],[1,"my-6","w-full","border-t"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"flex","items-center","space-x-2","p-4","bg-white","shadow-md","rounded-lg"],[1,"text-primary","text-3xl",3,"svgIcon"],[1,"flex","flex-col"],[1,"text-sm","text-gray-500"],[1,"font-semibold"],[1,"mt-6","grid","grid-cols-1","sm:grid-cols-2","gap-4"],["target","_blank",1,"group","relative","inline-flex","items-center","justify-center","overflow-hidden","rounded-lg","bg-primary","p-0.5","text-sm","font-medium","hover:bg-primary-700","focus:outline-none","focus:ring-4","focus:ring-primary-300","dark:bg-primary","dark:hover:bg-primary-600","dark:focus:ring-primary-800","w-full",3,"href"],[1,"relative","flex","items-center","justify-center","gap-2","rounded-md","bg-card","w-full","px-4","py-2.5","transition-all","duration-75","ease-in","group-hover:bg-opacity-0"],[1,"icon-size-5","text-primary","dark:text-primary-400","group-hover:text-white",3,"svgIcon"],[1,"text-primary","dark:text-primary-400","group-hover:text-white"],[1,"group","relative","inline-flex","items-center","justify-center","overflow-hidden","rounded-lg","bg-gray-200","dark:bg-gray-700","p-0.5","text-sm","font-medium","hover:bg-gray-300","dark:hover:bg-gray-600","focus:outline-none","focus:ring-4","focus:ring-gray-300","dark:focus:ring-gray-800","w-full",3,"click"],[1,"icon-size-5","text-gray-700","dark:text-gray-300","group-hover:text-white",3,"svgIcon"],[1,"text-gray-700","dark:text-gray-300","group-hover:text-white"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight",3,"click"],[1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"absolute","right-2","top-2","flex","space-x-2"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","border","bg-white","shadow-md"],["mat-icon-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"],["mode","indeterminate","diameter","48"],[1,"text-secondary","mt-4","text-xl"],["mat-raised-button","","color","primary",1,"bg-card","text-gray-700","hover:bg-gray-200","dark:text-gray-300","dark:hover:bg-gray-700",3,"click","disabled"]],template:function(r,o){if(1&r){const s=e.RV6();e.j41(0,"div",1)(1,"div",2),e.qSk(),e.j41(2,"svg",3)(3,"g",4),e.nrm(4,"circle",5)(5,"circle",6),e.k0s()(),e.joV(),e.j41(6,"div",7)(7,"h2",8),e.EFF(8,"Explore Projects"),e.k0s(),e.j41(9,"div",9),e.EFF(10," What\u2019s your next investment? "),e.k0s(),e.j41(11,"div",10),e.EFF(12," Check out our projects and find your next investment opportunity. "),e.k0s()()(),e.j41(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"mat-form-field",15),e.bIt("keyup.enter",function(){e.eBV(s);const g=e.sdS(20);return e.Njj(o.filterByQuery(g.value))}),e.nrm(18,"mat-icon",16)(19,"input",17,0),e.k0s(),e.DNE(21,_,2,1,"button",18)(22,N,2,1,"button",19),e.k0s(),e.j41(23,"mat-slide-toggle",20),e.EFF(24," Hide completed "),e.k0s()()(),e.j41(25,"div",21)(26,"div",22),e.Z7z(27,X,74,30,"angor-card",23,e.Vm6),e.k0s(),e.DNE(29,L,1,1)(30,V,4,0,"div",24)(31,Q,3,2,"div",25)(32,z,2,1,"div",26),e.k0s()()()}2&r&&(e.R7$(17),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:magnifying-glass"),e.R7$(3),e.vxM(o.showCloseSearchButton()?21:-1),e.R7$(),e.vxM(o.showCloseSearchButton()?-1:22),e.R7$(),e.Y8G("color","primary"),e.R7$(4),e.Dyx(o.projectDetails()),e.R7$(2),e.vxM(!o.loading()||o.initialLoadComplete()?29:-1),e.R7$(),e.vxM(o.loading()&&!o.initialLoadComplete()?30:-1),e.R7$(),e.vxM(o.projectDetails().length>0?31:-1),e.R7$(),e.vxM(!o.loading()&&o.errorMessage()?32:-1))},dependencies:[j.Wk,m.Hl,m.$z,m.iY,f.m_,f.An,y.n,u.RG,u.rl,u.JW,R.Ve,C.Sy,v.fS,v.fg,x.mV,x.sG,I.uc,P.PO,d.MD,d.bT,d.Jj,d.QX,d.vh,b.D6,b.LG,G.W],styles:["@media (max-width: 600px){.profile-picture img{height:18px;width:18px}}\n"],encapsulation:2})}}return i})()}]}}]);