import{g as Vt}from"./chunk-ESELKVAP.js";import{b as Yt,e as Ut,f as zt,o as fe,r as jt}from"./chunk-QWV7QHAT.js";import{B as Mt,C as Bt,D as Ft,G as Ne,a as Pt,c as Ot,j as Nt,k as Pe,l as Oe,t as Lt}from"./chunk-TCT6OACC.js";import{Bb as bt,Cc as Ct,Ea as ut,Eb as Ce,Ga as le,La as dt,Lb as wt,Mb as It,Nb as Tt,Pb as Et,Qb as St,Ra as ht,Sa as U,Wb as Rt,Za as mt,a as q,ab as pt,b as nt,bb as vt,c as ae,ca as J,e as Ki,g as Ji,h as $,ha as ne,ia as ot,ka as Se,kb as _t,lb as yt,ma as Re,mb as xe,mc as Dt,n as ce,na as De,o as rt,qa as st,ra as at,sa as ct,sc as xt,vb as Ae,vc as At,wb as gt,ya as lt,za as ft}from"./chunk-PLEXPVNT.js";var Wt=Ki((Gt,Me)=>{(function(E){if(typeof Gt=="object"&&typeof Me<"u")Me.exports=E();else if(typeof define=="function"&&define.amd)define([],E);else{var y;typeof window<"u"?y=window:typeof global<"u"?y=global:typeof self<"u"?y=self:y=this,y.localforage=E()}})(function(){var E,y,dn;return function n(a,f,v){function b(C,B){if(!f[C]){if(!a[C]){var p=typeof ae=="function"&&ae;if(!B&&p)return p(C,!0);if(T)return T(C,!0);var g=new Error("Cannot find module '"+C+"'");throw g.code="MODULE_NOT_FOUND",g}var P=f[C]={exports:{}};a[C][0].call(P.exports,function(L){var H=a[C][1][L];return b(H||L)},P,P.exports,n,a,f,v)}return f[C].exports}for(var T=typeof ae=="function"&&ae,A=0;A<v.length;A++)b(v[A]);return b}({1:[function(n,a,f){(function(v){"use strict";var b=v.MutationObserver||v.WebKitMutationObserver,T;if(b){var A=0,C=new b(L),B=v.document.createTextNode("");C.observe(B,{characterData:!0}),T=function(){B.data=A=++A%2}}else if(!v.setImmediate&&typeof v.MessageChannel<"u"){var p=new v.MessageChannel;p.port1.onmessage=L,T=function(){p.port2.postMessage(0)}}else"document"in v&&"onreadystatechange"in v.document.createElement("script")?T=function(){var M=v.document.createElement("script");M.onreadystatechange=function(){L(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},v.document.documentElement.appendChild(M)}:T=function(){setTimeout(L,0)};var g,P=[];function L(){g=!0;for(var M,X,F=P.length;F;){for(X=P,P=[],M=-1;++M<F;)X[M]();F=P.length}g=!1}a.exports=H;function H(M){P.push(M)===1&&!g&&T()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,a,f){"use strict";var v=n(1);function b(){}var T={},A=["REJECTED"],C=["FULFILLED"],B=["PENDING"];a.exports=p;function p(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=B,this.queue=[],this.outcome=void 0,m!==b&&H(this,m)}p.prototype.catch=function(m){return this.then(null,m)},p.prototype.then=function(m,S){if(typeof m!="function"&&this.state===C||typeof S!="function"&&this.state===A)return this;var I=new this.constructor(b);if(this.state!==B){var x=this.state===C?m:S;P(I,x,this.outcome)}else this.queue.push(new g(I,m,S));return I};function g(m,S,I){this.promise=m,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(m){T.resolve(this.promise,m)},g.prototype.otherCallFulfilled=function(m){P(this.promise,this.onFulfilled,m)},g.prototype.callRejected=function(m){T.reject(this.promise,m)},g.prototype.otherCallRejected=function(m){P(this.promise,this.onRejected,m)};function P(m,S,I){v(function(){var x;try{x=S(I)}catch(Y){return T.reject(m,Y)}x===m?T.reject(m,new TypeError("Cannot resolve promise with itself")):T.resolve(m,x)})}T.resolve=function(m,S){var I=M(L,S);if(I.status==="error")return T.reject(m,I.value);var x=I.value;if(x)H(m,x);else{m.state=C,m.outcome=S;for(var Y=-1,z=m.queue.length;++Y<z;)m.queue[Y].callFulfilled(S)}return m},T.reject=function(m,S){m.state=A,m.outcome=S;for(var I=-1,x=m.queue.length;++I<x;)m.queue[I].callRejected(S);return m};function L(m){var S=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof S=="function")return function(){S.apply(m,arguments)}}function H(m,S){var I=!1;function x(V){I||(I=!0,T.reject(m,V))}function Y(V){I||(I=!0,T.resolve(m,V))}function z(){S(Y,x)}var j=M(z);j.status==="error"&&x(j.value)}function M(m,S){var I={};try{I.value=m(S),I.status="success"}catch(x){I.status="error",I.value=x}return I}p.resolve=X;function X(m){return m instanceof this?m:T.resolve(new this(b),m)}p.reject=F;function F(m){var S=new this(b);return T.reject(S,m)}p.all=me;function me(m){var S=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,x=!1;if(!I)return this.resolve([]);for(var Y=new Array(I),z=0,j=-1,V=new this(b);++j<I;)G(m[j],j);return V;function G(re,ue){S.resolve(re).then(pe,function(te){x||(x=!0,T.reject(V,te))});function pe(te){Y[ue]=te,++z===I&&!x&&(x=!0,T.resolve(V,Y))}}}p.race=Z;function Z(m){var S=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,x=!1;if(!I)return this.resolve([]);for(var Y=-1,z=new this(b);++Y<I;)j(m[Y]);return z;function j(V){S.resolve(V).then(function(G){x||(x=!0,T.resolve(z,G))},function(G){x||(x=!0,T.reject(z,G))})}}},{1:1}],3:[function(n,a,f){(function(v){"use strict";typeof v.Promise!="function"&&(v.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,a,f){"use strict";var v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function b(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function T(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var A=T();function C(){try{if(!A||!A.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function B(e,i){e=e||[],i=i||{};try{return new Blob(e,i)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,s=0;s<e.length;s+=1)o.append(e[s]);return o.getBlob(i.type)}}typeof Promise>"u"&&n(3);var p=Promise;function g(e,i){i&&e.then(function(t){i(null,t)},function(t){i(t)})}function P(e,i,t){typeof i=="function"&&e.then(i),typeof t=="function"&&e.catch(t)}function L(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function H(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var M="local-forage-detect-blob-support",X=void 0,F={},me=Object.prototype.toString,Z="readonly",m="readwrite";function S(e){for(var i=e.length,t=new ArrayBuffer(i),o=new Uint8Array(t),s=0;s<i;s++)o[s]=e.charCodeAt(s);return t}function I(e){return new p(function(i){var t=e.transaction(M,m),o=B([""]);t.objectStore(M).put(o,"key"),t.onabort=function(s){s.preventDefault(),s.stopPropagation(),i(!1)},t.oncomplete=function(){var s=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);i(r||!s||parseInt(s[1],10)>=43)}}).catch(function(){return!1})}function x(e){return typeof X=="boolean"?p.resolve(X):I(e).then(function(i){return X=i,X})}function Y(e){var i=F[e.name],t={};t.promise=new p(function(o,s){t.resolve=o,t.reject=s}),i.deferredOperations.push(t),i.dbReady?i.dbReady=i.dbReady.then(function(){return t.promise}):i.dbReady=t.promise}function z(e){var i=F[e.name],t=i.deferredOperations.pop();if(t)return t.resolve(),t.promise}function j(e,i){var t=F[e.name],o=t.deferredOperations.pop();if(o)return o.reject(i),o.promise}function V(e,i){return new p(function(t,o){if(F[e.name]=F[e.name]||Fe(),e.db)if(i)Y(e),e.db.close();else return t(e.db);var s=[e.name];i&&s.push(e.version);var r=A.open.apply(A,s);i&&(r.onupgradeneeded=function(c){var l=r.result;try{l.createObjectStore(e.storeName),c.oldVersion<=1&&l.createObjectStore(M)}catch(u){if(u.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw u}}),r.onerror=function(c){c.preventDefault(),o(r.error)},r.onsuccess=function(){var c=r.result;c.onversionchange=function(l){l.target.close()},t(c),z(e)}})}function G(e){return V(e,!1)}function re(e){return V(e,!0)}function ue(e,i){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,s=e.version>e.db.version;if(o&&(e.version!==i&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),s||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function pe(e){return new p(function(i,t){var o=new FileReader;o.onerror=t,o.onloadend=function(s){var r=btoa(s.target.result||"");i({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function te(e){var i=S(atob(e.data));return B([i],{type:e.type})}function Be(e){return e&&e.__local_forage_encoded_blob}function Jt(e){var i=this,t=i._initReady().then(function(){var o=F[i._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return P(t,e,e),t}function Zt(e){Y(e);for(var i=F[e.name],t=i.forages,o=0;o<t.length;o++){var s=t[o];s._dbInfo.db&&(s._dbInfo.db.close(),s._dbInfo.db=null)}return e.db=null,G(e).then(function(r){return e.db=r,ue(e)?re(e):r}).then(function(r){e.db=i.db=r;for(var c=0;c<t.length;c++)t[c]._dbInfo.db=r}).catch(function(r){throw j(e,r),r})}function W(e,i,t,o){o===void 0&&(o=1);try{var s=e.db.transaction(e.storeName,i);t(null,s)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return p.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),re(e)}).then(function(){return Zt(e).then(function(){W(e,i,t,o-1)})}).catch(t);t(r)}}function Fe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function qt(e){var i=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var s=F[t.name];s||(s=Fe(),F[t.name]=s),s.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=Jt);var r=[];function c(){return p.resolve()}for(var l=0;l<s.forages.length;l++){var u=s.forages[l];u!==i&&r.push(u._initReady().catch(c))}var d=s.forages.slice(0);return p.all(r).then(function(){return t.db=s.db,G(t)}).then(function(h){return t.db=h,ue(t,i._defaultConfig.version)?re(t):h}).then(function(h){t.db=s.db=h,i._dbInfo=t;for(var _=0;_<d.length;_++){var w=d[_];w!==i&&(w._dbInfo.db=t.db,w._dbInfo.version=t.version)}})}function ei(e,i){var t=this;e=L(e);var o=new p(function(s,r){t.ready().then(function(){W(t._dbInfo,Z,function(c,l){if(c)return r(c);try{var u=l.objectStore(t._dbInfo.storeName),d=u.get(e);d.onsuccess=function(){var h=d.result;h===void 0&&(h=null),Be(h)&&(h=te(h)),s(h)},d.onerror=function(){r(d.error)}}catch(h){r(h)}})}).catch(r)});return g(o,i),o}function ti(e,i){var t=this,o=new p(function(s,r){t.ready().then(function(){W(t._dbInfo,Z,function(c,l){if(c)return r(c);try{var u=l.objectStore(t._dbInfo.storeName),d=u.openCursor(),h=1;d.onsuccess=function(){var _=d.result;if(_){var w=_.value;Be(w)&&(w=te(w));var R=e(w,_.key,h++);R!==void 0?s(R):_.continue()}else s()},d.onerror=function(){r(d.error)}}catch(_){r(_)}})}).catch(r)});return g(o,i),o}function ii(e,i,t){var o=this;e=L(e);var s=new p(function(r,c){var l;o.ready().then(function(){return l=o._dbInfo,me.call(i)==="[object Blob]"?x(l.db).then(function(u){return u?i:pe(i)}):i}).then(function(u){W(o._dbInfo,m,function(d,h){if(d)return c(d);try{var _=h.objectStore(o._dbInfo.storeName);u===null&&(u=void 0);var w=_.put(u,e);h.oncomplete=function(){u===void 0&&(u=null),r(u)},h.onabort=h.onerror=function(){var R=w.error?w.error:w.transaction.error;c(R)}}catch(R){c(R)}})}).catch(c)});return g(s,t),s}function ni(e,i){var t=this;e=L(e);var o=new p(function(s,r){t.ready().then(function(){W(t._dbInfo,m,function(c,l){if(c)return r(c);try{var u=l.objectStore(t._dbInfo.storeName),d=u.delete(e);l.oncomplete=function(){s()},l.onerror=function(){r(d.error)},l.onabort=function(){var h=d.error?d.error:d.transaction.error;r(h)}}catch(h){r(h)}})}).catch(r)});return g(o,i),o}function ri(e){var i=this,t=new p(function(o,s){i.ready().then(function(){W(i._dbInfo,m,function(r,c){if(r)return s(r);try{var l=c.objectStore(i._dbInfo.storeName),u=l.clear();c.oncomplete=function(){o()},c.onabort=c.onerror=function(){var d=u.error?u.error:u.transaction.error;s(d)}}catch(d){s(d)}})}).catch(s)});return g(t,e),t}function oi(e){var i=this,t=new p(function(o,s){i.ready().then(function(){W(i._dbInfo,Z,function(r,c){if(r)return s(r);try{var l=c.objectStore(i._dbInfo.storeName),u=l.count();u.onsuccess=function(){o(u.result)},u.onerror=function(){s(u.error)}}catch(d){s(d)}})}).catch(s)});return g(t,e),t}function si(e,i){var t=this,o=new p(function(s,r){if(e<0){s(null);return}t.ready().then(function(){W(t._dbInfo,Z,function(c,l){if(c)return r(c);try{var u=l.objectStore(t._dbInfo.storeName),d=!1,h=u.openKeyCursor();h.onsuccess=function(){var _=h.result;if(!_){s(null);return}e===0||d?s(_.key):(d=!0,_.advance(e))},h.onerror=function(){r(h.error)}}catch(_){r(_)}})}).catch(r)});return g(o,i),o}function ai(e){var i=this,t=new p(function(o,s){i.ready().then(function(){W(i._dbInfo,Z,function(r,c){if(r)return s(r);try{var l=c.objectStore(i._dbInfo.storeName),u=l.openKeyCursor(),d=[];u.onsuccess=function(){var h=u.result;if(!h){o(d);return}d.push(h.key),h.continue()},u.onerror=function(){s(u.error)}}catch(h){s(h)}})}).catch(s)});return g(t,e),t}function ci(e,i){i=H.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,s;if(!e.name)s=p.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,c=r?p.resolve(o._dbInfo.db):G(e).then(function(l){var u=F[e.name],d=u.forages;u.db=l;for(var h=0;h<d.length;h++)d[h]._dbInfo.db=l;return l});e.storeName?s=c.then(function(l){if(l.objectStoreNames.contains(e.storeName)){var u=l.version+1;Y(e);var d=F[e.name],h=d.forages;l.close();for(var _=0;_<h.length;_++){var w=h[_];w._dbInfo.db=null,w._dbInfo.version=u}var R=new p(function(D,N){var O=A.open(e.name,u);O.onerror=function(k){var se=O.result;se.close(),N(k)},O.onupgradeneeded=function(){var k=O.result;k.deleteObjectStore(e.storeName)},O.onsuccess=function(){var k=O.result;k.close(),D(k)}});return R.then(function(D){d.db=D;for(var N=0;N<h.length;N++){var O=h[N];O._dbInfo.db=D,z(O._dbInfo)}}).catch(function(D){throw(j(e,D)||p.resolve()).catch(function(){}),D})}}):s=c.then(function(l){Y(e);var u=F[e.name],d=u.forages;l.close();for(var h=0;h<d.length;h++){var _=d[h];_._dbInfo.db=null}var w=new p(function(R,D){var N=A.deleteDatabase(e.name);N.onerror=function(){var O=N.result;O&&O.close(),D(N.error)},N.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},N.onsuccess=function(){var O=N.result;O&&O.close(),R(O)}});return w.then(function(R){u.db=R;for(var D=0;D<d.length;D++){var N=d[D];z(N._dbInfo)}}).catch(function(R){throw(j(e,R)||p.resolve()).catch(function(){}),R})})}return g(s,i),s}var li={_driver:"asyncStorage",_initStorage:qt,_support:C(),iterate:ti,getItem:ei,setItem:ii,removeItem:ni,clear:ri,length:oi,key:si,keys:ai,dropInstance:ci};function fi(){return typeof openDatabase=="function"}var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ui="~~local_forage_type~",Ye=/^~~local_forage_type~([^~]+)~/,de="__lfsc__:",ve=de.length,_e="arbf",ye="blob",Ue="si08",ze="ui08",je="uic8",Ve="si16",ke="si32",He="ur16",$e="ui32",Xe="fl32",Ge="fl64",We=ve+_e.length,Qe=Object.prototype.toString;function Ke(e){var i=e.length*.75,t=e.length,o,s=0,r,c,l,u;e[e.length-1]==="="&&(i--,e[e.length-2]==="="&&i--);var d=new ArrayBuffer(i),h=new Uint8Array(d);for(o=0;o<t;o+=4)r=Q.indexOf(e[o]),c=Q.indexOf(e[o+1]),l=Q.indexOf(e[o+2]),u=Q.indexOf(e[o+3]),h[s++]=r<<2|c>>4,h[s++]=(c&15)<<4|l>>2,h[s++]=(l&3)<<6|u&63;return d}function ge(e){var i=new Uint8Array(e),t="",o;for(o=0;o<i.length;o+=3)t+=Q[i[o]>>2],t+=Q[(i[o]&3)<<4|i[o+1]>>4],t+=Q[(i[o+1]&15)<<2|i[o+2]>>6],t+=Q[i[o+2]&63];return i.length%3===2?t=t.substring(0,t.length-1)+"=":i.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function di(e,i){var t="";if(e&&(t=Qe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Qe.call(e.buffer)==="[object ArrayBuffer]")){var o,s=de;e instanceof ArrayBuffer?(o=e,s+=_e):(o=e.buffer,t==="[object Int8Array]"?s+=Ue:t==="[object Uint8Array]"?s+=ze:t==="[object Uint8ClampedArray]"?s+=je:t==="[object Int16Array]"?s+=Ve:t==="[object Uint16Array]"?s+=He:t==="[object Int32Array]"?s+=ke:t==="[object Uint32Array]"?s+=$e:t==="[object Float32Array]"?s+=Xe:t==="[object Float64Array]"?s+=Ge:i(new Error("Failed to get type for BinaryArray"))),i(s+ge(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var c=ui+e.type+"~"+ge(this.result);i(de+ye+c)},r.readAsArrayBuffer(e)}else try{i(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),i(null,c)}}function hi(e){if(e.substring(0,ve)!==de)return JSON.parse(e);var i=e.substring(We),t=e.substring(ve,We),o;if(t===ye&&Ye.test(i)){var s=i.match(Ye);o=s[1],i=i.substring(s[0].length)}var r=Ke(i);switch(t){case _e:return r;case ye:return B([r],{type:o});case Ue:return new Int8Array(r);case ze:return new Uint8Array(r);case je:return new Uint8ClampedArray(r);case Ve:return new Int16Array(r);case He:return new Uint16Array(r);case ke:return new Int32Array(r);case $e:return new Uint32Array(r);case Xe:return new Float32Array(r);case Ge:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var be={serialize:di,deserialize:hi,stringToBuffer:Ke,bufferToString:ge};function Je(e,i,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function mi(e){var i=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var s=new p(function(r,c){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return c(l)}t.db.transaction(function(l){Je(l,t,function(){i._dbInfo=t,r()},function(u,d){c(d)})},c)});return t.serializer=be,s}function K(e,i,t,o,s,r){e.executeSql(t,o,s,function(c,l){l.code===l.SYNTAX_ERR?c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(u,d){d.rows.length?r(u,l):Je(u,i,function(){u.executeSql(t,o,s,r)},r)},r):r(c,l)},r)}function pi(e,i){var t=this;e=L(e);var o=new p(function(s,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(l){K(l,c,"SELECT * FROM "+c.storeName+" WHERE key = ? LIMIT 1",[e],function(u,d){var h=d.rows.length?d.rows.item(0).value:null;h&&(h=c.serializer.deserialize(h)),s(h)},function(u,d){r(d)})})}).catch(r)});return g(o,i),o}function vi(e,i){var t=this,o=new p(function(s,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(l){K(l,c,"SELECT * FROM "+c.storeName,[],function(u,d){for(var h=d.rows,_=h.length,w=0;w<_;w++){var R=h.item(w),D=R.value;if(D&&(D=c.serializer.deserialize(D)),D=e(D,R.key,w+1),D!==void 0){s(D);return}}s()},function(u,d){r(d)})})}).catch(r)});return g(o,i),o}function Ze(e,i,t,o){var s=this;e=L(e);var r=new p(function(c,l){s.ready().then(function(){i===void 0&&(i=null);var u=i,d=s._dbInfo;d.serializer.serialize(i,function(h,_){_?l(_):d.db.transaction(function(w){K(w,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,h],function(){c(u)},function(R,D){l(D)})},function(w){if(w.code===w.QUOTA_ERR){if(o>0){c(Ze.apply(s,[e,u,t,o-1]));return}l(w)}})})}).catch(l)});return g(r,t),r}function _i(e,i,t){return Ze.apply(this,[e,i,t,1])}function yi(e,i){var t=this;e=L(e);var o=new p(function(s,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(l){K(l,c,"DELETE FROM "+c.storeName+" WHERE key = ?",[e],function(){s()},function(u,d){r(d)})})}).catch(r)});return g(o,i),o}function gi(e){var i=this,t=new p(function(o,s){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"DELETE FROM "+r.storeName,[],function(){o()},function(l,u){s(u)})})}).catch(s)});return g(t,e),t}function bi(e){var i=this,t=new p(function(o,s){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(l,u){var d=u.rows.item(0).c;o(d)},function(l,u){s(u)})})}).catch(s)});return g(t,e),t}function wi(e,i){var t=this,o=new p(function(s,r){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(l){K(l,c,"SELECT key FROM "+c.storeName+" WHERE id = ? LIMIT 1",[e+1],function(u,d){var h=d.rows.length?d.rows.item(0).key:null;s(h)},function(u,d){r(d)})})}).catch(r)});return g(o,i),o}function Ii(e){var i=this,t=new p(function(o,s){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(c){K(c,r,"SELECT key FROM "+r.storeName,[],function(l,u){for(var d=[],h=0;h<u.rows.length;h++)d.push(u.rows.item(h).key);o(d)},function(l,u){s(u)})})}).catch(s)});return g(t,e),t}function Ti(e){return new p(function(i,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(s,r){for(var c=[],l=0;l<r.rows.length;l++)c.push(r.rows.item(l).name);i({db:e,storeNames:c})},function(s,r){t(r)})},function(o){t(o)})})}function Ei(e,i){i=H.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,s;return e.name?s=new p(function(r){var c;e.name===t.name?c=o._dbInfo.db:c=openDatabase(e.name,"","",0),e.storeName?r({db:c,storeNames:[e.storeName]}):r(Ti(c))}).then(function(r){return new p(function(c,l){r.db.transaction(function(u){function d(R){return new p(function(D,N){u.executeSql("DROP TABLE IF EXISTS "+R,[],function(){D()},function(O,k){N(k)})})}for(var h=[],_=0,w=r.storeNames.length;_<w;_++)h.push(d(r.storeNames[_]));p.all(h).then(function(){c()}).catch(function(R){l(R)})},function(u){l(u)})})}):s=p.reject("Invalid arguments"),g(s,i),s}var Si={_driver:"webSQLStorage",_initStorage:mi,_support:fi(),iterate:vi,getItem:pi,setItem:_i,removeItem:yi,clear:gi,length:bi,key:wi,keys:Ii,dropInstance:Ei};function Ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function qe(e,i){var t=e.name+"/";return e.storeName!==i.storeName&&(t+=e.storeName+"/"),t}function Di(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function xi(){return!Di()||localStorage.length>0}function Ai(e){var i=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=qe(e,i._defaultConfig),xi()?(i._dbInfo=t,t.serializer=be,p.resolve()):p.reject()}function Ci(e){var i=this,t=i.ready().then(function(){for(var o=i._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var r=localStorage.key(s);r.indexOf(o)===0&&localStorage.removeItem(r)}});return g(t,e),t}function Pi(e,i){var t=this;e=L(e);var o=t.ready().then(function(){var s=t._dbInfo,r=localStorage.getItem(s.keyPrefix+e);return r&&(r=s.serializer.deserialize(r)),r});return g(o,i),o}function Oi(e,i){var t=this,o=t.ready().then(function(){for(var s=t._dbInfo,r=s.keyPrefix,c=r.length,l=localStorage.length,u=1,d=0;d<l;d++){var h=localStorage.key(d);if(h.indexOf(r)===0){var _=localStorage.getItem(h);if(_&&(_=s.serializer.deserialize(_)),_=e(_,h.substring(c),u++),_!==void 0)return _}}});return g(o,i),o}function Ni(e,i){var t=this,o=t.ready().then(function(){var s=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(s.keyPrefix.length)),r});return g(o,i),o}function Li(e){var i=this,t=i.ready().then(function(){for(var o=i._dbInfo,s=localStorage.length,r=[],c=0;c<s;c++){var l=localStorage.key(c);l.indexOf(o.keyPrefix)===0&&r.push(l.substring(o.keyPrefix.length))}return r});return g(t,e),t}function Mi(e){var i=this,t=i.keys().then(function(o){return o.length});return g(t,e),t}function Bi(e,i){var t=this;e=L(e);var o=t.ready().then(function(){var s=t._dbInfo;localStorage.removeItem(s.keyPrefix+e)});return g(o,i),o}function Fi(e,i,t){var o=this;e=L(e);var s=o.ready().then(function(){i===void 0&&(i=null);var r=i;return new p(function(c,l){var u=o._dbInfo;u.serializer.serialize(i,function(d,h){if(h)l(h);else try{localStorage.setItem(u.keyPrefix+e,d),c(r)}catch(_){(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")&&l(_),l(_)}})})});return g(s,t),s}function Yi(e,i){if(i=H.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,s;return e.name?s=new p(function(r){e.storeName?r(qe(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var c=localStorage.length-1;c>=0;c--){var l=localStorage.key(c);l.indexOf(r)===0&&localStorage.removeItem(l)}}):s=p.reject("Invalid arguments"),g(s,i),s}var Ui={_driver:"localStorageWrapper",_initStorage:Ai,_support:Ri(),iterate:Oi,getItem:Pi,setItem:Fi,removeItem:Bi,clear:Ci,length:Mi,key:Ni,keys:Li,dropInstance:Yi},zi=function(i,t){return i===t||typeof i=="number"&&typeof t=="number"&&isNaN(i)&&isNaN(t)},ji=function(i,t){for(var o=i.length,s=0;s<o;){if(zi(i[s],t))return!0;s++}return!1},et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},oe={},tt={},ie={INDEXEDDB:li,WEBSQL:Si,LOCALSTORAGE:Ui},Vi=[ie.INDEXEDDB._driver,ie.WEBSQL._driver,ie.LOCALSTORAGE._driver],he=["dropInstance"],we=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(he),ki={description:"",driver:Vi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Hi(e,i){e[i]=function(){var t=arguments;return e.ready().then(function(){return e[i].apply(e,t)})}}function Ie(){for(var e=1;e<arguments.length;e++){var i=arguments[e];if(i)for(var t in i)i.hasOwnProperty(t)&&(et(i[t])?arguments[0][t]=i[t].slice():arguments[0][t]=i[t])}return arguments[0]}var $i=function(){function e(i){b(this,e);for(var t in ie)if(ie.hasOwnProperty(t)){var o=ie[t],s=o._driver;this[t]=s,oe[s]||this.defineDriver(o)}this._defaultConfig=Ie({},ki),this._config=Ie({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":v(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,s){var r=new p(function(c,l){try{var u=t._driver,d=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){l(d);return}for(var h=we.concat("_initStorage"),_=0,w=h.length;_<w;_++){var R=h[_],D=!ji(he,R);if((D||t[R])&&typeof t[R]!="function"){l(d);return}}var N=function(){for(var se=function(Wi){return function(){var Qi=new Error("Method "+Wi+" is not implemented by the current driver"),it=p.reject(Qi);return g(it,arguments[arguments.length-1]),it}},Te=0,Gi=he.length;Te<Gi;Te++){var Ee=he[Te];t[Ee]||(t[Ee]=se(Ee))}};N();var O=function(se){oe[u]&&console.info("Redefining LocalForage driver: "+u),oe[u]=t,tt[u]=se,c()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(O,l):O(!!t._support):O(!0)}catch(k){l(k)}});return P(r,o,s),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,s){var r=oe[t]?p.resolve(oe[t]):p.reject(new Error("Driver not found."));return P(r,o,s),r},e.prototype.getSerializer=function(t){var o=p.resolve(be);return P(o,t),o},e.prototype.ready=function(t){var o=this,s=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return P(s,t,t),s},e.prototype.setDriver=function(t,o,s){var r=this;et(t)||(t=[t]);var c=this._getSupportedDrivers(t);function l(){r._config.driver=r.driver()}function u(_){return r._extend(_),l(),r._ready=r._initStorage(r._config),r._ready}function d(_){return function(){var w=0;function R(){for(;w<_.length;){var D=_[w];return w++,r._dbInfo=null,r._ready=null,r.getDriver(D).then(u).catch(R)}l();var N=new Error("No available storage method found.");return r._driverSet=p.reject(N),r._driverSet}return R()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=h.then(function(){var _=c[0];return r._dbInfo=null,r._ready=null,r.getDriver(_).then(function(w){r._driver=w._driver,l(),r._wrapLibraryMethodsWithReady(),r._initDriver=d(c)})}).catch(function(){l();var _=new Error("No available storage method found.");return r._driverSet=p.reject(_),r._driverSet}),P(this._driverSet,o,s),this._driverSet},e.prototype.supports=function(t){return!!tt[t]},e.prototype._extend=function(t){Ie(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],s=0,r=t.length;s<r;s++){var c=t[s];this.supports(c)&&o.push(c)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=we.length;t<o;t++)Hi(this,we[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Xi=new $i;a.exports=Xi},{3:3}]},{},[4])(4)})});var qi=["tooltip"],$t=20;var Xt=new Se("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let E=De(fe);return()=>E.scrollStrategies.reposition({scrollThrottle:$t})}});function en(E){return()=>E.scrollStrategies.reposition({scrollThrottle:$t})}var tn={provide:Xt,deps:[fe],useFactory:en};function nn(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var rn=new Se("mat-tooltip-default-options",{providedIn:"root",factory:nn});var kt="tooltip-panel",Ht=Ot({passive:!0}),on=8,sn=8,an=24,cn=200,Un=(()=>{let y=class y{get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(n){this._positionAtOrigin=Pe(n),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(n){this._disabled=Pe(n),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=Oe(n)}get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=Oe(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=n!=null?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(n,a,f,v,b,T,A,C,B,p,g,P){this._overlay=n,this._elementRef=a,this._scrollDispatcher=f,this._viewContainerRef=v,this._ngZone=b,this._platform=T,this._ariaDescriber=A,this._focusMonitor=C,this._dir=p,this._defaultOptions=g,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=ln,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new ce,this._injector=De(ut),this._scrollStrategy=B,this._document=P,g&&(this._showDelay=g.showDelay,this._hideDelay=g.hideDelay,g.position&&(this.position=g.position),g.positionAtOrigin&&(this.positionAtOrigin=g.positionAtOrigin),g.touchGestures&&(this.touchGestures=g.touchGestures)),p.change.pipe(J(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=on}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(J(this._destroyed)).subscribe(n=>{n?n==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let n=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([a,f])=>{n.removeEventListener(a,f,Ht)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay,a){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let f=this._createOverlay(a);this._detach(),this._portal=this._portal||new zt(this._tooltipComponent,this._viewContainerRef);let v=this._tooltipInstance=f.attach(this._portal).instance;v._triggerElement=this._elementRef.nativeElement,v._mouseLeaveHideDelay=this._hideDelay,v.afterHidden().pipe(J(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),v.show(n)}hide(n=this.hideDelay){let a=this._tooltipInstance;a&&(a.isVisible()?a.hide(n):(a._cancelPendingAnimations(),this._detach()))}toggle(n){this._isTooltipVisible()?this.hide():this.show(void 0,n)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(n){if(this._overlayRef){let v=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!n)&&v._origin instanceof le)return this._overlayRef;this._detach()}let a=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),f=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?n||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(a);return f.positionChanges.pipe(J(this._destroyed)).subscribe(v=>{this._updateCurrentPositionClass(v.connectionPair),this._tooltipInstance&&v.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:f,panelClass:`${this._cssClassPrefix}-${kt}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(J(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(J(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(J(this._destroyed)).subscribe(v=>{this._isTooltipVisible()&&v.keyCode===27&&!Nt(v)&&(v.preventDefault(),v.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){let a=n.getConfig().positionStrategy,f=this._getOrigin(),v=this._getOverlayPosition();a.withPositions([this._addOffset(q(q({},f.main),v.main)),this._addOffset(q(q({},f.fallback),v.fallback))])}_addOffset(n){let a=sn,f=!this._dir||this._dir.value=="ltr";return n.originY==="top"?n.offsetY=-a:n.originY==="bottom"?n.offsetY=a:n.originX==="start"?n.offsetX=f?-a:a:n.originX==="end"&&(n.offsetX=f?a:-a),n}_getOrigin(){let n=!this._dir||this._dir.value=="ltr",a=this.position,f;a=="above"||a=="below"?f={originX:"center",originY:a=="above"?"top":"bottom"}:a=="before"||a=="left"&&n||a=="right"&&!n?f={originX:"start",originY:"center"}:(a=="after"||a=="right"&&n||a=="left"&&!n)&&(f={originX:"end",originY:"center"});let{x:v,y:b}=this._invertPosition(f.originX,f.originY);return{main:f,fallback:{originX:v,originY:b}}}_getOverlayPosition(){let n=!this._dir||this._dir.value=="ltr",a=this.position,f;a=="above"?f={overlayX:"center",overlayY:"bottom"}:a=="below"?f={overlayX:"center",overlayY:"top"}:a=="before"||a=="left"&&n||a=="right"&&!n?f={overlayX:"end",overlayY:"center"}:(a=="after"||a=="right"&&n||a=="left"&&!n)&&(f={overlayX:"start",overlayY:"center"});let{x:v,y:b}=this._invertPosition(f.overlayX,f.overlayY);return{main:f,fallback:{overlayX:v,overlayY:b}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),pt(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,a){return this.position==="above"||this.position==="below"?a==="top"?a="bottom":a==="bottom"&&(a="top"):n==="end"?n="start":n==="start"&&(n="end"),{x:n,y:a}}_updateCurrentPositionClass(n){let{overlayY:a,originX:f,originY:v}=n,b;if(a==="center"?this._dir&&this._dir.value==="rtl"?b=f==="end"?"left":"right":b=f==="start"?"left":"right":b=a==="bottom"&&v==="top"?"above":"below",b!==this._currentPosition){let T=this._overlayRef;if(T){let A=`${this._cssClassPrefix}-${kt}-`;T.removePanelClass(A+this._currentPosition),T.addPanelClass(A+b)}this._currentPosition=b}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",n=>{this._setupPointerExitEventsIfNeeded();let a;n.x!==void 0&&n.y!==void 0&&(a=n),this.show(void 0,a)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",n=>{let a=n.targetTouches?.[0],f=a?{x:a.clientX,y:a.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let v=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,f),this._defaultOptions.touchLongPressShowDelay??v)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",a=>{let f=a.relatedTarget;(!f||!this._overlayRef?.overlayElement.contains(f))&&this.hide()}],["wheel",a=>this._wheelListener(a)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let a=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};n.push(["touchend",a],["touchcancel",a])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([a,f])=>{this._elementRef.nativeElement.addEventListener(a,f,Ht)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){let a=this._document.elementFromPoint(n.clientX,n.clientY),f=this._elementRef.nativeElement;a!==f&&!f.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){let n=this.touchGestures;if(n!=="off"){let a=this._elementRef.nativeElement,f=a.style;(n==="on"||a.nodeName!=="INPUT"&&a.nodeName!=="TEXTAREA")&&(f.userSelect=f.msUserSelect=f.webkitUserSelect=f.MozUserSelect="none"),(n==="on"||!a.draggable)&&(f.webkitUserDrag="none"),f.touchAction="none",f.webkitTapHighlightColor="transparent"}}};y.\u0275fac=function(a){return new(a||y)(U(fe),U(le),U(Yt),U(vt),U(mt),U(Pt),U(Lt),U(Mt),U(Xt),U(Ft),U(rn,8),U(xt))},y.\u0275dir=ct({type:y,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(a,f){a&2&&xe("mat-mdc-tooltip-disabled",f.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0});let E=y;return E})(),ln=(()=>{let y=class y{constructor(n,a,f){this._changeDetectorRef=n,this._elementRef=a,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ce,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=f==="NoopAnimations"}show(n){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let n=this._elementRef.nativeElement.getBoundingClientRect();return n.height>an&&n.width>=cn}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){let a=this._tooltip.nativeElement,f=this._showAnimation,v=this._hideAnimation;if(a.classList.remove(n?v:f),a.classList.add(n?f:v),this._isVisible!==n&&(this._isVisible=n,this._changeDetectorRef.markForCheck()),n&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let b=getComputedStyle(a);(b.getPropertyValue("animation-duration")==="0s"||b.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(a.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}};y.\u0275fac=function(a){return new(a||y)(U(Dt),U(le),U(dt,8))},y.\u0275cmp=st({type:y,selectors:[["mat-tooltip-component"]],viewQuery:function(a,f){if(a&1&&wt(qi,7),a&2){let v;It(v=Tt())&&(f._tooltip=v.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(a,f){a&1&&Ce("mouseleave",function(b){return f._handleMouseLeave(b)}),a&2&&yt("zoom",f.isVisible()?1:null)},standalone:!0,features:[Rt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(a,f){if(a&1){let v=bt();Ae(0,"div",1,0),Ce("animationend",function(T){return lt(v),ft(f._handleAnimationEnd(T))}),Ae(2,"div",2),Et(3),gt()()}a&2&&(xe("mdc-tooltip--multiline",f._isMultiline),_t("ngClass",f.tooltipClass),ht(3),St(f.message))},dependencies:[At],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - 2*8px);margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - 2*8px);align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0});let E=y;return E})();var zn=(()=>{let y=class y{};y.\u0275fac=function(a){return new(a||y)},y.\u0275mod=at({type:y}),y.\u0275inj=ot({providers:[tn],imports:[Bt,Ct,jt,Ne,Ne,Ut]});let E=y;return E})();var ee=Ji(Wt());var Qt=(()=>{let y=class y{constructor(){ee.default.config({driver:ee.default.INDEXEDDB,name:"user-database",version:1,storeName:"users",description:"Store for user metadata"})}getUserMetadata(n){return $(this,null,function*(){try{return yield ee.default.getItem(n)}catch(a){return console.error("Error getting metadata from IndexedDB:",a),null}})}saveUserMetadata(n,a){return $(this,null,function*(){try{yield ee.default.setItem(n,a),console.log("Metadata saved successfully!")}catch(f){console.error("Error saving metadata to IndexedDB:",f)}})}removeUserMetadata(n){return $(this,null,function*(){try{yield ee.default.removeItem(n),console.log(`Metadata for pubkey ${n} removed successfully!`)}catch(a){console.error("Error removing metadata from IndexedDB:",a)}})}clearAllMetadata(){return $(this,null,function*(){try{yield ee.default.clear(),console.log("All metadata cleared successfully!")}catch(n){console.error("Error clearing all metadata:",n)}})}};y.\u0275fac=function(a){return new(a||y)},y.\u0275prov=ne({token:y,factory:y.\u0275fac,providedIn:"root"});let E=y;return E})();var Kt=(()=>{let y=class y{constructor(){this.relays=[],this.maxRetries=10,this.retryDelay=15e3,this.eventSubject=new ce,this.pool=new Vt,this.relays=this.loadRelaysFromLocalStorage(),this.connectToRelays(),this.setupVisibilityChangeHandling()}loadRelaysFromLocalStorage(){let n=[{url:"wss://relay.angor.io",connected:!1,retries:0,retryTimeout:null,ws:void 0},{url:"wss://relay2.angor.io",connected:!1,retries:0,retryTimeout:null,ws:void 0}],a=JSON.parse(localStorage.getItem("nostrRelays")||"[]").map(f=>nt(q({},f),{connected:!1,retries:0,retryTimeout:null,ws:void 0}));return[...n,...a]}connectToRelay(n){n.connected||(n.ws=new WebSocket(n.url),n.ws.onopen=()=>{n.connected=!0,n.retries=0,clearTimeout(n.retryTimeout),console.log(`Connected to relay: ${n.url}`),this.saveRelaysToLocalStorage()},n.ws.onerror=a=>{console.error(`Failed to connect to relay: ${n.url}`,a),this.handleRelayError(n)},n.ws.onclose=()=>{n.connected=!1,console.log(`Disconnected from relay: ${n.url}`),this.handleRelayError(n)},n.ws.onmessage=a=>{try{let f=typeof a.data=="string"?a.data:a.data.toString("utf-8"),v=JSON.parse(f);this.eventSubject.next(v)}catch(f){console.error("Error parsing WebSocket message:",f)}})}handleRelayError(n){if(n.retries>=this.maxRetries){console.error(`Max retries reached for relay: ${n.url}. No further attempts will be made.`);return}let a=this.retryDelay*n.retries;n.retries++,n.retryTimeout=setTimeout(()=>{this.connectToRelay(n),console.log(`Retrying connection to relay: ${n.url} (Attempt ${n.retries})`)},a)}connectToRelays(){this.relays.forEach(n=>this.connectToRelay(n))}ensureConnectedRelays(){return $(this,null,function*(){return this.connectToRelays(),new Promise(n=>{let a=()=>{this.getConnectedRelays().length>0?n():setTimeout(a,1e3)};a()})})}setupVisibilityChangeHandling(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.connectToRelays()}),window.addEventListener("beforeunload",()=>{this.relays.forEach(n=>{n.ws&&n.ws.close()})})}getConnectedRelays(){return this.relays.filter(n=>n.connected).map(n=>n.url)}saveRelaysToLocalStorage(){let n=this.relays.filter(a=>!["wss://relay.angor.io","wss://relay2.angor.io"].includes(a.url));localStorage.setItem("nostrRelays",JSON.stringify(n))}getEventStream(){return this.eventSubject.asObservable()}addRelay(n){if(!this.relays.some(a=>a.url===n)){let a={url:n,connected:!1,retries:0,retryTimeout:null,ws:void 0};this.relays.push(a),this.connectToRelay(a),this.saveRelaysToLocalStorage()}}removeRelay(n){this.relays=this.relays.filter(a=>a.url!==n),this.saveRelaysToLocalStorage()}removeAllCustomRelays(){let n=["wss://relay.angor.io","wss://relay2.angor.io"];this.relays=this.relays.filter(a=>n.includes(a.url)),this.saveRelaysToLocalStorage()}subscribeToFilter(n){let a=this.getConnectedRelays();this.pool.subscribeMany(a,[n],{onevent:f=>{this.eventSubject.next(f)}})}getPool(){return this.pool}getRelays(){return this.relays}};y.\u0275fac=function(a){return new(a||y)},y.\u0275prov=ne({token:y,factory:y.\u0275fac,providedIn:"root"});let E=y;return E})();var Qn=(()=>{let y=class y{constructor(n,a){this.indexedDBService=n,this.relayService=a,this.metadataSubject=new rt(null)}getMetadataStream(){return this.metadataSubject.asObservable()}fetchMetadataWithCache(n){return $(this,null,function*(){let a=yield this.indexedDBService.getUserMetadata(n);return a?(this.metadataSubject.next(a),console.log("Metadata loaded from localForage (IndexedDB)"),a):(a=yield this.fetchMetadataRealtime(n),console.log("Metadata fetched from relays"),a&&(yield this.indexedDBService.saveUserMetadata(n,a),console.log("Metadata saved to localForage (IndexedDB)")),a)})}subscribeToMetadataUpdates(n){this.relayService.ensureConnectedRelays().then(()=>{let a={authors:[n],kinds:[0]};this.relayService.getPool().subscribeMany(this.relayService.getConnectedRelays(),[a],{onevent:f=>$(this,null,function*(){if(f.pubkey===n&&f.kind===0)try{let v=JSON.parse(f.content);this.metadataSubject.next(v),yield this.indexedDBService.saveUserMetadata(n,v),console.log("Real-time metadata update saved to localForage (IndexedDB)")}catch(v){console.error("Error parsing updated metadata:",v)}}),oneose(){console.log("Real-time metadata subscription closed.")}})})}fetchMetadataRealtime(n){return $(this,null,function*(){yield this.relayService.ensureConnectedRelays();let a=this.relayService.getPool(),f=this.relayService.getConnectedRelays();if(f.length===0)throw new Error("No connected relays");let v=new Promise((b,T)=>{let A=a.subscribeMany(f,[{authors:[n],kinds:[0]}],{onevent:C=>{if(C.pubkey===n&&C.kind===0)try{let B=JSON.parse(C.content);b(B),this.metadataSubject.next(B)}catch(B){console.error("Error parsing event content:",B),b(null)}finally{A.close()}},oneose(){A.close(),b(null)}})});return this.subscribeToMetadataUpdates(n),v})}};y.\u0275fac=function(a){return new(a||y)(Re(Qt),Re(Kt))},y.\u0275prov=ne({token:y,factory:y.\u0275fac,providedIn:"root"});let E=y;return E})();export{Un as a,zn as b,Qt as c,Kt as d,Qn as e};
