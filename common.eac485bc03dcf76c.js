"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[76],{5167:(b,f,o)=>{o.d(f,{n:()=>m});var h=o(1648),p=o(4085),r=o(4438);const g=[[["","angorCardFront",""]],[["","angorCardBack",""]],"*",[["","angorCardExpansion",""]]],s=["[angorCardFront]","[angorCardBack]","*","[angorCardExpansion]"];function n(d,i){1&d&&(r.j41(0,"div",0),r.SdG(1),r.k0s(),r.j41(2,"div",1),r.SdG(3,1),r.k0s())}function a(d,i){1&d&&(r.j41(0,"div",2),r.SdG(1,3),r.k0s()),2&d&&r.Y8G("@expandCollapse",void 0)}function y(d,i){if(1&d&&(r.SdG(0,2),r.DNE(1,a,2,1,"div",2)),2&d){const l=r.XpG();r.R7$(),r.vxM(l.expanded?1:-1)}}let m=(()=>{class d{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"angor-card-expanded":this.expanded,"angor-card-face-back":this.flippable&&"back"===this.face,"angor-card-face-front":this.flippable&&"front"===this.face,"angor-card-flippable":this.flippable}}ngOnChanges(l){"expanded"in l&&(this.expanded=(0,p.he)(l.expanded.currentValue)),"flippable"in l&&(this.flippable=(0,p.he)(l.flippable.currentValue))}static{this.\u0275fac=function(e){return new(e||d)}}static{this.\u0275cmp=r.VBU({type:d,selectors:[["angor-card"]],hostVars:2,hostBindings:function(e,t){2&e&&r.HbH(t.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["angorCard"],standalone:!0,features:[r.OA$,r.aNF],ngContentSelectors:s,decls:2,vars:2,consts:[[1,"angor-card-front"],[1,"angor-card-back"],[1,"angor-card-expansion"]],template:function(e,t){1&e&&(r.NAR(g),r.DNE(0,n,4,0)(1,y,2,1)),2&e&&(r.vxM(t.flippable?0:-1),r.R7$(),r.vxM(t.flippable?-1:1))},styles:["angor-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}angor-card.angor-card-flippable .angor-card-front,angor-card.angor-card-flippable .angor-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable .angor-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}angor-card.angor-card-flippable .angor-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:h.F}})}}return d})()},833:(b,f,o)=>{o.d(f,{F:()=>p});var h=o(4438);let p=(()=>{class r{constructor(){this.mainnetLocalStorageKey="mainnetIndexers",this.testnetLocalStorageKey="testnetIndexers",this.mainnetPrimaryIndexerKey="mainnetPrimaryIndexer",this.testnetPrimaryIndexerKey="testnetPrimaryIndexer",this.networkStorageKey="selectedNetwork",this.defaultMainnetIndexer="https://btc.indexer.angor.io/",this.defaultTestnetIndexer="https://tbtc.indexer.angor.io/",this.initializeDefaultIndexers()}initializeDefaultIndexers(){0===this.getIndexers("mainnet").length&&(this.addIndexer(this.defaultMainnetIndexer,"mainnet"),this.setPrimaryIndexer(this.defaultMainnetIndexer,"mainnet")),0===this.getIndexers("testnet").length&&(this.addIndexer(this.defaultTestnetIndexer,"testnet"),this.setPrimaryIndexer(this.defaultTestnetIndexer,"testnet"))}addIndexer(s,n){let a=this.getIndexers(n);a.includes(s)||(a.push(s),this.saveIndexers(a,n))}getIndexers(s){return JSON.parse(localStorage.getItem("mainnet"===s?this.mainnetLocalStorageKey:this.testnetLocalStorageKey)||"[]")}saveIndexers(s,n){localStorage.setItem("mainnet"===n?this.mainnetLocalStorageKey:this.testnetLocalStorageKey,JSON.stringify(s))}setPrimaryIndexer(s,n){this.getIndexers(n).includes(s)&&localStorage.setItem("mainnet"===n?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey,s)}getPrimaryIndexer(s){return localStorage.getItem("mainnet"===s?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}removeIndexer(s,n){let a=this.getIndexers(n);const y=a.indexOf(s);-1!==y&&(a.splice(y,1),this.saveIndexers(a,n),s===this.getPrimaryIndexer(n))&&localStorage.removeItem("mainnet"===n?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}clearAllIndexers(s){const a="mainnet"===s?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey;localStorage.removeItem("mainnet"===s?this.mainnetLocalStorageKey:this.testnetLocalStorageKey),localStorage.removeItem(a)}setNetwork(s){localStorage.setItem(this.networkStorageKey,s)}getNetwork(){return localStorage.getItem(this.networkStorageKey)||"testnet"}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},2914:(b,f,o)=>{o.d(f,{m:()=>d});var h=o(719),p=o(4438),r=o(3813),g=o(5766),s=o(5416),n=o(345);let m=(()=>{class i{constructor(e,t){this.snackBar=e,this.sanitizer=t,this.defaultBackground="url(/assets/gradient.jpg)"}unsubscribe(e){if(e)for(let t=0;t<e.length;t++)e[t].unsubscribe()}now(){return Math.floor(Date.now()/1e3)}getBannerBackgroundStyle(e){if(!e)return this.defaultBackground;if("string"==typeof e){const t=this.sanitizeImageUrl(e);return t?`url(${t})`:this.defaultBackground}return`url(${this.bypassStyle(e)})`}millisatoshisToSatoshis(e){return Math.floor(e/1e3)}getRelayUrls(e){let t=e;if(Array.isArray(t)){t={};for(let u=0;u<e.length;u++)t[e[u]]={}}return Object.keys(t)}getNostrIdentifier(e){try{const t=this.hexToArray(e);return this.convertToBech32(t,"npub")}catch{return e}}copy(e){this.copyToClipboard(e),this.snackBar.open("Copied to clipboard","Hide",{duration:2500,horizontalPosition:"center",verticalPosition:"bottom"})}copyToClipboard(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch{console.error("Oops, unable to copy")}document.body.removeChild(t)}getHexIdentifier(e){const t=this.hexToArray(e);return this.convertToBech32(t,"npub")}getShortenedIdentifier(e){const t=this.getNostrIdentifier(e);return`${t.substring(5,13)}:${t.substring(t.length-8)}`}convertToBech32(e,t){const c=r.I.toWords(e);return r.I.encode(t,c)}hexToArray(e){return(0,g.aT)(e)}arrayToHex(e){return(0,g.My)(e)}keyToHex(e){return(0,g.My)(e)}sanitizeLUD06(e){if(e&&!e.startsWith("http"))return this.bypassUrl(e)}sanitizeUrlAndBypass(e){const t=this.sanitizeUrl(e);return this.bypassUrl(t)}sanitizeUrlAndBypassFrame(e){const t=this.sanitizeUrl(e);return this.bypassFrameUrl(t)}sanitizeUrl(e,t){if(!e)return"";if(!e?.startsWith("http")){if(!t)return e.startsWith("/assets")?e:"";e="https://"+e}return e}sanitizeImageUrl(e){if(!(e=this.sanitizeUrl(e)))return;let t=e.toLowerCase();return t=t.split("?")[0],t.endsWith("jpg")||t.endsWith("jpeg")||t.endsWith("png")||t.endsWith("webp")||t.endsWith("gif")?e:void 0}bypassUrl(e){return this.sanitizer.bypassSecurityTrustUrl(e)}bypassStyle(e){return this.sanitizer.bypassSecurityTrustStyle(e)}bypassFrameUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static{this.\u0275fac=function(t){return new(t||i)(p.KVO(s.UG),p.KVO(n.up))}}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),d=(()=>{class i{constructor(e){this.utilities=e,this.imageExtensions=[".jpg",".jpeg",".gif",".png",".webp",".apng",".jfif",".svg"],this.videoExtensions=[".mp4",".m4v",".m4p",".mpg",".mpeg",".webm",".avif",".mov",".ogv"],this.audioExtensions=[".mp3",".m4a",".flac",".ogg",".wav"]}isImage(e){return this.imageExtensions.some(t=>e.includes(t))}isVideo(e){return this.videoExtensions.some(t=>e.includes(t))}isAudio(e){return this.audioExtensions.some(t=>e.includes(t))}isYouTube(e){return e.includes("youtu.be")||e.includes("youtube.com")}isSpotify(e){return e.includes("open.spotify.com")}isTidal(e){return e.includes("tidal.com")}parseContent(e){return e=e.replaceAll(new RegExp("\\p{Cf}","gu"),""),this.tokenizeText(e).map(c=>this.processToken(c))}tokenizeText(e){return e.split(/(\s|,|#\[[^\]]*\])/).filter(t=>""!==t)}processToken(e){return e.startsWith("nostr:")?this.processNostrToken(e):e.startsWith("@")?this.processUsernameToken(e):e.startsWith("http://")||e.startsWith("https://")?this.processLinkToken(e):e}processNostrToken(e){const t=h.Qe.decode(e.substring(6)),c=t.data;switch(t.type){case"nprofile":case"npub":case"note":case"nevent":return{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:c,token:t.type};default:return e}}processUsernameToken(e){const t=e.substring(1),c=this.findNpubByUsername(t);if(c){const u=h.Qe.decode(c);return{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:u.data,token:u.type}}return e}processLinkToken(e){return this.isImage(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"image"}:this.isVideo(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"video"}:this.isAudio(e)?{safeWord:this.utilities.sanitizeUrlAndBypass(e),word:e,token:"audio"}:this.isYouTube(e)?this.processYouTubeLink(e):this.isSpotify(e)?this.processSpotifyLink(e):this.isTidal(e)?this.processTidalLink(e):{word:e,token:"link"}}processYouTubeLink(e){const t=this.extractYouTubeId(e);return{safeWord:this.utilities.bypassFrameUrl(`https://www.youtube.com/embed/${t}`),word:`https://www.youtube.com/embed/${t}`,token:"youtube"}}processSpotifyLink(e){return{safeWord:this.utilities.sanitizeUrlAndBypassFrame(e.replace("open.spotify.com/","open.spotify.com/embed/")),word:e,token:"spotify"}}processTidalLink(e){const t=e.replace("tidal.com/browse/track/","embed.tidal.com/tracks/");return{safeWord:this.utilities.sanitizeUrlAndBypassFrame(t),word:e,token:"tidal"}}extractYouTubeId(e){const t=e.match(/(?:youtu\.be\/|youtube\.com\/watch\?v=)([^&]+)/);return t?t[1]:""}findNpubByUsername(e){}static{this.\u0275fac=function(t){return new(t||i)(p.KVO(m))}}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);