"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[896],{8896:(it,u,s)=>{s.r(u),s.d(u,{default:()=>K});var v=s(467),c=s(177),j=s(9417),d=s(8834),h=s(1997),y=s(9454),p=s(2102),x=s(9213),b=s(9042),l=s(9115),$=s(9183),R=s(4823),G=s(5398),I=s(7540),Y=s(9345),C=s(8703),t=s(4438),k=s(7291);let E=(()=>{class n{constructor(e,o){this._changeDetectorRef=e,this._storageService=o}ngOnInit(){this.loadUserProfile(),this.subscription=this._storageService.profile$.subscribe(e=>{e&&e.pubKey===this.pubkey&&(this.user=e.metadata,this._changeDetectorRef.detectChanges())})}loadUserProfile(){var e=this;return(0,v.A)(function*(){const o=yield e._storageService.getProfile(e.pubkey);e.user=o||{},e._changeDetectorRef.detectChanges()})()}get displayName(){return this.user?.display_name||this.user?.name||this.shortenPubkey(this.pubkey)}get displayAvatar(){return this.user?.picture||this.avatarUrl||"/images/avatars/avatar-placeholder.png"}shortenPubkey(e){return e?`${e.slice(0,8)}...${e.slice(-8)}`:""}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(k.n))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-post-profile"]],inputs:{pubkey:"pubkey",avatarUrl:"avatarUrl",created_at:"created_at"},standalone:!0,features:[t.aNF],decls:9,vars:7,consts:[[1,"flex","items-center"],[1,"flex","items-center","group",3,"href"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"a",1),t.nrm(2,"img",2),t.j41(3,"div",3)(4,"span",4),t.EFF(5),t.k0s(),t.j41(6,"span",5),t.EFF(7),t.nI1(8,"ago"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("href","/profile/"+i.pubkey,t.B4B),t.R7$(),t.Y8G("src",i.displayAvatar,t.B4B)("alt",i.displayName),t.R7$(3),t.JRh(i.displayName),t.R7$(2),t.JRh(t.bMT(8,5,i.created_at)))},dependencies:[c.MD,C.g]})}}return n})();var P=s(6324),U=s(345),F=s(5245),w=s(5713),S=s(5416),X=s(5351),T=s(881),B=s(9979),L=s(1772),H=s(5645),_=s(413);const V=n=>({"large-font":n});function D(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",52),t.nrm(2,"iframe",53),t.k0s(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("src",e.safeWord,t.f$h)}}function M(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",52),t.nrm(2,"img",54),t.k0s(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("src",e.safeWord,t.B4B)}}function N(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",52)(2,"video",55),t.nrm(3,"source",56),t.EFF(4," Your browser does not support the video tag. "),t.k0s()(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.Y8G("src",e.safeWord,t.B4B)}}function z(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",52)(2,"audio",57),t.nrm(3,"source",58),t.EFF(4," Your browser does not support the audio element. "),t.k0s()(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.Y8G("src",e.safeWord,t.B4B)}}function A(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",59)(2,"a",60)(3,"span",61),t.EFF(4),t.k0s()()(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("href",e.word,t.B4B),t.R7$(2),t.JRh(e.word)}}function O(n,a){if(1&n&&(t.qex(0),t.j41(1,"div",59)(2,"span",62),t.EFF(3),t.k0s()(),t.bVm()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("ngClass",t.eq3(2,V,o.isSingleEmojiOrWord(e))),t.R7$(),t.SpI(" ",e.trim()," ")}}function W(n,a){if(1&n&&(t.j41(0,"div",50),t.DNE(1,D,3,1,"ng-container",51)(2,M,3,1,"ng-container",51)(3,N,5,1,"ng-container",51)(4,z,5,1,"ng-container",51)(5,A,5,2,"ng-container",51)(6,O,4,4,"ng-container",51),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.Y8G("ngIf","youtube"===e.token),t.R7$(),t.Y8G("ngIf","image"===e.token),t.R7$(),t.Y8G("ngIf","video"===e.token),t.R7$(),t.Y8G("ngIf","audio"===e.token),t.R7$(),t.Y8G("ngIf","link"===e.token),t.R7$(),t.Y8G("ngIf",!e.token)}}function J(n,a){if(1&n){const e=t.RV6();t.j41(0,"angor-card",25,0)(2,"div",27),t.nrm(3,"app-post-profile",28),t.j41(4,"button",29),t.nrm(5,"mat-icon",30),t.k0s(),t.j41(6,"mat-menu",null,1)(8,"button",31)(9,"span",32),t.nrm(10,"mat-icon",33),t.j41(11,"span"),t.EFF(12,"Save post"),t.k0s()()(),t.j41(13,"button",31)(14,"span",32),t.nrm(15,"mat-icon",33),t.j41(16,"span"),t.EFF(17,"Hide post"),t.k0s()()(),t.j41(18,"button",31)(19,"span",32),t.nrm(20,"mat-icon",33),t.j41(21,"span"),t.EFF(22,"Snooze for 30 days"),t.k0s()()(),t.j41(23,"button",31)(24,"span",32),t.nrm(25,"mat-icon",33),t.j41(26,"span"),t.EFF(27,"Hide all"),t.k0s()()(),t.nrm(28,"mat-divider",34),t.j41(29,"button",31)(30,"span",32),t.nrm(31,"mat-icon",33),t.j41(32,"span"),t.EFF(33,"Report post"),t.k0s()()(),t.j41(34,"button",31)(35,"span",32),t.nrm(36,"mat-icon",33),t.j41(37,"span"),t.EFF(38,"Turn on notifications for this post"),t.k0s()()()()(),t.DNE(39,W,7,6,"div",35),t.j41(40,"div",36)(41,"button",37),t.nrm(42,"mat-icon",38),t.j41(43,"span",39),t.EFF(44,"Unlike"),t.k0s()(),t.j41(45,"button",37),t.nrm(46,"mat-icon",40),t.j41(47,"span",39),t.EFF(48,"Comment"),t.k0s()(),t.j41(49,"button",37),t.nrm(50,"mat-icon",41),t.j41(51,"span",39),t.EFF(52,"Share"),t.k0s()(),t.j41(53,"button",42),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openZapDialog(i.id))}),t.nrm(54,"mat-icon",43),t.j41(55,"span",39),t.EFF(56,"Zap"),t.k0s()()(),t.nrm(57,"hr",44),t.j41(58,"div",45),t.nrm(59,"div",46),t.j41(60,"div",47)(61,"button",48),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openPost(i.id))}),t.j41(62,"span",49),t.EFF(63,"Read More ..."),t.k0s()()()()()}if(2&n){const e=a.$implicit,o=t.sdS(7),i=t.XpG();t.R7$(3),t.Y8G("pubkey",null==e?null:e.pubkey)("avatarUrl","/images/avatars/avatar-placeholder.png")("created_at",e.created_at),t.R7$(),t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:eye-slash"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:clock"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:minus-circle"),t.R7$(6),t.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),t.R7$(5),t.Y8G("svgIcon","heroicons_solid:bell"),t.R7$(3),t.Y8G("ngForOf",i.parseContent.parseContent(e.content))("ngForTrackBy",i.trackByFn),t.R7$(3),t.Y8G("svgIcon","heroicons_solid:heart"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:share"),t.R7$(4),t.Y8G("svgIcon","heroicons_solid:bolt")}}function Z(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",63)(1,"button",64),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadNextPage())}),t.EFF(2),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("disabled",e.loading),t.R7$(),t.SpI(" ",e.loading?"Loading...":"Load More Posts"," ")}}const K=[{path:"",component:(()=>{class n{constructor(e,o,i,r,m,g,f,Q,q,tt,et,nt,ot,st){this._changeDetectorRef=e,this._signerService=o,this._storageService=i,this._sanitizer=r,this._route=m,this._router=g,this._socialService=f,this._snackBar=Q,this._dialog=q,this._angorConfigService=tt,this._angorConfirmationService=et,this._eventService=nt,this._subscriptionService=ot,this.parseContent=st,this.posts=[],this.likes=[],this.hasMorePosts=!0,this.currentPage=1,this.loading=!1,this.myLikes=[],this.subscriptions=[]}ngOnInit(){this.loadInitialPosts(),this.subscribeToNewPosts()}loadInitialPosts(){var e=this;return(0,v.A)(function*(){e.loading=!0;try{for(let r=0;r<5;r++){const m=yield e._storageService.getAllPostsWithPagination(e.currentPage,10);if(m.length>0){e.posts=[...e.posts,...m],e.posts.sort((g,f)=>f.created_at-g.created_at);break}r<4&&(console.warn(`Attempt ${r+1} failed, retrying in 3s.`),yield e.delay(3e3))}e.hasMorePosts=e.posts.length>0,e.hasMorePosts||console.log("This user has no posts.")}catch(r){console.error("Error loading posts:",r)}finally{e.loading=!1,e._changeDetectorRef.detectChanges()}})()}delay(e){return new Promise(o=>setTimeout(o,e))}getSafeUrl(e){return this._sanitizer.bypassSecurityTrustUrl(e)}isSingleEmojiOrWord(e){const o=e.trim(),i=/^\w+$/.test(o),r=/^[\p{Emoji}]+$/u.test(o);return i||r}subscribeToNewPosts(){const e=this._storageService.posts$.subscribe(o=>{o&&(this.posts.unshift(o),this.posts.sort((i,r)=>r.created_at-i.created_at),this._changeDetectorRef.detectChanges())});this.subscriptions.push(e)}loadNextPage(){this.loading||(this.currentPage++,this.loadInitialPosts())}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}trackByFn(e,o){return o.id||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(P.A),t.rXU(k.n),t.rXU(U.up),t.rXU(F.nX),t.rXU(F.Ix),t.rXU(w.l),t.rXU(S.UG),t.rXU(X.bZ),t.rXU(T.P),t.rXU(B.m),t.rXU(L.x),t.rXU(H.n),t.rXU(_.m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["help-center"]],standalone:!0,features:[t.aNF],decls:49,vars:4,consts:[["expandableCard02","angorCard"],["postCardMenu02","matMenu"],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"dark","relative","overflow-hidden","bg-gray-800","px-4","pb-28","pt-8","dark:bg-gray-900","sm:px-16","sm:pb-48","sm:pt-20"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","z-10","flex","flex-col","items-center"],[1,"text-xl","font-semibold"],[1,"mt-1","text-center","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-7xl"],[1,"text-secondary","mt-3","text-center","tracking-tight","sm:text-2xl"],[1,"angor-mat-rounded","angor-mat-bold","mt-10","w-full","max-w-80","sm:mt-20","sm:max-w-120",3,"subscriptSizing"],["matInput","",3,"placeholder"],["matPrefix","",3,"svgIcon"],[1,"flex","flex-col","items-center","px-6","pb-6","sm:px-10","sm:pb-10"],[1,"-mt-16","grid","w-full","max-w-sm","grid-cols-1","gap-y-8","sm:-mt-24","md:max-w-4xl","md:grid-cols-3","md:gap-x-6","md:gap-y-0"],[1,"bg-card","relative","flex","flex-col","overflow-hidden","rounded-2xl","shadow","transition-shadow","duration-150","ease-in-out","hover:shadow-lg"],[1,"flex","flex-auto","flex-col","items-center","p-8","text-center"],[1,"text-2xl","font-semibold"],[1,"flex","items-center","justify-center","bg-gray-50","px-8","py-4","text-primary-500","dark:border-t","dark:bg-transparent","dark:text-primary-400"],["role","button",1,"flex","items-center"],[1,"absolute","inset-0"],[1,"font-medium"],[1,"mt-10","flex","w-full","max-w-140","m-auto","flex-col","items-start"],[1,"mb-8","flex","w-full","flex-col"],["class","mt-4 m-auto flex justify-center",4,"ngIf"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],[3,"pubkey","avatarUrl","created_at"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item",""],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"my-2"],["class","inline-block break-words whitespace-pre-wrap",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","flex","items-center","sm:mx-5"],["mat-button","",1,"mr-1","px-3"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"text-blue-500","icon-size-5",3,"svgIcon"],[1,"text-green-500","icon-size-5",3,"svgIcon"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"text-orange-500","icon-size-5",3,"svgIcon"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"click"],[1,"mr-1"],[1,"inline-block","break-words","whitespace-pre-wrap"],[4,"ngIf"],[1,"relative","mb-4","block"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"],["alt","Embedded Image",1,"max-h-140","object-cover",2,"width","100%",3,"src"],["controls","",2,"width","100%"],["type","video/mp4",3,"src"],["controls",""],["type","audio/mpeg",3,"src"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],["target","_blank",1,"inline-block","break-words","break-all","text-blue-500","underline",3,"href"],[1,"inline-block","break-words","break-all"],[1,"inline-block","break-words","break-all",3,"ngClass"],[1,"mt-4","m-auto","flex","justify-center"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(o,i){1&o&&(t.j41(0,"div",2)(1,"div",3),t.qSk(),t.j41(2,"svg",4)(3,"g",5),t.nrm(4,"circle",6)(5,"circle",7),t.k0s()(),t.joV(),t.j41(6,"div",8)(7,"h2",9),t.EFF(8,"ANGOR HUB"),t.k0s(),t.j41(9,"div",10),t.EFF(10," Discover the Latest Project Updates "),t.k0s(),t.j41(11,"div",11),t.EFF(12," Browse through real-time events, insights, and updates from projects you follow or bookmark. "),t.k0s(),t.j41(13,"mat-form-field",12),t.nrm(14,"input",13)(15,"mat-icon",14),t.k0s()()(),t.j41(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18)(20,"div",19),t.EFF(21,"Latest Posts"),t.k0s()(),t.j41(22,"div",20)(23,"span",21),t.nrm(24,"span",22),t.j41(25,"span",23),t.EFF(26,"View Latest Posts"),t.k0s()()()(),t.j41(27,"div",17)(28,"div",18)(29,"div",19),t.EFF(30,"Followed Projects"),t.k0s()(),t.j41(31,"div",20)(32,"span",21),t.nrm(33,"span",22),t.j41(34,"span",23),t.EFF(35,"View Followed Projects"),t.k0s()()()(),t.j41(36,"div",17)(37,"div",18)(38,"div",19),t.EFF(39,"Bookmarked Projects"),t.k0s()(),t.j41(40,"div",20)(41,"span",21),t.nrm(42,"span",22),t.j41(43,"span",23),t.EFF(44,"View Bookmarked Projects"),t.k0s()()()()(),t.j41(45,"div",24),t.Z7z(46,J,64,17,"angor-card",25,t.Vm6),t.DNE(48,Z,3,2,"div",26),t.k0s()()()),2&o&&(t.R7$(13),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("placeholder","Search projects, events, or keywords"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:magnifying-glass"),t.R7$(31),t.Dyx(i.posts),t.R7$(2),t.Y8G("ngIf",i.hasMorePosts))},dependencies:[c.MD,c.YU,c.Sq,c.bT,j.YN,d.Hl,d.$z,d.iY,h.w,h.q,y.MY,p.RG,p.rl,p.JW,b.fS,b.fg,x.m_,x.An,l.Cn,l.kk,l.fb,l.Cp,$.D6,R.uc,G.f,I.e,Y.n,E],encapsulation:2})}}return n})()}]}}]);