"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[364],{8364:(A,d,r)=>{r.r(d),r.d(d,{default:()=>M});var l=r(467),k=r(9345),a=r(177),e=r(4438),m=r(8834),f=r(833),h=r(3),x=r(2408),g=r(9213),y=r(9042),j=r(7575),v=r(9183),b=r(7250),F=r(450),B=r(4823),u=r(5245),$=r(8098),R=r(1413),I=r(6977),p=r(8141),P=r(9437),S=r(7673),E=r(497),G=r(7291),D=r(8729);const C=n=>["/chat",n];function T(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.goToProjectDetails(i))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function Y(n,c){if(1&n&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function w(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"div",46)(2,"button",47),e.nrm(3,"mat-icon",48),e.k0s()(),e.j41(4,"div",46)(5,"button",49),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.toggleBookmark(i.nostrPubKey))}),e.nrm(6,"mat-icon",48),e.nI1(7,"async"),e.k0s()()()}if(2&n){let t;const o=e.XpG().$implicit,i=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(5,C,o.nostrPubKey)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:chat-bubble-left-right"),e.R7$(3),e.Y8G("svgIcon",null!=(t=e.bMT(7,3,i.bookmarks$))&&t.includes(o.nostrPubKey)?"heroicons_solid:bookmark":"heroicons_outline:bookmark")}}function N(n,c){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"angor-card",15)(2,"div",16),e.nrm(3,"img",17),e.k0s(),e.j41(4,"div",18)(5,"div",19),e.nrm(6,"img",20),e.k0s(),e.j41(7,"div",21),e.nrm(8,"countdown-timer",22),e.k0s()(),e.j41(9,"div",23)(10,"div",24)(11,"div",25),e.DNE(12,T,2,1,"div",26)(13,Y,2,1,"div",27),e.j41(14,"div",28),e.EFF(15),e.k0s()(),e.DNE(16,w,8,7,"div",29),e.k0s(),e.nrm(17,"hr",30),e.j41(18,"div",31)(19,"div",32),e.nrm(20,"mat-icon",33),e.j41(21,"div",34)(22,"span",35),e.EFF(23,"Target Amount"),e.k0s(),e.j41(24,"span",36),e.EFF(25),e.nI1(26,"number"),e.k0s()()(),e.j41(27,"div",32),e.nrm(28,"mat-icon",33),e.j41(29,"div",34)(30,"span",35),e.EFF(31,"Start Date"),e.k0s(),e.j41(32,"span",36),e.EFF(33),e.nI1(34,"date"),e.k0s()()(),e.j41(35,"div",32),e.nrm(36,"mat-icon",33),e.j41(37,"div",34)(38,"span",35),e.EFF(39,"Penalty Days"),e.k0s(),e.j41(40,"span",36),e.EFF(41),e.k0s()()(),e.j41(42,"div",32),e.nrm(43,"mat-icon",33),e.j41(44,"div",34)(45,"span",35),e.EFF(46,"Expiry Date"),e.k0s(),e.j41(47,"span",36),e.EFF(48),e.nI1(49,"date"),e.k0s()()(),e.j41(50,"div",32),e.nrm(51,"mat-icon",33),e.j41(52,"div",34)(53,"span",35),e.EFF(54,"Stages"),e.k0s(),e.j41(55,"span",36),e.EFF(56),e.k0s()()(),e.j41(57,"div",32),e.nrm(58,"mat-icon",33),e.j41(59,"div",34)(60,"span",35),e.EFF(61,"Seeders"),e.k0s(),e.j41(62,"span",36),e.EFF(63),e.k0s()()()(),e.j41(64,"div",37)(65,"a",38)(66,"span",39),e.nrm(67,"mat-icon",40),e.j41(68,"span",41),e.EFF(69,"Invest Now"),e.k0s()()(),e.j41(70,"button",42),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.goToProjectDetails(i))}),e.j41(71,"span",39),e.nrm(72,"mat-icon",43),e.j41(73,"span",44),e.EFF(74,"View Details"),e.k0s()()()()()(),e.bVm()}if(2&n){const t=c.$implicit,o=e.XpG();e.R7$(3),e.Y8G("src",t.banner||"/images/pages/profile/cover.jpg",e.B4B),e.R7$(3),e.Y8G("src",t.picture||"images/avatars/avatar-placeholder.png",e.B4B),e.R7$(2),e.Y8G("startDate",t.startDate)("expiryDate",t.expiryDate),e.R7$(4),e.vxM(t.displayName||t.name?12:-1),e.R7$(),e.vxM(t.name||t.displayName?-1:13),e.R7$(2),e.SpI(" ",t.about||"No description available"," "),e.R7$(),e.vxM(t.displayName||t.name?16:-1),e.R7$(4),e.Y8G("svgIcon","heroicons_outline:currency-dollar"),e.R7$(5),e.Lme("",e.bMT(26,24,t.targetAmount)," ","mainnet"===o.indexerService.getNetwork()?"BTC":"TBTC",""),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:calendar"),e.R7$(5),e.JRh(e.bMT(34,26,1e3*t.startDate)),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:clock"),e.R7$(5),e.SpI("",t.penaltyDays," days"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:calendar"),e.R7$(5),e.JRh(e.bMT(49,28,1e3*t.expiryDate)),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:chart-bar"),e.R7$(5),e.JRh((null==t.stages?null:t.stages.length)||0),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:user-group"),e.R7$(5),e.JRh((null==t.projectSeeders||null==t.projectSeeders.secretHashes?null:t.projectSeeders.secretHashes.length)||0),e.R7$(2),e.Y8G("href",("mainnet"===o.indexerService.getNetwork()?"https://beta.angor.io/view/":"https://test.angor.io/view/")+t.projectIdentifier,e.B4B),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:circle-stack"),e.R7$(5),e.Y8G("svgIcon","heroicons_outline:document-text")}}function X(n,c){1&n&&(e.qex(0),e.j41(1,"div",50),e.nrm(2,"mat-spinner",51),e.j41(3,"div",52),e.EFF(4,"Loading projects..."),e.k0s()(),e.bVm()),2&n&&(e.R7$(2),e.Y8G("diameter",40))}function L(n,c){1&n&&(e.qex(0),e.j41(1,"div",53),e.nrm(2,"mat-icon",54),e.j41(3,"div",55),e.EFF(4," No projects "),e.k0s()(),e.bVm()),2&n&&(e.R7$(2),e.Y8G("svgIcon","heroicons_outline:archive-box-x-mark"))}const M=[{path:"",component:(()=>{class n{constructor(t,o,i){this._storageService=t,this._router=o,this._projectsService=i,this.bookmarkService=(0,e.WQX)($.U),this.indexerService=(0,e.WQX)(f.F),this.savedProjectDetailes=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.bookmarks$=this.bookmarkService.bookmarks$,this._unsubscribeAll=new R.B}ngOnInit(){var t=this;return(0,l.A)(function*(){try{yield t.bookmarkService.initializeForCurrentUser(),yield t.loadBookmarkedProjects(),t.subscribeToBookmarkChanges(),t.isLoading.set(!1)}catch(o){console.error("Error during initialization:",o),t.isLoading.set(!1)}})()}trackByFn(t,o){return o.nostrPubKey||t}loadBookmarkedProjects(){var t=this;return(0,l.A)(function*(){t.isLoading.set(!0);try{const o=yield t.bookmarkService.getBookmarks(),i=yield t._storageService.getProjectsByNostrPubKeys(o);t.savedProjectDetailes.set(i),t.isLoading.set(!1)}catch(o){console.error("Error loading bookmarked projects:",o),t.isLoading.set(!1)}})()}subscribeToBookmarkChanges(){var t=this;this.bookmarks$.pipe((0,I.Q)(this._unsubscribeAll)).subscribe(function(){var o=(0,l.A)(function*(i){try{const s=yield t._storageService.getProjectsByNostrPubKeys(i);t.savedProjectDetailes.set(s),t.fetchMetadataForProjects(t.savedProjectDetailes()),t.isLoading.set(!1)}catch(s){console.error("Error updating bookmarks:",s),t.isLoading.set(!1)}});return function(i){return o.apply(this,arguments)}}())}fetchMetadataForProjects(t){t.forEach(o=>{this._storageService.getProfile(o.nostrPubKey).then(i=>{i&&this.updateProjectMetadata(o,i)})})}updateProjectMetadata(t,o){t.displayName=o.name||t.displayName,t.about=o.about||t.about,t.picture=o.picture||t.picture,t.banner=o.banner||t.banner}toggleBookmark(t){var o=this;return(0,l.A)(function*(){(yield o.bookmarkService.isBookmarked(t))?yield o.bookmarkService.removeBookmark(t):yield o.bookmarkService.addBookmark(t)})()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}goToProjectDetails(t){this._projectsService.fetchProjectStats(t.projectIdentifier).pipe((0,p.M)(o=>{this._storageService.saveProjectStats(t.projectIdentifier,o)}),(0,p.M)(()=>{this._router.navigate(["/profile",t.nostrPubKey,t.projectIdentifier])}),(0,P.W)(o=>(console.error(`Failed to navigate to project details for ${t.projectIdentifier}:`,o),(0,S.of)(null)))).subscribe()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(G.n),e.rXU(u.Ix),e.rXU(D.i))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-bookmark"]],decls:19,vars:4,consts:[[1,"flex","min-w-0","flex-auto","flex-col"],[1,"dark","relative","flex-0","overflow-hidden","bg-gray-800","px-4","py-8","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"pointer-events-none","absolute","inset-0"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","z-10","flex","flex-col","items-center"],[1,"text-xl","font-semibold"],[1,"mt-1","text-center","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-7xl"],[1,"text-secondary","mt-6","max-w-2xl","text-center","tracking-tight","sm:text-2xl"],[1,"p-6","sm:p-10"],[1,"mx-auto","flex","w-full","flex-auto","flex-col","sm:max-w-5xl"],[1,"mt-10","grid","w-full","min-w-0","grid-cols-1","gap-6","sm:grid-cols-1","md:grid-cols-1","lg:grid-cols-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"filter-info","flex","w-full","flex-col"],[1,"flex","h-32"],["alt","Card cover image","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","alt","Card cover image",1,"object-cover",3,"src"],[1,"flex","px-8"],[1,"bg-card","-mt-12","rounded-full","p-1"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Project logo",1,"h-24","w-24","rounded-full","object-cover",3,"src"],[1,"ml-auto"],[3,"startDate","expiryDate"],[1,"flex","flex-col","px-8","pb-6","pt-4"],[1,"flex","items-center","justify-between"],[1,"min-w-0","flex-1"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"text-secondary","mt-1","truncate","leading-tight"],[1,"absolute","top-2","right-2","flex","space-x-2"],[1,"my-6","w-full","border-t"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"flex","items-center","space-x-2","p-4","bg-white","shadow-md","rounded-lg"],[1,"text-primary","text-3xl",3,"svgIcon"],[1,"flex","flex-col"],[1,"text-sm","text-gray-500"],[1,"font-semibold"],[1,"mt-6","grid","grid-cols-1","sm:grid-cols-2","gap-4"],["target","_blank",1,"group","relative","inline-flex","items-center","justify-center","overflow-hidden","rounded-lg","bg-primary","p-0.5","text-sm","font-medium","hover:bg-primary-700","focus:outline-none","focus:ring-4","focus:ring-primary-300","dark:bg-primary","dark:hover:bg-primary-600","dark:focus:ring-primary-800","w-full",3,"href"],[1,"relative","flex","items-center","justify-center","gap-2","rounded-md","bg-card","w-full","px-4","py-2.5","transition-all","duration-75","ease-in","group-hover:bg-opacity-0"],[1,"icon-size-5","text-primary","dark:text-primary-400","group-hover:text-white",3,"svgIcon"],[1,"text-primary","dark:text-primary-400","group-hover:text-white"],[1,"group","relative","inline-flex","items-center","justify-center","overflow-hidden","rounded-lg","bg-gray-200","dark:bg-gray-700","p-0.5","text-sm","font-medium","hover:bg-gray-300","dark:hover:bg-gray-600","focus:outline-none","focus:ring-4","focus:ring-gray-300","dark:focus:ring-gray-800","w-full",3,"click"],[1,"icon-size-5","text-gray-700","dark:text-gray-300","group-hover:text-white",3,"svgIcon"],[1,"text-gray-700","dark:text-gray-300","group-hover:text-white"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight",3,"click"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","border","bg-white","shadow-md"],["mat-icon-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"flex","flex-auto","flex-col","items-center","justify-center"],[3,"diameter"],[1,"text-secondary","mt-4","text-lg"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.qSk(),e.j41(2,"svg",2)(3,"g",3),e.nrm(4,"circle",4)(5,"circle",5),e.k0s()(),e.joV(),e.j41(6,"div",6)(7,"h2",7),e.EFF(8,"Bookmark"),e.k0s(),e.j41(9,"div",8),e.EFF(10," Explore Your Saved Projects "),e.k0s(),e.j41(11,"div",9),e.EFF(12," Review and manage your bookmarked projects below. "),e.k0s()()(),e.j41(13,"div",10)(14,"div",11)(15,"div",12),e.DNE(16,N,75,30,"ng-container",13),e.k0s(),e.DNE(17,X,5,1,"ng-container",14)(18,L,5,1,"ng-container",14),e.k0s()()()),2&o&&(e.R7$(16),e.Y8G("ngForOf",i.savedProjectDetailes())("ngForTrackBy",i.trackByFn),e.R7$(),e.Y8G("ngIf",i.isLoading()),e.R7$(),e.Y8G("ngIf",!i.isLoading()&&0===i.savedProjectDetailes().length))},dependencies:[u.Wk,m.Hl,m.iY,g.m_,g.An,k.n,x.RG,b.Ve,h.Sy,y.fS,F.mV,B.uc,j.PO,a.MD,a.Sq,a.bT,a.Jj,a.QX,a.vh,v.D6,v.LG,E.W],encapsulation:2})}}return n})()}]}}]);