import{a as ie}from"./chunk-SAOX6H5F.js";import{a as ne,c as oe,d as re,e as ae}from"./chunk-YKVPUU23.js";import"./chunk-YT4QGOI5.js";import"./chunk-KQX6Z6FU.js";import{d as N,e as A}from"./chunk-XCEH5654.js";import{C as R,E as u,G as O,H,L as Y,N as J,O as Q,P as X,R as Z,S as $,T as ee,U as te,q as V,r as P,t as B,x as q,y as z}from"./chunk-FOIKTNAL.js";import{$ as G,X as j,Z as W,ba as U,ca as D}from"./chunk-UUQOEFCO.js";import{f as T,k as K}from"./chunk-DNRPKDOR.js";import{Aa as h,Ba as v,Ca as L,Da as M,Jb as t,Kb as e,Lb as o,Pb as S,Vb as y,Xb as b,cc as x,db as r,dc as a,eb as w,fc as C,h as E,kc as F,lc as k,qa as I,wb as d,yb as n}from"./chunk-E43IZEHU.js";var se=()=>["/register"];function le(i,m){if(i&1&&(t(0,"angor-alert",10),a(1),e()),i&2){let _=b();n("appearance","outline")("showIcon",!1)("type",_.alert.type)("@shake",_.alert.type==="error"),r(),C(" ",_.alert.message," ")}}function ce(i,m){i&1&&o(0,"mat-icon",38),i&2&&n("svgIcon","heroicons_solid:eye")}function de(i,m){i&1&&o(0,"mat-icon",38),i&2&&n("svgIcon","heroicons_solid:eye-slash")}function pe(i,m){i&1&&(t(0,"mat-error"),a(1," Password is required "),e())}function ge(i,m){i&1&&(t(0,"span"),a(1,"Login"),e())}function ue(i,m){i&1&&o(0,"mat-progress-spinner",39)}function fe(i,m){i&1&&o(0,"mat-icon",38),i&2&&n("svgIcon","heroicons_solid:eye")}function he(i,m){i&1&&o(0,"mat-icon",38),i&2&&n("svgIcon","heroicons_solid:eye-slash")}function ve(i,m){i&1&&(t(0,"mat-error"),a(1," Password is required "),e())}function ye(i,m){i&1&&(t(0,"span"),a(1,"Login"),e())}function _e(i,m){i&1&&o(0,"mat-progress-spinner",39)}function xe(i,m){if(i&1){let _=S();t(0,"div")(1,"div",13),o(2,"div",14),t(3,"div",15),a(4,"Or login with extension"),e(),o(5,"div",14),e(),t(6,"div",40)(7,"button",41),y("click",function(){h(_);let c=b();return v(c.loginWithNostrExtension())}),o(8,"mat-icon",38),e()()()}i&2&&(r(8),n("svgIcon","feather:zap"))}var me=(()=>{let m=class m{constructor(l,c,s){this._formBuilder=l,this._router=c,this._signerService=s,this.alert={type:"error",message:""},this.showAlert=!1,this.loading=!1,this.isInstalledExtension=!1,this.privateKey=new Uint8Array,this.publicKey="",this.npub="",this.nsec=""}ngOnInit(){this.initializeForms(),this.checkNostrExtensionAvailability()}initializeForms(){this.SecretKeyLoginForm=this._formBuilder.group({secretKey:["",[u.required,u.minLength(3)]],password:["",u.required]}),this.MenemonicLoginForm=this._formBuilder.group({menemonic:["",[u.required,u.minLength(3)]],password:["",u.required]})}checkNostrExtensionAvailability(){let l=globalThis;l.nostr&&typeof l.nostr.signEvent=="function"?this.isInstalledExtension=!0:this.isInstalledExtension=!1}loginWithSecretKey(){if(this.SecretKeyLoginForm.invalid)return;let l=this.SecretKeyLoginForm.get("secretKey")?.value,c=this.SecretKeyLoginForm.get("password")?.value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(l),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Secret key is missing or invalid.",this.showAlert=!0)}loginWithMenemonic(){if(this.MenemonicLoginForm.invalid)return;let l=this.MenemonicLoginForm.get("menemonic")?.value,c=this.MenemonicLoginForm.get("password")?.value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(l),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Menemonic is missing or invalid.",this.showAlert=!0)}loginWithNostrExtension(){return E(this,null,function*(){(yield this._signerService.handleLoginWithExtension())?this._router.navigateByUrl("/home"):console.error("Failed to log in using Nostr extension")})}};m.\u0275fac=function(c){return new(c||m)(w(X),w(N),w(ie))},m.\u0275cmp=I({type:m,selectors:[["auth-sign-in"]],standalone:!0,features:[F],decls:83,vars:23,consts:[["secretPasswordField",""],["menemonicPasswordField",""],[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-12"],["src","images/logo/logo.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-0.5","flex","items-baseline","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"appearance","showIcon","type"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"ngSubmit","formGroup"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"w-full"],["matInput","","formControlName","secretKey","autocomplete","secretKey"],["matInput","","type","password","autocomplete","current-password-seckey",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"angor-mat-button-large","mt-6","w-full",3,"disabled"],["diameter","24","mode","indeterminate",4,"ngIf"],["matInput","","formControlName","menemonic","autocomplete","menemonic"],["matInput","","type","password","autocomplete","current-password-menemonic",3,"formControlName"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"icon-size-5",3,"svgIcon"],["diameter","24","mode","indeterminate"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto",3,"click"]],template:function(c,s){if(c&1){let p=S();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),o(4,"img",6),e(),t(5,"div",7),a(6," Login "),e(),t(7,"div",8)(8,"div"),a(9,"Don't have an account?"),e(),t(10,"a",9),a(11,"Register"),e()(),t(12,"angor-alert",10),a(13," Privet key test = "),t(14,"strong"),a(15,"123"),e(),o(16,"br"),a(17," Menemonic test = "),t(18,"strong"),a(19,"321"),e(),o(20,"br"),e(),d(21,le,2,5,"angor-alert",11),t(22,"form",12),y("ngSubmit",function(){return h(p),v(s.loginWithSecretKey())}),t(23,"div",13),o(24,"div",14),t(25,"div",15),a(26,"Enter secret key"),e(),o(27,"div",14),e(),t(28,"mat-form-field",16)(29,"mat-label"),a(30,"Secret Key"),e(),o(31,"input",17),e(),t(32,"mat-form-field",16)(33,"mat-label"),a(34,"Password"),e(),o(35,"input",18,0),t(37,"button",19),y("click",function(){h(p);let g=x(36);return v(g.type==="password"?g.type="text":g.type="password")}),d(38,ce,1,1,"mat-icon",20)(39,de,1,1,"mat-icon",20),e(),d(40,pe,2,0,"mat-error",21),e(),t(41,"button",22),d(42,ge,2,0,"span",21)(43,ue,1,0,"mat-progress-spinner",23),e()(),t(44,"div",13),o(45,"div",14),t(46,"div",15),a(47,"Or enter menemonic"),e(),o(48,"div",14),e(),t(49,"form",12),y("ngSubmit",function(){return h(p),v(s.loginWithMenemonic())}),t(50,"mat-form-field",16)(51,"mat-label"),a(52,"Menemonic"),e(),o(53,"input",24),e(),t(54,"mat-form-field",16)(55,"mat-label"),a(56,"Password"),e(),o(57,"input",25,1),t(59,"button",19),y("click",function(){h(p);let g=x(58);return v(g.type==="password"?g.type="text":g.type="password")}),d(60,fe,1,1,"mat-icon",20)(61,he,1,1,"mat-icon",20),e(),d(62,ve,2,0,"mat-error",21),e(),t(63,"button",22),d(64,ye,2,0,"span",21)(65,_e,1,0,"mat-progress-spinner",23),e()(),d(66,xe,9,1,"div",21),e()(),t(67,"div",26),L(),t(68,"svg",27)(69,"g",28),o(70,"circle",29)(71,"circle",30),e()(),t(72,"svg",31)(73,"defs")(74,"pattern",32),o(75,"rect",33),e()(),o(76,"rect",34),e(),M(),t(77,"div",35)(78,"div",36)(79,"div"),a(80,"Angor Hub"),e()(),t(81,"div",37),a(82," Angor Hub is a Nostr client customized around the Angor protocol, a decentralized crowdfunding platform. "),e()()()()}if(c&2){let p=x(36),f=x(58);r(10),n("routerLink",k(22,se)),r(2),n("appearance","outline")("showIcon",!1)("type","info"),r(9),n("ngIf",s.showAlert),r(),n("formGroup",s.SecretKeyLoginForm),r(13),n("formControlName","password"),r(3),n("ngIf",p.type==="password"),r(),n("ngIf",p.type==="text"),r(),n("ngIf",s.SecretKeyLoginForm.get("password").hasError("required")),r(),n("disabled",s.SecretKeyLoginForm.invalid),r(),n("ngIf",!s.loading),r(),n("ngIf",s.loading),r(6),n("formGroup",s.MenemonicLoginForm),r(8),n("formControlName","password"),r(3),n("ngIf",f.type==="password"),r(),n("ngIf",f.type==="text"),r(),n("ngIf",s.MenemonicLoginForm.get("password").hasError("required")),r(),n("disabled",s.MenemonicLoginForm.invalid),r(),n("ngIf",!s.loading),r(),n("ngIf",s.loading),r(),n("ngIf",s.isInstalledExtension)}},dependencies:[A,ne,Z,Y,R,O,H,$,J,Q,z,q,V,P,B,te,ee,G,j,W,D,U,oe,ae,re,K,T],encapsulation:2});let i=m;return i})();var De=[{path:"",component:me}];export{De as default};
