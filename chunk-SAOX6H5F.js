import{a as st,b as Mt,e as xr,f as Di,g as Wi,h as D,ha as Nn}from"./chunk-E43IZEHU.js";var Ti=xr(pr=>{"use strict";pr.byteLength=tl;pr.toByteArray=rl;pr.fromByteArray=il;var Ut=[],pt=[],Qf=typeof Uint8Array<"u"?Uint8Array:Array,vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ie=0,Ii=vn.length;ie<Ii;++ie)Ut[ie]=vn[ie],pt[vn.charCodeAt(ie)]=ie;var ie,Ii;pt[45]=62;pt[95]=63;function Ui(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function tl(e){var t=Ui(e),r=t[0],n=t[1];return(r+n)*3/4-n}function el(e,t,r){return(t+r)*3/4-r}function rl(e){var t,r=Ui(e),n=r[0],o=r[1],i=new Qf(el(e,n,o)),s=0,c=o>0?n-4:n,a;for(a=0;a<c;a+=4)t=pt[e.charCodeAt(a)]<<18|pt[e.charCodeAt(a+1)]<<12|pt[e.charCodeAt(a+2)]<<6|pt[e.charCodeAt(a+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return o===2&&(t=pt[e.charCodeAt(a)]<<2|pt[e.charCodeAt(a+1)]>>4,i[s++]=t&255),o===1&&(t=pt[e.charCodeAt(a)]<<10|pt[e.charCodeAt(a+1)]<<4|pt[e.charCodeAt(a+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function nl(e){return Ut[e>>18&63]+Ut[e>>12&63]+Ut[e>>6&63]+Ut[e&63]}function ol(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(nl(n));return o.join("")}function il(e){for(var t,r=e.length,n=r%3,o=[],i=16383,s=0,c=r-n;s<c;s+=i)o.push(ol(e,s,s+i>c?c:s+i));return n===1?(t=e[r-1],o.push(Ut[t>>2]+Ut[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(Ut[t>>10]+Ut[t>>4&63]+Ut[t<<2&63]+"=")),o.join("")}});var Li=xr(Bn=>{Bn.read=function(e,t,r,n,o){var i,s,c=o*8-n-1,a=(1<<c)-1,f=a>>1,l=-7,u=r?o-1:0,p=r?-1:1,y=e[t+u];for(u+=p,i=y&(1<<-l)-1,y>>=-l,l+=c;l>0;i=i*256+e[t+u],u+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=s*256+e[t+u],u+=p,l-=8);if(i===0)i=1-f;else{if(i===a)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-f}return(y?-1:1)*s*Math.pow(2,i-n)};Bn.write=function(e,t,r,n,o,i){var s,c,a,f=i*8-o-1,l=(1<<f)-1,u=l>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:i-1,g=n?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+u>=1?t+=p/a:t+=p*Math.pow(2,1-u),t*a>=2&&(s++,a/=2),s+u>=l?(c=0,s=l):s+u>=1?(c=(t*a-1)*Math.pow(2,o),s=s+u):(c=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;e[r+y]=c&255,y+=g,c/=256,o-=8);for(s=s<<o|c,f+=o;f>0;e[r+y]=s&255,y+=g,s/=256,f-=8);e[r+y-g]|=h*128}});var Fi=xr(be=>{"use strict";var An=Ti(),me=Li(),_i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;be.Buffer=m;be.SlowBuffer=ul;be.INSPECT_MAX_BYTES=50;var gr=2147483647;be.kMaxLength=gr;m.TYPED_ARRAY_SUPPORT=sl();!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function sl(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function Ot(e){if(e>gr)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,m.prototype),t}function m(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Tn(e)}return Ci(e,t,r)}m.poolSize=8192;function Ci(e,t,r){if(typeof e=="string")return al(e,t);if(ArrayBuffer.isView(e))return fl(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Tt(e,ArrayBuffer)||e&&Tt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tt(e,SharedArrayBuffer)||e&&Tt(e.buffer,SharedArrayBuffer)))return In(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return m.from(n,t,r);var o=ll(e);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return m.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}m.from=function(e,t,r){return Ci(e,t,r)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);function Ni(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function cl(e,t,r){return Ni(e),e<=0?Ot(e):t!==void 0?typeof r=="string"?Ot(e).fill(t,r):Ot(e).fill(t):Ot(e)}m.alloc=function(e,t,r){return cl(e,t,r)};function Tn(e){return Ni(e),Ot(e<0?0:Ln(e)|0)}m.allocUnsafe=function(e){return Tn(e)};m.allocUnsafeSlow=function(e){return Tn(e)};function al(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!m.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=Oi(e,t)|0,n=Ot(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function Sn(e){for(var t=e.length<0?0:Ln(e.length)|0,r=Ot(t),n=0;n<t;n+=1)r[n]=e[n]&255;return r}function fl(e){if(Tt(e,Uint8Array)){var t=new Uint8Array(e);return In(t.buffer,t.byteOffset,t.byteLength)}return Sn(e)}function In(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,m.prototype),n}function ll(e){if(m.isBuffer(e)){var t=Ln(e.length)|0,r=Ot(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||_n(e.length)?Ot(0):Sn(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Sn(e.data)}function Ln(e){if(e>=gr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gr.toString(16)+" bytes");return e|0}function ul(e){return+e!=e&&(e=0),m.alloc(+e)}m.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==m.prototype};m.compare=function(t,r){if(Tt(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),Tt(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),!m.isBuffer(t)||!m.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var n=t.length,o=r.length,i=0,s=Math.min(n,o);i<s;++i)if(t[i]!==r[i]){n=t[i],o=r[i];break}return n<o?-1:o<n?1:0};m.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};m.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return m.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var o=m.allocUnsafe(r),i=0;for(n=0;n<t.length;++n){var s=t[n];if(Tt(s,Uint8Array))i+s.length>o.length?m.from(s).copy(o,i):Uint8Array.prototype.set.call(o,s,i);else if(m.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function Oi(e,t){if(m.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Tt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Un(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return qi(e).length;default:if(o)return n?-1:Un(e).length;t=(""+t).toLowerCase(),o=!0}}m.byteLength=Oi;function hl(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return vl(this,t,r);case"utf8":case"utf-8":return Pi(this,t,r);case"ascii":return bl(this,t,r);case"latin1":case"binary":return El(this,t,r);case"base64":return xl(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bl(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}m.prototype._isBuffer=!0;function se(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}m.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)se(this,r,r+1);return this};m.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)se(this,r,r+3),se(this,r+1,r+2);return this};m.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)se(this,r,r+7),se(this,r+1,r+6),se(this,r+2,r+5),se(this,r+3,r+4);return this};m.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?Pi(this,0,t):hl.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(t){if(!m.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:m.compare(this,t)===0};m.prototype.inspect=function(){var t="",r=be.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};_i&&(m.prototype[_i]=m.prototype.inspect);m.prototype.compare=function(t,r,n,o,i){if(Tt(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),r<0||n>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var s=i-o,c=n-r,a=Math.min(s,c),f=this.slice(o,i),l=t.slice(r,n),u=0;u<a;++u)if(f[u]!==l[u]){s=f[u],c=l[u];break}return s<c?-1:c<s?1:0};function Mi(e,t,r,n,o){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,_n(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof t=="string"&&(t=m.from(t,n)),m.isBuffer(t))return t.length===0?-1:ki(e,t,r,n,o);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):ki(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function ki(e,t,r,n,o){var i=1,s=e.length,c=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,r/=2}function a(y,g){return i===1?y[g]:y.readUInt16BE(g*i)}var f;if(o){var l=-1;for(f=r;f<s;f++)if(a(e,f)===a(t,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===c)return l*i}else l!==-1&&(f-=f-l),l=-1}else for(r+c>s&&(r=s-c),f=r;f>=0;f--){for(var u=!0,p=0;p<c;p++)if(a(e,f+p)!==a(t,p)){u=!1;break}if(u)return f}return-1}m.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};m.prototype.indexOf=function(t,r,n){return Mi(this,t,r,n,!0)};m.prototype.lastIndexOf=function(t,r,n){return Mi(this,t,r,n,!1)};function dl(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var c=parseInt(t.substr(s*2,2),16);if(_n(c))return s;e[r+s]=c}return s}function pl(e,t,r,n){return yr(Un(t,e.length-r),e,r,n)}function gl(e,t,r,n){return yr(Il(t),e,r,n)}function yl(e,t,r,n){return yr(qi(t),e,r,n)}function wl(e,t,r,n){return yr(Ul(t,e.length-r),e,r,n)}m.prototype.write=function(t,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-r;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return dl(this,t,r,n);case"utf8":case"utf-8":return pl(this,t,r,n);case"ascii":case"latin1":case"binary":return gl(this,t,r,n);case"base64":return yl(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wl(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xl(e,t,r){return t===0&&r===e.length?An.fromByteArray(e):An.fromByteArray(e.slice(t,r))}function Pi(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],s=null,c=i>239?4:i>223?3:i>191?2:1;if(o+c<=r){var a,f,l,u;switch(c){case 1:i<128&&(s=i);break;case 2:a=e[o+1],(a&192)===128&&(u=(i&31)<<6|a&63,u>127&&(s=u));break;case 3:a=e[o+1],f=e[o+2],(a&192)===128&&(f&192)===128&&(u=(i&15)<<12|(a&63)<<6|f&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:a=e[o+1],f=e[o+2],l=e[o+3],(a&192)===128&&(f&192)===128&&(l&192)===128&&(u=(i&15)<<18|(a&63)<<12|(f&63)<<6|l&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),o+=c}return ml(n)}var Ri=4096;function ml(e){var t=e.length;if(t<=Ri)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Ri));return r}function bl(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]&127);return n}function El(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function vl(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=Tl[e[i]];return o}function Bl(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}m.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var o=this.subarray(t,r);return Object.setPrototypeOf(o,m.prototype),o};function J(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||J(t,r,this.length);for(var o=this[t],i=1,s=0;++s<r&&(i*=256);)o+=this[t+s]*i;return o};m.prototype.readUintBE=m.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||J(t,r,this.length);for(var o=this[t+--r],i=1;r>0&&(i*=256);)o+=this[t+--r]*i;return o};m.prototype.readUint8=m.prototype.readUInt8=function(t,r){return t=t>>>0,r||J(t,1,this.length),this[t]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||J(t,2,this.length),this[t]|this[t+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||J(t,2,this.length),this[t]<<8|this[t+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||J(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||J(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};m.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||J(t,r,this.length);for(var o=this[t],i=1,s=0;++s<r&&(i*=256);)o+=this[t+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};m.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||J(t,r,this.length);for(var o=r,i=1,s=this[t+--o];o>0&&(i*=256);)s+=this[t+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};m.prototype.readInt8=function(t,r){return t=t>>>0,r||J(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};m.prototype.readInt16LE=function(t,r){t=t>>>0,r||J(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};m.prototype.readInt16BE=function(t,r){t=t>>>0,r||J(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};m.prototype.readInt32LE=function(t,r){return t=t>>>0,r||J(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};m.prototype.readInt32BE=function(t,r){return t=t>>>0,r||J(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};m.prototype.readFloatLE=function(t,r){return t=t>>>0,r||J(t,4,this.length),me.read(this,t,!0,23,4)};m.prototype.readFloatBE=function(t,r){return t=t>>>0,r||J(t,4,this.length),me.read(this,t,!1,23,4)};m.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||J(t,8,this.length),me.read(this,t,!0,52,8)};m.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||J(t,8,this.length),me.read(this,t,!1,52,8)};function ot(e,t,r,n,o,i){if(!m.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){var i=Math.pow(2,8*n)-1;ot(this,t,r,n,i,0)}var s=1,c=0;for(this[r]=t&255;++c<n&&(s*=256);)this[r+c]=t/s&255;return r+n};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){var i=Math.pow(2,8*n)-1;ot(this,t,r,n,i,0)}var s=n-1,c=1;for(this[r+s]=t&255;--s>=0&&(c*=256);)this[r+s]=t/c&255;return r+n};m.prototype.writeUint8=m.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,1,255,0),this[r]=t&255,r+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};m.prototype.writeIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){var i=Math.pow(2,8*n-1);ot(this,t,r,n,i-1,-i)}var s=0,c=1,a=0;for(this[r]=t&255;++s<n&&(c*=256);)t<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(t/c>>0)-a&255;return r+n};m.prototype.writeIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){var i=Math.pow(2,8*n-1);ot(this,t,r,n,i-1,-i)}var s=n-1,c=1,a=0;for(this[r+s]=t&255;--s>=0&&(c*=256);)t<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(t/c>>0)-a&255;return r+n};m.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};m.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};m.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};m.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};m.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||ot(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function Hi(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $i(e,t,r,n,o){return t=+t,r=r>>>0,o||Hi(e,t,r,4,34028234663852886e22,-34028234663852886e22),me.write(e,t,r,n,23,4),r+4}m.prototype.writeFloatLE=function(t,r,n){return $i(this,t,r,!0,n)};m.prototype.writeFloatBE=function(t,r,n){return $i(this,t,r,!1,n)};function Ki(e,t,r,n,o){return t=+t,r=r>>>0,o||Hi(e,t,r,8,17976931348623157e292,-17976931348623157e292),me.write(e,t,r,n,52,8),r+8}m.prototype.writeDoubleLE=function(t,r,n){return Ki(this,t,r,!0,n)};m.prototype.writeDoubleBE=function(t,r,n){return Ki(this,t,r,!1,n)};m.prototype.copy=function(t,r,n,o){if(!m.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);var i=o-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(t,this.subarray(n,o),r),i};m.prototype.fill=function(t,r,n,o){if(typeof t=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!m.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t.length===1){var i=t.charCodeAt(0);(o==="utf8"&&i<128||o==="latin1")&&(t=i)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var s;if(typeof t=="number")for(s=r;s<n;++s)this[s]=t;else{var c=m.isBuffer(t)?t:m.from(t,o),a=c.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=c[s%a]}return this};var Al=/[^+/0-9A-Za-z-_]/g;function Sl(e){if(e=e.split("=")[0],e=e.trim().replace(Al,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Un(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function Il(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Ul(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function qi(e){return An.toByteArray(Sl(e))}function yr(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Tt(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function _n(e){return e!==e}var Tl=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=r*16,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()});function On(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function mr(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Mn(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");On(e.outputLen),On(e.blockLen)}function fe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Pn(e,t){mr(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Le=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Hn=e=>e instanceof Uint8Array;var _e=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),gt=(e,t)=>e<<32-t|e>>>t,ji=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ji)throw new Error("Non little-endian hardware is not supported");function Vi(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ee(e){if(typeof e=="string"&&(e=Vi(e)),!Hn(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function $n(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Hn(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var le=class{clone(){return this._cloneInto()}},Rl={}.toString;function Kn(e){let t=n=>e().update(Ee(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ke(e=32){if(Le&&typeof Le.getRandomValues=="function")return Le.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function zi(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),c=Number(r&i),a=n?4:0,f=n?0:4;e.setUint32(t+a,s,n),e.setUint32(t+f,c,n)}var Re=class extends le{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=_e(this.buffer)}update(t){fe(this);let{view:r,buffer:n,blockLen:o}=this;t=Ee(t);let i=t.length;for(let s=0;s<i;){let c=Math.min(o-this.pos,i-s);if(c===o){let a=_e(t);for(;o<=i-s;s+=o)this.process(a,s);continue}n.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){fe(this),Pn(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let u=s;u<o;u++)r[u]=0;zi(n,o-8,BigInt(this.length*8),i),this.process(n,0);let c=_e(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=a/4,l=this.get();if(f>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<f;u++)c.setUint32(4*u,l[u],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%r&&t.buffer.set(n),t}};var Zi=(e,t,r)=>e&t^~e&r,Gi=(e,t,r)=>e&t^e&r^t&r,Yi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=new Uint32Array(64),br=class extends Re{constructor(){super(64,32,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:s,G:c,H:a}=this;return[t,r,n,o,i,s,c,a]}set(t,r,n,o,i,s,c,a){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,r){for(let u=0;u<16;u++,r+=4)Ht[u]=t.getUint32(r,!1);for(let u=16;u<64;u++){let p=Ht[u-15],y=Ht[u-2],g=gt(p,7)^gt(p,18)^p>>>3,h=gt(y,17)^gt(y,19)^y>>>10;Ht[u]=h+Ht[u-7]+g+Ht[u-16]|0}let{A:n,B:o,C:i,D:s,E:c,F:a,G:f,H:l}=this;for(let u=0;u<64;u++){let p=gt(c,6)^gt(c,11)^gt(c,25),y=l+p+Zi(c,a,f)+Yi[u]+Ht[u]|0,h=(gt(n,2)^gt(n,13)^gt(n,22))+Gi(n,o,i)|0;l=f,f=a,a=c,c=s+y|0,s=i,i=o,o=n,n=y+h|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,l=l+this.H|0,this.set(n,o,i,s,c,a,f,l)}roundClean(){Ht.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ce=Kn(()=>new br);var Ar={};Di(Ar,{bitGet:()=>ns,bitLen:()=>rs,bitMask:()=>ve,bitSet:()=>os,bytesToHex:()=>Xt,bytesToNumberBE:()=>X,bytesToNumberLE:()=>Me,concatBytes:()=>Lt,createHmacDrbg:()=>Br,ensureBytes:()=>V,equalBytes:()=>ts,hexToBytes:()=>Qt,hexToNumber:()=>vr,numberToBytesBE:()=>yt,numberToBytesLE:()=>Pe,numberToHexUnpadded:()=>Dn,numberToVarBytesBE:()=>Qi,utf8ToBytes:()=>es,validateObject:()=>$t});var Fn=BigInt(0),Ne=BigInt(1),Ji=BigInt(2),Oe=e=>e instanceof Uint8Array,Xi=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xt(e){if(!Oe(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Xi[e[r]];return t}function Dn(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function vr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Qt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function X(e){return vr(Xt(e))}function Me(e){if(!Oe(e))throw new Error("Uint8Array expected");return vr(Xt(Uint8Array.from(e).reverse()))}function yt(e,t){return Qt(e.toString(16).padStart(t*2,"0"))}function Pe(e,t){return yt(e,t).reverse()}function Qi(e){return Qt(Dn(e))}function V(e,t,r){let n;if(typeof t=="string")try{n=Qt(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Oe(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}function Lt(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Oe(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function ts(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function es(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function rs(e){let t;for(t=0;e>Fn;e>>=Ne,t+=1);return t}function ns(e,t){return e>>BigInt(t)&Ne}var os=(e,t,r)=>e|(r?Ne:Fn)<<BigInt(t),ve=e=>(Ji<<BigInt(e-1))-Ne,Er=e=>new Uint8Array(e),qn=e=>Uint8Array.from(e);function Br(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Er(e),o=Er(e),i=0,s=()=>{n.fill(1),o.fill(0),i=0},c=(...u)=>r(o,n,...u),a=(u=Er())=>{o=c(qn([0]),u),n=c(),u.length!==0&&(o=c(qn([1]),u),n=c())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,p=[];for(;u<t;){n=c();let y=n.slice();p.push(y),u+=n.length}return Lt(...p)};return(u,p)=>{s(),a(u);let y;for(;!(y=p(f()));)a();return s(),y}}var is={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function $t(e,t,r={}){let n=(o,i,s)=>{let c=is[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);let a=e[o];if(!(s&&a===void 0)&&!c(a,e))throw new Error(`Invalid param ${String(o)}=${a} (${typeof a}), expected ${i}`)};for(let[o,i]of Object.entries(t))n(o,i,!1);for(let[o,i]of Object.entries(r))n(o,i,!0);return e}var Z=BigInt(0),W=BigInt(1),te=BigInt(2),ss=BigInt(3),Sr=BigInt(4),Wn=BigInt(5),jn=BigInt(8),cs=BigInt(9),as=BigInt(16);function z(e,t){let r=e%t;return r>=Z?r:t+r}function fs(e,t,r){if(r<=Z||t<Z)throw new Error("Expected power/modulo > 0");if(r===W)return Z;let n=W;for(;t>Z;)t&W&&(n=n*e%r),e=e*e%r,t>>=W;return n}function ct(e,t,r){let n=e;for(;t-- >Z;)n*=n,n%=r;return n}function He(e,t){if(e===Z||t<=Z)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=z(e,t),n=t,o=Z,i=W,s=W,c=Z;for(;r!==Z;){let f=n/r,l=n%r,u=o-s*f,p=i-c*f;n=r,r=l,o=s,i=c,s=u,c=p}if(n!==W)throw new Error("invert: does not exist");return z(o,t)}function ls(e){let t=(e-W)/te,r,n,o;for(r=e-W,n=0;r%te===Z;r/=te,n++);for(o=te;o<e&&fs(o,t,e)!==e-W;o++);if(n===1){let s=(e+W)/Sr;return function(a,f){let l=a.pow(f,s);if(!a.eql(a.sqr(l),f))throw new Error("Cannot find square root");return l}}let i=(r+W)/te;return function(c,a){if(c.pow(a,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=n,l=c.pow(c.mul(c.ONE,o),r),u=c.pow(a,i),p=c.pow(a,r);for(;!c.eql(p,c.ONE);){if(c.eql(p,c.ZERO))return c.ZERO;let y=1;for(let h=c.sqr(p);y<f&&!c.eql(h,c.ONE);y++)h=c.sqr(h);let g=c.pow(l,W<<BigInt(f-y-1));l=c.sqr(g),u=c.mul(u,g),p=c.mul(p,l),f=y}return u}}function us(e){if(e%Sr===ss){let t=(e+W)/Sr;return function(n,o){let i=n.pow(o,t);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%jn===Wn){let t=(e-Wn)/jn;return function(n,o){let i=n.mul(o,te),s=n.pow(i,t),c=n.mul(o,s),a=n.mul(n.mul(c,te),s),f=n.mul(c,n.sub(a,n.ONE));if(!n.eql(n.sqr(f),o))throw new Error("Cannot find square root");return f}}return e%as,ls(e)}var hs=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ir(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=hs.reduce((n,o)=>(n[o]="function",n),t);return $t(e,r)}function ds(e,t,r){if(r<Z)throw new Error("Expected power > 0");if(r===Z)return e.ONE;if(r===W)return t;let n=e.ONE,o=t;for(;r>Z;)r&W&&(n=e.mul(n,o)),o=e.sqr(o),r>>=W;return n}function ps(e,t){let r=new Array(t.length),n=t.reduce((i,s,c)=>e.is0(s)?i:(r[c]=i,e.mul(i,s)),e.ONE),o=e.inv(n);return t.reduceRight((i,s,c)=>e.is0(s)?i:(r[c]=e.mul(i,r[c]),e.mul(i,s)),o),r}function Ur(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Vn(e,t,r=!1,n={}){if(e<=Z)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Ur(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=us(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:ve(o),ZERO:Z,ONE:W,create:a=>z(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return Z<=a&&a<e},is0:a=>a===Z,isOdd:a=>(a&W)===W,neg:a=>z(-a,e),eql:(a,f)=>a===f,sqr:a=>z(a*a,e),add:(a,f)=>z(a+f,e),sub:(a,f)=>z(a-f,e),mul:(a,f)=>z(a*f,e),pow:(a,f)=>ds(c,a,f),div:(a,f)=>z(a*He(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>He(a,e),sqrt:n.sqrt||(a=>s(c,a)),invertBatch:a=>ps(c,a),cmov:(a,f,l)=>l?f:a,toBytes:a=>r?Pe(a,i):yt(a,i),fromBytes:a=>{if(a.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${a.length}`);return r?Me(a):X(a)}});return Object.freeze(c)}function zn(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Tr(e){let t=zn(e);return t+Math.ceil(t/2)}function Zn(e,t,r=!1){let n=e.length,o=zn(t),i=Tr(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let s=r?X(e):Me(e),c=z(s,t-W)+W;return r?Pe(c,o):yt(c,o)}var ys=BigInt(0),Lr=BigInt(1);function Gn(e,t){let r=(o,i)=>{let s=i.negate();return o?s:i},n=o=>{let i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:r,unsafeLadder(o,i){let s=e.ZERO,c=o;for(;i>ys;)i&Lr&&(s=s.add(c)),c=c.double(),i>>=Lr;return s},precomputeWindow(o,i){let{windows:s,windowSize:c}=n(i),a=[],f=o,l=f;for(let u=0;u<s;u++){l=f,a.push(l);for(let p=1;p<c;p++)l=l.add(f),a.push(l);f=l.double()}return a},wNAF(o,i,s){let{windows:c,windowSize:a}=n(o),f=e.ZERO,l=e.BASE,u=BigInt(2**o-1),p=2**o,y=BigInt(o);for(let g=0;g<c;g++){let h=g*a,d=Number(s&u);s>>=y,d>a&&(d-=p,s+=Lr);let w=h,x=h+Math.abs(d)-1,v=g%2!==0,S=d<0;d===0?l=l.add(r(v,i[w])):f=f.add(r(S,i[x]))}return{p:f,f:l}},wNAFCached(o,i,s,c){let a=o._WINDOW_SIZE||1,f=i.get(o);return f||(f=this.precomputeWindow(o,a),a!==1&&i.set(o,c(f))),this.wNAF(a,f,s)}}}function _r(e){return Ir(e.Fp),$t(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(Mt(st(st({},Ur(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}function ws(e){let t=_r(e);$t(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(st({},t))}var{bytesToNumberBE:xs,hexToBytes:ms}=Ar,ee={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=ee;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xs(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=ee,r=typeof e=="string"?ms(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=ee._parseInt(r.subarray(2)),{d:s,l:c}=ee._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){let t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,r=f=>{let l=f.toString(16);return l.length&1?`0${l}`:l},n=t(r(e.s)),o=t(r(e.r)),i=n.length/2,s=o.length/2,c=r(i),a=r(s);return`30${r(s+i+4)}02${a}${o}02${c}${n}`}},_t=BigInt(0),lt=BigInt(1),Gl=BigInt(2),Yn=BigInt(3),Yl=BigInt(4);function bs(e){let t=ws(e),{Fp:r}=t,n=t.toBytes||((g,h,d)=>{let w=h.toAffine();return Lt(Uint8Array.from([4]),r.toBytes(w.x),r.toBytes(w.y))}),o=t.fromBytes||(g=>{let h=g.subarray(1),d=r.fromBytes(h.subarray(0,r.BYTES)),w=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:d,y:w}});function i(g){let{a:h,b:d}=t,w=r.sqr(g),x=r.mul(w,g);return r.add(r.add(x,r.mul(g,h)),d)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(g){return typeof g=="bigint"&&_t<g&&g<t.n}function c(g){if(!s(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(g){let{allowedPrivateKeyLengths:h,nByteLength:d,wrapPrivateKey:w,n:x}=t;if(h&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Xt(g)),typeof g!="string"||!h.includes(g.length))throw new Error("Invalid key");g=g.padStart(d*2,"0")}let v;try{v=typeof g=="bigint"?g:X(V("private key",g,d))}catch{throw new Error(`private key must be ${d} bytes, hex or bigint, not ${typeof g}`)}return w&&(v=z(v,x)),c(v),v}let f=new Map;function l(g){if(!(g instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(h,d,w){if(this.px=h,this.py=d,this.pz=w,h==null||!r.isValid(h))throw new Error("x required");if(d==null||!r.isValid(d))throw new Error("y required");if(w==null||!r.isValid(w))throw new Error("z required")}static fromAffine(h){let{x:d,y:w}=h||{};if(!h||!r.isValid(d)||!r.isValid(w))throw new Error("invalid affine point");if(h instanceof u)throw new Error("projective point not allowed");let x=v=>r.eql(v,r.ZERO);return x(d)&&x(w)?u.ZERO:new u(d,w,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){let d=r.invertBatch(h.map(w=>w.pz));return h.map((w,x)=>w.toAffine(d[x])).map(u.fromAffine)}static fromHex(h){let d=u.fromAffine(o(V("pointHex",h)));return d.assertValidity(),d}static fromPrivateKey(h){return u.BASE.multiply(a(h))}_setWindowSize(h){this._WINDOW_SIZE=h,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:h,y:d}=this.toAffine();if(!r.isValid(h)||!r.isValid(d))throw new Error("bad point: x or y not FE");let w=r.sqr(d),x=i(h);if(!r.eql(w,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){l(h);let{px:d,py:w,pz:x}=this,{px:v,py:S,pz:_}=h,A=r.eql(r.mul(d,_),r.mul(v,x)),I=r.eql(r.mul(w,_),r.mul(S,x));return A&&I}negate(){return new u(this.px,r.neg(this.py),this.pz)}double(){let{a:h,b:d}=t,w=r.mul(d,Yn),{px:x,py:v,pz:S}=this,_=r.ZERO,A=r.ZERO,I=r.ZERO,T=r.mul(x,x),N=r.mul(v,v),R=r.mul(S,S),k=r.mul(x,v);return k=r.add(k,k),I=r.mul(x,S),I=r.add(I,I),_=r.mul(h,I),A=r.mul(w,R),A=r.add(_,A),_=r.sub(N,A),A=r.add(N,A),A=r.mul(_,A),_=r.mul(k,_),I=r.mul(w,I),R=r.mul(h,R),k=r.sub(T,R),k=r.mul(h,k),k=r.add(k,I),I=r.add(T,T),T=r.add(I,T),T=r.add(T,R),T=r.mul(T,k),A=r.add(A,T),R=r.mul(v,S),R=r.add(R,R),T=r.mul(R,k),_=r.sub(_,T),I=r.mul(R,N),I=r.add(I,I),I=r.add(I,I),new u(_,A,I)}add(h){l(h);let{px:d,py:w,pz:x}=this,{px:v,py:S,pz:_}=h,A=r.ZERO,I=r.ZERO,T=r.ZERO,N=t.a,R=r.mul(t.b,Yn),k=r.mul(d,v),H=r.mul(w,S),$=r.mul(x,_),F=r.add(d,w),b=r.add(v,S);F=r.mul(F,b),b=r.add(k,H),F=r.sub(F,b),b=r.add(d,x);let E=r.add(v,_);return b=r.mul(b,E),E=r.add(k,$),b=r.sub(b,E),E=r.add(w,x),A=r.add(S,_),E=r.mul(E,A),A=r.add(H,$),E=r.sub(E,A),T=r.mul(N,b),A=r.mul(R,$),T=r.add(A,T),A=r.sub(H,T),T=r.add(H,T),I=r.mul(A,T),H=r.add(k,k),H=r.add(H,k),$=r.mul(N,$),b=r.mul(R,b),H=r.add(H,$),$=r.sub(k,$),$=r.mul(N,$),b=r.add(b,$),k=r.mul(H,b),I=r.add(I,k),k=r.mul(E,b),A=r.mul(F,A),A=r.sub(A,k),k=r.mul(F,H),T=r.mul(E,T),T=r.add(T,k),new u(A,I,T)}subtract(h){return this.add(h.negate())}is0(){return this.equals(u.ZERO)}wNAF(h){return y.wNAFCached(this,f,h,d=>{let w=r.invertBatch(d.map(x=>x.pz));return d.map((x,v)=>x.toAffine(w[v])).map(u.fromAffine)})}multiplyUnsafe(h){let d=u.ZERO;if(h===_t)return d;if(c(h),h===lt)return this;let{endo:w}=t;if(!w)return y.unsafeLadder(this,h);let{k1neg:x,k1:v,k2neg:S,k2:_}=w.splitScalar(h),A=d,I=d,T=this;for(;v>_t||_>_t;)v&lt&&(A=A.add(T)),_&lt&&(I=I.add(T)),T=T.double(),v>>=lt,_>>=lt;return x&&(A=A.negate()),S&&(I=I.negate()),I=new u(r.mul(I.px,w.beta),I.py,I.pz),A.add(I)}multiply(h){c(h);let d=h,w,x,{endo:v}=t;if(v){let{k1neg:S,k1:_,k2neg:A,k2:I}=v.splitScalar(d),{p:T,f:N}=this.wNAF(_),{p:R,f:k}=this.wNAF(I);T=y.constTimeNegate(S,T),R=y.constTimeNegate(A,R),R=new u(r.mul(R.px,v.beta),R.py,R.pz),w=T.add(R),x=N.add(k)}else{let{p:S,f:_}=this.wNAF(d);w=S,x=_}return u.normalizeZ([w,x])[0]}multiplyAndAddUnsafe(h,d,w){let x=u.BASE,v=(_,A)=>A===_t||A===lt||!_.equals(x)?_.multiplyUnsafe(A):_.multiply(A),S=v(this,d).add(v(h,w));return S.is0()?void 0:S}toAffine(h){let{px:d,py:w,pz:x}=this,v=this.is0();h==null&&(h=v?r.ONE:r.inv(x));let S=r.mul(d,h),_=r.mul(w,h),A=r.mul(x,h);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(A,r.ONE))throw new Error("invZ was invalid");return{x:S,y:_}}isTorsionFree(){let{h,isTorsionFree:d}=t;if(h===lt)return!0;if(d)return d(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h,clearCofactor:d}=t;return h===lt?this:d?d(u,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return this.assertValidity(),n(u,this,h)}toHex(h=!0){return Xt(this.toRawBytes(h))}}u.BASE=new u(t.Gx,t.Gy,r.ONE),u.ZERO=new u(r.ZERO,r.ONE,r.ZERO);let p=t.nBitLength,y=Gn(u,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:s}}function Es(e){let t=_r(e);return $t(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(st({lowS:!0},t))}function Jn(e){let t=Es(e),{Fp:r,n}=t,o=r.BYTES+1,i=2*r.BYTES+1;function s(b){return _t<b&&b<r.ORDER}function c(b){return z(b,n)}function a(b){return He(b,n)}let{ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:p}=bs(Mt(st({},t),{toBytes(b,E,L){let C=E.toAffine(),B=r.toBytes(C.x),O=Lt;return L?O(Uint8Array.from([E.hasEvenY()?2:3]),B):O(Uint8Array.from([4]),B,r.toBytes(C.y))},fromBytes(b){let E=b.length,L=b[0],C=b.subarray(1);if(E===o&&(L===2||L===3)){let B=X(C);if(!s(B))throw new Error("Point is not on curve");let O=u(B),q=r.sqrt(O),K=(q&lt)===lt;return(L&1)===1!==K&&(q=r.neg(q)),{x:B,y:q}}else if(E===i&&L===4){let B=r.fromBytes(C.subarray(0,r.BYTES)),O=r.fromBytes(C.subarray(r.BYTES,2*r.BYTES));return{x:B,y:O}}else throw new Error(`Point of length ${E} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}})),y=b=>Xt(yt(b,t.nByteLength));function g(b){let E=n>>lt;return b>E}function h(b){return g(b)?c(-b):b}let d=(b,E,L)=>X(b.slice(E,L));class w{constructor(E,L,C){this.r=E,this.s=L,this.recovery=C,this.assertValidity()}static fromCompact(E){let L=t.nByteLength;return E=V("compactSignature",E,L*2),new w(d(E,0,L),d(E,L,2*L))}static fromDER(E){let{r:L,s:C}=ee.toSig(V("DER",E));return new w(L,C)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(E){return new w(this.r,this.s,E)}recoverPublicKey(E){let{r:L,s:C,recovery:B}=this,O=I(V("msgHash",E));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");let q=B===2||B===3?L+t.n:L;if(q>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let K=B&1?"03":"02",G=f.fromHex(K+y(q)),tt=a(q),it=c(-O*tt),ft=c(C*tt),et=f.BASE.multiplyAndAddUnsafe(G,it,ft);if(!et)throw new Error("point at infinify");return et.assertValidity(),et}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Qt(this.toDERHex())}toDERHex(){return ee.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qt(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let x={isValidPrivateKey(b){try{return l(b),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let b=Tr(t.n);return Zn(t.randomBytes(b),t.n)},precompute(b=8,E=f.BASE){return E._setWindowSize(b),E.multiply(BigInt(3)),E}};function v(b,E=!0){return f.fromPrivateKey(b).toRawBytes(E)}function S(b){let E=b instanceof Uint8Array,L=typeof b=="string",C=(E||L)&&b.length;return E?C===o||C===i:L?C===2*o||C===2*i:b instanceof f}function _(b,E,L=!0){if(S(b))throw new Error("first arg must be private key");if(!S(E))throw new Error("second arg must be public key");return f.fromHex(E).multiply(l(b)).toRawBytes(L)}let A=t.bits2int||function(b){let E=X(b),L=b.length*8-t.nBitLength;return L>0?E>>BigInt(L):E},I=t.bits2int_modN||function(b){return c(A(b))},T=ve(t.nBitLength);function N(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(_t<=b&&b<T))throw new Error(`bigint expected < 2^${t.nBitLength}`);return yt(b,t.nByteLength)}function R(b,E,L=k){if(["recovered","canonical"].some(nt=>nt in L))throw new Error("sign() legacy options not supported");let{hash:C,randomBytes:B}=t,{lowS:O,prehash:q,extraEntropy:K}=L;O==null&&(O=!0),b=V("msgHash",b),q&&(b=V("prehashed msgHash",C(b)));let G=I(b),tt=l(E),it=[N(tt),N(G)];if(K!=null){let nt=K===!0?B(r.BYTES):K;it.push(V("extraEntropy",nt))}let ft=Lt(...it),et=G;function bt(nt){let ce=A(nt);if(!p(ce))return;let kn=a(ce),Et=f.BASE.multiply(ce).toAffine(),ae=c(Et.x);if(ae===_t)return;let Te=c(kn*c(et+ae*tt));if(Te===_t)return;let Rn=(Et.x===ae?0:2)|Number(Et.y&lt),Cn=Te;return O&&g(Te)&&(Cn=h(Te),Rn^=1),new w(ae,Cn,Rn)}return{seed:ft,k2sig:bt}}let k={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};function $(b,E,L=k){let{seed:C,k2sig:B}=R(b,E,L),O=t;return Br(O.hash.outputLen,O.nByteLength,O.hmac)(C,B)}f.BASE._setWindowSize(8);function F(b,E,L,C=H){let B=b;if(E=V("msgHash",E),L=V("publicKey",L),"strict"in C)throw new Error("options.strict was renamed to lowS");let{lowS:O,prehash:q}=C,K,G;try{if(typeof B=="string"||B instanceof Uint8Array)try{K=w.fromDER(B)}catch(Et){if(!(Et instanceof ee.Err))throw Et;K=w.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){let{r:Et,s:ae}=B;K=new w(Et,ae)}else throw new Error("PARSE");G=f.fromHex(L)}catch(Et){if(Et.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&K.hasHighS())return!1;q&&(E=t.hash(E));let{r:tt,s:it}=K,ft=I(E),et=a(it),bt=c(ft*et),nt=c(tt*et),ce=f.BASE.multiplyAndAddUnsafe(G,bt,nt)?.toAffine();return ce?c(ce.x)===tt:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:_,sign:$,verify:F,ProjectivePoint:f,Signature:w,utils:x}}var $e=class extends le{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Mn(t);let n=Ee(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return fe(this),this.iHash.update(t),this}digestInto(t){fe(this),mr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},kr=(e,t,r)=>new $e(e,t).update(r).digest();kr.create=(e,t)=>new $e(e,t);function vs(e){return{hash:e,hmac:(t,...r)=>kr(e,t,$n(...r)),randomBytes:ke}}function Xn(e,t){let r=n=>Jn(st(st({},e),vs(n)));return Object.freeze(Mt(st({},r(t)),{create:r}))}var De=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ke=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eo=BigInt(1),qe=BigInt(2),Qn=(e,t)=>(e+t/qe)/t;function ro(e){let t=De,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,l=f*f*e%t,u=ct(l,r,t)*l%t,p=ct(u,r,t)*l%t,y=ct(p,qe,t)*f%t,g=ct(y,o,t)*y%t,h=ct(g,i,t)*g%t,d=ct(h,c,t)*h%t,w=ct(d,a,t)*d%t,x=ct(w,c,t)*h%t,v=ct(x,r,t)*l%t,S=ct(v,s,t)*g%t,_=ct(S,n,t)*f%t,A=ct(_,qe,t);if(!Cr.eql(Cr.sqr(A),e))throw new Error("Cannot find square root");return A}var Cr=Vn(De,void 0,void 0,{sqrt:ro}),Kt=Xn({a:BigInt(0),b:BigInt(7),Fp:Cr,n:Ke,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Ke,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),c=Qn(i*e,t),a=Qn(-n*e,t),f=z(e-c*r-a*o,t),l=z(-c*n-a*i,t),u=f>s,p=l>s;if(u&&(f=t-f),p&&(l=t-l),f>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:f,k2neg:p,k2:l}}}},Ce),We=BigInt(0),no=e=>typeof e=="bigint"&&We<e&&e<De,Bs=e=>typeof e=="bigint"&&We<e&&e<Ke,to={};function Fe(e,...t){let r=to[e];if(r===void 0){let n=Ce(Uint8Array.from(e,o=>o.charCodeAt(0)));r=Lt(n,n),to[e]=r}return Ce(Lt(r,...t))}var Mr=e=>e.toRawBytes(!0).slice(1),Nr=e=>yt(e,32),Rr=e=>z(e,De),Be=e=>z(e,Ke),Pr=Kt.ProjectivePoint,As=(e,t,r)=>Pr.BASE.multiplyAndAddUnsafe(e,t,r);function Or(e){let t=Kt.utils.normPrivateKeyToScalar(e),r=Pr.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Be(-t),bytes:Mr(r)}}function oo(e){if(!no(e))throw new Error("bad x: need 0 < x < p");let t=Rr(e*e),r=Rr(t*e+BigInt(7)),n=ro(r);n%qe!==We&&(n=Rr(-n));let o=new Pr(e,n,eo);return o.assertValidity(),o}function io(...e){return Be(X(Fe("BIP0340/challenge",...e)))}function Ss(e){return Or(e).bytes}function Is(e,t,r=ke(32)){let n=V("message",e),{bytes:o,scalar:i}=Or(t),s=V("auxRand",r,32),c=Nr(i^X(Fe("BIP0340/aux",s))),a=Fe("BIP0340/nonce",c,o,n),f=Be(X(a));if(f===We)throw new Error("sign failed: k is zero");let{bytes:l,scalar:u}=Or(f),p=io(l,o,n),y=new Uint8Array(64);if(y.set(l,0),y.set(Nr(Be(u+p*i)),32),!so(y,n,o))throw new Error("sign: Invalid signature produced");return y}function so(e,t,r){let n=V("signature",e,64),o=V("message",t),i=V("publicKey",r,32);try{let s=oo(X(i)),c=X(n.subarray(0,32));if(!no(c))return!1;let a=X(n.subarray(32,64));if(!Bs(a))return!1;let f=io(Nr(c),Mr(s),o),l=As(s,a,Be(-f));return!(!l||!l.hasEvenY()||l.toAffine().x!==c)}catch{return!1}}var ue={getPublicKey:Ss,sign:Is,verify:so,utils:{randomPrivateKey:Kt.utils.randomPrivateKey,lift_x:oo,pointToBytes:Mr,numberToBytesBE:yt,bytesToNumberBE:X,taggedHash:Fe,mod:z}};var je=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Hr=e=>e instanceof Uint8Array;var Ve=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),wt=(e,t)=>e<<32-t|e>>>t,Us=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Us)throw new Error("Non little-endian hardware is not supported");var Ts=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Y(e){if(!Hr(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Ts[e[r]];return t}function re(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function Ls(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qt(e){if(typeof e=="string"&&(e=Ls(e)),!Hr(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function de(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Hr(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var he=class{clone(){return this._cloneInto()}};function $r(e){let t=n=>e().update(qt(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ze(e=32){if(je&&typeof je.getRandomValues=="function")return je.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Kr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function _s(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function co(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ks(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Kr(e.outputLen),Kr(e.blockLen)}function Rs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Cs(e,t){co(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Ns={number:Kr,bool:_s,bytes:co,hash:ks,exists:Rs,output:Cs},at=Ns;function Os(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),c=Number(r&i),a=n?4:0,f=n?0:4;e.setUint32(t+a,s,n),e.setUint32(t+f,c,n)}var Ze=class extends he{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ve(this.buffer)}update(t){at.exists(this);let{view:r,buffer:n,blockLen:o}=this;t=qt(t);let i=t.length;for(let s=0;s<i;){let c=Math.min(o-this.pos,i-s);if(c===o){let a=Ve(t);for(;o<=i-s;s+=o)this.process(a,s);continue}n.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){at.exists(this),at.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let u=s;u<o;u++)r[u]=0;Os(n,o-8,BigInt(this.length*8),i),this.process(n,0);let c=Ve(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=a/4,l=this.get();if(f>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<f;u++)c.setUint32(4*u,l[u],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%r&&t.buffer.set(n),t}};var Ms=(e,t,r)=>e&t^~e&r,Ps=(e,t,r)=>e&t^e&r^t&r,Hs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dt=new Uint32Array(64),Ge=class extends Ze{constructor(){super(64,32,8,!1),this.A=Ft[0]|0,this.B=Ft[1]|0,this.C=Ft[2]|0,this.D=Ft[3]|0,this.E=Ft[4]|0,this.F=Ft[5]|0,this.G=Ft[6]|0,this.H=Ft[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:s,G:c,H:a}=this;return[t,r,n,o,i,s,c,a]}set(t,r,n,o,i,s,c,a){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,r){for(let u=0;u<16;u++,r+=4)Dt[u]=t.getUint32(r,!1);for(let u=16;u<64;u++){let p=Dt[u-15],y=Dt[u-2],g=wt(p,7)^wt(p,18)^p>>>3,h=wt(y,17)^wt(y,19)^y>>>10;Dt[u]=h+Dt[u-7]+g+Dt[u-16]|0}let{A:n,B:o,C:i,D:s,E:c,F:a,G:f,H:l}=this;for(let u=0;u<64;u++){let p=wt(c,6)^wt(c,11)^wt(c,25),y=l+p+Ms(c,a,f)+Hs[u]+Dt[u]|0,h=(wt(n,2)^wt(n,13)^wt(n,22))+Ps(n,o,i)|0;l=f,f=a,a=c,c=s+y|0,s=i,i=o,o=n,n=y+h|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,l=l+this.H|0,this.set(n,o,i,s,c,a,f,l)}roundClean(){Dt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},qr=class extends Ge{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Wt=$r(()=>new Ge),Bu=$r(()=>new qr);function pe(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function kt(...e){let t=(o,i)=>s=>o(i(s)),r=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),n=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:r,decode:n}}function Rt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(pe(r),r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function Ct(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Je(e,t="="){if(pe(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of r)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of r)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function po(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function ao(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,o=[],i=Array.from(e);for(i.forEach(s=>{if(pe(s),s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,c=!0;for(let a=n;a<i.length;a++){let f=i[a],l=t*s+f;if(!Number.isSafeInteger(l)||t*s/t!==s||l-f!==t*s)throw new Error("convertRadix: carry overflow");if(s=l%r,i[a]=Math.floor(l/r),!Number.isSafeInteger(i[a])||i[a]*r+s!==l)throw new Error("convertRadix: carry overflow");if(c)i[a]?c=!1:n=a;else continue}if(o.push(s),c)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}var go=(e,t)=>t?go(t,e%t):e,Ye=(e,t)=>e+(t-go(e,t));function Fr(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Ye(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${Ye(t,r)}`);let o=0,i=0,s=2**r-1,c=[];for(let a of e){if(pe(a),a>=2**t)throw new Error(`convertRadix2: invalid data word=${a} from=${t}`);if(o=o<<t|a,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)c.push((o>>i-r&s)>>>0);o&=2**i-1}if(o=o<<r-i&s,!n&&i>=t)throw new Error("Excess padding");if(!n&&o)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&c.push(o>>>0),c}function $s(e){return pe(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ao(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ao(t,e,2**8))}}}function jt(e,t=!1){if(pe(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ye(8,e)>32||Ye(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Fr(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Fr(r,e,8,t))}}}function fo(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}var Ks=kt(jt(4),Rt("0123456789ABCDEF"),Ct("")),qs=kt(jt(5),Rt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Je(5),Ct("")),Su=kt(jt(5),Rt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Je(5),Ct("")),Iu=kt(jt(5),Rt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Ct(""),po(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),ut=kt(jt(6),Rt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Je(6),Ct("")),Fs=kt(jt(6),Rt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Je(6),Ct("")),jr=e=>kt($s(58),Rt(e),Ct("")),Dr=jr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Uu=jr("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Tu=jr("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),lo=[0,2,3,5,6,7,9,10,11],Ds={encode(e){let t="";for(let r=0;r<e.length;r+=8){let n=e.subarray(r,r+8);t+=Dr.encode(n).padStart(lo[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){let n=e.slice(r,r+11),o=lo.indexOf(n.length),i=Dr.decode(n);for(let s=0;s<i.length-o;s++)if(i[s]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}};var Wr=kt(Rt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ct("")),uo=[996825010,642813549,513874426,1027748829,705979059];function Ae(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<uo.length;n++)(t>>n&1)===1&&(r^=uo[n]);return r}function ho(e,t,r=1){let n=e.length,o=1;for(let i=0;i<n;i++){let s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=Ae(o)^s>>5}o=Ae(o);for(let i=0;i<n;i++)o=Ae(o)^e.charCodeAt(i)&31;for(let i of t)o=Ae(o)^i;for(let i=0;i<6;i++)o=Ae(o);return o^=r,Wr.encode(Fr([o%2**30],30,5,!1))}function yo(e){let t=e==="bech32"?1:734539939,r=jt(5),n=r.decode,o=r.encode,i=fo(n);function s(l,u,p=90){if(typeof l!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof l}`);if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof u}`);let y=l.length+7+u.length;if(p!==!1&&y>p)throw new TypeError(`Length ${y} exceeds limit ${p}`);return l=l.toLowerCase(),`${l}1${Wr.encode(u)}${ho(l,u,t)}`}function c(l,u=90){if(typeof l!="string")throw new Error(`bech32.decode input should be string, not ${typeof l}`);if(l.length<8||u!==!1&&l.length>u)throw new TypeError(`Wrong string length: ${l.length} (${l}). Expected (8..${u})`);let p=l.toLowerCase();if(l!==p&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");l=p;let y=l.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');let g=l.slice(0,y),h=l.slice(y+1);if(h.length<6)throw new Error("Data must be at least 6 characters long");let d=Wr.decode(h).slice(0,-6),w=ho(g,d,t);if(!h.endsWith(w))throw new Error(`Invalid checksum in ${l}: expected "${w}"`);return{prefix:g,words:d}}let a=fo(c);function f(l){let{prefix:u,words:p}=c(l,!1);return{prefix:u,words:p,bytes:n(p)}}return{encode:s,decode:c,decodeToBytes:f,decodeUnsafe:a,fromWords:n,fromWordsUnsafe:i,toWords:o}}var Vt=yo("bech32"),Lu=yo("bech32m"),Ws={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},js=kt(jt(4),Rt("0123456789abcdef"),Ct(""),po(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Vs={utf8:Ws,hex:js,base16:Ks,base32:qs,base64:ut,base64url:Fs,base58:Dr,base58xmr:Ds},_u=`Invalid encoding type. Available types: ${Object.keys(Vs).join(", ")}`;function Xe(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Vr(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function zr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function M(e,...t){if(!zr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function zt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Se(e,t){M(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Qe=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);var P=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Zt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),zs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zs)throw new Error("Non little-endian hardware is not supported");function Zs(e){if(typeof e!="string")throw new Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vt(e){if(typeof e=="string")e=Zs(e);else if(zr(e))e=e.slice();else throw new Error(`Uint8Array expected, got ${typeof e}`);return e}function wo(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function ne(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}var Bt=(e,t)=>(Object.assign(t,e),t);function oe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),c=Number(r&i),a=n?4:0,f=n?0:4;e.setUint32(t+a,s,n),e.setUint32(t+f,c,n)}var Nt=16,Gr=new Uint8Array(16),At=P(Gr),Gs=225,Ys=(e,t,r,n)=>{let o=n&1;return{s3:r<<31|n>>>1,s2:t<<31|r>>>1,s1:e<<31|t>>>1,s0:e>>>1^Gs<<24&-(o&1)}},ht=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function Js(e){e.reverse();let t=e[15]&1,r=0;for(let n=0;n<e.length;n++){let o=e[n];e[n]=o>>>1|r,r=(o&1)<<7}return e[0]^=-t&225,e}var Xs=e=>e>64*1024?8:e>1024?4:2,tr=class{constructor(t,r){this.blockLen=Nt,this.outputLen=Nt,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,t=vt(t),M(t,16);let n=Zt(t),o=n.getUint32(0,!1),i=n.getUint32(4,!1),s=n.getUint32(8,!1),c=n.getUint32(12,!1),a=[];for(let g=0;g<128;g++)a.push({s0:ht(o),s1:ht(i),s2:ht(s),s3:ht(c)}),{s0:o,s1:i,s2:s,s3:c}=Ys(o,i,s,c);let f=Xs(r||1024);if(![1,2,4,8].includes(f))throw new Error(`ghash: wrong window size=${f}, should be 2, 4 or 8`);this.W=f;let u=128/f,p=this.windowSize=2**f,y=[];for(let g=0;g<u;g++)for(let h=0;h<p;h++){let d=0,w=0,x=0,v=0;for(let S=0;S<f;S++){if(!(h>>>f-S-1&1))continue;let{s0:A,s1:I,s2:T,s3:N}=a[f*g+S];d^=A,w^=I,x^=T,v^=N}y.push({s0:d,s1:w,s2:x,s3:v})}this.t=y}_updateBlock(t,r,n,o){t^=this.s0,r^=this.s1,n^=this.s2,o^=this.s3;let{W:i,t:s,windowSize:c}=this,a=0,f=0,l=0,u=0,p=(1<<i)-1,y=0;for(let g of[t,r,n,o])for(let h=0;h<4;h++){let d=g>>>8*h&255;for(let w=8/i-1;w>=0;w--){let x=d>>>i*w&p,{s0:v,s1:S,s2:_,s3:A}=s[y*c+x];a^=v,f^=S,l^=_,u^=A,y+=1}}this.s0=a,this.s1=f,this.s2=l,this.s3=u}update(t){t=vt(t),zt(this);let r=P(t),n=Math.floor(t.length/Nt),o=t.length%Nt;for(let i=0;i<n;i++)this._updateBlock(r[i*4+0],r[i*4+1],r[i*4+2],r[i*4+3]);return o&&(Gr.set(t.subarray(n*Nt)),this._updateBlock(At[0],At[1],At[2],At[3]),At.fill(0)),this}destroy(){let{t}=this;for(let r of t)r.s0=0,r.s1=0,r.s2=0,r.s3=0}digestInto(t){zt(this),Se(t,this),this.finished=!0;let{s0:r,s1:n,s2:o,s3:i}=this,s=P(t);return s[0]=r,s[1]=n,s[2]=o,s[3]=i,t}digest(){let t=new Uint8Array(Nt);return this.digestInto(t),this.destroy(),t}},Zr=class extends tr{constructor(t,r){t=vt(t);let n=Js(t.slice());super(n,r),n.fill(0)}update(t){t=vt(t),zt(this);let r=P(t),n=t.length%Nt,o=Math.floor(t.length/Nt);for(let i=0;i<o;i++)this._updateBlock(ht(r[i*4+3]),ht(r[i*4+2]),ht(r[i*4+1]),ht(r[i*4+0]));return n&&(Gr.set(t.subarray(o*Nt)),this._updateBlock(ht(At[3]),ht(At[2]),ht(At[1]),ht(At[0])),At.fill(0)),this}digestInto(t){zt(this),Se(t,this),this.finished=!0;let{s0:r,s1:n,s2:o,s3:i}=this,s=P(t);return s[0]=r,s[1]=n,s[2]=o,s[3]=i,t.reverse()}};function xo(e){let t=(n,o)=>e(o,n.length).update(vt(n)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(n,o)=>e(n,o),t}var Yr=xo((e,t)=>new tr(e,t)),mo=xo((e,t)=>new Zr(e,t));var rt=16,Qr=4,er=new Uint8Array(rt),Qs=283;function tn(e){return e<<1^Qs&-(e>>7)}function ge(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(t&1),e=tn(e);return r}var Xr=(()=>{let e=new Uint8Array(256);for(let r=0,n=1;r<256;r++,n^=tn(n))e[r]=n;let t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let n=e[255-r];n|=n<<8,t[e[r]]=(n^n>>4^n>>5^n>>6^n>>7^99)&255}return t})(),tc=Xr.map((e,t)=>Xr.indexOf(t)),ec=e=>e<<24|e>>>8,Jr=e=>e<<8|e>>>24;function bo(e,t){if(e.length!==256)throw new Error("Wrong sbox length");let r=new Uint32Array(256).map((f,l)=>t(e[l])),n=r.map(Jr),o=n.map(Jr),i=o.map(Jr),s=new Uint32Array(256*256),c=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let f=0;f<256;f++)for(let l=0;l<256;l++){let u=f*256+l;s[u]=r[f]^n[l],c[u]=o[f]^i[l],a[u]=e[f]<<8|e[l]}return{sbox:e,sbox2:a,T0:r,T1:n,T2:o,T3:i,T01:s,T23:c}}var en=bo(Xr,e=>ge(e,3)<<24|e<<16|e<<8|ge(e,2)),Eo=bo(tc,e=>ge(e,11)<<24|ge(e,13)<<16|ge(e,9)<<8|ge(e,14)),rc=(()=>{let e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=tn(r))e[t]=r;return e})();function Yt(e){M(e);let t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:r}=en,n=P(e),o=n.length,i=c=>St(r,c,c,c,c),s=new Uint32Array(t+28);s.set(n);for(let c=o;c<s.length;c++){let a=s[c-1];c%o===0?a=i(ec(a))^rc[c/o-1]:o>6&&c%o===4&&(a=i(a)),s[c]=s[c-o]^a}return s}function vo(e){let t=Yt(e),r=t.slice(),n=t.length,{sbox2:o}=en,{T0:i,T1:s,T2:c,T3:a}=Eo;for(let f=0;f<n;f+=4)for(let l=0;l<4;l++)r[f+l]=t[n-f-4+l];t.fill(0);for(let f=4;f<n-4;f++){let l=r[f],u=St(o,l,l,l,l);r[f]=i[u&255]^s[u>>>8&255]^c[u>>>16&255]^a[u>>>24]}return r}function Gt(e,t,r,n,o,i){return e[r<<8&65280|n>>>8&255]^t[o>>>8&65280|i>>>24&255]}function St(e,t,r,n,o){return e[t&255|r&65280]|e[n>>>16&255|o>>>16&65280]<<16}function dt(e,t,r,n,o){let{sbox2:i,T01:s,T23:c}=en,a=0;t^=e[a++],r^=e[a++],n^=e[a++],o^=e[a++];let f=e.length/4-2;for(let g=0;g<f;g++){let h=e[a++]^Gt(s,c,t,r,n,o),d=e[a++]^Gt(s,c,r,n,o,t),w=e[a++]^Gt(s,c,n,o,t,r),x=e[a++]^Gt(s,c,o,t,r,n);t=h,r=d,n=w,o=x}let l=e[a++]^St(i,t,r,n,o),u=e[a++]^St(i,r,n,o,t),p=e[a++]^St(i,n,o,t,r),y=e[a++]^St(i,o,t,r,n);return{s0:l,s1:u,s2:p,s3:y}}function Bo(e,t,r,n,o){let{sbox2:i,T01:s,T23:c}=Eo,a=0;t^=e[a++],r^=e[a++],n^=e[a++],o^=e[a++];let f=e.length/4-2;for(let g=0;g<f;g++){let h=e[a++]^Gt(s,c,t,o,n,r),d=e[a++]^Gt(s,c,r,t,o,n),w=e[a++]^Gt(s,c,n,r,t,o),x=e[a++]^Gt(s,c,o,n,r,t);t=h,r=d,n=w,o=x}let l=e[a++]^St(i,t,o,n,r),u=e[a++]^St(i,r,t,o,n),p=e[a++]^St(i,n,r,t,o),y=e[a++]^St(i,o,n,r,t);return{s0:l,s1:u,s2:p,s3:y}}function ye(e,t){if(!t)return new Uint8Array(e);if(M(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function nc(e,t,r,n){M(t,rt),M(r);let o=r.length;n=ye(o,n);let i=t,s=P(i),{s0:c,s1:a,s2:f,s3:l}=dt(e,s[0],s[1],s[2],s[3]),u=P(r),p=P(n);for(let g=0;g+4<=u.length;g+=4){p[g+0]=u[g+0]^c,p[g+1]=u[g+1]^a,p[g+2]=u[g+2]^f,p[g+3]=u[g+3]^l;let h=1;for(let d=i.length-1;d>=0;d--)h=h+(i[d]&255)|0,i[d]=h&255,h>>>=8;({s0:c,s1:a,s2:f,s3:l}=dt(e,s[0],s[1],s[2],s[3]))}let y=rt*Math.floor(u.length/Qr);if(y<o){let g=new Uint32Array([c,a,f,l]),h=Qe(g);for(let d=y,w=0;d<o;d++,w++)n[d]=r[d]^h[w]}return n}function Ie(e,t,r,n,o){M(r,rt),M(n),o=ye(n.length,o);let i=r,s=P(i),c=Zt(i),a=P(n),f=P(o),l=t?0:12,u=n.length,p=c.getUint32(l,t),{s0:y,s1:g,s2:h,s3:d}=dt(e,s[0],s[1],s[2],s[3]);for(let x=0;x+4<=a.length;x+=4)f[x+0]=a[x+0]^y,f[x+1]=a[x+1]^g,f[x+2]=a[x+2]^h,f[x+3]=a[x+3]^d,p=p+1>>>0,c.setUint32(l,p,t),{s0:y,s1:g,s2:h,s3:d}=dt(e,s[0],s[1],s[2],s[3]);let w=rt*Math.floor(a.length/Qr);if(w<u){let x=new Uint32Array([y,g,h,d]),v=Qe(x);for(let S=w,_=0;S<u;S++,_++)o[S]=n[S]^v[_]}return o}var Fu=Bt({blockSize:16,nonceLength:16},function(t,r){M(t),M(r,rt);function n(o,i){let s=Yt(t),c=r.slice(),a=nc(s,c,o,i);return s.fill(0),c.fill(0),a}return{encrypt:(o,i)=>n(o,i),decrypt:(o,i)=>n(o,i)}});function Ao(e){if(M(e),e.length%rt!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${rt}`)}function So(e,t,r){let n=e.length,o=n%rt;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let i=P(e);if(t){let a=rt-o;a||(a=rt),n=n+a}let s=ye(n,r),c=P(s);return{b:i,o:c,out:s}}function Io(e,t){if(!t)return e;let r=e.length;if(!r)throw new Error("aes/pcks5: empty ciphertext not allowed");let n=e[r-1];if(n<=0||n>16)throw new Error(`aes/pcks5: wrong padding byte: ${n}`);let o=e.subarray(0,-n);for(let i=0;i<n;i++)if(e[r-i-1]!==n)throw new Error("aes/pcks5: wrong padding");return o}function Uo(e){let t=new Uint8Array(16),r=P(t);t.set(e);let n=rt-e.length;for(let o=rt-n;o<rt;o++)t[o]=n;return r}var Du=Bt({blockSize:16},function(t,r={}){M(t);let n=!r.disablePadding;return{encrypt:(o,i)=>{M(o);let{b:s,o:c,out:a}=So(o,n,i),f=Yt(t),l=0;for(;l+4<=s.length;){let{s0:u,s1:p,s2:y,s3:g}=dt(f,s[l+0],s[l+1],s[l+2],s[l+3]);c[l++]=u,c[l++]=p,c[l++]=y,c[l++]=g}if(n){let u=Uo(o.subarray(l*4)),{s0:p,s1:y,s2:g,s3:h}=dt(f,u[0],u[1],u[2],u[3]);c[l++]=p,c[l++]=y,c[l++]=g,c[l++]=h}return f.fill(0),a},decrypt:(o,i)=>{Ao(o);let s=vo(t),c=ye(o.length,i),a=P(o),f=P(c);for(let l=0;l+4<=a.length;){let{s0:u,s1:p,s2:y,s3:g}=Bo(s,a[l+0],a[l+1],a[l+2],a[l+3]);f[l++]=u,f[l++]=p,f[l++]=y,f[l++]=g}return s.fill(0),Io(c,n)}}}),rn=Bt({blockSize:16,nonceLength:16},function(t,r,n={}){M(t),M(r,16);let o=!n.disablePadding;return{encrypt:(i,s)=>{let c=Yt(t),{b:a,o:f,out:l}=So(i,o,s),u=P(r),p=u[0],y=u[1],g=u[2],h=u[3],d=0;for(;d+4<=a.length;)p^=a[d+0],y^=a[d+1],g^=a[d+2],h^=a[d+3],{s0:p,s1:y,s2:g,s3:h}=dt(c,p,y,g,h),f[d++]=p,f[d++]=y,f[d++]=g,f[d++]=h;if(o){let w=Uo(i.subarray(d*4));p^=w[0],y^=w[1],g^=w[2],h^=w[3],{s0:p,s1:y,s2:g,s3:h}=dt(c,p,y,g,h),f[d++]=p,f[d++]=y,f[d++]=g,f[d++]=h}return c.fill(0),l},decrypt:(i,s)=>{Ao(i);let c=vo(t),a=P(r),f=ye(i.length,s),l=P(i),u=P(f),p=a[0],y=a[1],g=a[2],h=a[3];for(let d=0;d+4<=l.length;){let w=p,x=y,v=g,S=h;p=l[d+0],y=l[d+1],g=l[d+2],h=l[d+3];let{s0:_,s1:A,s2:I,s3:T}=Bo(c,p,y,g,h);u[d++]=_^w,u[d++]=A^x,u[d++]=I^v,u[d++]=T^S}return c.fill(0),Io(f,o)}}}),Wu=Bt({blockSize:16,nonceLength:16},function(t,r){M(t),M(r,16);function n(o,i,s){let c=Yt(t),a=o.length;s=ye(a,s);let f=P(o),l=P(s),u=i?l:f,p=P(r),y=p[0],g=p[1],h=p[2],d=p[3];for(let x=0;x+4<=f.length;){let{s0:v,s1:S,s2:_,s3:A}=dt(c,y,g,h,d);l[x+0]=f[x+0]^v,l[x+1]=f[x+1]^S,l[x+2]=f[x+2]^_,l[x+3]=f[x+3]^A,y=u[x++],g=u[x++],h=u[x++],d=u[x++]}let w=rt*Math.floor(f.length/Qr);if(w<a){({s0:y,s1:g,s2:h,s3:d}=dt(c,y,g,h,d));let x=Qe(new Uint32Array([y,g,h,d]));for(let v=w,S=0;v<a;v++,S++)s[v]=o[v]^x[S];x.fill(0)}return c.fill(0),s}return{encrypt:(o,i)=>n(o,!0,i),decrypt:(o,i)=>n(o,!1,i)}});function To(e,t,r,n,o){let i=e.create(r,n.length+(o?.length||0));o&&i.update(o),i.update(n);let s=new Uint8Array(16),c=Zt(s);return o&&oe(c,0,BigInt(o.length*8),t),oe(c,8,BigInt(n.length*8),t),i.update(s),i.digest()}var ju=Bt({blockSize:16,nonceLength:12,tagLength:16},function(t,r,n){if(M(r),r.length===0)throw new Error("aes/gcm: empty nonce");let o=16;function i(c,a,f){let l=To(Yr,!1,c,f,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function s(){let c=Yt(t),a=er.slice(),f=er.slice();if(Ie(c,!1,f,f,a),r.length===12)f.set(r);else{let u=er.slice(),p=Zt(u);oe(p,8,BigInt(r.length*8),!1),Yr.create(a).update(r).update(u).digestInto(f)}let l=Ie(c,!1,f,er);return{xk:c,authKey:a,counter:f,tagMask:l}}return{encrypt:c=>{M(c);let{xk:a,authKey:f,counter:l,tagMask:u}=s(),p=new Uint8Array(c.length+o);Ie(a,!1,l,c,p);let y=i(f,u,p.subarray(0,p.length-o));return p.set(y,c.length),a.fill(0),p},decrypt:c=>{if(M(c),c.length<o)throw new Error(`aes/gcm: ciphertext less than tagLen (${o})`);let{xk:a,authKey:f,counter:l,tagMask:u}=s(),p=c.subarray(0,-o),y=c.subarray(-o),g=i(f,u,p);if(!ne(g,y))throw new Error("aes/gcm: invalid ghash tag");let h=Ie(a,!1,l,p);return f.fill(0),u.fill(0),a.fill(0),h}}}),rr=(e,t,r)=>n=>{if(!Number.isSafeInteger(n)||t>n||n>r)throw new Error(`${e}: invalid value=${n}, must be [${t}..${r}]`)},Vu=Bt({blockSize:16,nonceLength:12,tagLength:16},function(t,r,n){let i=rr("AAD",0,68719476736),s=rr("plaintext",0,2**36),c=rr("nonce",12,12),a=rr("ciphertext",16,2**36+16);M(r),c(r.length),n&&(M(n),i(n.length));function f(){let p=t.length;if(p!==16&&p!==24&&p!==32)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${p} bytes`);let y=Yt(t),g=new Uint8Array(p),h=new Uint8Array(16),d=P(r),w=0,x=d[0],v=d[1],S=d[2],_=0;for(let A of[h,g].map(P)){let I=P(A);for(let T=0;T<I.length;T+=2){let{s0:N,s1:R}=dt(y,w,x,v,S);I[T+0]=N,I[T+1]=R,w=++_}}return y.fill(0),{authKey:h,encKey:Yt(g)}}function l(p,y,g){let h=To(mo,!0,y,g,n);for(let _=0;_<12;_++)h[_]^=r[_];h[15]&=127;let d=P(h),w=d[0],x=d[1],v=d[2],S=d[3];return{s0:w,s1:x,s2:v,s3:S}=dt(p,w,x,v,S),d[0]=w,d[1]=x,d[2]=v,d[3]=S,h}function u(p,y,g){let h=y.slice();return h[15]|=128,Ie(p,!0,h,g)}return{encrypt:p=>{M(p),s(p.length);let{encKey:y,authKey:g}=f(),h=l(y,g,p),d=new Uint8Array(p.length+16);return d.set(h,p.length),d.set(u(y,h,p)),y.fill(0),g.fill(0),d},decrypt:p=>{M(p),a(p.length);let y=p.subarray(-16),{encKey:g,authKey:h}=f(),d=u(g,y,p.subarray(0,-16)),w=l(g,h,d);if(g.fill(0),h.fill(0),!ne(y,w))throw new Error("invalid polyval tag");return d}}});var Q=(e,t)=>e[t++]&255|(e[t++]&255)<<8,nn=class{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=vt(t),M(t,32);let r=Q(t,0),n=Q(t,2),o=Q(t,4),i=Q(t,6),s=Q(t,8),c=Q(t,10),a=Q(t,12),f=Q(t,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|o<<6)&7939,this.r[3]=(o>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Q(t,16+2*l)}process(t,r,n=!1){let o=n?0:2048,{h:i,r:s}=this,c=s[0],a=s[1],f=s[2],l=s[3],u=s[4],p=s[5],y=s[6],g=s[7],h=s[8],d=s[9],w=Q(t,r+0),x=Q(t,r+2),v=Q(t,r+4),S=Q(t,r+6),_=Q(t,r+8),A=Q(t,r+10),I=Q(t,r+12),T=Q(t,r+14),N=i[0]+(w&8191),R=i[1]+((w>>>13|x<<3)&8191),k=i[2]+((x>>>10|v<<6)&8191),H=i[3]+((v>>>7|S<<9)&8191),$=i[4]+((S>>>4|_<<12)&8191),F=i[5]+(_>>>1&8191),b=i[6]+((_>>>14|A<<2)&8191),E=i[7]+((A>>>11|I<<5)&8191),L=i[8]+((I>>>8|T<<8)&8191),C=i[9]+(T>>>5|o),B=0,O=B+N*c+R*(5*d)+k*(5*h)+H*(5*g)+$*(5*y);B=O>>>13,O&=8191,O+=F*(5*p)+b*(5*u)+E*(5*l)+L*(5*f)+C*(5*a),B+=O>>>13,O&=8191;let q=B+N*a+R*c+k*(5*d)+H*(5*h)+$*(5*g);B=q>>>13,q&=8191,q+=F*(5*y)+b*(5*p)+E*(5*u)+L*(5*l)+C*(5*f),B+=q>>>13,q&=8191;let K=B+N*f+R*a+k*c+H*(5*d)+$*(5*h);B=K>>>13,K&=8191,K+=F*(5*g)+b*(5*y)+E*(5*p)+L*(5*u)+C*(5*l),B+=K>>>13,K&=8191;let G=B+N*l+R*f+k*a+H*c+$*(5*d);B=G>>>13,G&=8191,G+=F*(5*h)+b*(5*g)+E*(5*y)+L*(5*p)+C*(5*u),B+=G>>>13,G&=8191;let tt=B+N*u+R*l+k*f+H*a+$*c;B=tt>>>13,tt&=8191,tt+=F*(5*d)+b*(5*h)+E*(5*g)+L*(5*y)+C*(5*p),B+=tt>>>13,tt&=8191;let it=B+N*p+R*u+k*l+H*f+$*a;B=it>>>13,it&=8191,it+=F*c+b*(5*d)+E*(5*h)+L*(5*g)+C*(5*y),B+=it>>>13,it&=8191;let ft=B+N*y+R*p+k*u+H*l+$*f;B=ft>>>13,ft&=8191,ft+=F*a+b*c+E*(5*d)+L*(5*h)+C*(5*g),B+=ft>>>13,ft&=8191;let et=B+N*g+R*y+k*p+H*u+$*l;B=et>>>13,et&=8191,et+=F*f+b*a+E*c+L*(5*d)+C*(5*h),B+=et>>>13,et&=8191;let bt=B+N*h+R*g+k*y+H*p+$*u;B=bt>>>13,bt&=8191,bt+=F*l+b*f+E*a+L*c+C*(5*d),B+=bt>>>13,bt&=8191;let nt=B+N*d+R*h+k*g+H*y+$*p;B=nt>>>13,nt&=8191,nt+=F*u+b*l+E*f+L*a+C*c,B+=nt>>>13,nt&=8191,B=(B<<2)+B|0,B=B+O|0,O=B&8191,B=B>>>13,q+=B,i[0]=O,i[1]=q,i[2]=K,i[3]=G,i[4]=tt,i[5]=it,i[6]=ft,i[7]=et,i[8]=bt,i[9]=nt}finalize(){let{h:t,pad:r}=this,n=new Uint16Array(10),o=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=o,o=t[c]>>>13,t[c]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,n[0]=t[0]+5,o=n[0]>>>13,n[0]&=8191;for(let c=1;c<10;c++)n[c]=t[c]+o,o=n[c]>>>13,n[c]&=8191;n[9]-=8192;let i=(o^1)-1;for(let c=0;c<10;c++)n[c]&=i;i=~i;for(let c=0;c<10;c++)t[c]=t[c]&i|n[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+r[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+r[c]|0)+(s>>>16)|0,t[c]=s&65535}update(t){zt(this);let{buffer:r,blockLen:n}=this;t=vt(t);let o=t.length;for(let i=0;i<o;){let s=Math.min(n-this.pos,o-i);if(s===n){for(;n<=o-i;i+=n)this.process(t,i);continue}r.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){zt(this),Se(t,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:o}=this;if(o){for(r[o++]=1;o<16;o++)r[o]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=n[s]>>>0,t[i++]=n[s]>>>8;return t}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}};function oc(e){let t=(n,o)=>e(o).update(vt(n)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var Lo=oc(e=>new nn(e));var ko=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),ic=ko("expand 16-byte k"),sc=ko("expand 32-byte k"),cc=P(ic),Ro=P(sc),Qu=Ro.slice();function U(e,t){return e<<t|e>>>32-t}function on(e){return e.byteOffset%4===0}var nr=64,ac=16,Co=2**32-1,_o=new Uint32Array;function fc(e,t,r,n,o,i,s,c){let a=o.length,f=new Uint8Array(nr),l=P(f),u=on(o)&&on(i),p=u?P(o):_o,y=u?P(i):_o;for(let g=0;g<a;s++){if(e(t,r,n,l,s,c),s>=Co)throw new Error("arx: counter overflow");let h=Math.min(nr,a-g);if(u&&h===nr){let d=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let w=0,x;w<ac;w++)x=d+w,y[x]=p[x]^l[w];g+=nr;continue}for(let d=0,w;d<h;d++)w=g+d,i[w]=o[w]^f[d];g+=h}}function sn(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:o,counterRight:i,rounds:s}=wo({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Xe(o),Xe(s),Vr(i),Vr(r),(c,a,f,l,u=0)=>{M(c),M(a),M(f);let p=f.length;if(l||(l=new Uint8Array(p)),M(l),Xe(u),u<0||u>=Co)throw new Error("arx: counter overflow");if(l.length<p)throw new Error(`arx: output (${l.length}) is shorter than data (${p})`);let y=[],g=c.length,h,d;if(g===32)h=c.slice(),y.push(h),d=Ro;else if(g===16&&r)h=new Uint8Array(32),h.set(c),h.set(c,16),d=cc,y.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);on(a)||(a=a.slice(),y.push(a));let w=P(h);if(n){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(d,w,P(a.subarray(0,16)),w),a=a.subarray(16)}let x=16-o;if(x!==a.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){let S=new Uint8Array(12);S.set(a,i?0:12-a.length),a=S,y.push(a)}let v=P(a);for(fc(e,d,w,v,f,l,u,s);y.length>0;)y.pop().fill(0);return l}}function Mo(e,t,r,n,o,i=20){let s=e[0],c=e[1],a=e[2],f=e[3],l=t[0],u=t[1],p=t[2],y=t[3],g=t[4],h=t[5],d=t[6],w=t[7],x=o,v=r[0],S=r[1],_=r[2],A=s,I=c,T=a,N=f,R=l,k=u,H=p,$=y,F=g,b=h,E=d,L=w,C=x,B=v,O=S,q=_;for(let G=0;G<i;G+=2)A=A+R|0,C=U(C^A,16),F=F+C|0,R=U(R^F,12),A=A+R|0,C=U(C^A,8),F=F+C|0,R=U(R^F,7),I=I+k|0,B=U(B^I,16),b=b+B|0,k=U(k^b,12),I=I+k|0,B=U(B^I,8),b=b+B|0,k=U(k^b,7),T=T+H|0,O=U(O^T,16),E=E+O|0,H=U(H^E,12),T=T+H|0,O=U(O^T,8),E=E+O|0,H=U(H^E,7),N=N+$|0,q=U(q^N,16),L=L+q|0,$=U($^L,12),N=N+$|0,q=U(q^N,8),L=L+q|0,$=U($^L,7),A=A+k|0,q=U(q^A,16),E=E+q|0,k=U(k^E,12),A=A+k|0,q=U(q^A,8),E=E+q|0,k=U(k^E,7),I=I+H|0,C=U(C^I,16),L=L+C|0,H=U(H^L,12),I=I+H|0,C=U(C^I,8),L=L+C|0,H=U(H^L,7),T=T+$|0,B=U(B^T,16),F=F+B|0,$=U($^F,12),T=T+$|0,B=U(B^T,8),F=F+B|0,$=U($^F,7),N=N+R|0,O=U(O^N,16),b=b+O|0,R=U(R^b,12),N=N+R|0,O=U(O^N,8),b=b+O|0,R=U(R^b,7);let K=0;n[K++]=s+A|0,n[K++]=c+I|0,n[K++]=a+T|0,n[K++]=f+N|0,n[K++]=l+R|0,n[K++]=u+k|0,n[K++]=p+H|0,n[K++]=y+$|0,n[K++]=g+F|0,n[K++]=h+b|0,n[K++]=d+E|0,n[K++]=w+L|0,n[K++]=x+C|0,n[K++]=v+B|0,n[K++]=S+O|0,n[K++]=_+q|0}function lc(e,t,r,n){let o=e[0],i=e[1],s=e[2],c=e[3],a=t[0],f=t[1],l=t[2],u=t[3],p=t[4],y=t[5],g=t[6],h=t[7],d=r[0],w=r[1],x=r[2],v=r[3];for(let _=0;_<20;_+=2)o=o+a|0,d=U(d^o,16),p=p+d|0,a=U(a^p,12),o=o+a|0,d=U(d^o,8),p=p+d|0,a=U(a^p,7),i=i+f|0,w=U(w^i,16),y=y+w|0,f=U(f^y,12),i=i+f|0,w=U(w^i,8),y=y+w|0,f=U(f^y,7),s=s+l|0,x=U(x^s,16),g=g+x|0,l=U(l^g,12),s=s+l|0,x=U(x^s,8),g=g+x|0,l=U(l^g,7),c=c+u|0,v=U(v^c,16),h=h+v|0,u=U(u^h,12),c=c+u|0,v=U(v^c,8),h=h+v|0,u=U(u^h,7),o=o+f|0,v=U(v^o,16),g=g+v|0,f=U(f^g,12),o=o+f|0,v=U(v^o,8),g=g+v|0,f=U(f^g,7),i=i+l|0,d=U(d^i,16),h=h+d|0,l=U(l^h,12),i=i+l|0,d=U(d^i,8),h=h+d|0,l=U(l^h,7),s=s+u|0,w=U(w^s,16),p=p+w|0,u=U(u^p,12),s=s+u|0,w=U(w^s,8),p=p+w|0,u=U(u^p,7),c=c+a|0,x=U(x^c,16),y=y+x|0,a=U(a^y,12),c=c+a|0,x=U(x^c,8),y=y+x|0,a=U(a^y,7);let S=0;n[S++]=o,n[S++]=i,n[S++]=s,n[S++]=c,n[S++]=d,n[S++]=w,n[S++]=x,n[S++]=v}var or=sn(Mo,{counterRight:!1,counterLength:4,allowShortKeys:!1}),uc=sn(Mo,{counterRight:!1,counterLength:8,extendNonceFn:lc,allowShortKeys:!1});var hc=new Uint8Array(16),No=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(hc.subarray(r))},dc=new Uint8Array(32);function Oo(e,t,r,n,o){let i=e(t,r,dc),s=Lo.create(i);o&&No(s,o),No(s,n);let c=new Uint8Array(16),a=Zt(c);oe(a,0,BigInt(o?o.length:0),!0),oe(a,8,BigInt(n.length),!0),s.update(c);let f=s.digest();return i.fill(0),f}var Po=e=>(t,r,n)=>(M(t,32),M(r),{encrypt:(i,s)=>{let c=i.length,a=c+16;s?M(s,a):s=new Uint8Array(a),e(t,r,i,s,1);let f=Oo(e,t,r,s.subarray(0,-16),n);return s.set(f,c),s},decrypt:(i,s)=>{let c=i.length,a=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?M(s,a):s=new Uint8Array(a);let f=i.subarray(0,-16),l=i.subarray(-16),u=Oo(e,t,r,f,n);if(!ne(l,u))throw new Error("invalid tag");return e(t,r,f,s,1),s}}),ih=Bt({blockSize:64,nonceLength:12,tagLength:16},Po(or)),sh=Bt({blockSize:64,nonceLength:24,tagLength:16},Po(uc));var ir=class extends he{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,at.hash(t);let n=qt(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return at.exists(this),this.iHash.update(t),this}digestInto(t){at.exists(this),at.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},we=(e,t,r)=>new ir(e,t).update(r).digest();we.create=(e,t)=>new ir(e,t);function $o(e,t,r){return at.hash(e),r===void 0&&(r=new Uint8Array(e.outputLen)),we(e,qt(r),qt(t))}var cn=new Uint8Array([0]),Ho=new Uint8Array;function Ko(e,t,r,n=32){if(at.hash(e),at.number(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");let o=Math.ceil(n/e.outputLen);r===void 0&&(r=Ho);let i=new Uint8Array(o*e.outputLen),s=we.create(e,t),c=s._cloneInto(),a=new Uint8Array(s.outputLen);for(let f=0;f<o;f++)cn[0]=f+1,c.update(f===0?Ho:a).update(r).update(cn).digestInto(a),i.set(a,e.outputLen*f),s._cloneInto(c);return s.destroy(),c.destroy(),a.fill(0),cn.fill(0),i.slice(0,n)}var pc=Object.defineProperty,j=(e,t)=>{for(var r in t)pc(e,r,{get:t[r],enumerable:!0})},xe=Symbol("verified"),gc=e=>e instanceof Object;function qo(e){if(!gc(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}var yc={};j(yc,{Queue:()=>bc,QueueNode:()=>Fo,binarySearch:()=>an,insertEventIntoAscendingList:()=>mc,insertEventIntoDescendingList:()=>xc,normalizeURL:()=>wc,utf8Decoder:()=>It,utf8Encoder:()=>xt});var It=new TextDecoder("utf-8"),xt=new TextEncoder;function wc(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function xc(e,t){let[r,n]=an(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return n||e.splice(r,0,t),e}function mc(e,t){let[r,n]=an(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return n||e.splice(r,0,t),e}function an(e,t){let r=0,n=e.length-1;for(;r<=n;){let o=Math.floor((r+n)/2),i=t(e[o]);if(i===0)return[o,!0];i<0?n=o-1:r=o+1}return[r,!1]}var Fo=class{value;next=null;prev=null;constructor(e){this.value=e}},bc=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){let t=new Fo(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let t=this.first;return this.first=null,this.last=null,t.value}let e=this.first;return this.first=e.next,e.value}},Ec=class{generateSecretKey(){return ue.utils.randomPrivateKey()}getPublicKey(e){return Y(ue.getPublicKey(e))}finalizeEvent(e,t){let r=e;return r.pubkey=Y(ue.getPublicKey(t)),r.id=cr(r),r.sig=Y(ue.sign(cr(r),t)),r[xe]=!0,r}verifyEvent(e){if(typeof e[xe]=="boolean")return e[xe];let t=cr(e);if(t!==e.id)return e[xe]=!1,!1;try{let r=ue.verify(e.sig,t,e.pubkey);return e[xe]=r,r}catch{return e[xe]=!1,!1}}};function vc(e){if(!qo(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function cr(e){let t=Wt(xt.encode(vc(e)));return Y(t)}var ar=new Ec,xh=ar.generateSecretKey,Do=ar.getPublicKey,Jt=ar.finalizeEvent,fn=ar.verifyEvent,Bc={};j(Bc,{Application:()=>Ba,BadgeAward:()=>Rc,BadgeDefinition:()=>ya,BlockedRelaysList:()=>ea,BookmarkList:()=>Xc,Bookmarksets:()=>da,Calendar:()=>_a,CalendarEventRSVP:()=>ka,ChannelCreation:()=>Zo,ChannelHideMessage:()=>Jo,ChannelMessage:()=>Yo,ChannelMetadata:()=>Go,ChannelMuteUser:()=>Xo,ClassifiedListing:()=>Ia,ClientAuth:()=>Qo,CommunitiesList:()=>Qc,CommunityDefinition:()=>Na,CommunityPostApproval:()=>qc,Contacts:()=>Tc,CreateOrUpdateProduct:()=>ma,CreateOrUpdateStall:()=>xa,Curationsets:()=>pa,Date:()=>Ta,DraftClassifiedListing:()=>Ua,DraftLong:()=>Ea,Emojisets:()=>va,EncryptedDirectMessage:()=>Lc,EncryptedDirectMessages:()=>_c,EventDeletion:()=>kc,FileMetadata:()=>Oc,FileServerPreference:()=>ia,Followsets:()=>la,GenericRepost:()=>Cc,Genericlists:()=>ua,HTTPAuth:()=>hn,Handlerinformation:()=>Ca,Handlerrecommendation:()=>Ra,Highlights:()=>Zc,InterestsList:()=>na,Interestsets:()=>wa,JobFeedback:()=>Wc,JobRequest:()=>Fc,JobResult:()=>Dc,Label:()=>Kc,LightningPubRPC:()=>ca,LiveChatMessage:()=>Mc,LiveEvent:()=>Aa,LongFormArticle:()=>ba,Metadata:()=>Sc,Mutelist:()=>Gc,NWCWalletInfo:()=>sa,NWCWalletRequest:()=>ti,NWCWalletResponse:()=>aa,NostrConnect:()=>fa,OpenTimestamps:()=>Nc,Pinlist:()=>Yc,ProblemTracker:()=>Pc,ProfileBadges:()=>ga,PublicChatsList:()=>ta,Reaction:()=>un,RecommendRelay:()=>Uc,RelayList:()=>Jc,Relaysets:()=>ha,Report:()=>Hc,Reporting:()=>$c,Repost:()=>ln,SearchRelaysList:()=>ra,ShortTextNote:()=>Ic,Time:()=>La,UserEmojiList:()=>oa,UserStatuses:()=>Sa,Zap:()=>zc,ZapGoal:()=>jc,ZapRequest:()=>Vc,classifyKind:()=>Ac,isEphemeralKind:()=>Vo,isParameterizedReplaceableKind:()=>zo,isRegularKind:()=>Wo,isReplaceableKind:()=>jo});function Wo(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function jo(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function Vo(e){return 2e4<=e&&e<3e4}function zo(e){return 3e4<=e&&e<4e4}function Ac(e){return Wo(e)?"regular":jo(e)?"replaceable":Vo(e)?"ephemeral":zo(e)?"parameterized":"unknown"}var Sc=0,Ic=1,Uc=2,Tc=3,Lc=4,_c=4,kc=5,ln=6,un=7,Rc=8,Cc=16,Zo=40,Go=41,Yo=42,Jo=43,Xo=44,Nc=1040,Oc=1063,Mc=1311,Pc=1971,Hc=1984,$c=1984,Kc=1985,qc=4550,Fc=5999,Dc=6999,Wc=7e3,jc=9041,Vc=9734,zc=9735,Zc=9802,Gc=1e4,Yc=10001,Jc=10002,Xc=10003,Qc=10004,ta=10005,ea=10006,ra=10007,na=10015,oa=10030,ia=10096,sa=13194,ca=21e3,Qo=22242,ti=23194,aa=23195,fa=24133,hn=27235,la=3e4,ua=30001,ha=30002,da=30003,pa=30004,ga=30008,ya=30009,wa=30015,xa=30017,ma=30018,ba=30023,Ea=30024,va=30030,Ba=30078,Aa=30311,Sa=30315,Ia=30402,Ua=30403,Ta=31922,La=31923,_a=31924,ka=31925,Ra=31989,Ca=31990,Na=34550;var Oa={};j(Oa,{getHex64:()=>dn,getInt:()=>ei,getSubscriptionId:()=>Ma,matchEventId:()=>Pa,matchEventKind:()=>$a,matchEventPubkey:()=>Ha});function dn(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,o=e.slice(n).indexOf('"')+n+1;return e.slice(o,o+64)}function ei(e,t){let r=t.length,n=e.indexOf(`"${t}":`)+r+3,o=e.slice(n),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function Ma(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let r=e.slice(t+7+1).indexOf('"');if(r===-1)return null;let n=t+7+1+r,o=e.slice(n+1,80).indexOf('"');if(o===-1)return null;let i=n+1+o;return e.slice(n+1,i)}function Pa(e,t){return t===dn(e,"id")}function Ha(e,t){return t===dn(e,"pubkey")}function $a(e,t){return t===ei(e,"kind")}var Ka={};j(Ka,{makeAuthEvent:()=>qa});function qa(e,t){return{kind:Qo,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}var Fa;try{Fa=WebSocket}catch{}var Da;try{Da=WebSocket}catch{}var mt={};j(mt,{BECH32_REGEX:()=>ri,Bech32MaxSize:()=>pn,decode:()=>fr,encodeBytes:()=>lr,naddrEncode:()=>Ya,neventEncode:()=>Ga,noteEncode:()=>za,nprofileEncode:()=>Za,npubEncode:()=>Va,nrelayEncode:()=>Ja,nsecEncode:()=>ja});var pn=5e3,ri=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Wa(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function fr(e){let{prefix:t,words:r}=Vt.decode(e,pn),n=new Uint8Array(Vt.fromWords(r));switch(t){case"nprofile":{let o=sr(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Y(o[0][0]),relays:o[1]?o[1].map(i=>It.decode(i)):[]}}}case"nevent":{let o=sr(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Y(o[0][0]),relays:o[1]?o[1].map(i=>It.decode(i)):[],author:o[2]?.[0]?Y(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(Y(o[3][0]),16):void 0}}}case"naddr":{let o=sr(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:It.decode(o[0][0]),pubkey:Y(o[2][0]),kind:parseInt(Y(o[3][0]),16),relays:o[1]?o[1].map(i=>It.decode(i)):[]}}}case"nrelay":{let o=sr(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:It.decode(o[0][0])}}case"nsec":return{type:t,data:n};case"npub":case"note":return{type:t,data:Y(n)};default:throw new Error(`unknown prefix ${t}`)}}function sr(e){let t={},r=e;for(;r.length>0;){let n=r[0],o=r[1],i=r.slice(2,2+o);if(r=r.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${n}`);t[n]=t[n]||[],t[n].push(i)}return t}function ja(e){return lr("nsec",e)}function Va(e){return lr("npub",re(e))}function za(e){return lr("note",re(e))}function Ue(e,t){let r=Vt.toWords(t);return Vt.encode(e,r,pn)}function lr(e,t){return Ue(e,t)}function Za(e){let t=ur({0:[re(e.pubkey)],1:(e.relays||[]).map(r=>xt.encode(r))});return Ue("nprofile",t)}function Ga(e){let t;e.kind!==void 0&&(t=Wa(e.kind));let r=ur({0:[re(e.id)],1:(e.relays||[]).map(n=>xt.encode(n)),2:e.author?[re(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Ue("nevent",r)}function Ya(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let r=ur({0:[xt.encode(e.identifier)],1:(e.relays||[]).map(n=>xt.encode(n)),2:[re(e.pubkey)],3:[new Uint8Array(t)]});return Ue("naddr",r)}function Ja(e){let t=ur({0:[xt.encode(e)]});return Ue("nrelay",t)}function ur(e){let t=[];return Object.entries(e).reverse().forEach(([r,n])=>{n.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(r)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),de(...t)}var gn={};j(gn,{decrypt:()=>Xa,encrypt:()=>ni});function ni(e,t,r){return D(this,null,function*(){let n=e instanceof Uint8Array?Y(e):e,o=Kt.getSharedSecret(n,"02"+t),i=oi(o),s=Uint8Array.from(ze(16)),c=xt.encode(r),a=rn(i,s).encrypt(c),f=ut.encode(new Uint8Array(a)),l=ut.encode(new Uint8Array(s.buffer));return`${f}?iv=${l}`})}function Xa(e,t,r){return D(this,null,function*(){let n=e instanceof Uint8Array?Y(e):e,[o,i]=r.split("?iv="),s=Kt.getSharedSecret(n,"02"+t),c=oi(s),a=ut.decode(i),f=ut.decode(o),l=rn(c,a).decrypt(f);return It.decode(l)})}function oi(e){return e.slice(1,33)}var Qa={};j(Qa,{NIP05_REGEX:()=>ii,isValid:()=>rf,queryProfile:()=>si,searchDomain:()=>ef,useFetchImplementation:()=>tf});var ii=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,hr;try{hr=fetch}catch{}function tf(e){hr=e}function ef(e,t=""){return D(this,null,function*(){try{let r=`https://${e}/.well-known/nostr.json?name=${t}`;return(yield(yield hr(r,{redirect:"error"})).json()).names}catch{return{}}})}function si(e){return D(this,null,function*(){let t=e.match(ii);if(!t)return null;let[r,n="_",o]=t;try{let i=`https://${o}/.well-known/nostr.json?name=${n}`,s=yield(yield hr(i,{redirect:"error"})).json(),c=s.names[n];return c?{pubkey:c,relays:s.relays?.[c]}:null}catch{return null}})}function rf(e,t){return D(this,null,function*(){let r=yield si(t);return r?r.pubkey===e:!1})}var nf={};j(nf,{parse:()=>of});function of(e){let t={reply:void 0,root:void 0,mentions:[],profiles:[]},r=[];for(let n of e.tags)n[0]==="e"&&n[1]&&r.push(n),n[0]==="p"&&n[1]&&t.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<r.length;n++){let o=r[n],[i,s,c,a]=o,f={id:s,relays:c?[c]:[]},l=n===0,u=n===r.length-1;if(a==="root"){t.root=f;continue}if(a==="reply"){t.reply=f;continue}if(a==="mention"){t.mentions.push(f);continue}if(l){t.root=f;continue}if(u){t.reply=f;continue}t.mentions.push(f)}return t}var sf={};j(sf,{fetchRelayInformation:()=>af,useFetchImplementation:()=>cf});var ci;try{ci=fetch}catch{}function cf(e){ci=e}function af(e){return D(this,null,function*(){return yield(yield fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()})}var ff={};j(ff,{getPow:()=>ai,minePow:()=>lf});function ai(e){let t=0;for(let r=0;r<e.length;r++){let n=parseInt(e[r],16);if(n===0)t+=4;else{t+=Math.clz32(n)-28;break}}return t}function lf(e,t){let r=0,n=e,o=["nonce",r.toString(),t.toString()];for(n.tags.push(o);;){let i=Math.floor(new Date().getTime()/1e3);if(i!==n.created_at&&(r=0,n.created_at=i),o[1]=(++r).toString(),n.id=cr(n),ai(n.id)>=t)break}return n}var uf={};j(uf,{finishRepostEvent:()=>hf,getRepostedEvent:()=>df,getRepostedEventPointer:()=>fi});function hf(e,t,r,n){return Jt({kind:ln,tags:[...e.tags??[],["e",t.id,r],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},n)}function fi(e){if(e.kind!==ln)return;let t,r;for(let n=e.tags.length-1;n>=0&&(t===void 0||r===void 0);n--){let o=e.tags[n];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&r===void 0&&(r=o))}if(t!==void 0)return{id:t[1],relays:[t[2],r?.[2]].filter(n=>typeof n=="string"),author:r?.[1]}}function df(e,{skipVerification:t}={}){let r=fi(e);if(r===void 0||e.content==="")return;let n;try{n=JSON.parse(e.content)}catch{return}if(n.id===r.id&&!(!t&&!fn(n)))return n}var pf={};j(pf,{NOSTR_URI_REGEX:()=>dr,parse:()=>yf,test:()=>gf});var dr=new RegExp(`nostr:(${ri.source})`);function gf(e){return typeof e=="string"&&new RegExp(`^${dr.source}$`).test(e)}function yf(e){let t=e.match(new RegExp(`^${dr.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:fr(t[1])}}var wf={};j(wf,{finishReactionEvent:()=>xf,getReactedEventPointer:()=>mf});function xf(e,t,r){let n=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return Jt(Mt(st({},e),{kind:un,tags:[...e.tags??[],...n,["e",t.id],["p",t.pubkey]],content:e.content??"+"}),r)}function mf(e){if(e.kind!==un)return;let t,r;for(let n=e.tags.length-1;n>=0&&(t===void 0||r===void 0);n--){let o=e.tags[n];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&r===void 0&&(r=o))}if(!(t===void 0||r===void 0))return{id:t[1],relays:[t[2],r[2]].filter(n=>n!==void 0),author:r[1]}}var bf={};j(bf,{matchAll:()=>Ef,regex:()=>yn,replaceAll:()=>vf});var yn=()=>new RegExp(`\\b${dr.source}\\b`,"g");function*Ef(e){let t=e.matchAll(yn());for(let r of t)try{let[n,o]=r;yield{uri:n,value:o,decoded:fr(o),start:r.index,end:r.index+n.length}}catch{}}function vf(e,t){return e.replaceAll(yn(),(r,n)=>t({uri:r,value:n,decoded:fr(n)}))}var Bf={};j(Bf,{channelCreateEvent:()=>Af,channelHideMessageEvent:()=>Uf,channelMessageEvent:()=>If,channelMetadataEvent:()=>Sf,channelMuteUserEvent:()=>Tf});var Af=(e,t)=>{let r;if(typeof e.content=="object")r=JSON.stringify(e.content);else if(typeof e.content=="string")r=e.content;else return;return Jt({kind:Zo,tags:[...e.tags??[]],content:r,created_at:e.created_at},t)},Sf=(e,t)=>{let r;if(typeof e.content=="object")r=JSON.stringify(e.content);else if(typeof e.content=="string")r=e.content;else return;return Jt({kind:Go,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},If=(e,t)=>{let r=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&r.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Jt({kind:Yo,tags:[...r,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Uf=(e,t)=>{let r;if(typeof e.content=="object")r=JSON.stringify(e.content);else if(typeof e.content=="string")r=e.content;else return;return Jt({kind:Jo,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},Tf=(e,t)=>{let r;if(typeof e.content=="object")r=JSON.stringify(e.content);else if(typeof e.content=="string")r=e.content;else return;return Jt({kind:Xo,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:r,created_at:e.created_at},t)},Lf={};j(Lf,{EMOJI_SHORTCODE_REGEX:()=>li,matchAll:()=>_f,regex:()=>wn,replaceAll:()=>kf});var li=/:(\w+):/,wn=()=>new RegExp(`\\B${li.source}\\B`,"g");function*_f(e){let t=e.matchAll(wn());for(let r of t)try{let[n,o]=r;yield{shortcode:n,name:o,start:r.index,end:r.index+n.length}}catch{}}function kf(e,t){return e.replaceAll(wn(),(r,n)=>t({shortcode:r,name:n}))}var Rf={};j(Rf,{useFetchImplementation:()=>Cf,validateGithub:()=>Nf});var xn;try{xn=fetch}catch{}function Cf(e){xn=e}function Nf(e,t,r){return D(this,null,function*(){try{return(yield(yield xn(`https://gist.github.com/${t}/${r}/raw`)).text())===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}})}var Of={};j(Of,{decrypt:()=>wi,encrypt:()=>yi,getConversationKey:()=>di,v2:()=>Kf});var ui=1,hi=65535;function di(e,t){let r=Kt.getSharedSecret(e,"02"+t).subarray(1,33);return $o(Wt,r,"nip44-v2")}function pi(e,t){let r=Ko(Wt,e,t,76);return{chacha_key:r.subarray(0,32),chacha_nonce:r.subarray(32,44),hmac_key:r.subarray(44,76)}}function mn(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;let t=1<<Math.floor(Math.log2(e-1))+1,r=t<=256?32:t/8;return r*(Math.floor((e-1)/r)+1)}function Mf(e){if(!Number.isSafeInteger(e)||e<ui||e>hi)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");let t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function Pf(e){let t=xt.encode(e),r=t.length,n=Mf(r),o=new Uint8Array(mn(r)-r);return de(n,t,o)}function Hf(e){let t=new DataView(e.buffer).getUint16(0),r=e.subarray(2,2+t);if(t<ui||t>hi||r.length!==t||e.length!==2+mn(t))throw new Error("invalid padding");return It.decode(r)}function gi(e,t,r){if(r.length!==32)throw new Error("AAD associated data must be 32 bytes");let n=de(r,t);return we(Wt,e,n)}function $f(e){if(typeof e!="string")throw new Error("payload must be a valid string");let t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let r;try{r=ut.decode(e)}catch(i){throw new Error("invalid base64: "+i.message)}let n=r.length;if(n<99||n>65603)throw new Error("invalid data length: "+n);let o=r[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:r.subarray(1,33),ciphertext:r.subarray(33,-32),mac:r.subarray(-32)}}function yi(e,t,r=ze(32)){let{chacha_key:n,chacha_nonce:o,hmac_key:i}=pi(t,r),s=Pf(e),c=or(n,o,s),a=gi(i,c,r);return ut.encode(de(new Uint8Array([2]),r,c,a))}function wi(e,t){let{nonce:r,ciphertext:n,mac:o}=$f(e),{chacha_key:i,chacha_nonce:s,hmac_key:c}=pi(t,r),a=gi(c,n,r);if(!ne(a,o))throw new Error("invalid MAC");let f=or(i,s,n);return Hf(f)}var Kf={utils:{getConversationKey:di,calcPaddedLen:mn},encrypt:yi,decrypt:wi},qf={};j(qf,{makeNwcRequestEvent:()=>Df,parseConnectionString:()=>Ff});function Ff(e){let{pathname:t,searchParams:r}=new URL(e),n=t,o=r.get("relay"),i=r.get("secret");if(!n||!o||!i)throw new Error("invalid connection string");return{pubkey:n,relay:o,secret:i}}function Df(e,t,r){return D(this,null,function*(){let o=yield ni(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:r}})),i={kind:ti,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return Jt(i,t)})}var Wf={};j(Wf,{getZapEndpoint:()=>Vf,makeZapReceipt:()=>Gf,makeZapRequest:()=>zf,useFetchImplementation:()=>jf,validateZapRequest:()=>Zf});var bn;try{bn=fetch}catch{}function jf(e){bn=e}function Vf(e){return D(this,null,function*(){try{let t="",{lud06:r,lud16:n}=JSON.parse(e.content);if(r){let{words:s}=Vt.decode(r,1e3),c=Vt.fromWords(s);t=It.decode(c)}else if(n){let[s,c]=n.split("@");t=new URL(`/.well-known/lnurlp/${s}`,`https://${c}`).toString()}else return null;let i=yield(yield bn(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null})}function zf({profile:e,event:t,amount:r,relays:n,comment:o=""}){if(!r)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",r.toString()],["relays",...n]]};return t&&i.tags.push(["e",t]),i}function Zf(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!qo(t))return"Zap request is not a valid Nostr event.";if(!fn(t))return"Invalid signature on zap request.";let r=t.tags.find(([i,s])=>i==="p"&&s);if(!r)return"Zap request doesn't have a 'p' tag.";if(!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=t.tags.find(([i,s])=>i==="e"&&s);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([i,s])=>i==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function Gf({zapRequest:e,preimage:t,bolt11:r,paidAt:n}){let o=JSON.parse(e),i=o.tags.filter(([c])=>c==="e"||c==="p"||c==="a"),s={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...i,["P",o.pubkey],["bolt11",r],["description",e]]};return t&&s.tags.push(["preimage",t]),s}var Yf={};j(Yf,{getToken:()=>Jf,hashPayload:()=>En,unpackEventFromToken:()=>mi,validateEvent:()=>Si,validateEventKind:()=>Ei,validateEventMethodTag:()=>Bi,validateEventPayloadTag:()=>Ai,validateEventTimestamp:()=>bi,validateEventUrlTag:()=>vi,validateToken:()=>Xf});var xi="Nostr ";function Jf(e,t,r,n=!1,o){return D(this,null,function*(){let i={kind:hn,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&i.tags.push(["payload",En(o)]);let s=yield r(i);return(n?xi:"")+ut.encode(xt.encode(JSON.stringify(s)))})}function Xf(e,t,r){return D(this,null,function*(){let n=yield mi(e).catch(i=>{throw i});return yield Si(n,t,r).catch(i=>{throw i})})}function mi(e){return D(this,null,function*(){if(!e)throw new Error("Missing token");e=e.replace(xi,"");let t=It.decode(ut.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)})}function bi(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function Ei(e){return e.kind===hn}function vi(e,t){let r=e.tags.find(n=>n[0]==="u");return r?r.length>0&&r[1]===t:!1}function Bi(e,t){let r=e.tags.find(n=>n[0]==="method");return r?r.length>0&&r[1].toLowerCase()===t.toLowerCase():!1}function En(e){let t=Wt(xt.encode(JSON.stringify(e)));return Y(t)}function Ai(e,t){let r=e.tags.find(o=>o[0]==="payload");if(!r)return!1;let n=En(t);return r.length>0&&r[1]===n}function Si(e,t,r,n){return D(this,null,function*(){if(!fn(e))throw new Error("Invalid nostr event, signature invalid");if(!Ei(e))throw new Error("Invalid nostr event, kind invalid");if(!bi(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!vi(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!Bi(e,r))throw new Error("Invalid nostr event, method tag invalid");if(n&&typeof n=="object"&&Object.keys(n).length>0&&!Ai(e,n))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0})}var wr=Wi(Fi());var zh=(()=>{let t=class t{constructor(){this.localStorageSecretKeyName="secretKey",this.localStoragePublicKeyName="publicKey"}clearKeys(){localStorage.removeItem("nostrWalletConnectURI"),localStorage.removeItem("muteList"),localStorage.removeItem("currentChip"),localStorage.removeItem("following"),localStorage.removeItem(`${this.getPublicKey()}_img`),localStorage.removeItem(this.localStorageSecretKeyName),localStorage.removeItem(this.localStoragePublicKeyName),console.log("data cleared"),console.log(localStorage.getItem("nostrWalletConnect"))}getUsername(n){return n.startsWith("npub")&&(n=mt.decode(n).data.toString()),`@${localStorage.getItem(`${n}`)||mt.npubEncode(n)}`}npub(){let n=this.getPublicKey();return mt.npubEncode(n)}nsec(){if(this.usingSecretKey()){let n=this.getSecretKey(),o=Uint8Array.from(wr.Buffer.from(n,"hex"));return mt.nsecEncode(o)}return""}pubkey(n){return mt.decode(n).data.toString()}encodeNoteAsEvent(n){let i={id:mt.decode(n).data.toString()};return mt.neventEncode(i)}getPublicKey(){return localStorage.getItem(this.localStoragePublicKeyName)||""}getSecretKey(){return localStorage.getItem(this.localStorageSecretKeyName)||""}getLoggedInUserImage(){return localStorage.getItem(`${this.getPublicKey()}_img`)||""}setLoggedInUserImage(n){return localStorage.setItem(`${this.getPublicKey()}_img`,n)}usingSecretKey(){return!!localStorage.getItem(this.localStorageSecretKeyName)}getFollowingList(){let n=localStorage.getItem("following");return n===null||n===""?[]:n.split(",").filter(i=>/[a-f0-9]{64}/.test(i))}getMuteList(){return(localStorage.getItem("muteList")||"").split(",")}setMuteListFromTags(n){let o=[];n.forEach(i=>{o.push(i[1])}),this.setMuteList(o)}setMuteList(n){if(n.length===0)localStorage.setItem("muteList","");else{let o=Array.from(new Set(n));localStorage.setItem("muteList",o.filter(i=>i).join(","))}}getRelay(){return localStorage.getItem("relay")||"wss://relay.damus.io/"}getRelays(){let o=(localStorage.getItem("relays")||"").split(",").map(i=>i.trim());return(o.length===0||o[0]==="")&&(o=["wss://relay.damus.io/","wss://relay.angor.io/","wss://relay2.angor.io/"]),o}setRelay(n){localStorage.setItem("relay",n)}setRelays(n){localStorage.setItem("relays",n.join(","))}getDefaultZap(){return localStorage.getItem("defaultZap")||"5"}setDefaultZap(n){localStorage.setItem("defaultZap",n)}setNostrWalletConnectURI(n){localStorage.setItem("nostrWalletConnectURI",n)}getNostrWalletConnectURI(){let n=localStorage.getItem("nostrWalletConnectURI")||"";return n===""?null:n}getFollowingListAsTags(){let n=this.getFollowingList(),o=[];return n.forEach(i=>{o.push(["p",i,"wss://relay.damus.io/",localStorage.getItem(`${i}`)||""])}),o}setFollowingListFromTags(n){let o=[];n.forEach(i=>{o.push(i[1])}),this.setFollowingList(o)}setFollowingList(n){let i=Array.from(new Set(n)).filter(s=>s).join(",");localStorage.setItem("following",i)}savePublicKeyToSession(n){let o=mt.npubEncode(n);window.localStorage.setItem(this.localStoragePublicKeyName,n),window.localStorage.setItem("npub",o)}getNpub(){return window.localStorage.getItem("npub")||""}removePublicKeyToSession(){localStorage.removeItem(this.localStoragePublicKeyName)}saveSecretKeyToSession(n){localStorage.setItem(this.localStorageSecretKeyName,n)}removeSecretKeyToSession(){localStorage.removeItem(this.localStorageSecretKeyName)}setPublicKeyFromExtension(n){this.savePublicKeyToSession(n)}setBlurImagesIfNotFollowing(n){n?localStorage.setItem("blur","true"):localStorage.setItem("blur","false")}getBlurImagesIfNotFollowing(){return(localStorage.getItem("blur")||"true")!=="false"}handleLoginWithNsec(n){let o;try{o=mt.decode(n).data;let i=new Uint8Array(wr.Buffer.from(o,"hex")),s=Do(i);return this.saveSecretKeyToSession(o),this.savePublicKeyToSession(s),console.log("Public Key: ",this.getPublicKey()),console.log("Private Key: ",this.getSecretKey()),!0}catch(i){return console.error("Error during key handling: ",i),!1}}usingNostrBrowserExtension(){return this.usingSecretKey()?!1:!!globalThis.nostr}handleLoginWithExtension(){return D(this,null,function*(){let n=globalThis;if(!n.nostr)return!1;try{let o=yield n.nostr.getPublicKey();if(!o)throw new Error("Public key not available from Nostr extension.");return this.setPublicKeyFromExtension(o),!0}catch(o){return console.error("Failed to connect to Nostr extension:",o),!1}})}signEventWithExtension(n){return D(this,null,function*(){let o=globalThis;if(o.nostr)return yield o.nostr.signEvent(n);throw new Error("Tried to sign event with extension but failed")})}signDMWithExtension(n,o){return D(this,null,function*(){let i=globalThis;if(i.nostr&&i.nostr.nip04?.encrypt)return yield i.nostr.nip04.encrypt(n,o);throw new Error("Failed to Sign with extension")})}decryptDMWithExtension(n,o){return D(this,null,function*(){let i=globalThis;return i.nostr&&i.nostr.nip04?.decrypt?yield i.nostr.nip04.decrypt(n,o).catch(c=>"*Failed to Decrypted Content*"):"Attempted Nostr Window decryption and failed."})}decryptWithSecretKey(n,o){return D(this,null,function*(){try{let i=this.getSecretKey(),s=new Uint8Array(wr.Buffer.from(i,"hex"));return yield gn.decrypt(s,n,o)}catch(i){return console.error("Error during decryption: ",i),"*Failed to Decrypted Content*"}})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Nn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{zh as a};
