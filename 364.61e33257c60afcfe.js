"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[364],{8364:(T,l,r)=>{r.r(l),r.d(l,{default:()=>N});var g=r(5167),a=r(177),m=r(8834),k=r(6600),v=r(2102),d=r(9213),f=r(9042),p=r(7575),u=r(2798),h=r(450),x=r(4823),b=r(1413),j=r(6977),t=r(4438),B=r(8098),y=r(7291);const _=()=>[],C=o=>({"-ml-3":o});function F(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",32),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,c=t.XpG();return t.Njj(c.goToProjectDetails(i))}),t.EFF(1),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.displayName||e.nostrPubKey," ")}}function $(o,s){if(1&o&&(t.j41(0,"div",25),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.displayName||e.nostrPubKey," ")}}function P(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",27)(1,"div",33)(2,"button",34),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,c=t.XpG();return t.Njj(c.openChat(i.nostrPubKey))}),t.nrm(3,"mat-icon",35),t.k0s()(),t.j41(4,"div",33)(5,"button",34),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,c=t.XpG();return t.Njj(c.toggleBookmark(i.projectIdentifier))}),t.nrm(6,"mat-icon",35),t.nI1(7,"async"),t.k0s()()()}if(2&o){let e;const n=t.XpG().$implicit,i=t.XpG();t.R7$(3),t.Y8G("svgIcon","heroicons_outline:chat-bubble-left-right"),t.R7$(3),t.Y8G("svgIcon",null!=(e=t.bMT(7,2,i.bookmarks$))&&e.includes(n.projectIdentifier)?"heroicons_solid:bookmark":"heroicons_outline:bookmark")}}function I(o,s){if(1&o&&(t.qex(0),t.nrm(1,"img",36),t.bVm()),2&o){const e=t.XpG().index,n=t.XpG().$implicit;t.R7$(),t.Mz_("alt","Investor avatar ",e+1,""),t.Y8G("ngClass",t.eq3(4,C,n.totalInvestmentsCount>1&&e>0))("src","images/avatars/avatar-placeholder.png",t.B4B)}}function R(o,s){if(1&o&&(t.qex(0),t.DNE(1,I,2,6,"ng-container",14),t.bVm()),2&o){const e=s.index;t.R7$(),t.Y8G("ngIf",e<10)}}function G(o,s){if(1&o&&(t.qex(0),t.j41(1,"angor-card",15)(2,"div",16),t.nrm(3,"img",17),t.k0s(),t.j41(4,"div",18)(5,"div",19),t.nrm(6,"img",20),t.k0s()(),t.j41(7,"div",21)(8,"div",22)(9,"div",23),t.DNE(10,F,2,1,"div",24)(11,$,2,1,"div",25),t.j41(12,"div",26),t.EFF(13),t.k0s()(),t.DNE(14,P,8,4,"div",27),t.k0s(),t.nrm(15,"hr",28),t.j41(16,"div",22)(17,"div",29),t.EFF(18),t.k0s(),t.j41(19,"div",30),t.DNE(20,R,2,1,"ng-container",31),t.k0s()()()(),t.bVm()),2&o){const e=s.$implicit;t.R7$(3),t.Y8G("src",e.banner||"/images/pages/profile/cover.jpg",t.B4B),t.R7$(3),t.Y8G("src",e.picture||"images/avatars/avatar-placeholder.png",t.B4B),t.R7$(4),t.vxM(e.displayName||e.name?10:-1),t.R7$(),t.vxM(e.name||e.displayName?-1:11),t.R7$(2),t.SpI(" ",e.about||"No description available"," "),t.R7$(),t.vxM(e.displayName||e.name?14:-1),t.R7$(4),t.SpI(" ",e.totalInvestmentsCount||0," investors "),t.R7$(2),t.Y8G("ngForOf",t.lJ4(8,_).constructor(e.totalInvestmentsCount||0))}}function S(o,s){1&o&&(t.qex(0),t.j41(1,"div",37),t.nrm(2,"mat-icon",38),t.j41(3,"div",39),t.EFF(4," No project "),t.k0s()(),t.bVm()),2&o&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:archive-box-x-mark"))}const N=[{path:"",component:(()=>{class o{constructor(e,n,i){this._bookmarkService=e,this._storageService=n,this._changeDetectorRef=i,this.savedProjects=[],this._unsubscribeAll=new b.B,this.bookmarks$=this._bookmarkService.bookmarks$}ngOnInit(){this.loadBookmarkedProjects(),this.subscribeToBookmarkChanges()}loadBookmarkedProjects(){const e=this._bookmarkService.getBookmarks();this._storageService.getProjectsByIds(e).then(n=>{this.savedProjects=n,this.fetchMetadataForProjects(this.savedProjects)})}trackByFn(e,n){return n.projectIdentifier||e}subscribeToBookmarkChanges(){this.bookmarks$.pipe((0,j.Q)(this._unsubscribeAll)).subscribe(e=>{this._storageService.getProjectsByIds(e).then(n=>{this.savedProjects=n,this.fetchMetadataForProjects(this.savedProjects)})})}fetchMetadataForProjects(e){e.forEach(n=>{this._storageService.getProfile(n.nostrPubKey).then(i=>{i&&(this.updateProjectMetadata(n,i),this._changeDetectorRef.detectChanges())})})}updateProjectMetadata(e,n){e.displayName=n.name||e.displayName,e.about=n.about||e.about,e.picture=n.picture||e.picture,e.banner=n.banner||e.banner}toggleBookmark(e){this._bookmarkService.isBookmarked(e)?this._bookmarkService.removeBookmark(e):this._bookmarkService.addBookmark(e)}isProjectBookmarked(e){return this._bookmarkService.isBookmarked(e)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(B.U),t.rXU(y.n),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-bookmark"]],standalone:!0,features:[t.aNF],decls:18,vars:3,consts:[[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-y-auto"],[1,"dark","relative","flex-0","overflow-hidden","bg-gray-800","px-4","py-8","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"pointer-events-none","absolute","inset-0"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","z-10","flex","flex-col","items-center"],[1,"text-xl","font-semibold"],[1,"mt-1","text-center","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-7xl"],[1,"text-secondary","mt-6","max-w-2xl","text-center","tracking-tight","sm:text-2xl"],[1,"p-6","sm:p-10"],[1,"mx-auto","flex","w-full","flex-auto","flex-col","sm:max-w-5xl"],[1,"mt-10","grid","w-full","min-w-0","grid-cols-1","gap-6","sm:grid-cols-1","md:grid-cols-1","lg:grid-cols-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"filter-info","flex","w-full","flex-col"],[1,"flex","h-32"],["alt","Card cover image","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","alt","Card cover image",1,"object-cover",3,"src"],[1,"flex","px-8"],[1,"bg-card","-mt-12","rounded-full","p-1"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Project logo",1,"h-24","w-24","rounded-full","object-cover",3,"src"],[1,"flex","flex-col","px-8","pb-6","pt-4"],[1,"flex","items-center","justify-between"],[1,"min-w-0","flex-1"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"text-secondary","mt-1","truncate","leading-tight"],[1,"absolute","top-2","right-2","flex","space-x-2"],[1,"my-6","w-full","border-t"],[1,"text-secondary","mr-3","text-md","font-medium"],[1,"flex","items-center"],[4,"ngFor","ngForOf"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight",3,"click"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","border","bg-white","shadow-md"],["mat-icon-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-card","ring-bg-card","m-0.5","h-6","w-6","rounded-full","ring-2",3,"ngClass","src","alt"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1),t.qSk(),t.j41(2,"svg",2)(3,"g",3),t.nrm(4,"circle",4)(5,"circle",5),t.k0s()(),t.joV(),t.j41(6,"div",6)(7,"h2",7),t.EFF(8,"Bookmark"),t.k0s(),t.j41(9,"div",8),t.EFF(10," Explore Your Saved Projects "),t.k0s(),t.j41(11,"div",9),t.EFF(12," Review and manage your bookmarked projects below. "),t.k0s()()(),t.j41(13,"div",10)(14,"div",11)(15,"div",12),t.DNE(16,G,21,9,"ng-container",13),t.k0s(),t.DNE(17,S,5,1,"ng-container",14),t.k0s()()()),2&n&&(t.R7$(16),t.Y8G("ngForOf",i.savedProjects)("ngForTrackBy",i.trackByFn),t.R7$(),t.Y8G("ngIf",0==i.savedProjects.length))},dependencies:[m.Hl,m.iY,d.m_,d.An,g.n,v.RG,u.Ve,k.Sy,f.fS,h.mV,a.YU,x.uc,p.PO,a.MD,a.Sq,a.bT,a.Jj]})}}return o})()}]}}]);