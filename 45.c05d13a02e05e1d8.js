"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[45],{2045:(J,f,i)=>{i.r(f),i.d(f,{default:()=>O});var m=i(3014),k=i(7785),l=i(4460),d=i(9471),_=i(2902),u=i(6071),p=i(3904),g=i(6389),y=i(2322),C=i(4375),h=i(1371),P=i(7712),x=i(1054),b=i(8716),I=i(8447),a=i(5424),v=i(2040),R=i(7178),$=i(3016),e=i(3107),E=i(9528),S=i(3149),B=i(7112);const G=()=>[],F=r=>["/chat",r],T=r=>({"-ml-3":r});function N(r,s){if(1&r){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const n=e.XpG(),c=e.sdS(20);return e.Njj(n.resetSearch(c))}),e.nrm(1,"mat-icon",28),e.k0s()}2&r&&(e.R7$(),e.Y8G("svgIcon","heroicons_solid:x-mark"))}function w(r,s){if(1&r){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG(),c=e.sdS(20);return e.Njj(n.filterByQuery(c.value))}),e.nrm(1,"mat-icon",28),e.k0s()}2&r&&(e.R7$(),e.Y8G("svgIcon","heroicons_solid:magnifying-glass"))}function M(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,c=e.XpG();return e.Njj(c.goToProjectDetails(n))}),e.EFF(1),e.k0s()}if(2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function Y(r,s){if(1&r&&(e.j41(0,"div",40),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.displayName||t.nostrPubKey," ")}}function D(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",42)(1,"div",48)(2,"button",49),e.nrm(3,"mat-icon",50),e.k0s()(),e.j41(4,"div",48)(5,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,c=e.XpG();return e.Njj(c.toggleBookmark(n.nostrPubKey))}),e.nrm(6,"mat-icon",50),e.nI1(7,"async"),e.k0s()()()}if(2&r){let t;const o=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(5,F,o.nostrPubKey)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:chat-bubble-left-right"),e.R7$(3),e.Y8G("svgIcon",null!=(t=e.bMT(7,3,n.bookmarks$))&&t.includes(o.nostrPubKey)?"heroicons_solid:bookmark":"heroicons_outline:bookmark")}}function V(r,s){if(1&r&&(e.qex(0),e.nrm(1,"img",52),e.bVm()),2&r){const t=e.XpG().index,o=e.XpG().$implicit;e.R7$(),e.Mz_("alt","Investor avatar ",t+1,""),e.Y8G("ngClass",e.eq3(4,T,o.totalInvestmentsCount>1&&t>0))("src","images/avatars/avatar-placeholder.png",e.B4B)}}function X(r,s){if(1&r&&(e.qex(0),e.DNE(1,V,2,6,"ng-container",24),e.bVm()),2&r){const t=s.index;e.R7$(),e.Y8G("ngIf",t<10)}}function L(r,s){if(1&r&&(e.qex(0),e.j41(1,"angor-card",30)(2,"div",31),e.nrm(3,"img",32),e.k0s(),e.j41(4,"div",33)(5,"div",34),e.nrm(6,"img",35),e.k0s()(),e.j41(7,"div",36)(8,"div",37)(9,"div",38),e.DNE(10,M,2,1,"div",39)(11,Y,2,1,"div",40),e.j41(12,"div",41),e.EFF(13),e.k0s()(),e.DNE(14,D,8,7,"div",42),e.k0s(),e.nrm(15,"hr",43),e.j41(16,"div",37)(17,"div",44),e.EFF(18),e.k0s(),e.j41(19,"div",45),e.DNE(20,X,2,1,"ng-container",46),e.k0s()()()(),e.bVm()),2&r){const t=s.$implicit;e.R7$(3),e.Y8G("src",t.banner||"/images/pages/profile/cover.jpg",e.B4B),e.R7$(3),e.Y8G("src",t.picture||"images/avatars/avatar-placeholder.png",e.B4B),e.R7$(4),e.vxM(t.displayName||t.name?10:-1),e.R7$(),e.vxM(t.name||t.displayName?-1:11),e.R7$(2),e.SpI(" ",t.about||"No description available"," "),e.R7$(),e.vxM(t.displayName||t.name?14:-1),e.R7$(4),e.SpI(" ",t.totalInvestmentsCount||0," investors "),e.R7$(2),e.Y8G("ngForOf",e.lJ4(8,G).constructor(t.totalInvestmentsCount||0))}}function A(r,s){1&r&&(e.qex(0),e.j41(1,"div",53),e.nrm(2,"mat-icon",54),e.j41(3,"div",55),e.EFF(4," No projects "),e.k0s()(),e.bVm()),2&r&&(e.R7$(2),e.Y8G("svgIcon","heroicons_outline:archive-box-x-mark"))}function K(r,s){if(1&r&&(e.qex(0),e.DNE(1,A,5,1,"ng-container",24),e.bVm()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0===t.filteredProjects.length)}}function U(r,s){1&r&&(e.qex(0),e.j41(1,"div",56),e.nrm(2,"mat-progress-spinner",57),e.j41(3,"div",58),e.EFF(4,"Loading projects..."),e.k0s()(),e.bVm())}function Q(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",59)(1,"button",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadMoreProjects())}),e.EFF(2),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.loading?"Loading...":"Load More Projects"," ")}}function z(r,s){if(1&r&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}const O=[{path:"",component:(()=>{class r{constructor(t,o,n,c,j){this._projectsService=t,this._storageService=o,this._changeDetectorRef=n,this._router=c,this._bookmarkService=j,this.projects=[],this.filteredProjects=[],this.loading=!1,this.errorMessage="",this.noMoreProjects=!1,this.bookmarkedProjectNpubs=[],this.initialLoadComplete=!1,this._unsubscribeAll=new I.B,this.bookmarks$=this._bookmarkService.bookmarks$}ngOnInit(){var t=this;return(0,m.A)(function*(){yield t._bookmarkService.initializeForCurrentUser(),t.loadInitialProjects(),t.subscribeToProjectsUpdates(),t.subscribeToLoading(),t.subscribeToNoMoreProjects(),t.subscribeToBookmarkChanges()})()}loadInitialProjects(){this._projectsService.resetProjects(),this.loading=!0,this.initialLoadComplete=!1,this._projectsService.fetchProjects().pipe((0,a.Q)(this._unsubscribeAll)).subscribe({next:t=>{this.projects=t,this.filteredProjects=this.projects,this.updateBookmarkStatus(),this.fetchMetadataForProjects(t),this.initialLoadComplete=!0,this._changeDetectorRef.detectChanges()}})}subscribeToBookmarkChanges(){this.bookmarks$.pipe((0,a.Q)(this._unsubscribeAll)).subscribe(t=>{this.bookmarkedProjectNpubs=t,this.updateBookmarkStatus(),this._changeDetectorRef.detectChanges()})}updateBookmarkStatus(){this.projects.forEach(t=>{t.isBookmarked=this.bookmarkedProjectNpubs.includes(t.nostrPubKey)}),this.filteredProjects=[...this.projects]}fetchMetadataForProjects(t){t.forEach(o=>{this._storageService.getProfile(o.nostrPubKey).then(n=>{n&&this.updateProjectMetadata(o,n)})})}subscribeToProjectsUpdates(){this._storageService.profile$.pipe((0,a.Q)(this._unsubscribeAll)).subscribe(t=>{if(t&&t.pubKey){const o=this.projects.find(n=>n.nostrPubKey===t.pubKey);o&&(this.updateProjectMetadata(o,t.metadata),this._changeDetectorRef.detectChanges())}})}updateProjectMetadata(t,o){t.displayName=o.name||t.displayName,t.about=o.about||t.about,t.picture=o.picture||t.picture,t.banner=o.banner||t.banner}loadMoreProjects(){this._projectsService.fetchProjects().pipe((0,a.Q)(this._unsubscribeAll)).subscribe({next:t=>{const o=t.filter(n=>!this.projects.some(c=>c.projectIdentifier===n.projectIdentifier));this.projects=[...this.projects,...o],this.filteredProjects=[...this.projects],this.fetchMetadataForProjects(o),this._changeDetectorRef.detectChanges()},error:t=>{this.errorMessage="Error loading more projects",this._changeDetectorRef.detectChanges()}})}subscribeToLoading(){this._projectsService.loading$.pipe((0,a.Q)(this._unsubscribeAll)).subscribe(t=>{this.loading=t,this._changeDetectorRef.detectChanges()})}subscribeToNoMoreProjects(){this._projectsService.noMoreProjects$.pipe((0,a.Q)(this._unsubscribeAll)).subscribe(t=>{this.noMoreProjects=t,this._changeDetectorRef.detectChanges()})}trackByFn(t,o){return o.projectIdentifier||t}goToProjectDetails(t){this._projectsService.fetchProjectStats(t.projectIdentifier).pipe((0,v.M)(o=>{this._storageService.saveProjectStats(t.projectIdentifier,o)}),(0,v.M)(()=>{this._router.navigate(["/profile",t.nostrPubKey,t.projectIdentifier])}),(0,R.W)(o=>(console.error(`Failed to navigate to project details for ${t.projectIdentifier}:`,o),(0,$.of)(null)))).subscribe()}filterByQuery(t){if(!t||""===t.trim())return this.filteredProjects=[...this.projects],this.showCloseSearchButton=!1,void this._changeDetectorRef.detectChanges();const o=t.toLowerCase();this.filteredProjects=this.projects.filter(n=>n.displayName&&n.displayName.toLowerCase().includes(o)||n.about&&n.about.toLowerCase().includes(o)||n.displayName&&n.displayName.toLowerCase().includes(o)||n.nostrPubKey&&n.nostrPubKey.toLowerCase().includes(o)||n.projectIdentifier&&n.projectIdentifier.toLowerCase().includes(o)),this.showCloseSearchButton=this.projects.length>0,this._changeDetectorRef.detectChanges()}resetSearch(t){t.value="",this.filterByQuery(""),this.showCloseSearchButton=!1}toggleBookmark(t){var o=this;return(0,m.A)(function*(){(yield o._bookmarkService.isBookmarked(t))?yield o._bookmarkService.removeBookmark(t):yield o._bookmarkService.addBookmark(t)})()}isProjectBookmarked(t){var o=this;return(0,m.A)(function*(){return yield o._bookmarkService.isBookmarked(t)})()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(E.i),e.rXU(S.n),e.rXU(e.gRc),e.rXU(b.Ix),e.rXU(B.U))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["explore"]],decls:32,vars:11,consts:[["query",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"dark","relative","flex-0","overflow-hidden","bg-gray-800","px-4","py-8","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"pointer-events-none","absolute","inset-0"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","z-10","flex","flex-col","items-center"],[1,"text-xl","font-semibold"],[1,"mt-1","text-center","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-7xl"],[1,"text-secondary","mt-6","max-w-2xl","text-center","tracking-tight","sm:text-2xl"],[1,"p-6","sm:p-10"],[1,"mx-auto","flex","w-full","max-w-xs","flex-auto","flex-col","sm:max-w-5xl"],[1,"flex","w-full","max-w-xs","flex-col","items-center","justify-between","sm:max-w-none","sm:flex-row"],[1,"flex","w-full","items-center","space-x-2","sm:w-auto"],[1,"mt-4","w-full","sm:w-80",3,"keyup.enter","subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["placeholder","Search ...","matInput",""],["mat-icon-button","","color","warn","class","mt-4",3,"click",4,"ngIf"],["mat-icon-button","","color","success","class","mt-4",3,"click",4,"ngIf"],[1,"mt-8","sm:ml-auto","sm:mt-0",3,"color"],[1,"mx-auto","flex","w-full","flex-auto","flex-col","sm:max-w-5xl"],[1,"mt-10","grid","w-full","min-w-0","grid-cols-1","gap-6","sm:grid-cols-1","md:grid-cols-1","lg:grid-cols-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","mt-10 flex justify-center",4,"ngIf"],["class","error-message",4,"ngIf"],["mat-icon-button","","color","warn",1,"mt-4",3,"click"],[3,"svgIcon"],["mat-icon-button","","color","success",1,"mt-4",3,"click"],[1,"filter-info","flex","w-full","flex-col"],[1,"flex","h-32"],["alt","Card cover image","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","alt","Card cover image",1,"object-cover",3,"src"],[1,"flex","px-8"],[1,"bg-card","-mt-12","rounded-full","p-1"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Project logo",1,"h-24","w-24","rounded-full","object-cover",3,"src"],[1,"flex","flex-col","px-8","pb-6","pt-4"],[1,"flex","items-center","justify-between"],[1,"min-w-0","flex-1"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"truncate","text-2xl","font-semibold","leading-tight"],[1,"text-secondary","mt-1","truncate","leading-tight"],[1,"absolute","top-2","right-2","flex","space-x-2"],[1,"my-6","w-full","border-t"],[1,"text-secondary","mr-3","text-md","font-medium"],[1,"flex","items-center"],[4,"ngFor","ngForOf"],["role","button",1,"truncate","text-2xl","font-semibold","leading-tight",3,"click"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","border","bg-white","shadow-md"],["mat-icon-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-card","ring-bg-card","m-0.5","h-6","w-6","rounded-full","ring-2",3,"ngClass","src","alt"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"],[1,"flex","flex-auto","flex-col","items-center","justify-center"],["mode","indeterminate","diameter","48"],[1,"text-secondary","mt-4","text-xl"],[1,"mt-10","flex","justify-center"],["mat-raised-button","","color","primary",1,"bg-card","text-gray-700","hover:bg-gray-200","dark:text-gray-300","dark:hover:bg-gray-700",3,"click","disabled"],[1,"error-message"]],template:function(o,n){if(1&o){const c=e.RV6();e.j41(0,"div",1)(1,"div",2),e.qSk(),e.j41(2,"svg",3)(3,"g",4),e.nrm(4,"circle",5)(5,"circle",6),e.k0s()(),e.joV(),e.j41(6,"div",7)(7,"h2",8),e.EFF(8,"Explore Projects"),e.k0s(),e.j41(9,"div",9),e.EFF(10," What\u2019s your next investment? "),e.k0s(),e.j41(11,"div",10),e.EFF(12," Check out our projects and find your next investment opportunity. "),e.k0s()()(),e.j41(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"mat-form-field",15),e.bIt("keyup.enter",function(){e.eBV(c);const W=e.sdS(20);return e.Njj(n.filterByQuery(W.value))}),e.nrm(18,"mat-icon",16)(19,"input",17,0),e.k0s(),e.DNE(21,N,2,1,"button",18)(22,w,2,1,"button",19),e.k0s(),e.j41(23,"mat-slide-toggle",20),e.EFF(24," Hide completed "),e.k0s()()(),e.j41(25,"div",21)(26,"div",22),e.DNE(27,L,21,9,"ng-container",23),e.k0s(),e.DNE(28,K,2,1,"ng-container",24)(29,U,5,0,"ng-container",24)(30,Q,3,2,"div",25)(31,z,2,1,"div",26),e.k0s()()()}2&o&&(e.R7$(17),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:magnifying-glass"),e.R7$(3),e.Y8G("ngIf",n.showCloseSearchButton),e.R7$(),e.Y8G("ngIf",!n.showCloseSearchButton),e.R7$(),e.Y8G("color","primary"),e.R7$(4),e.Y8G("ngForOf",n.filteredProjects)("ngForTrackBy",n.trackByFn),e.R7$(),e.Y8G("ngIf",!n.loading||n.initialLoadComplete),e.R7$(),e.Y8G("ngIf",n.loading&&!n.initialLoadComplete),e.R7$(),e.Y8G("ngIf",n.filteredProjects.length>0),e.R7$(),e.Y8G("ngIf",!n.loading&&n.errorMessage))},dependencies:[b.Wk,d.Hl,d.$z,d.iY,p.m_,p.An,k.n,u.RG,u.rl,u.JW,C.Ve,_.Sy,g.fS,g.fg,h.mV,h.sG,l.YU,P.uc,y.PO,l.MD,l.Sq,l.bT,l.Jj,x.D6,x.LG],encapsulation:2})}}return r})()}]}}]);