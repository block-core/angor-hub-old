(self.webpackChunkangor=self.webpackChunkangor||[]).push([[339],{2747:(O,s,o)=>{"use strict";o.d(s,{n:()=>b});var n=o(1648),t=o(4085),e=o(4438);const r=[[["","angorCardFront",""]],[["","angorCardBack",""]],"*",[["","angorCardExpansion",""]]],a=["[angorCardFront]","[angorCardBack]","*","[angorCardExpansion]"];function l(i,h){1&i&&(e.j41(0,"div",0),e.SdG(1),e.k0s(),e.j41(2,"div",1),e.SdG(3,1),e.k0s())}function u(i,h){1&i&&(e.j41(0,"div",2),e.SdG(1,3),e.k0s()),2&i&&e.Y8G("@expandCollapse",void 0)}function d(i,h){if(1&i&&(e.SdG(0,2),e.DNE(1,u,2,1,"div",2)),2&i){const f=e.XpG();e.R7$(),e.vxM(f.expanded?1:-1)}}let b=(()=>{class i{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"angor-card-expanded":this.expanded,"angor-card-face-back":this.flippable&&"back"===this.face,"angor-card-face-front":this.flippable&&"front"===this.face,"angor-card-flippable":this.flippable}}ngOnChanges(f){"expanded"in f&&(this.expanded=(0,t.he)(f.expanded.currentValue)),"flippable"in f&&(this.flippable=(0,t.he)(f.flippable.currentValue))}static{this.\u0275fac=function(m){return new(m||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["angor-card"]],hostVars:2,hostBindings:function(m,x){2&m&&e.HbH(x.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["angorCard"],standalone:!0,features:[e.OA$,e.aNF],ngContentSelectors:a,decls:2,vars:2,consts:[[1,"angor-card-front"],[1,"angor-card-back"],[1,"angor-card-expansion"]],template:function(m,x){1&m&&(e.NAR(r),e.DNE(0,l,4,0)(1,d,2,1)),2&m&&(e.vxM(x.flippable?0:-1),e.R7$(),e.vxM(x.flippable?-1:1))},styles:["angor-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}angor-card.angor-card-flippable.angor-card-face-back .angor-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}angor-card.angor-card-flippable .angor-card-front,angor-card.angor-card-flippable .angor-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--angor-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}angor-card.angor-card-flippable .angor-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}angor-card.angor-card-flippable .angor-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:n.F}})}}return i})()},9345:(O,s,o)=>{"use strict";o.d(s,{n:()=>n.n});var n=o(2747)},4057:(O,s,o)=>{"use strict";o.d(s,{q:()=>V});var n=o(9345),t=o(177),e=o(4438),r=o(8834),a=o(1997),l=o(9213),u=o(9115),d=o(5245),b=o(467),i=o(8703),h=o(7291);let f=(()=>{class E{constructor(g,c){this._changeDetectorRef=g,this._storageService=c,this.userChange=new e.bkB}ngOnInit(){this.loadUserProfile(),this.subscription=this._storageService.profile$.subscribe(g=>{g&&g.pubKey===this.pubkey&&(this.user=g.metadata,this.userChange.emit(this.user),this._changeDetectorRef.detectChanges())})}loadUserProfile(){var g=this;return(0,b.A)(function*(){const c=yield g._storageService.getProfile(g.pubkey);g.user=c||{},g.userChange.emit(g.user),g._changeDetectorRef.detectChanges()})()}get displayName(){return this.user?.display_name||this.user?.name||this.shortenPubkey(this.pubkey)}get displayAvatar(){return this.user?.picture||this.avatarUrl||"/images/avatars/avatar-placeholder.png"}shortenPubkey(g){return g?`${g.slice(0,8)}...${g.slice(-8)}`:""}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(c){return new(c||E)(e.rXU(e.gRc),e.rXU(h.n))}}static{this.\u0275cmp=e.VBU({type:E,selectors:[["app-post-profile"]],inputs:{pubkey:"pubkey",avatarUrl:"avatarUrl",created_at:"created_at"},outputs:{userChange:"userChange"},standalone:!0,features:[e.aNF],decls:9,vars:7,consts:[[1,"flex","items-center"],[1,"flex","items-center","group",3,"href"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"]],template:function(c,C){1&c&&(e.j41(0,"div",0)(1,"a",1),e.nrm(2,"img",2),e.j41(3,"div",3)(4,"span",4),e.EFF(5),e.k0s(),e.j41(6,"span",5),e.EFF(7),e.nI1(8,"ago"),e.k0s()()()()),2&c&&(e.R7$(),e.Y8G("href","/profile/"+C.pubkey,e.B4B),e.R7$(),e.Y8G("src",C.displayAvatar,e.B4B)("alt",C.displayName),e.R7$(3),e.JRh(C.displayName),e.R7$(2),e.JRh(e.bMT(8,5,C.created_at)))},dependencies:[t.MD,i.g]})}}return E})();var m=o(2022),x=o(413),_=o(5351),M=o(5416),y=o(2507);let k=(()=>{class E{constructor(){this.dialog=(0,e.WQX)(_.bZ),this.snackBar=(0,e.WQX)(M.UG)}canUseZap(g){var c=this;return(0,b.A)(function*(){return!(!g||!g.lud06&&!g.lud16)||(c.openSnackBar("Using Zap is not possible. Please complete your profile to include lud06 or lud16."),!1)})()}openSnackBar(g,c="dismiss"){this.snackBar.open(g,c,{duration:3e3})}openZapDialog(g="",c){var C=this;return(0,b.A)(function*(){(yield C.canUseZap(c))&&C.dialog.open(y.r,{width:"405px",maxHeight:"90vh",data:{lud16:c.lud16,lud06:c.lud06,pubkey:c.pubkey,eventId:g}})})()}static{this.\u0275fac=function(c){return new(c||E)}}static{this.\u0275prov=e.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var A=o(8359);const B=E=>({"large-font":E}),G=E=>({"heart-beat":E}),z=E=>["/post",E];function I(E,R){if(1&E&&(e.j41(0,"div",12),e.nrm(1,"iframe",14),e.k0s()),2&E){const g=e.XpG().$implicit;e.R7$(),e.Y8G("src",g.safeWord,e.f$h)}}function N(E,R){if(1&E&&(e.j41(0,"div",12),e.nrm(1,"img",15),e.k0s()),2&E){const g=e.XpG().$implicit;e.R7$(),e.Y8G("src",g.safeWord,e.B4B)}}function D(E,R){if(1&E&&(e.j41(0,"div",12)(1,"video",16),e.nrm(2,"source",17),e.EFF(3," Your browser does not support the video tag. "),e.k0s()()),2&E){const g=e.XpG().$implicit;e.R7$(2),e.Y8G("src",g.safeWord,e.B4B)}}function T(E,R){if(1&E&&(e.j41(0,"div",12)(1,"audio",18),e.nrm(2,"source",19),e.EFF(3," Your browser does not support the audio element. "),e.k0s()()),2&E){const g=e.XpG().$implicit;e.R7$(2),e.Y8G("src",g.safeWord,e.B4B)}}function H(E,R){if(1&E&&(e.j41(0,"div",13)(1,"a",20)(2,"span",21),e.EFF(3),e.k0s()()()),2&E){const g=e.XpG().$implicit;e.R7$(),e.Y8G("href",g.word,e.B4B),e.R7$(2),e.JRh(g.word)}}function F(E,R){if(1&E&&(e.j41(0,"div",13)(1,"span",22),e.EFF(2),e.k0s()()),2&E){const g=e.XpG().$implicit,c=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(2,B,c.isSingleEmojiOrWord(g))),e.R7$(),e.SpI("",g.trim()," ")}}function P(E,R){if(1&E&&(e.j41(0,"div",10),e.DNE(1,I,2,1,"div",12)(2,N,2,1,"div",12)(3,D,4,1,"div",12)(4,T,4,1,"div",12)(5,H,4,2,"div",13)(6,F,3,4,"div",13),e.k0s()),2&E){const g=R.$implicit;e.R7$(),e.vxM("youtube"===g.token?1:-1),e.R7$(),e.vxM("image"===g.token?2:-1),e.R7$(),e.vxM("video"===g.token?3:-1),e.R7$(),e.vxM("audio"===g.token?4:-1),e.R7$(),e.vxM("link"===g.token?5:-1),e.R7$(),e.vxM(g.token?-1:6)}}function $(E,R){if(1&E){const g=e.RV6();e.j41(0,"div",11)(1,"button",23),e.bIt("click",function(){e.eBV(g);const C=e.XpG();return e.Njj(C.toggleLike(C.item))}),e.nrm(2,"mat-icon",24),e.j41(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"button",26),e.nrm(6,"mat-icon",27),e.j41(7,"span",25),e.EFF(8,"Comment"),e.k0s()(),e.j41(9,"button",26),e.nrm(10,"mat-icon",28),e.j41(11,"span",25),e.EFF(12,"Share"),e.k0s()(),e.j41(13,"button",23),e.bIt("click",function(){e.eBV(g);const C=e.XpG();return e.Njj(C.openZapDialog(C.item.id,C.user))}),e.nrm(14,"mat-icon",29),e.j41(15,"span",25),e.EFF(16,"Zap"),e.k0s()()()}if(2&E){const g=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(6,G,g.isLiked))("svgIcon",g.isLiked?"heroicons_solid:heart":"heroicons_outline:heart"),e.R7$(2),e.SpI("",g.isLiked?"Liked":"Like"," "),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:share"),e.R7$(4),e.Y8G("svgIcon","heroicons_solid:bolt")}}function L(E,R){if(1&E&&(e.nrm(0,"hr",30),e.j41(1,"div",31),e.nrm(2,"div",32),e.j41(3,"div",33)(4,"button",34)(5,"span",35),e.EFF(6,"Read More ..."),e.k0s()()()()),2&E){const g=e.XpG();e.R7$(4),e.Y8G("routerLink",e.eq3(1,z,g.item.id))}}let V=(()=>{class E{constructor(){this.actions=!0,this.more=!0,this.user=new e.bkB,this.storageService=(0,e.WQX)(h.n),this.zapService=(0,e.WQX)(k),this.parseContent=(0,e.WQX)(x.m),this.eventService=(0,e.WQX)(m.U),this.changeDetectorRef=(0,e.WQX)(e.gRc),this.subscription=new A.yU,this.tokens=(0,e.vPA)([]),this.isLiked=!1}get item(){return this._item}set item(g){this._item=g,this.onItemChange()}ngOnInit(){this.subscription=this.storageService.myLikes$.subscribe(g=>{g&&g.includes(this.item.id)?(this.isLiked=!0,this.changeDetectorRef.detectChanges()):this.isLiked=!1})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}openZapDialog(g,c){this.zapService.openZapDialog(g,c)}getProfile(){}isSingleEmojiOrWord(g){const c=g.trim(),C=/^\w+$/.test(c),S=/^[\p{Emoji}]+$/u.test(c);return(C||S)&&c.length<10}onItemChange(){this.tokens.set(this._item.content?this.parseContent.parseContent(this._item.content):[])}sendLike(g){this.isLiked||this.eventService.sendLikeEvent(g).then(()=>{this.isLiked=!0,this.changeDetectorRef.detectChanges()}).catch(c=>console.error("Failed to send like:",c))}toggleLike(g){this.sendLike(g)}static{this.\u0275fac=function(c){return new(c||E)}}static{this.\u0275cmp=e.VBU({type:E,selectors:[["app-post"]],inputs:{item:"item",actions:"actions",more:"more"},outputs:{user:"user"},standalone:!0,features:[e.aNF],decls:42,vars:13,consts:[["postCardMenu","matMenu"],[1,"flex","w-full","flex-col"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],[3,"userChange","pubkey","avatarUrl","created_at"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item",""],[1,"flex","items-center"],[1,"mr-3","icon-size-5",3,"svgIcon"],[1,"my-2"],[1,"inline-block","whitespace-pre-wrap","break-words"],[1,"mx-3","flex","items-center","sm:mx-5"],[1,"relative","mb-4","block"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"],["alt","Embedded Image",1,"max-h-140","object-cover",2,"width","100%",3,"src"],["controls","",2,"width","100%"],["type","video/mp4",3,"src"],["controls",""],["type","audio/mpeg",3,"src"],["target","_blank",1,"inline-block","break-words","text-blue-500","underline",3,"href"],[1,"inline-block","break-words"],[1,"inline-block","break-words",3,"ngClass"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"text-red-500","icon-size-5",3,"ngClass","svgIcon"],[1,"ml-2"],["mat-button","",1,"mr-1","px-3"],[1,"text-blue-500","icon-size-5",3,"svgIcon"],[1,"text-green-500","icon-size-5",3,"svgIcon"],[1,"text-orange-500","icon-size-5",3,"svgIcon"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"routerLink"],[1,"mr-1"]],template:function(c,C){if(1&c){const S=e.RV6();e.j41(0,"angor-card",1)(1,"div",2)(2,"app-post-profile",3),e.bIt("userChange",function(p){return e.eBV(S),e.Njj(C.user=p)}),e.k0s(),e.j41(3,"button",4),e.nrm(4,"mat-icon",5),e.k0s(),e.j41(5,"mat-menu",null,0)(7,"button",6)(8,"span",7),e.nrm(9,"mat-icon",8),e.j41(10,"span"),e.EFF(11,"Save post"),e.k0s()()(),e.j41(12,"button",6)(13,"span",7),e.nrm(14,"mat-icon",8),e.j41(15,"span"),e.EFF(16,"Hide post"),e.k0s()()(),e.j41(17,"button",6)(18,"span",7),e.nrm(19,"mat-icon",8),e.j41(20,"span"),e.EFF(21,"Snooze for 30 days"),e.k0s()()(),e.j41(22,"button",6)(23,"span",7),e.nrm(24,"mat-icon",8),e.j41(25,"span"),e.EFF(26,"Hide all"),e.k0s()()(),e.nrm(27,"mat-divider",9),e.j41(28,"button",6)(29,"span",7),e.nrm(30,"mat-icon",8),e.j41(31,"span"),e.EFF(32,"Report post"),e.k0s()()(),e.j41(33,"button",6)(34,"span",7),e.nrm(35,"mat-icon",8),e.j41(36,"span"),e.EFF(37,"Turn on notifications for this post"),e.k0s()()()()(),e.Z7z(38,P,7,6,"div",10,e.fX1),e.DNE(40,$,17,8,"div",11)(41,L,7,3),e.k0s()}if(2&c){const S=e.sdS(6);e.R7$(2),e.Y8G("pubkey",null==C.item?null:C.item.pubkey)("avatarUrl","/images/avatars/avatar-placeholder.png")("created_at",C.item.created_at),e.R7$(),e.Y8G("matMenuTriggerFor",S),e.R7$(),e.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:eye-slash"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:clock"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:minus-circle"),e.R7$(6),e.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),e.R7$(5),e.Y8G("svgIcon","heroicons_solid:bell"),e.R7$(3),e.Dyx(C.tokens()),e.R7$(2),e.vxM(C.actions?40:-1),e.R7$(),e.vxM(C.more?41:-1)}},dependencies:[n.n,f,l.m_,l.An,a.w,a.q,u.Cn,u.kk,u.fb,u.Cp,d.iI,d.Wk,t.MD,t.YU,r.$z],styles:[".heart-beat[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeatAnimation .3s ease-in-out}@keyframes _ngcontent-%COMP%_heartBeatAnimation{0%{transform:scale(1)}30%{transform:scale(2)}60%{transform:scale(1)}to{transform:scale(1)}}"]})}}return E})()},2022:(O,s,o)=>{"use strict";o.d(s,{U:()=>u});var n=o(467),t=o(5766),e=o(719),r=o(4438),a=o(6231),l=o(6324);let u=(()=>{class d{constructor(i,h){this.relayService=i,this.signerService=h,this.likesMap=new Map,this.myLikedNoteIds=[]}sendTextEvent(i){var h=this;return(0,n.A)(function*(){if(i)try{const m=h.signerService.getUnsignedEvent(1,[],i);let x;if(h.signerService.isUsingSecretKey()){const _=yield h.signerService.getDecryptedSecretKey(),M=(0,t.aT)(_);x=(0,e.pC)(m,M)}else x=yield h.signerService.signEventWithExtension(m);yield h.relayService.publishEventToWriteRelays(x)}catch(f){console.error("Failed to send text event:",f)}})()}sendLikeEvent(i){var h=this;return(0,n.A)(function*(){if(i)try{const x=h.signerService.getUnsignedEvent(7,[["e",i.id],["p",i.pubkey]],"+");let _;if(h.signerService.isUsingSecretKey()){const M=yield h.signerService.getDecryptedSecretKey(),y=(0,t.aT)(M);_=(0,e.pC)(x,y)}else _=yield h.signerService.signEventWithExtension(x);yield h.relayService.publishEventToWriteRelays(_),h.likesMap.set(i.id,[...h.likesMap.get(i.id)||[],h.signerService.getPublicKey()])}catch(f){console.error("Failed to send like event:",f)}})()}sendZapEvent(i,h){var f=this;return(0,n.A)(function*(){if(i&&!(h<=0))try{const m=[["e",i.id],["p",i.pubkey],["amount",h.toString()]],_=f.signerService.getUnsignedEvent(9735,m,`Zapped with ${h} sats`);let M;if(f.signerService.isUsingSecretKey()){const y=yield f.signerService.getDecryptedSecretKey(),k=(0,t.aT)(y);M=(0,e.pC)(_,k)}else M=yield f.signerService.signEventWithExtension(_);yield f.relayService.publishEventToWriteRelays(M)}catch(m){console.error("Failed to send zap event:",m)}})()}sendReplyEvent(i,h){var f=this;return(0,n.A)(function*(){if(i)try{const x=f.signerService.getUnsignedEvent(1,[["e",i.id],["p",i.pubkey]],h);let _;if(f.signerService.isUsingSecretKey()){const M=yield f.signerService.getDecryptedSecretKey(),y=(0,t.aT)(M);_=(0,e.pC)(x,y)}else _=yield f.signerService.signEventWithExtension(x);yield f.relayService.publishEventToWriteRelays(_)}catch(m){console.error("Failed to send reply event:",m)}})()}static{this.\u0275fac=function(h){return new(h||d)(r.KVO(a.b),r.KVO(l.A))}}static{this.\u0275prov=r.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},2507:(O,s,o)=>{"use strict";o.d(s,{r:()=>E});var n=o(467),t=o(4438),e=o(9417),r=o(5351),a=o(5416),l=o(6182),u=o(7673),d=o(9437),b=o(1626);let i=(()=>{class R{constructor(c){this.http=c}getLightning(c){return this.http.get(c).pipe((0,d.W)(C=>(console.error("Failed to fetch Lightning response:",C),(0,u.of)({status:"Failed"}))))}getLightningInvoice(c,C){return this.http.get(`${c}?amount=${C}`).pipe((0,d.W)(j=>(console.error("Failed to fetch Lightning invoice:",j),(0,u.of)({pr:"",status:"Failed"}))))}getLightningAddress(c){try{const[C,S]=c.split("@");return`https://${S}/.well-known/lnurlp/${C}`}catch{return console.error("Invalid Lightning address format:",c),""}}sendZapRequest(c,C,S,j){const p=encodeURIComponent(JSON.stringify(C));return this.http.get(`${c}?amount=${S}&nostr=${p}&lnurl=${j}`).pipe((0,d.W)(w=>(console.error("Failed to send zap request:",w),(0,u.of)({pr:"",status:"Failed"}))))}login(){return(0,n.A)(function*(){try{return window.webln&&!window.webln.isEnabled()&&(yield window.webln.enable()),!0}catch(c){return console.error("WebLN login failed:",c),!1}})()}hasWebln(){return!!window.webln}sendPayment(c){var C=this;return(0,n.A)(function*(){try{return C.hasWebln()?yield window.webln.sendPayment(c):(console.error("WebLN is not available"),null)}catch(S){throw console.error("Payment failed:",S),S}})()}payInvoice(c){var C=this;return(0,n.A)(function*(){if((yield C.login())&&C.hasWebln())try{return!!(yield C.sendPayment(c))}catch(j){return console.error("Failed to pay invoice:",j),!1}return console.error("WebLN not available or login failed"),!1})()}static{this.\u0275fac=function(C){return new(C||R)(t.KVO(b.Qq))}}static{this.\u0275prov=t.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}}return R})();var h=o(719),f=o(6324),m=o(6231),x=o(8834),_=o(9213),M=o(5398),y=o(177),k=o(1997),A=o(2102),B=o(9042),G=o(2798),z=o(882),I=o(4823),N=o(5766),D=o(9706);function T(R,g){if(1&R){const c=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){let S;const j=t.eBV(c).$implicit,p=t.XpG(2);return t.Njj(null==(S=p.sendZapForm.get("amount"))?null:S.setValue(j.value))}),t.j41(1,"mat-icon",16),t.EFF(2),t.k0s(),t.j41(3,"span",17),t.EFF(4),t.k0s()()}if(2&R){const c=g.$implicit;t.R7$(2),t.JRh(c.icon),t.R7$(2),t.JRh(c.label)}}function H(R,g){1&R&&(t.j41(0,"mat-error"),t.EFF(1," Zap amount is required "),t.k0s())}function F(R,g){1&R&&(t.j41(0,"mat-error"),t.EFF(1," Minimum amount is 1 sat "),t.k0s())}function P(R,g){if(1&R){const c=t.RV6();t.j41(0,"mat-dialog-content",5)(1,"div",6),t.DNE(2,T,5,2,"button",7),t.k0s(),t.nrm(3,"mat-divider"),t.j41(4,"div",8)(5,"mat-form-field",9)(6,"mat-label"),t.EFF(7,"Zap Amount"),t.k0s(),t.nrm(8,"input",10),t.j41(9,"mat-hint",11),t.EFF(10,"Amount in sats"),t.k0s(),t.DNE(11,H,2,0,"mat-error",12)(12,F,2,0,"mat-error",12),t.k0s(),t.j41(13,"mat-form-field",9)(14,"mat-label"),t.EFF(15,"Comment"),t.k0s(),t.nrm(16,"input",13),t.j41(17,"mat-hint",11),t.EFF(18),t.k0s()()(),t.j41(19,"mat-dialog-actions",11)(20,"button",14),t.bIt("click",function(){t.eBV(c);const S=t.XpG();return t.Njj(S.onSubmit())}),t.EFF(21," Create Invoice "),t.k0s()()()}if(2&R){let c,C,S;const j=t.XpG();t.R7$(2),t.Y8G("ngForOf",j.zapButtons),t.R7$(2),t.Y8G("formGroup",j.sendZapForm),t.R7$(7),t.Y8G("ngIf",null==(c=j.sendZapForm.get("amount"))?null:c.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(C=j.sendZapForm.get("amount"))?null:C.hasError("min")),t.R7$(6),t.SpI(" ",(null==(S=j.sendZapForm.get("comment"))||null==S.value?null:S.value.length)||0,"/100 "),t.R7$(2),t.Y8G("disabled",j.sendZapForm.invalid)}}function $(R,g){if(1&R&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2),t.k0s(),t.nrm(3,"mat-divider",23)(4,"qrcode",24),t.k0s()),2&R){const c=t.XpG(2);t.R7$(2),t.SpI("Scan with phone to pay (",c.invoiceAmount," sats)"),t.R7$(2),t.Y8G("qrdata",c.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M")}}function L(R,g){if(1&R){const c=t.RV6();t.j41(0,"div",25)(1,"mat-form-field",26)(2,"mat-label"),t.EFF(3,"Invoice Address"),t.k0s(),t.nrm(4,"input",27),t.j41(5,"button",28),t.bIt("click",function(){t.eBV(c);const S=t.XpG(2);return t.Njj(S.copyInvoice())}),t.nrm(6,"mat-icon",29),t.k0s()()()}if(2&R){const c=t.XpG(2);t.R7$(4),t.Y8G("value",c.lightningInvoice),t.R7$(),t.Y8G("matTooltip","Copy Invoice"),t.R7$(),t.Y8G("svgIcon","heroicons_outline:clipboard-document")}}function V(R,g){if(1&R&&(t.j41(0,"mat-dialog-content",18),t.DNE(1,$,5,4,"div",19)(2,L,7,3,"div",20),t.k0s()),2&R){const c=t.XpG();t.R7$(),t.Y8G("ngIf",c.displayQRCode),t.R7$(),t.Y8G("ngIf",c.showInvoiceSection&&c.lightningInvoice)}}let E=(()=>{class R{constructor(c){this.util=c,this.formBuilder=(0,t.WQX)(e.ok),this.lightningService=(0,t.WQX)(i),this.signerService=(0,t.WQX)(f.A),this.relayService=(0,t.WQX)(m.b),this.dialogRef=(0,t.WQX)(r.CP),this.snackBar=(0,t.WQX)(a.UG),this.clipboard=(0,t.WQX)(l.B0),this.data=(0,t.WQX)(r.Vh),this.lightningInvoice="",this.payRequest=null,this.displayQRCode=!1,this.showInvoiceSection=!1,this.loading=!1,this.invoiceAmount=0,this.error="",this.zapButtons=[{icon:"thumb_up",label:"21",value:21},{icon:"favorite",label:"50",value:50},{icon:"emoji_emotions",label:"100",value:100},{icon:"star",label:"500",value:500},{icon:"celebration",label:"1k",value:1e3},{icon:"rocket",label:"5k",value:5e3},{icon:"local_fire_department",label:"10k",value:1e4},{icon:"flash_on",label:"100k",value:1e5},{icon:"diamond",label:"500k",value:5e5}]}ngOnInit(){this.initializeForm()}initializeForm(){this.sendZapForm=this.formBuilder.group({lightningAddress:[this.data.lud16||this.data.lud06,[e.k0.required,this.validateLightningAddress]],amount:["",[e.k0.required,e.k0.min(1)]],comment:[""]})}validateLightningAddress(c){return c.value.includes("@")?null:{invalidFormat:!0}}onSubmit(){var c=this;return(0,n.A)(function*(){c.sendZapForm.invalid?c.showError("Please fill out the form correctly."):(c.loading=!0,yield c.fetchPayRequest())})()}getCallbackUrl(c){if(c.includes("@")){const[C,S]=c.split("@");return`https://${S}/.well-known/lnurlp/${C}`}return c.toLowerCase().startsWith("lnurl")?this.util.convertBech32ToText(c).toString():null}fetchPayRequest(){var c=this;return(0,n.A)(function*(){c.resetState();const C=c.data.lud16||c.data.lud06;if(!C)return void c.showError("Lightning Address is required.");let S=c.getCallbackUrl(C);try{const j=yield fetch(S);if(!j.ok)throw new Error("Failed to fetch pay request.");const p=yield j.json();if("ERROR"===p.status)return void c.showError(p.reason||"Error fetching the pay request.");c.payRequest=p,c.showInvoiceSection=!1,c.configureAmountValidators(),yield c.generateInvoice()}catch(j){c.showError(j.message||"Error connecting to the server.")}finally{c.loading=!1}})()}generateInvoice(){var c=this;return(0,n.A)(function*(){const C=c.sendZapForm.get("amount")?.value,S=c.sendZapForm.get("comment")?.value,j=c.data.eventId||null;if(!c.payRequest)return void c.showError("Pay request is not loaded.");c.invoiceAmount=C;const p=new URL(c.payRequest.callback),v=new URLSearchParams({amount:(1e3*C).toString()});if(S&&c.payRequest.commentAllowed&&v.set("comment",S),j){const w=yield c.createAndSignZapRequest(j,S);v.set("nostr",JSON.stringify(w))}try{const w=yield fetch(`${p.origin}${p.pathname}?${v.toString()}`);if(!w.ok)throw new Error("Failed to fetch invoice.");const U=yield w.json();if("ERROR"===U.status)return void c.showError(U.reason||"Error fetching the invoice.");c.lightningInvoice=U.pr,c.showInvoiceSection=!0,c.toggleQRCodeDisplay(!0)}catch(w){c.showError(w.message||"Error fetching the invoice.")}})()}configureAmountValidators(){if(!this.payRequest)return;const c=(this.payRequest.minSendable||1e3)/1e3,C=(this.payRequest.maxSendable||21e6)/1e3,S=this.sendZapForm.get("amount");S?.setValidators([e.k0.required,e.k0.min(c),e.k0.max(C)]),S?.updateValueAndValidity()}createAndSignZapRequest(c,C){var S=this;return(0,n.A)(function*(){try{const j=S.createZapRequestData(c,C);let p;if(S.signerService.isUsingSecretKey()){const v=yield S.signerService.getDecryptedSecretKey();if(!v)throw new Error("Private key could not be retrieved.");const w=(0,N.aT)(v);p=(0,h.pC)(j,w)}else p=yield S.signerService.signEventWithExtension(j);if(!p)throw new Error("Signing failed. Signed event is null.");return p}catch(j){throw console.error("Error creating and signing zap request:",j),new Error("Failed to create and sign zap request.")}})()}createZapRequestData(c,C){return{kind:9734,content:C||"",tags:[["e",c],["p",this.payRequest?.nostrPubkey||""],["relays",...this.relayService.getConnectedRelays()]],pubkey:this.signerService.getPublicKey(),created_at:Math.floor(Date.now()/1e3)}}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.showSuccess("Invoice copied to clipboard")):this.showError("No invoice available to copy")}toggleQRCodeDisplay(c=!1){this.displayQRCode=!!c||!this.displayQRCode}resetState(){this.error="",this.loading=!0,this.lightningInvoice=""}showError(c){this.error=c,this.loading=!1,this.snackBar.open(c,"Dismiss",{duration:2e3})}showSuccess(c){this.snackBar.open(c,"Dismiss",{duration:2e3})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(C){return new(C||R)(t.rXU(D.FP))}}static{this.\u0275cmp=t.VBU({type:R,selectors:[["app-send-dialog"]],standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","","aria-label","Close",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],["class","p-0 mt-4",4,"ngIf"],["class","flex flex-col items-center justify-center text-center p-1 mt-4",4,"ngIf"],[1,"p-0","mt-4"],[1,"preset-buttons"],["class","mr-1 px-3","mat-button","",3,"click",4,"ngFor","ngForOf"],[1,"zap-form",3,"formGroup"],["appearance","outline",1,"sats-input"],["matInput","","formControlName","amount","placeholder","Enter amount in sats, e.g., 100","type","number","aria-label","Zap Amount"],["align","end"],[4,"ngIf"],["matInput","","formControlName","comment","placeholder","Optional comment, e.g., as a gift...","aria-label","Comment","maxlength","100"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"text-orange-500","icon-size-5"],[1,"ml-2"],[1,"flex","flex-col","items-center","justify-center","text-center","p-1","mt-4"],["class","w-full flex flex-col items-center",4,"ngIf"],["class","w-full max-w-md",4,"ngIf"],[1,"w-full","flex","flex-col","items-center"],[1,"mb-2"],[1,"w-full","mb-4"],[1,"qrcode-image","m-auto",3,"qrdata","matTooltip","errorCorrectionLevel"],[1,"w-full","max-w-md"],["appearance","outline",1,"w-full"],["matInput","","readonly","","aria-label","Invoice Address",3,"value"],["mat-icon-button","","matSuffix","","aria-label","Copy Invoice",3,"click","matTooltip"],[3,"svgIcon"]],template:function(C,S){1&C&&(t.j41(0,"div",0)(1,"button",1),t.nrm(2,"mat-icon",2),t.k0s()(),t.j41(3,"h1"),t.EFF(4,"\u26a1Zap"),t.k0s(),t.DNE(5,P,22,6,"mat-dialog-content",3)(6,V,3,2,"mat-dialog-content",4)),2&C&&(t.R7$(),t.Y8G("matDialogClose",void 0),t.R7$(),t.Y8G("svgIcon","heroicons_outline:x-mark"),t.R7$(3),t.Y8G("ngIf",!S.showInvoiceSection||!S.lightningInvoice),t.R7$(),t.Y8G("ngIf",S.showInvoiceSection&&S.lightningInvoice))},dependencies:[z.vg,x.Hl,x.$z,x.iY,_.m_,_.An,e.YN,e.me,e.Q0,e.BC,e.cb,e.tU,A.nJ,A.rl,e.X1,e.j4,e.JD,y.MD,y.Sq,y.bT,G.Ve,A.MV,A.TL,A.yw,A.RG,B.fS,B.fg,r.Yi,r.E7,M.f,M.c,k.q,I.oV,r.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{margin:5px 0}"]})}}return R})()},2577:(O,s,o)=>{const t=o(531),e=o(8715),r=o(465),a=o(5510);function l(u,d,b,i,h){const f=[].slice.call(arguments,1),m=f.length,x="function"==typeof f[m-1];if(!x&&!t())throw new Error("Callback required as last argument");if(!x){if(m<1)throw new Error("Too few arguments provided");return 1===m?(b=d,d=i=void 0):2===m&&!d.getContext&&(i=b,b=d,d=void 0),new Promise(function(_,M){try{const y=e.create(b,i);_(u(y,d,i))}catch(y){M(y)}})}if(m<2)throw new Error("Too few arguments provided");2===m?(h=b,b=d,d=i=void 0):3===m&&(d.getContext&&typeof h>"u"?(h=i,i=void 0):(h=i,i=b,b=d,d=void 0));try{const _=e.create(b,i);h(null,u(_,d,i))}catch(_){h(_)}}s.mo=l.bind(null,r.render),s.dY=l.bind(null,r.renderToDataURL),s.toString=l.bind(null,function(u,d,b){return a.render(u,b)})},531:O=>{O.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},919:(O,s,o)=>{const n=o(2656).getSymbolSize;s.getRowColCoords=function(e){if(1===e)return[];const r=Math.floor(e/7)+2,a=n(e),l=145===a?26:2*Math.ceil((a-13)/(2*r-2)),u=[a-7];for(let d=1;d<r-1;d++)u[d]=u[d-1]-l;return u.push(6),u.reverse()},s.getPositions=function(e){const r=[],a=s.getRowColCoords(e),l=a.length;for(let u=0;u<l;u++)for(let d=0;d<l;d++)0===u&&0===d||0===u&&d===l-1||u===l-1&&0===d||r.push([a[u],a[d]]);return r}},387:(O,s,o)=>{const n=o(838),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(r){this.mode=n.ALPHANUMERIC,this.data=r}e.getBitsLength=function(a){return 11*Math.floor(a/2)+a%2*6},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){let l;for(l=0;l+2<=this.data.length;l+=2){let u=45*t.indexOf(this.data[l]);u+=t.indexOf(this.data[l+1]),a.put(u,11)}this.data.length%2&&a.put(t.indexOf(this.data[l]),6)},O.exports=e},4481:O=>{function s(){this.buffer=[],this.length=0}s.prototype={get:function(o){const n=Math.floor(o/8);return 1==(this.buffer[n]>>>7-o%8&1)},put:function(o,n){for(let t=0;t<n;t++)this.putBit(1==(o>>>n-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(o){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),o&&(this.buffer[n]|=128>>>this.length%8),this.length++}},O.exports=s},8038:O=>{function s(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}s.prototype.set=function(o,n,t,e){const r=o*this.size+n;this.data[r]=t,e&&(this.reservedBit[r]=!0)},s.prototype.get=function(o,n){return this.data[o*this.size+n]},s.prototype.xor=function(o,n,t){this.data[o*this.size+n]^=t},s.prototype.isReserved=function(o,n){return this.reservedBit[o*this.size+n]},O.exports=s},1736:(O,s,o)=>{const n=o(3174),t=o(838);function e(r){this.mode=t.BYTE,"string"==typeof r&&(r=n(r)),this.data=new Uint8Array(r)}e.getBitsLength=function(a){return 8*a},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let a=0,l=this.data.length;a<l;a++)r.put(this.data[a],8)},O.exports=e},2296:(O,s,o)=>{const n=o(139),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];s.getBlocksCount=function(a,l){switch(l){case n.L:return t[4*(a-1)+0];case n.M:return t[4*(a-1)+1];case n.Q:return t[4*(a-1)+2];case n.H:return t[4*(a-1)+3];default:return}},s.getTotalCodewordsCount=function(a,l){switch(l){case n.L:return e[4*(a-1)+0];case n.M:return e[4*(a-1)+1];case n.Q:return e[4*(a-1)+2];case n.H:return e[4*(a-1)+3];default:return}}},139:(O,s)=>{s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2},s.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},s.from=function(t,e){if(s.isValid(t))return t;try{return function o(n){if("string"!=typeof n)throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+n)}}(t)}catch{return e}}},9202:(O,s,o)=>{const n=o(2656).getSymbolSize;s.getPositions=function(r){const a=n(r);return[[0,0],[a-7,0],[0,a-7]]}},9211:(O,s,o)=>{const n=o(2656),r=n.getBCHDigit(1335);s.getEncodedBits=function(l,u){const d=l.bit<<3|u;let b=d<<10;for(;n.getBCHDigit(b)-r>=0;)b^=1335<<n.getBCHDigit(b)-r;return 21522^(d<<10|b)}},6965:(O,s)=>{const o=new Uint8Array(512),n=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)o[r]=e,n[e]=r,e<<=1,256&e&&(e^=285);for(let r=255;r<512;r++)o[r]=o[r-255]})(),s.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},s.exp=function(e){return o[e]},s.mul=function(e,r){return 0===e||0===r?0:o[n[e]+n[r]]}},1971:(O,s,o)=>{const n=o(838),t=o(2656);function e(r){this.mode=n.KANJI,this.data=r}e.getBitsLength=function(a){return 13*a},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let a;for(a=0;a<this.data.length;a++){let l=t.toSJIS(this.data[a]);if(l>=33088&&l<=40956)l-=33088;else{if(!(l>=57408&&l<=60351))throw new Error("Invalid SJIS character: "+this.data[a]+"\nMake sure your charset is UTF-8");l-=49472}l=192*(l>>>8&255)+(255&l),r.put(l,13)}},O.exports=e},9366:(O,s)=>{s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(t,e,r){switch(t){case s.Patterns.PATTERN000:return(e+r)%2==0;case s.Patterns.PATTERN001:return e%2==0;case s.Patterns.PATTERN010:return r%3==0;case s.Patterns.PATTERN011:return(e+r)%3==0;case s.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case s.Patterns.PATTERN101:return e*r%2+e*r%3==0;case s.Patterns.PATTERN110:return(e*r%2+e*r%3)%2==0;case s.Patterns.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}s.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},s.from=function(e){return s.isValid(e)?parseInt(e,10):void 0},s.getPenaltyN1=function(e){const r=e.size;let a=0,l=0,u=0,d=null,b=null;for(let i=0;i<r;i++){l=u=0,d=b=null;for(let h=0;h<r;h++){let f=e.get(i,h);f===d?l++:(l>=5&&(a+=l-5+3),d=f,l=1),f=e.get(h,i),f===b?u++:(u>=5&&(a+=u-5+3),b=f,u=1)}l>=5&&(a+=l-5+3),u>=5&&(a+=u-5+3)}return a},s.getPenaltyN2=function(e){const r=e.size;let a=0;for(let l=0;l<r-1;l++)for(let u=0;u<r-1;u++){const d=e.get(l,u)+e.get(l,u+1)+e.get(l+1,u)+e.get(l+1,u+1);(4===d||0===d)&&a++}return 3*a},s.getPenaltyN3=function(e){const r=e.size;let a=0,l=0,u=0;for(let d=0;d<r;d++){l=u=0;for(let b=0;b<r;b++)l=l<<1&2047|e.get(d,b),b>=10&&(1488===l||93===l)&&a++,u=u<<1&2047|e.get(b,d),b>=10&&(1488===u||93===u)&&a++}return 40*a},s.getPenaltyN4=function(e){let r=0;const a=e.data.length;for(let u=0;u<a;u++)r+=e.data[u];return 10*Math.abs(Math.ceil(100*r/a/5)-10)},s.applyMask=function(e,r){const a=r.size;for(let l=0;l<a;l++)for(let u=0;u<a;u++)r.isReserved(u,l)||r.xor(u,l,n(e,u,l))},s.getBestMask=function(e,r){const a=Object.keys(s.Patterns).length;let l=0,u=1/0;for(let d=0;d<a;d++){r(d),s.applyMask(d,e);const b=s.getPenaltyN1(e)+s.getPenaltyN2(e)+s.getPenaltyN3(e)+s.getPenaltyN4(e);s.applyMask(d,e),b<u&&(u=b,l=d)}return l}},838:(O,s,o)=>{const n=o(1604),t=o(6082);s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(a,l){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!n.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?a.ccBits[0]:l<27?a.ccBits[1]:a.ccBits[2]},s.getBestModeForData=function(a){return t.testNumeric(a)?s.NUMERIC:t.testAlphanumeric(a)?s.ALPHANUMERIC:t.testKanji(a)?s.KANJI:s.BYTE},s.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},s.isValid=function(a){return a&&a.bit&&a.ccBits},s.from=function(a,l){if(s.isValid(a))return a;try{return function e(r){if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+r)}}(a)}catch{return l}}},7035:(O,s,o)=>{const n=o(838);function t(e){this.mode=n.NUMERIC,this.data=e.toString()}t.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let a,l,u;for(a=0;a+3<=this.data.length;a+=3)l=this.data.substr(a,3),u=parseInt(l,10),r.put(u,10);const d=this.data.length-a;d>0&&(l=this.data.substr(a),u=parseInt(l,10),r.put(u,3*d+1))},O.exports=t},7767:(O,s,o)=>{const n=o(6965);s.mul=function(e,r){const a=new Uint8Array(e.length+r.length-1);for(let l=0;l<e.length;l++)for(let u=0;u<r.length;u++)a[l+u]^=n.mul(e[l],r[u]);return a},s.mod=function(e,r){let a=new Uint8Array(e);for(;a.length-r.length>=0;){const l=a[0];for(let d=0;d<r.length;d++)a[d]^=n.mul(r[d],l);let u=0;for(;u<a.length&&0===a[u];)u++;a=a.slice(u)}return a},s.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let a=0;a<e;a++)r=s.mul(r,new Uint8Array([1,n.exp(a)]));return r}},8715:(O,s,o)=>{const n=o(2656),t=o(139),e=o(4481),r=o(8038),a=o(919),l=o(9202),u=o(9366),d=o(2296),b=o(6758),i=o(8925),h=o(9211),f=o(838),m=o(7939);function k(I,N,D){const T=I.size,H=h.getEncodedBits(N,D);let F,P;for(F=0;F<15;F++)P=1==(H>>F&1),I.set(F<6?F:F<8?F+1:T-15+F,8,P,!0),I.set(8,F<8?T-F-1:F<9?15-F-1+1:15-F-1,P,!0);I.set(T-8,8,1,!0)}function z(I,N,D,T){let H;if(Array.isArray(I))H=m.fromArray(I);else{if("string"!=typeof I)throw new Error("Invalid data");{let V=N;if(!V){const E=m.rawSplit(I);V=i.getBestVersionForData(E,D)}H=m.fromString(I,V||40)}}const F=i.getBestVersionForData(H,D);if(!F)throw new Error("The amount of data is too big to be stored in a QR Code");if(N){if(N<F)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+F+".\n")}else N=F;const P=function B(I,N,D){const T=new e;D.forEach(function(L){T.put(L.mode.bit,4),T.put(L.getLength(),f.getCharCountIndicator(L.mode,I)),L.write(T)});const P=8*(n.getSymbolTotalCodewords(I)-d.getTotalCodewordsCount(I,N));for(T.getLengthInBits()+4<=P&&T.put(0,4);T.getLengthInBits()%8!=0;)T.putBit(0);const $=(P-T.getLengthInBits())/8;for(let L=0;L<$;L++)T.put(L%2?17:236,8);return function G(I,N,D){const T=n.getSymbolTotalCodewords(N),F=T-d.getTotalCodewordsCount(N,D),P=d.getBlocksCount(N,D),L=P-T%P,V=Math.floor(T/P),E=Math.floor(F/P),R=E+1,g=V-E,c=new b(g);let C=0;const S=new Array(P),j=new Array(P);let p=0;const v=new Uint8Array(I.buffer);for(let Y=0;Y<P;Y++){const Q=Y<L?E:R;S[Y]=v.slice(C,C+Q),j[Y]=c.encode(S[Y]),C+=Q,p=Math.max(p,Q)}const w=new Uint8Array(T);let W,K,U=0;for(W=0;W<p;W++)for(K=0;K<P;K++)W<S[K].length&&(w[U++]=S[K][W]);for(W=0;W<g;W++)for(K=0;K<P;K++)w[U++]=j[K][W];return w}(T,I,N)}(N,D,H),$=n.getSymbolSize(N),L=new r($);return function x(I,N){const D=I.size,T=l.getPositions(N);for(let H=0;H<T.length;H++){const F=T[H][0],P=T[H][1];for(let $=-1;$<=7;$++)if(!(F+$<=-1||D<=F+$))for(let L=-1;L<=7;L++)P+L<=-1||D<=P+L||I.set(F+$,P+L,$>=0&&$<=6&&(0===L||6===L)||L>=0&&L<=6&&(0===$||6===$)||$>=2&&$<=4&&L>=2&&L<=4,!0)}}(L,N),function _(I){const N=I.size;for(let D=8;D<N-8;D++){const T=D%2==0;I.set(D,6,T,!0),I.set(6,D,T,!0)}}(L),function M(I,N){const D=a.getPositions(N);for(let T=0;T<D.length;T++){const H=D[T][0],F=D[T][1];for(let P=-2;P<=2;P++)for(let $=-2;$<=2;$++)I.set(H+P,F+$,-2===P||2===P||-2===$||2===$||0===P&&0===$,!0)}}(L,N),k(L,D,0),N>=7&&function y(I,N){const D=I.size,T=i.getEncodedBits(N);let H,F,P;for(let $=0;$<18;$++)H=Math.floor($/3),F=$%3+D-8-3,P=1==(T>>$&1),I.set(H,F,P,!0),I.set(F,H,P,!0)}(L,N),function A(I,N){const D=I.size;let T=-1,H=D-1,F=7,P=0;for(let $=D-1;$>0;$-=2)for(6===$&&$--;;){for(let L=0;L<2;L++)if(!I.isReserved(H,$-L)){let V=!1;P<N.length&&(V=1==(N[P]>>>F&1)),I.set(H,$-L,V),F--,-1===F&&(P++,F=7)}if(H+=T,H<0||D<=H){H-=T,T=-T;break}}}(L,P),isNaN(T)&&(T=u.getBestMask(L,k.bind(null,L,D))),u.applyMask(T,L),k(L,D,T),{modules:L,version:N,errorCorrectionLevel:D,maskPattern:T,segments:H}}s.create=function(N,D){if(typeof N>"u"||""===N)throw new Error("No input text");let H,F,T=t.M;return typeof D<"u"&&(T=t.from(D.errorCorrectionLevel,t.M),H=i.from(D.version),F=u.from(D.maskPattern),D.toSJISFunc&&n.setToSJISFunction(D.toSJISFunc)),z(N,H,T,F)}},6758:(O,s,o)=>{const n=o(7767);function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}t.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},t.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(r.length+this.degree);a.set(r);const l=n.mod(a,this.genPoly),u=this.degree-l.length;if(u>0){const d=new Uint8Array(this.degree);return d.set(l,u),d}return l},O.exports=t},6082:(O,s)=>{const o="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";s.KANJI=new RegExp(t,"g"),s.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),s.BYTE=new RegExp(e,"g"),s.NUMERIC=new RegExp(o,"g"),s.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+t+"$"),a=new RegExp("^"+o+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");s.testKanji=function(d){return r.test(d)},s.testNumeric=function(d){return a.test(d)},s.testAlphanumeric=function(d){return l.test(d)}},7939:(O,s,o)=>{const n=o(838),t=o(7035),e=o(387),r=o(1736),a=o(1971),l=o(6082),u=o(2656),d=o(243);function b(y){return unescape(encodeURIComponent(y)).length}function i(y,k,A){const B=[];let G;for(;null!==(G=y.exec(A));)B.push({data:G[0],index:G.index,mode:k,length:G[0].length});return B}function h(y){const k=i(l.NUMERIC,n.NUMERIC,y),A=i(l.ALPHANUMERIC,n.ALPHANUMERIC,y);let B,G;return u.isKanjiModeEnabled()?(B=i(l.BYTE,n.BYTE,y),G=i(l.KANJI,n.KANJI,y)):(B=i(l.BYTE_KANJI,n.BYTE,y),G=[]),k.concat(A,B,G).sort(function(I,N){return I.index-N.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function f(y,k){switch(k){case n.NUMERIC:return t.getBitsLength(y);case n.ALPHANUMERIC:return e.getBitsLength(y);case n.KANJI:return a.getBitsLength(y);case n.BYTE:return r.getBitsLength(y)}}function M(y,k){let A;const B=n.getBestModeForData(y);if(A=n.from(k,B),A!==n.BYTE&&A.bit<B.bit)throw new Error('"'+y+'" cannot be encoded with mode '+n.toString(A)+".\n Suggested mode is: "+n.toString(B));switch(A===n.KANJI&&!u.isKanjiModeEnabled()&&(A=n.BYTE),A){case n.NUMERIC:return new t(y);case n.ALPHANUMERIC:return new e(y);case n.KANJI:return new a(y);case n.BYTE:return new r(y)}}s.fromArray=function(k){return k.reduce(function(A,B){return"string"==typeof B?A.push(M(B,null)):B.data&&A.push(M(B.data,B.mode)),A},[])},s.fromString=function(k,A){const G=function x(y){const k=[];for(let A=0;A<y.length;A++){const B=y[A];switch(B.mode){case n.NUMERIC:k.push([B,{data:B.data,mode:n.ALPHANUMERIC,length:B.length},{data:B.data,mode:n.BYTE,length:B.length}]);break;case n.ALPHANUMERIC:k.push([B,{data:B.data,mode:n.BYTE,length:B.length}]);break;case n.KANJI:k.push([B,{data:B.data,mode:n.BYTE,length:b(B.data)}]);break;case n.BYTE:k.push([{data:B.data,mode:n.BYTE,length:b(B.data)}])}}return k}(h(k,u.isKanjiModeEnabled())),z=function _(y,k){const A={},B={start:{}};let G=["start"];for(let z=0;z<y.length;z++){const I=y[z],N=[];for(let D=0;D<I.length;D++){const T=I[D],H=""+z+D;N.push(H),A[H]={node:T,lastCount:0},B[H]={};for(let F=0;F<G.length;F++){const P=G[F];A[P]&&A[P].node.mode===T.mode?(B[P][H]=f(A[P].lastCount+T.length,T.mode)-f(A[P].lastCount,T.mode),A[P].lastCount+=T.length):(A[P]&&(A[P].lastCount=T.length),B[P][H]=f(T.length,T.mode)+4+n.getCharCountIndicator(T.mode,k))}}G=N}for(let z=0;z<G.length;z++)B[G[z]].end=0;return{map:B,table:A}}(G,A),I=d.find_path(z.map,"start","end"),N=[];for(let D=1;D<I.length-1;D++)N.push(z.table[I[D]].node);return s.fromArray(function m(y){return y.reduce(function(k,A){const B=k.length-1>=0?k[k.length-1]:null;return B&&B.mode===A.mode?(k[k.length-1].data+=A.data,k):(k.push(A),k)},[])}(N))},s.rawSplit=function(k){return s.fromArray(h(k,u.isKanjiModeEnabled()))}},2656:(O,s)=>{let o;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];s.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},s.getSymbolTotalCodewords=function(e){return n[e]},s.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},s.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');o=e},s.isKanjiModeEnabled=function(){return typeof o<"u"},s.toSJIS=function(e){return o(e)}},1604:(O,s)=>{s.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}},8925:(O,s,o)=>{const n=o(2656),t=o(2296),e=o(139),r=o(838),a=o(1604),u=n.getBCHDigit(7973);function b(f,m){return r.getCharCountIndicator(f,m)+4}function i(f,m){let x=0;return f.forEach(function(_){const M=b(_.mode,m);x+=M+_.getBitsLength()}),x}s.from=function(m,x){return a.isValid(m)?parseInt(m,10):x},s.getCapacity=function(m,x,_){if(!a.isValid(m))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=r.BYTE);const k=8*(n.getSymbolTotalCodewords(m)-t.getTotalCodewordsCount(m,x));if(_===r.MIXED)return k;const A=k-b(_,m);switch(_){case r.NUMERIC:return Math.floor(A/10*3);case r.ALPHANUMERIC:return Math.floor(A/11*2);case r.KANJI:return Math.floor(A/13);default:return Math.floor(A/8)}},s.getBestVersionForData=function(m,x){let _;const M=e.from(x,e.M);if(Array.isArray(m)){if(m.length>1)return function h(f,m){for(let x=1;x<=40;x++)if(i(f,x)<=s.getCapacity(x,m,r.MIXED))return x}(m,M);if(0===m.length)return 1;_=m[0]}else _=m;return function d(f,m,x){for(let _=1;_<=40;_++)if(m<=s.getCapacity(_,x,f))return _}(_.mode,_.getLength(),M)},s.getEncodedBits=function(m){if(!a.isValid(m)||m<7)throw new Error("Invalid QR Code version");let x=m<<12;for(;n.getBCHDigit(x)-u>=0;)x^=7973<<n.getBCHDigit(x)-u;return m<<12|x}},465:(O,s,o)=>{const n=o(8428);s.render=function(a,l,u){let d=u,b=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(b=function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),d=n.getOptions(d);const i=n.getImageWidth(a.modules.size,d),h=b.getContext("2d"),f=h.createImageData(i,i);return n.qrToImageData(f.data,a,d),function t(r,a,l){r.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=l,a.width=l,a.style.height=l+"px",a.style.width=l+"px"}(h,b,i),h.putImageData(f,0,0),b},s.renderToDataURL=function(a,l,u){let d=u;return typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={}),s.render(a,l,d).toDataURL(d.type||"image/png",(d.rendererOpts||{}).quality)}},5510:(O,s,o)=>{const n=o(8428);function t(a,l){const u=a.a/255,d=l+'="'+a.hex+'"';return u<1?d+" "+l+'-opacity="'+u.toFixed(2).slice(1)+'"':d}function e(a,l,u){let d=a+l;return typeof u<"u"&&(d+=" "+u),d}s.render=function(l,u,d){const b=n.getOptions(u),i=l.modules.size,h=l.modules.data,f=i+2*b.margin,m=b.color.light.a?"<path "+t(b.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",x="<path "+t(b.color.dark,"stroke")+' d="'+function r(a,l,u){let d="",b=0,i=!1,h=0;for(let f=0;f<a.length;f++){const m=Math.floor(f%l),x=Math.floor(f/l);!m&&!i&&(i=!0),a[f]?(h++,f>0&&m>0&&a[f-1]||(d+=i?e("M",m+u,.5+x+u):e("m",b,0),b=0,i=!1),m+1<l&&a[f+1]||(d+=e("h",h),h=0)):b++}return d}(h,i,b.margin)+'"/>',y='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+'viewBox="0 0 '+f+" "+f+'" shape-rendering="crispEdges">'+m+x+"</svg>\n";return"function"==typeof d&&d(null,y),y}},8428:(O,s)=>{function o(n){if("number"==typeof n&&(n=n.toString()),"string"!=typeof n)throw new Error("Color should be defined as hex string");let t=n.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+n);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),6===t.length&&t.push("F","F");const e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:255&e,hex:"#"+t.slice(0,6).join("")}}s.getOptions=function(t){t||(t={}),t.color||(t.color={});const r=t.width&&t.width>=21?t.width:void 0;return{width:r,scale:r?4:t.scale||4,margin:typeof t.margin>"u"||null===t.margin||t.margin<0?4:t.margin,color:{dark:o(t.color.dark||"#000000ff"),light:o(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},s.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},s.getImageWidth=function(t,e){const r=s.getScale(t,e);return Math.floor((t+2*e.margin)*r)},s.qrToImageData=function(t,e,r){const a=e.modules.size,l=e.modules.data,u=s.getScale(a,r),d=Math.floor((a+2*r.margin)*u),b=r.margin*u,i=[r.color.light,r.color.dark];for(let h=0;h<d;h++)for(let f=0;f<d;f++){let m=4*(h*d+f),x=r.color.light;h>=b&&f>=b&&h<d-b&&f<d-b&&(x=i[l[Math.floor((h-b)/u)*a+Math.floor((f-b)/u)]?1:0]),t[m++]=x.r,t[m++]=x.g,t[m++]=x.b,t[m]=x.a}}},243:O=>{"use strict";var s={single_source_shortest_paths:function(o,n,t){var e={},r={};r[n]=0;var l,u,d,b,i,f,a=s.PriorityQueue.make();for(a.push(n,0);!a.empty();)for(d in b=(l=a.pop()).cost,i=o[u=l.value]||{})i.hasOwnProperty(d)&&(f=b+i[d],(typeof r[d]>"u"||r[d]>f)&&(r[d]=f,a.push(d,f),e[d]=u));if(typeof t<"u"&&typeof r[t]>"u"){var _=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(_)}return e},extract_shortest_path_from_predecessor_list:function(o,n){for(var t=[],e=n;e;)t.push(e),e=o[e];return t.reverse(),t},find_path:function(o,n,t){var e=s.single_source_shortest_paths(o,n,t);return s.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(o){var e,n=s.PriorityQueue,t={};for(e in o=o||{},n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t.queue=[],t.sorter=o.sorter||n.default_sorter,t},default_sorter:function(o,n){return o.cost-n.cost},push:function(o,n){this.queue.push({value:o,cost:n}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};O.exports=s},3174:O=>{"use strict";O.exports=function(o){for(var n=[],t=o.length,e=0;e<t;e++){var r=o.charCodeAt(e);if(r>=55296&&r<=56319&&t>e+1){var a=o.charCodeAt(e+1);a>=56320&&a<=57343&&(r=1024*(r-55296)+a-56320+65536,e+=1)}r<128?n.push(r):r<2048?(n.push(r>>6|192),n.push(63&r|128)):r<55296||r>=57344&&r<65536?(n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)):r>=65536&&r<=1114111?(n.push(r>>18|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128)):n.push(239,191,189)}return new Uint8Array(n).buffer}},6182:(O,s,o)=>{"use strict";o.d(s,{B0:()=>r});var n=o(177),t=o(4438);class e{constructor(b,i){this._document=i;const h=this._textarea=this._document.createElement("textarea"),f=h.style;f.position="fixed",f.top=f.opacity="0",f.left="-999em",h.setAttribute("aria-hidden","true"),h.value=b,h.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(h)}copy(){const b=this._textarea;let i=!1;try{if(b){const h=this._document.activeElement;b.select(),b.setSelectionRange(0,b.value.length),i=this._document.execCommand("copy"),h&&h.focus()}}catch{}return i}destroy(){const b=this._textarea;b&&(b.remove(),this._textarea=void 0)}}let r=(()=>{class d{constructor(i){this._document=i}copy(i){const h=this.beginCopy(i),f=h.copy();return h.destroy(),f}beginCopy(i){return new e(i,this._document)}static{this.\u0275fac=function(h){return new(h||d)(t.KVO(n.qQ))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},9454:(O,s,o)=>{"use strict";o.d(s,{MY:()=>V});var n=o(4438);let u=(()=>{class E{static{this.\u0275fac=function(c){return new(c||E)}}static{this.\u0275mod=n.$C({type:E})}static{this.\u0275inj=n.G2t({})}}return E})();var d=o(6939),b=o(6600);o(9969);let V=(()=>{class E{static{this.\u0275fac=function(c){return new(c||E)}}static{this.\u0275mod=n.$C({type:E})}static{this.\u0275inj=n.G2t({imports:[b.yE,u,d.jc]})}}return E})()},9183:(O,s,o)=>{"use strict";o.d(s,{D6:()=>f,LG:()=>i});var n=o(4438),t=o(177),e=o(6600);const r=["determinateSpinner"];function a(m,x){if(1&m&&(n.qSk(),n.j41(0,"svg",11),n.nrm(1,"circle",12),n.k0s()),2&m){const _=n.XpG();n.BMQ("viewBox",_._viewBox()),n.R7$(),n.xc7("stroke-dasharray",_._strokeCircumference(),"px")("stroke-dashoffset",_._strokeCircumference()/2,"px")("stroke-width",_._circleStrokeWidth(),"%"),n.BMQ("r",_._circleRadius())}}const l=new n.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function u(){return{diameter:d}}}),d=100;let i=(()=>{class m{get color(){return this._color||this._defaultColor}set color(_){this._color=_}constructor(_,M,y){this._elementRef=_,this._defaultColor="primary",this._value=0,this._diameter=d,this._noopAnimations="NoopAnimations"===M&&!!y&&!y._forceAnimations,this.mode="mat-spinner"===_.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",y&&(y.color&&(this.color=this._defaultColor=y.color),y.diameter&&(this.diameter=y.diameter),y.strokeWidth&&(this.strokeWidth=y.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(_){this._value=Math.max(0,Math.min(100,_||0))}get diameter(){return this._diameter}set diameter(_){this._diameter=_||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(_){this._strokeWidth=_||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const _=2*this._circleRadius()+this.strokeWidth;return`0 0 ${_} ${_}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(M){return new(M||m)(n.rXU(n.aKT),n.rXU(n.bc$,8),n.rXU(l))}}static{this.\u0275cmp=n.VBU({type:m,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(M,y){if(1&M&&n.GBs(r,5),2&M){let k;n.mGM(k=n.lsd())&&(y._determinateCircle=k.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(M,y){2&M&&(n.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===y.mode?y.value:null)("mode",y.mode),n.HbH("mat-"+y.color),n.xc7("width",y.diameter,"px")("height",y.diameter,"px")("--mdc-circular-progress-size",y.diameter+"px")("--mdc-circular-progress-active-indicator-width",y.diameter+"px"),n.AVh("_mat-animation-noopable",y._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===y.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",n.Udg],diameter:[2,"diameter","diameter",n.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",n.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[n.GFd,n.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(M,y){if(1&M&&(n.DNE(0,a,2,8,"ng-template",null,0,n.C5r),n.j41(2,"div",2,1),n.qSk(),n.j41(4,"svg",3),n.nrm(5,"circle",4),n.k0s()(),n.joV(),n.j41(6,"div",5)(7,"div",6)(8,"div",7),n.eu8(9,8),n.k0s(),n.j41(10,"div",9),n.eu8(11,8),n.k0s(),n.j41(12,"div",10),n.eu8(13,8),n.k0s()()()),2&M){const k=n.sdS(1);n.R7$(4),n.BMQ("viewBox",y._viewBox()),n.R7$(),n.xc7("stroke-dasharray",y._strokeCircumference(),"px")("stroke-dashoffset",y._strokeDashOffset(),"px")("stroke-width",y._circleStrokeWidth(),"%"),n.BMQ("r",y._circleRadius()),n.R7$(4),n.Y8G("ngTemplateOutlet",k),n.R7$(2),n.Y8G("ngTemplateOutlet",k),n.R7$(2),n.Y8G("ngTemplateOutlet",k)}},dependencies:[t.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return m})(),f=(()=>{class m{static{this.\u0275fac=function(M){return new(M||m)}}static{this.\u0275mod=n.$C({type:m})}static{this.\u0275inj=n.G2t({imports:[t.MD,e.yE]})}}return m})()},5398:(O,s,o)=>{"use strict";o.d(s,{c:()=>l,f:()=>u});var n=o(467),t=o(4438),e=o(2577),r=o(345);const a=["qrcElement"];let l=(()=>{class d{constructor(i,h){this.renderer=i,this.sanitizer=h,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t.bkB,this.context=null}ngOnChanges(){var i=this;return(0,n.A)(function*(){yield i.createQRCode()})()}isValidQrCodeText(i){return!1===this.allowEmptyString?!(typeof i>"u"||""===i||"null"===i||null===i):!(typeof i>"u")}toDataURL(i){return new Promise((h,f)=>{(0,e.dY)(this.qrdata,i,(m,x)=>{m?f(m):h(x)})})}toCanvas(i,h){return new Promise((f,m)=>{(0,e.mo)(i,this.qrdata,h,x=>{x?m(x):f("success")})})}toSVG(i){return new Promise((h,f)=>{(0,e.toString)(this.qrdata,i,(m,x)=>{m?f(m):h(x)})})}renderElement(i){for(const h of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,h);this.renderer.appendChild(this.qrcElement.nativeElement,i)}createQRCode(){var i=this;return(0,n.A)(function*(){i.version&&i.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),i.version=40):i.version&&i.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),i.version=1):void 0!==i.version&&isNaN(i.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),i.version=void 0);try{if(!i.isValidQrCodeText(i.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");i.isValidQrCodeText(i.qrdata)&&""===i.qrdata&&(i.qrdata=" ");const h={color:{dark:i.colorDark,light:i.colorLight},errorCorrectionLevel:i.errorCorrectionLevel,margin:i.margin,scale:i.scale,version:i.version,width:i.width},f=i.imageSrc,m=i.imageHeight||40,x=i.imageWidth||40;switch(i.elementType){case"canvas":{const _=i.renderer.createElement("canvas");i.context=_.getContext("2d"),i.toCanvas(_,h).then(()=>{if(i.ariaLabel&&i.renderer.setAttribute(_,"aria-label",`${i.ariaLabel}`),i.title&&i.renderer.setAttribute(_,"title",`${i.title}`),f&&i.context){i.centerImage=new Image(x,m),f!==i.centerImage.src&&(i.centerImage.crossOrigin="anonymous",i.centerImage.src=f),m!==i.centerImage.height&&(i.centerImage.height=m),x!==i.centerImage.width&&(i.centerImage.width=x);const M=i.centerImage;M&&(M.onload=()=>{i.context?.drawImage(M,_.width/2-x/2,_.height/2-m/2,x,m)})}i.renderElement(_),i.emitQRCodeURL(_)}).catch(M=>{console.error("[angularx-qrcode] canvas error:",M)});break}case"svg":{const _=i.renderer.createElement("div");i.toSVG(h).then(M=>{i.renderer.setProperty(_,"innerHTML",M);const y=_.firstChild;i.renderer.setAttribute(y,"height",`${i.width}`),i.renderer.setAttribute(y,"width",`${i.width}`),i.renderElement(y),i.emitQRCodeURL(y)}).catch(M=>{console.error("[angularx-qrcode] svg error:",M)});break}default:{const _=i.renderer.createElement("img");i.toDataURL(h).then(M=>{i.alt&&_.setAttribute("alt",i.alt),i.ariaLabel&&_.setAttribute("aria-label",i.ariaLabel),_.setAttribute("src",M),i.title&&_.setAttribute("title",i.title),i.renderElement(_),i.emitQRCodeURL(_)}).catch(M=>{console.error("[angularx-qrcode] img/url error:",M)})}}}catch(h){console.error("[angularx-qrcode] Error generating QR Code:",h.message)}})()}convertBase64ImageUrlToBlob(i){const h=i.split(";base64,"),f=h[0].split(":")[1],m=atob(h[1]),x=new Uint8Array(m.length);for(let _=0;_<m.length;++_)x[_]=m.charCodeAt(_);return new Blob([x],{type:f})}emitQRCodeURL(i){const h=i.constructor.name;if(h===SVGSVGElement.name){const y=new Blob([i.outerHTML],{type:"image/svg+xml"}),k=URL.createObjectURL(y),A=this.sanitizer.bypassSecurityTrustUrl(k);return void this.qrCodeURL.emit(A)}let f="";h===HTMLCanvasElement.name&&(f=i.toDataURL("image/png")),h===HTMLImageElement.name&&(f=i.src);const m=this.convertBase64ImageUrlToBlob(f),x=URL.createObjectURL(m),_=this.sanitizer.bypassSecurityTrustUrl(x);this.qrCodeURL.emit(_)}static{this.\u0275fac=function(h){return new(h||d)(t.rXU(t.sFG),t.rXU(r.up))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["qrcode"]],viewQuery:function(h,f){if(1&h&&t.GBs(a,7),2&h){let m;t.mGM(m=t.lsd())&&(f.qrcElement=m.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(h,f){1&h&&t.nrm(0,"div",null,0),2&h&&t.HbH(f.cssClass)},encapsulation:2,changeDetection:0})}}return d})(),u=(()=>{class d{static{this.\u0275fac=function(h){return new(h||d)}}static{this.\u0275mod=t.$C({type:d})}static{this.\u0275inj=t.G2t({})}}return d})()},7540:(O,s,o)=>{"use strict";o.d(s,{e:()=>j});var n=o(4438);let j=(()=>{class p{static{this.\u0275fac=function(U){return new(U||p)}}static{this.\u0275mod=n.$C({type:p})}static{this.\u0275inj=n.G2t({})}}return p})()}}]);