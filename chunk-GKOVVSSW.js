import{a as ie}from"./chunk-Q7DPGIUT.js";import{a as ne,c as oe,d as re,e as ae}from"./chunk-YKVPUU23.js";import"./chunk-YT4QGOI5.js";import"./chunk-KQX6Z6FU.js";import{d as N,e as V}from"./chunk-XCEH5654.js";import{C as O,E as x,G as R,H,L as Y,N as J,O as Q,P as X,R as Z,S as $,T as ee,U as te,q as K,r as P,t as B,x as q,y as W}from"./chunk-FOIKTNAL.js";import{$ as G,X as z,Z as j,ba as U,ca as D}from"./chunk-UUQOEFCO.js";import{f as k,k as T}from"./chunk-DNRPKDOR.js";import{Aa as h,Ba as _,Ca as C,Da as M,Jb as i,Kb as t,Lb as r,Pb as E,Vb as y,Xb as S,cc as v,db as o,dc as s,eb as w,fc as I,h as L,kc as F,lc as A,qa as b,wb as p,yb as n}from"./chunk-E43IZEHU.js";var me=()=>["/register"];function le(e,a){if(e&1&&(i(0,"angor-alert",39),s(1),t()),e&2){let g=S();n("appearance","outline")("showIcon",!1)("type",g.secAlert.type)("@shake",g.secAlert.type==="error"),o(),I(" ",g.secAlert.message," ")}}function ce(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye")}function pe(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye-slash")}function de(e,a){e&1&&(i(0,"mat-error"),s(1," Password is required "),t())}function ge(e,a){e&1&&(i(0,"span"),s(1,"Login"),t())}function ue(e,a){e&1&&r(0,"mat-progress-spinner",41)}function fe(e,a){if(e&1&&(i(0,"angor-alert",39),s(1),t()),e&2){let g=S();n("appearance","outline")("showIcon",!1)("type",g.menemonicAlert.type)("@shake",g.menemonicAlert.type==="error"),o(),I(" ",g.menemonicAlert.message," ")}}function he(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye")}function _e(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye-slash")}function ye(e,a){e&1&&(i(0,"mat-error"),s(1," Passphrase is required "),t())}function ve(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye")}function xe(e,a){e&1&&r(0,"mat-icon",40),e&2&&n("svgIcon","heroicons_solid:eye-slash")}function we(e,a){e&1&&(i(0,"mat-error"),s(1," Password is required "),t())}function Se(e,a){e&1&&(i(0,"span"),s(1,"Login"),t())}function Ee(e,a){e&1&&r(0,"mat-progress-spinner",41)}function Ie(e,a){if(e&1){let g=E();i(0,"div")(1,"div",13),r(2,"div",14),i(3,"div",15),s(4,"Or login with extension"),t(),r(5,"div",14),t(),i(6,"div",42)(7,"button",43),y("click",function(){h(g);let d=S();return _(d.loginWithNostrExtension())}),r(8,"mat-icon",40),t()()()}e&2&&(o(8),n("svgIcon","feather:zap"))}var se=(()=>{let a=class a{constructor(c,d,m){this._formBuilder=c,this._router=d,this._signerService=m,this.secAlert={type:"error",message:""},this.showSecAlert=!1,this.menemonicAlert={type:"error",message:""},this.showMenemonicAlert=!1,this.loading=!1,this.isInstalledExtension=!1,this.privateKey=new Uint8Array,this.publicKey="",this.npub="",this.nsec=""}ngOnInit(){this.initializeForms(),this.checkNostrExtensionAvailability()}initializeForms(){this.SecretKeyLoginForm=this._formBuilder.group({secretKey:["",[x.required,x.minLength(3)]],password:["",x.required]}),this.MenemonicLoginForm=this._formBuilder.group({menemonic:["",[x.required,x.minLength(3)]],passphrase:[""],password:["",x.required]})}checkNostrExtensionAvailability(){let c=globalThis;c.nostr&&typeof c.nostr.signEvent=="function"?this.isInstalledExtension=!0:this.isInstalledExtension=!1}loginWithSecretKey(){if(this.SecretKeyLoginForm.invalid)return;let c=this.SecretKeyLoginForm.get("secretKey")?.value,d=this.SecretKeyLoginForm.get("password")?.value;this.loading=!0,this.showSecAlert=!1,this._signerService.handleLoginWithNsec(c)?this._router.navigateByUrl("/home"):(this.loading=!1,this.secAlert.message="Secret key is missing or invalid.",this.showSecAlert=!0)}loginWithMenemonic(){if(this.MenemonicLoginForm.invalid)return;let c=this.MenemonicLoginForm.get("menemonic")?.value,d=this.MenemonicLoginForm.get("passphrase")?.value||"",m=this.MenemonicLoginForm.get("password")?.value;this.loading=!0,this.showMenemonicAlert=!1,this._signerService.handleLoginWithMenemonic(c,d)?this._router.navigateByUrl("/home"):(this.loading=!1,this.menemonicAlert.message="Menemonic is missing or invalid.",this.showMenemonicAlert=!0)}loginWithNostrExtension(){return L(this,null,function*(){(yield this._signerService.handleLoginWithExtension())?this._router.navigateByUrl("/home"):console.error("Failed to log in using Nostr extension")})}};a.\u0275fac=function(d){return new(d||a)(w(X),w(N),w(ie))},a.\u0275cmp=b({type:a,selectors:[["auth-sign-in"]],standalone:!0,features:[F],decls:84,vars:25,consts:[["secretPasswordField",""],["passphraseField",""],["menemonicPasswordField",""],[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-12"],["src","images/logo/logo.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-0.5","flex","items-baseline","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"ngSubmit","formGroup"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"w-full"],["matInput","","formControlName","secretKey","autocomplete","secretKey"],["matInput","","type","password","autocomplete","current-password-seckey",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"angor-mat-button-large","mt-6","w-full",3,"disabled"],["diameter","24","mode","indeterminate",4,"ngIf"],["matInput","","formControlName","menemonic","autocomplete","menemonic"],["matInput","","type","password","autocomplete","current-passphrase-menemonic",3,"formControlName"],["matInput","","type","password","autocomplete","current-password-menemonic",3,"formControlName"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"mt-8",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],["diameter","24","mode","indeterminate"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto",3,"click"]],template:function(d,m){if(d&1){let u=E();i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),r(4,"img",7),t(),i(5,"div",8),s(6," Login "),t(),i(7,"div",9)(8,"div"),s(9,"Don't have an account?"),t(),i(10,"a",10),s(11,"Register"),t()(),p(12,le,2,5,"angor-alert",11),i(13,"form",12),y("ngSubmit",function(){return h(u),_(m.loginWithSecretKey())}),i(14,"div",13),r(15,"div",14),i(16,"div",15),s(17,"Enter secret key"),t(),r(18,"div",14),t(),i(19,"mat-form-field",16)(20,"mat-label"),s(21,"Secret Key"),t(),r(22,"input",17),t(),i(23,"mat-form-field",16)(24,"mat-label"),s(25,"Password"),t(),r(26,"input",18,0),i(28,"button",19),y("click",function(){h(u);let l=v(27);return _(l.type==="password"?l.type="text":l.type="password")}),p(29,ce,1,1,"mat-icon",20)(30,pe,1,1,"mat-icon",20),t(),p(31,de,2,0,"mat-error",21),t(),i(32,"button",22),p(33,ge,2,0,"span",21)(34,ue,1,0,"mat-progress-spinner",23),t()(),i(35,"div",13),r(36,"div",14),i(37,"div",15),s(38,"Or enter menemonic"),t(),r(39,"div",14),t(),p(40,fe,2,5,"angor-alert",11),i(41,"form",12),y("ngSubmit",function(){return h(u),_(m.loginWithMenemonic())}),i(42,"mat-form-field",16)(43,"mat-label"),s(44,"Menemonic"),t(),r(45,"input",24),t(),i(46,"mat-form-field",16)(47,"mat-label"),s(48,"Passphrase (Optional)"),t(),r(49,"input",25,1),i(51,"button",19),y("click",function(){h(u);let l=v(50);return _(l.type==="password"?l.type="text":l.type="password")}),p(52,he,1,1,"mat-icon",20)(53,_e,1,1,"mat-icon",20),t(),p(54,ye,2,0,"mat-error",21),t(),i(55,"mat-form-field",16)(56,"mat-label"),s(57,"Password"),t(),r(58,"input",26,2),i(60,"button",19),y("click",function(){h(u);let l=v(59);return _(l.type==="password"?l.type="text":l.type="password")}),p(61,ve,1,1,"mat-icon",20)(62,xe,1,1,"mat-icon",20),t(),p(63,we,2,0,"mat-error",21),t(),i(64,"button",22),p(65,Se,2,0,"span",21)(66,Ee,1,0,"mat-progress-spinner",23),t()(),p(67,Ie,9,1,"div",21),t()(),i(68,"div",27),C(),i(69,"svg",28)(70,"g",29),r(71,"circle",30)(72,"circle",31),t()(),i(73,"svg",32)(74,"defs")(75,"pattern",33),r(76,"rect",34),t()(),r(77,"rect",35),t(),M(),i(78,"div",36)(79,"div",37)(80,"div"),s(81,"Angor Hub"),t()(),i(82,"div",38),s(83," Angor Hub is a Nostr client customized around the Angor protocol, a decentralized crowdfunding platform. "),t()()()()}if(d&2){let u=v(27),f=v(50),l=v(59);o(10),n("routerLink",A(24,me)),o(2),n("ngIf",m.showSecAlert),o(),n("formGroup",m.SecretKeyLoginForm),o(13),n("formControlName","password"),o(3),n("ngIf",u.type==="password"),o(),n("ngIf",u.type==="text"),o(),n("ngIf",m.SecretKeyLoginForm.get("password").hasError("required")),o(),n("disabled",m.SecretKeyLoginForm.invalid),o(),n("ngIf",!m.loading),o(),n("ngIf",m.loading),o(6),n("ngIf",m.showMenemonicAlert),o(),n("formGroup",m.MenemonicLoginForm),o(8),n("formControlName","passphrase"),o(3),n("ngIf",f.type==="password"),o(),n("ngIf",f.type==="text"),o(),n("ngIf",m.MenemonicLoginForm.get("passphrase").hasError("required")),o(4),n("formControlName","password"),o(3),n("ngIf",l.type==="password"),o(),n("ngIf",l.type==="text"),o(),n("ngIf",m.MenemonicLoginForm.get("password").hasError("required")),o(),n("disabled",m.MenemonicLoginForm.invalid),o(),n("ngIf",!m.loading),o(),n("ngIf",m.loading),o(),n("ngIf",m.isInstalledExtension)}},dependencies:[V,ne,Z,Y,O,R,H,$,J,Q,W,q,K,P,B,te,ee,G,z,j,D,U,oe,ae,re,T,k],encapsulation:2});let e=a;return e})();var Ye=[{path:"",component:se}];export{Ye as default};
