"use strict";(self.webpackChunkangor=self.webpackChunkangor||[]).push([[76],{8098:(y,l,i)=>{i.d(l,{U:()=>s});var a=i(467),m=i(4412),u=i(4438),d=i(6324);let s=(()=>{class t{constructor(e){this._signerService=e,this.STORAGE_KEY="userBookmarkedProjects",this.bookmarksSubject=new m.t([]),this.bookmarks$=this.bookmarksSubject.asObservable(),this.currentUserPubKey=null,window.addEventListener("storage",r=>{r.key===this.STORAGE_KEY&&this.refreshBookmarksForCurrentUser()})}initializeForCurrentUser(){var e=this;return(0,a.A)(function*(){e.clearBookmarks(),e.currentUserPubKey=yield e._signerService.getPublicKey(),e.currentUserPubKey&&(yield e.loadBookmarksForCurrentUser())})()}clearBookmarks(){this.bookmarksSubject.next([])}loadBookmarksForCurrentUser(){var e=this;return(0,a.A)(function*(){if(!e.currentUserPubKey)return;const o=e.getUserBookmarks()[e.currentUserPubKey]||[];e.bookmarksSubject.next(o)})()}getUserBookmarks(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}saveUserBookmarks(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}addBookmark(e){var r=this;return(0,a.A)(function*(){if(!r.currentUserPubKey&&(r.currentUserPubKey=yield r._signerService.getPublicKey(),!r.currentUserPubKey))return void console.warn("No public key found for the current user.");const o=r.getUserBookmarks(),c=o[r.currentUserPubKey]||[];c.includes(e)||(c.push(e),o[r.currentUserPubKey]=c,r.saveUserBookmarks(o),r.bookmarksSubject.next(c))})()}removeBookmark(e){var r=this;return(0,a.A)(function*(){if(!r.currentUserPubKey&&(r.currentUserPubKey=yield r._signerService.getPublicKey(),!r.currentUserPubKey))return void console.warn("No public key found for the current user.");const o=r.getUserBookmarks(),k=(o[r.currentUserPubKey]||[]).filter(h=>h!==e);o[r.currentUserPubKey]=k,r.saveUserBookmarks(o),r.bookmarksSubject.next(k)})()}isBookmarked(e){var r=this;return(0,a.A)(function*(){return r.currentUserPubKey||(r.currentUserPubKey=yield r._signerService.getPublicKey(),r.currentUserPubKey)?(r.getUserBookmarks()[r.currentUserPubKey]||[]).includes(e):(console.warn("No public key found for the current user."),!1)})()}getBookmarks(){var e=this;return(0,a.A)(function*(){return e.currentUserPubKey||(e.currentUserPubKey=yield e._signerService.getPublicKey(),e.currentUserPubKey)?e.getUserBookmarks()[e.currentUserPubKey]||[]:(console.warn("No public key found for the current user."),[])})()}removeAllBookmarks(){var e=this;return(0,a.A)(function*(){if(!e.currentUserPubKey&&(e.currentUserPubKey=yield e._signerService.getPublicKey(),!e.currentUserPubKey))return void console.warn("No public key found for the current user.");const r=e.getUserBookmarks();r[e.currentUserPubKey]=[],e.saveUserBookmarks(r),e.bookmarksSubject.next([])})()}refreshBookmarksForCurrentUser(){this.currentUserPubKey&&this.loadBookmarksForCurrentUser()}static{this.\u0275fac=function(r){return new(r||t)(u.KVO(d.A))}}static{this.\u0275prov=u.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},833:(y,l,i)=>{i.d(l,{F:()=>m});var a=i(4438);let m=(()=>{class u{constructor(){this.mainnetLocalStorageKey="mainnetIndexers",this.testnetLocalStorageKey="testnetIndexers",this.mainnetPrimaryIndexerKey="mainnetPrimaryIndexer",this.testnetPrimaryIndexerKey="testnetPrimaryIndexer",this.networkStorageKey="selectedNetwork",this.defaultMainnetIndexer="https://btc.indexer.angor.io/",this.defaultTestnetIndexer="https://tbtc.indexer.angor.io/",this.initializeDefaultIndexers()}initializeDefaultIndexers(){0===this.getIndexers("mainnet").length&&(this.addIndexer(this.defaultMainnetIndexer,"mainnet"),this.setPrimaryIndexer(this.defaultMainnetIndexer,"mainnet")),0===this.getIndexers("testnet").length&&(this.addIndexer(this.defaultTestnetIndexer,"testnet"),this.setPrimaryIndexer(this.defaultTestnetIndexer,"testnet"))}addIndexer(s,t){let n=this.getIndexers(t);n.includes(s)||(n.push(s),this.saveIndexers(n,t))}getIndexers(s){return JSON.parse(localStorage.getItem("mainnet"===s?this.mainnetLocalStorageKey:this.testnetLocalStorageKey)||"[]")}saveIndexers(s,t){localStorage.setItem("mainnet"===t?this.mainnetLocalStorageKey:this.testnetLocalStorageKey,JSON.stringify(s))}setPrimaryIndexer(s,t){this.getIndexers(t).includes(s)&&localStorage.setItem("mainnet"===t?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey,s)}getPrimaryIndexer(s){return localStorage.getItem("mainnet"===s?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}removeIndexer(s,t){let n=this.getIndexers(t);const e=n.indexOf(s);-1!==e&&(n.splice(e,1),this.saveIndexers(n,t),s===this.getPrimaryIndexer(t))&&localStorage.removeItem("mainnet"===t?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey)}clearAllIndexers(s){const n="mainnet"===s?this.mainnetPrimaryIndexerKey:this.testnetPrimaryIndexerKey;localStorage.removeItem("mainnet"===s?this.mainnetLocalStorageKey:this.testnetLocalStorageKey),localStorage.removeItem(n)}setNetwork(s){localStorage.setItem(this.networkStorageKey,s)}getNetwork(){return localStorage.getItem(this.networkStorageKey)||"testnet"}static{this.\u0275fac=function(t){return new(t||u)}}static{this.\u0275prov=a.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);