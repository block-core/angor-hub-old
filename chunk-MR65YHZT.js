import{a as Yt}from"./chunk-TUCIB5XZ.js";import{c as Mt,f as jt,g as Ft,p as le,s as Ut}from"./chunk-74D5DGX3.js";import{C as Ot,D as Lt,E as Bt,H as Le,a as Pt,c as xt,j as Ct,k as Ne,l as Oe,u as Nt}from"./chunk-FJKCM5SV.js";import{Ac as Rt,Db as gt,Ea as ut,Gb as Ce,Ha as ft,Hc as At,Ja as ce,Na as ht,Nb as yt,Ob as bt,Pb as wt,Ta as dt,Tb as St,Ua as U,Ub as It,_a as mt,_b as Et,a as se,ba as K,c as ae,e as Qr,ea as nt,g as Wr,h as x,ha as de,ia as it,ka as De,kb as pt,ma as Re,mb as vt,n as Te,na as Ae,o as re,ob as Pe,qa as ot,qc as Tt,ra as st,sa as at,xb as xe,xc as Dt,ya as ct,yb as _t,za as lt}from"./chunk-MRO7MB7O.js";var Gt=Qr((Xt,Be)=>{(function(R){if(typeof Xt=="object"&&typeof Be<"u")Be.exports=R();else if(typeof define=="function"&&define.amd)define([],R);else{var y;typeof window<"u"?y=window:typeof global<"u"?y=global:typeof self<"u"?y=self:y=this,y.localforage=R()}})(function(){var R,y,ln;return function n(a,l,m){function w(L,Y){if(!l[L]){if(!a[L]){var v=typeof ae=="function"&&ae;if(!Y&&v)return v(L,!0);if(b)return b(L,!0);var g=new Error("Cannot find module '"+L+"'");throw g.code="MODULE_NOT_FOUND",g}var C=l[L]={exports:{}};a[L][0].call(C.exports,function(B){var $=a[L][1][B];return w($||B)},C,C.exports,n,a,l,m)}return l[L].exports}for(var b=typeof ae=="function"&&ae,P=0;P<m.length;P++)w(m[P]);return w}({1:[function(n,a,l){(function(m){"use strict";var w=m.MutationObserver||m.WebKitMutationObserver,b;if(w){var P=0,L=new w(B),Y=m.document.createTextNode("");L.observe(Y,{characterData:!0}),b=function(){Y.data=P=++P%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var v=new m.MessageChannel;v.port1.onmessage=B,b=function(){v.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?b=function(){var M=m.document.createElement("script");M.onreadystatechange=function(){B(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},m.document.documentElement.appendChild(M)}:b=function(){setTimeout(B,0)};var g,C=[];function B(){g=!0;for(var M,X,j=C.length;j;){for(X=C,C=[],M=-1;++M<j;)X[M]();j=C.length}g=!1}a.exports=$;function $(M){C.push(M)===1&&!g&&b()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,a,l){"use strict";var m=n(1);function w(){}var b={},P=["REJECTED"],L=["FULFILLED"],Y=["PENDING"];a.exports=v;function v(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=Y,this.queue=[],this.outcome=void 0,p!==w&&$(this,p)}v.prototype.catch=function(p){return this.then(null,p)},v.prototype.then=function(p,E){if(typeof p!="function"&&this.state===L||typeof E!="function"&&this.state===P)return this;var I=new this.constructor(w);if(this.state!==Y){var A=this.state===L?p:E;C(I,A,this.outcome)}else this.queue.push(new g(I,p,E));return I};function g(p,E,I){this.promise=p,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(p){b.resolve(this.promise,p)},g.prototype.otherCallFulfilled=function(p){C(this.promise,this.onFulfilled,p)},g.prototype.callRejected=function(p){b.reject(this.promise,p)},g.prototype.otherCallRejected=function(p){C(this.promise,this.onRejected,p)};function C(p,E,I){m(function(){var A;try{A=E(I)}catch(F){return b.reject(p,F)}A===p?b.reject(p,new TypeError("Cannot resolve promise with itself")):b.resolve(p,A)})}b.resolve=function(p,E){var I=M(B,E);if(I.status==="error")return b.reject(p,I.value);var A=I.value;if(A)$(p,A);else{p.state=L,p.outcome=E;for(var F=-1,z=p.queue.length;++F<z;)p.queue[F].callFulfilled(E)}return p},b.reject=function(p,E){p.state=P,p.outcome=E;for(var I=-1,A=p.queue.length;++I<A;)p.queue[I].callRejected(E);return p};function B(p){var E=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof E=="function")return function(){E.apply(p,arguments)}}function $(p,E){var I=!1;function A(k){I||(I=!0,b.reject(p,k))}function F(k){I||(I=!0,b.resolve(p,k))}function z(){E(F,A)}var V=M(z);V.status==="error"&&A(V.value)}function M(p,E){var I={};try{I.value=p(E),I.status="success"}catch(A){I.status="error",I.value=A}return I}v.resolve=X;function X(p){return p instanceof this?p:b.resolve(new this(w),p)}v.reject=j;function j(p){var E=new this(w);return b.reject(E,p)}v.all=me;function me(p){var E=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=p.length,A=!1;if(!I)return this.resolve([]);for(var F=new Array(I),z=0,V=-1,k=new this(w);++V<I;)G(p[V],V);return k;function G(ne,ue){E.resolve(ne).then(pe,function(ee){A||(A=!0,b.reject(k,ee))});function pe(ee){F[ue]=ee,++z===I&&!A&&(A=!0,b.resolve(k,F))}}}v.race=Z;function Z(p){var E=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=p.length,A=!1;if(!I)return this.resolve([]);for(var F=-1,z=new this(w);++F<I;)V(p[F]);return z;function V(k){E.resolve(k).then(function(G){A||(A=!0,b.resolve(z,G))},function(G){A||(A=!0,b.reject(z,G))})}}},{1:1}],3:[function(n,a,l){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,a,l){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function w(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var P=b();function L(){try{if(!P||!P.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function Y(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(i){if(i.name!=="TypeError")throw i;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,s=0;s<e.length;s+=1)o.append(e[s]);return o.getBlob(r.type)}}typeof Promise>"u"&&n(3);var v=Promise;function g(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function C(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function B(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var M="local-forage-detect-blob-support",X=void 0,j={},me=Object.prototype.toString,Z="readonly",p="readwrite";function E(e){for(var r=e.length,t=new ArrayBuffer(r),o=new Uint8Array(t),s=0;s<r;s++)o[s]=e.charCodeAt(s);return t}function I(e){return new v(function(r){var t=e.transaction(M,p),o=Y([""]);t.objectStore(M).put(o,"key"),t.onabort=function(s){s.preventDefault(),s.stopPropagation(),r(!1)},t.oncomplete=function(){var s=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);r(i||!s||parseInt(s[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof X=="boolean"?v.resolve(X):I(e).then(function(r){return X=r,X})}function F(e){var r=j[e.name],t={};t.promise=new v(function(o,s){t.resolve=o,t.reject=s}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function z(e){var r=j[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function V(e,r){var t=j[e.name],o=t.deferredOperations.pop();if(o)return o.reject(r),o.promise}function k(e,r){return new v(function(t,o){if(j[e.name]=j[e.name]||je(),e.db)if(r)F(e),e.db.close();else return t(e.db);var s=[e.name];r&&s.push(e.version);var i=P.open.apply(P,s);r&&(i.onupgradeneeded=function(c){var u=i.result;try{u.createObjectStore(e.storeName),c.oldVersion<=1&&u.createObjectStore(M)}catch(f){if(f.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw f}}),i.onerror=function(c){c.preventDefault(),o(i.error)},i.onsuccess=function(){var c=i.result;c.onversionchange=function(u){u.target.close()},t(c),z(e)}})}function G(e){return k(e,!1)}function ne(e){return k(e,!0)}function ue(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,s=e.version>e.db.version;if(o&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),s||t){if(t){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function pe(e){return new v(function(r,t){var o=new FileReader;o.onerror=t,o.onloadend=function(s){var i=btoa(s.target.result||"");r({__local_forage_encoded_blob:!0,data:i,type:e.type})},o.readAsBinaryString(e)})}function ee(e){var r=E(atob(e.data));return Y([r],{type:e.type})}function Me(e){return e&&e.__local_forage_encoded_blob}function Wt(e){var r=this,t=r._initReady().then(function(){var o=j[r._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return C(t,e,e),t}function qt(e){F(e);for(var r=j[e.name],t=r.forages,o=0;o<t.length;o++){var s=t[o];s._dbInfo.db&&(s._dbInfo.db.close(),s._dbInfo.db=null)}return e.db=null,G(e).then(function(i){return e.db=i,ue(e)?ne(e):i}).then(function(i){e.db=r.db=i;for(var c=0;c<t.length;c++)t[c]._dbInfo.db=i}).catch(function(i){throw V(e,i),i})}function Q(e,r,t,o){o===void 0&&(o=1);try{var s=e.db.transaction(e.storeName,r);t(null,s)}catch(i){if(o>0&&(!e.db||i.name==="InvalidStateError"||i.name==="NotFoundError"))return v.resolve().then(function(){if(!e.db||i.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ne(e)}).then(function(){return qt(e).then(function(){Q(e,r,t,o-1)})}).catch(t);t(i)}}function je(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Kt(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var s=j[t.name];s||(s=je(),j[t.name]=s),s.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=Wt);var i=[];function c(){return v.resolve()}for(var u=0;u<s.forages.length;u++){var f=s.forages[u];f!==r&&i.push(f._initReady().catch(c))}var h=s.forages.slice(0);return v.all(i).then(function(){return t.db=s.db,G(t)}).then(function(d){return t.db=d,ue(t,r._defaultConfig.version)?ne(t):d}).then(function(d){t.db=s.db=d,r._dbInfo=t;for(var _=0;_<h.length;_++){var S=h[_];S!==r&&(S._dbInfo.db=t.db,S._dbInfo.version=t.version)}})}function Zt(e,r){var t=this;e=B(e);var o=new v(function(s,i){t.ready().then(function(){Q(t._dbInfo,Z,function(c,u){if(c)return i(c);try{var f=u.objectStore(t._dbInfo.storeName),h=f.get(e);h.onsuccess=function(){var d=h.result;d===void 0&&(d=null),Me(d)&&(d=ee(d)),s(d)},h.onerror=function(){i(h.error)}}catch(d){i(d)}})}).catch(i)});return g(o,r),o}function Jt(e,r){var t=this,o=new v(function(s,i){t.ready().then(function(){Q(t._dbInfo,Z,function(c,u){if(c)return i(c);try{var f=u.objectStore(t._dbInfo.storeName),h=f.openCursor(),d=1;h.onsuccess=function(){var _=h.result;if(_){var S=_.value;Me(S)&&(S=ee(S));var T=e(S,_.key,d++);T!==void 0?s(T):_.continue()}else s()},h.onerror=function(){i(h.error)}}catch(_){i(_)}})}).catch(i)});return g(o,r),o}function er(e,r,t){var o=this;e=B(e);var s=new v(function(i,c){var u;o.ready().then(function(){return u=o._dbInfo,me.call(r)==="[object Blob]"?A(u.db).then(function(f){return f?r:pe(r)}):r}).then(function(f){Q(o._dbInfo,p,function(h,d){if(h)return c(h);try{var _=d.objectStore(o._dbInfo.storeName);f===null&&(f=void 0);var S=_.put(f,e);d.oncomplete=function(){f===void 0&&(f=null),i(f)},d.onabort=d.onerror=function(){var T=S.error?S.error:S.transaction.error;c(T)}}catch(T){c(T)}})}).catch(c)});return g(s,t),s}function tr(e,r){var t=this;e=B(e);var o=new v(function(s,i){t.ready().then(function(){Q(t._dbInfo,p,function(c,u){if(c)return i(c);try{var f=u.objectStore(t._dbInfo.storeName),h=f.delete(e);u.oncomplete=function(){s()},u.onerror=function(){i(h.error)},u.onabort=function(){var d=h.error?h.error:h.transaction.error;i(d)}}catch(d){i(d)}})}).catch(i)});return g(o,r),o}function rr(e){var r=this,t=new v(function(o,s){r.ready().then(function(){Q(r._dbInfo,p,function(i,c){if(i)return s(i);try{var u=c.objectStore(r._dbInfo.storeName),f=u.clear();c.oncomplete=function(){o()},c.onabort=c.onerror=function(){var h=f.error?f.error:f.transaction.error;s(h)}}catch(h){s(h)}})}).catch(s)});return g(t,e),t}function nr(e){var r=this,t=new v(function(o,s){r.ready().then(function(){Q(r._dbInfo,Z,function(i,c){if(i)return s(i);try{var u=c.objectStore(r._dbInfo.storeName),f=u.count();f.onsuccess=function(){o(f.result)},f.onerror=function(){s(f.error)}}catch(h){s(h)}})}).catch(s)});return g(t,e),t}function ir(e,r){var t=this,o=new v(function(s,i){if(e<0){s(null);return}t.ready().then(function(){Q(t._dbInfo,Z,function(c,u){if(c)return i(c);try{var f=u.objectStore(t._dbInfo.storeName),h=!1,d=f.openKeyCursor();d.onsuccess=function(){var _=d.result;if(!_){s(null);return}e===0||h?s(_.key):(h=!0,_.advance(e))},d.onerror=function(){i(d.error)}}catch(_){i(_)}})}).catch(i)});return g(o,r),o}function or(e){var r=this,t=new v(function(o,s){r.ready().then(function(){Q(r._dbInfo,Z,function(i,c){if(i)return s(i);try{var u=c.objectStore(r._dbInfo.storeName),f=u.openKeyCursor(),h=[];f.onsuccess=function(){var d=f.result;if(!d){o(h);return}h.push(d.key),d.continue()},f.onerror=function(){s(f.error)}}catch(d){s(d)}})}).catch(s)});return g(t,e),t}function sr(e,r){r=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,s;if(!e.name)s=v.reject("Invalid arguments");else{var i=e.name===t.name&&o._dbInfo.db,c=i?v.resolve(o._dbInfo.db):G(e).then(function(u){var f=j[e.name],h=f.forages;f.db=u;for(var d=0;d<h.length;d++)h[d]._dbInfo.db=u;return u});e.storeName?s=c.then(function(u){if(u.objectStoreNames.contains(e.storeName)){var f=u.version+1;F(e);var h=j[e.name],d=h.forages;u.close();for(var _=0;_<d.length;_++){var S=d[_];S._dbInfo.db=null,S._dbInfo.version=f}var T=new v(function(D,O){var N=P.open(e.name,f);N.onerror=function(H){var oe=N.result;oe.close(),O(H)},N.onupgradeneeded=function(){var H=N.result;H.deleteObjectStore(e.storeName)},N.onsuccess=function(){var H=N.result;H.close(),D(H)}});return T.then(function(D){h.db=D;for(var O=0;O<d.length;O++){var N=d[O];N._dbInfo.db=D,z(N._dbInfo)}}).catch(function(D){throw(V(e,D)||v.resolve()).catch(function(){}),D})}}):s=c.then(function(u){F(e);var f=j[e.name],h=f.forages;u.close();for(var d=0;d<h.length;d++){var _=h[d];_._dbInfo.db=null}var S=new v(function(T,D){var O=P.deleteDatabase(e.name);O.onerror=function(){var N=O.result;N&&N.close(),D(O.error)},O.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},O.onsuccess=function(){var N=O.result;N&&N.close(),T(N)}});return S.then(function(T){f.db=T;for(var D=0;D<h.length;D++){var O=h[D];z(O._dbInfo)}}).catch(function(T){throw(V(e,T)||v.resolve()).catch(function(){}),T})})}return g(s,r),s}var ar={_driver:"asyncStorage",_initStorage:Kt,_support:L(),iterate:Jt,getItem:Zt,setItem:er,removeItem:tr,clear:rr,length:nr,key:ir,keys:or,dropInstance:sr};function cr(){return typeof openDatabase=="function"}var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr="~~local_forage_type~",Fe=/^~~local_forage_type~([^~]+)~/,fe="__lfsc__:",ve=fe.length,_e="arbf",ge="blob",Ue="si08",Ye="ui08",ze="uic8",Ve="si16",ke="si32",He="ur16",$e="ui32",Xe="fl32",Ge="fl64",Qe=ve+_e.length,We=Object.prototype.toString;function qe(e){var r=e.length*.75,t=e.length,o,s=0,i,c,u,f;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var h=new ArrayBuffer(r),d=new Uint8Array(h);for(o=0;o<t;o+=4)i=W.indexOf(e[o]),c=W.indexOf(e[o+1]),u=W.indexOf(e[o+2]),f=W.indexOf(e[o+3]),d[s++]=i<<2|c>>4,d[s++]=(c&15)<<4|u>>2,d[s++]=(u&3)<<6|f&63;return h}function ye(e){var r=new Uint8Array(e),t="",o;for(o=0;o<r.length;o+=3)t+=W[r[o]>>2],t+=W[(r[o]&3)<<4|r[o+1]>>4],t+=W[(r[o+1]&15)<<2|r[o+2]>>6],t+=W[r[o+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function ur(e,r){var t="";if(e&&(t=We.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&We.call(e.buffer)==="[object ArrayBuffer]")){var o,s=fe;e instanceof ArrayBuffer?(o=e,s+=_e):(o=e.buffer,t==="[object Int8Array]"?s+=Ue:t==="[object Uint8Array]"?s+=Ye:t==="[object Uint8ClampedArray]"?s+=ze:t==="[object Int16Array]"?s+=Ve:t==="[object Uint16Array]"?s+=He:t==="[object Int32Array]"?s+=ke:t==="[object Uint32Array]"?s+=$e:t==="[object Float32Array]"?s+=Xe:t==="[object Float64Array]"?s+=Ge:r(new Error("Failed to get type for BinaryArray"))),r(s+ye(o))}else if(t==="[object Blob]"){var i=new FileReader;i.onload=function(){var c=lr+e.type+"~"+ye(this.result);r(fe+ge+c)},i.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),r(null,c)}}function fr(e){if(e.substring(0,ve)!==fe)return JSON.parse(e);var r=e.substring(Qe),t=e.substring(ve,Qe),o;if(t===ge&&Fe.test(r)){var s=r.match(Fe);o=s[1],r=r.substring(s[0].length)}var i=qe(r);switch(t){case _e:return i;case ge:return Y([i],{type:o});case Ue:return new Int8Array(i);case Ye:return new Uint8Array(i);case ze:return new Uint8ClampedArray(i);case Ve:return new Int16Array(i);case He:return new Uint16Array(i);case ke:return new Int32Array(i);case $e:return new Uint32Array(i);case Xe:return new Float32Array(i);case Ge:return new Float64Array(i);default:throw new Error("Unkown type: "+t)}}var be={serialize:ur,deserialize:fr,stringToBuffer:qe,bufferToString:ye};function Ke(e,r,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function hr(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var s=new v(function(i,c){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(u){return c(u)}t.db.transaction(function(u){Ke(u,t,function(){r._dbInfo=t,i()},function(f,h){c(h)})},c)});return t.serializer=be,s}function q(e,r,t,o,s,i){e.executeSql(t,o,s,function(c,u){u.code===u.SYNTAX_ERR?c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(f,h){h.rows.length?i(f,u):Ke(f,r,function(){f.executeSql(t,o,s,i)},i)},i):i(c,u)},i)}function dr(e,r){var t=this;e=B(e);var o=new v(function(s,i){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){q(u,c,"SELECT * FROM "+c.storeName+" WHERE key = ? LIMIT 1",[e],function(f,h){var d=h.rows.length?h.rows.item(0).value:null;d&&(d=c.serializer.deserialize(d)),s(d)},function(f,h){i(h)})})}).catch(i)});return g(o,r),o}function mr(e,r){var t=this,o=new v(function(s,i){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){q(u,c,"SELECT * FROM "+c.storeName,[],function(f,h){for(var d=h.rows,_=d.length,S=0;S<_;S++){var T=d.item(S),D=T.value;if(D&&(D=c.serializer.deserialize(D)),D=e(D,T.key,S+1),D!==void 0){s(D);return}}s()},function(f,h){i(h)})})}).catch(i)});return g(o,r),o}function Ze(e,r,t,o){var s=this;e=B(e);var i=new v(function(c,u){s.ready().then(function(){r===void 0&&(r=null);var f=r,h=s._dbInfo;h.serializer.serialize(r,function(d,_){_?u(_):h.db.transaction(function(S){q(S,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,d],function(){c(f)},function(T,D){u(D)})},function(S){if(S.code===S.QUOTA_ERR){if(o>0){c(Ze.apply(s,[e,f,t,o-1]));return}u(S)}})})}).catch(u)});return g(i,t),i}function pr(e,r,t){return Ze.apply(this,[e,r,t,1])}function vr(e,r){var t=this;e=B(e);var o=new v(function(s,i){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){q(u,c,"DELETE FROM "+c.storeName+" WHERE key = ?",[e],function(){s()},function(f,h){i(h)})})}).catch(i)});return g(o,r),o}function _r(e){var r=this,t=new v(function(o,s){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(c){q(c,i,"DELETE FROM "+i.storeName,[],function(){o()},function(u,f){s(f)})})}).catch(s)});return g(t,e),t}function gr(e){var r=this,t=new v(function(o,s){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(c){q(c,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(u,f){var h=f.rows.item(0).c;o(h)},function(u,f){s(f)})})}).catch(s)});return g(t,e),t}function yr(e,r){var t=this,o=new v(function(s,i){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){q(u,c,"SELECT key FROM "+c.storeName+" WHERE id = ? LIMIT 1",[e+1],function(f,h){var d=h.rows.length?h.rows.item(0).key:null;s(d)},function(f,h){i(h)})})}).catch(i)});return g(o,r),o}function br(e){var r=this,t=new v(function(o,s){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(c){q(c,i,"SELECT key FROM "+i.storeName,[],function(u,f){for(var h=[],d=0;d<f.rows.length;d++)h.push(f.rows.item(d).key);o(h)},function(u,f){s(f)})})}).catch(s)});return g(t,e),t}function wr(e){return new v(function(r,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(s,i){for(var c=[],u=0;u<i.rows.length;u++)c.push(i.rows.item(u).name);r({db:e,storeNames:c})},function(s,i){t(i)})},function(o){t(o)})})}function Sr(e,r){r=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,s;return e.name?s=new v(function(i){var c;e.name===t.name?c=o._dbInfo.db:c=openDatabase(e.name,"","",0),e.storeName?i({db:c,storeNames:[e.storeName]}):i(wr(c))}).then(function(i){return new v(function(c,u){i.db.transaction(function(f){function h(T){return new v(function(D,O){f.executeSql("DROP TABLE IF EXISTS "+T,[],function(){D()},function(N,H){O(H)})})}for(var d=[],_=0,S=i.storeNames.length;_<S;_++)d.push(h(i.storeNames[_]));v.all(d).then(function(){c()}).catch(function(T){u(T)})},function(f){u(f)})})}):s=v.reject("Invalid arguments"),g(s,r),s}var Ir={_driver:"webSQLStorage",_initStorage:hr,_support:cr(),iterate:mr,getItem:dr,setItem:pr,removeItem:vr,clear:_r,length:gr,key:yr,keys:br,dropInstance:Sr};function Er(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Je(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Tr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Dr(){return!Tr()||localStorage.length>0}function Rr(e){var r=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=Je(e,r._defaultConfig),Dr()?(r._dbInfo=t,t.serializer=be,v.resolve()):v.reject()}function Ar(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var i=localStorage.key(s);i.indexOf(o)===0&&localStorage.removeItem(i)}});return g(t,e),t}function Pr(e,r){var t=this;e=B(e);var o=t.ready().then(function(){var s=t._dbInfo,i=localStorage.getItem(s.keyPrefix+e);return i&&(i=s.serializer.deserialize(i)),i});return g(o,r),o}function xr(e,r){var t=this,o=t.ready().then(function(){for(var s=t._dbInfo,i=s.keyPrefix,c=i.length,u=localStorage.length,f=1,h=0;h<u;h++){var d=localStorage.key(h);if(d.indexOf(i)===0){var _=localStorage.getItem(d);if(_&&(_=s.serializer.deserialize(_)),_=e(_,d.substring(c),f++),_!==void 0)return _}}});return g(o,r),o}function Cr(e,r){var t=this,o=t.ready().then(function(){var s=t._dbInfo,i;try{i=localStorage.key(e)}catch{i=null}return i&&(i=i.substring(s.keyPrefix.length)),i});return g(o,r),o}function Nr(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo,s=localStorage.length,i=[],c=0;c<s;c++){var u=localStorage.key(c);u.indexOf(o.keyPrefix)===0&&i.push(u.substring(o.keyPrefix.length))}return i});return g(t,e),t}function Or(e){var r=this,t=r.keys().then(function(o){return o.length});return g(t,e),t}function Lr(e,r){var t=this;e=B(e);var o=t.ready().then(function(){var s=t._dbInfo;localStorage.removeItem(s.keyPrefix+e)});return g(o,r),o}function Br(e,r,t){var o=this;e=B(e);var s=o.ready().then(function(){r===void 0&&(r=null);var i=r;return new v(function(c,u){var f=o._dbInfo;f.serializer.serialize(r,function(h,d){if(d)u(d);else try{localStorage.setItem(f.keyPrefix+e,h),c(i)}catch(_){(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")&&u(_),u(_)}})})});return g(s,t),s}function Mr(e,r){if(r=$.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,s;return e.name?s=new v(function(i){e.storeName?i(Je(e,o._defaultConfig)):i(e.name+"/")}).then(function(i){for(var c=localStorage.length-1;c>=0;c--){var u=localStorage.key(c);u.indexOf(i)===0&&localStorage.removeItem(u)}}):s=v.reject("Invalid arguments"),g(s,r),s}var jr={_driver:"localStorageWrapper",_initStorage:Rr,_support:Er(),iterate:xr,getItem:Pr,setItem:Br,removeItem:Lr,clear:Ar,length:Or,key:Cr,keys:Nr,dropInstance:Mr},Fr=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Ur=function(r,t){for(var o=r.length,s=0;s<o;){if(Fr(r[s],t))return!0;s++}return!1},et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ie={},tt={},te={INDEXEDDB:ar,WEBSQL:Ir,LOCALSTORAGE:jr},Yr=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],he=["dropInstance"],we=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(he),zr={description:"",driver:Yr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Se(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(et(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var kr=function(){function e(r){w(this,e);for(var t in te)if(te.hasOwnProperty(t)){var o=te[t],s=o._driver;this[t]=s,ie[s]||this.defineDriver(o)}this._defaultConfig=Se({},zr),this._config=Se({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":m(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,s){var i=new v(function(c,u){try{var f=t._driver,h=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){u(h);return}for(var d=we.concat("_initStorage"),_=0,S=d.length;_<S;_++){var T=d[_],D=!Ur(he,T);if((D||t[T])&&typeof t[T]!="function"){u(h);return}}var O=function(){for(var oe=function(Xr){return function(){var Gr=new Error("Method "+Xr+" is not implemented by the current driver"),rt=v.reject(Gr);return g(rt,arguments[arguments.length-1]),rt}},Ie=0,$r=he.length;Ie<$r;Ie++){var Ee=he[Ie];t[Ee]||(t[Ee]=oe(Ee))}};O();var N=function(oe){ie[f]&&console.info("Redefining LocalForage driver: "+f),ie[f]=t,tt[f]=oe,c()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(N,u):N(!!t._support):N(!0)}catch(H){u(H)}});return C(i,o,s),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,s){var i=ie[t]?v.resolve(ie[t]):v.reject(new Error("Driver not found."));return C(i,o,s),i},e.prototype.getSerializer=function(t){var o=v.resolve(be);return C(o,t),o},e.prototype.ready=function(t){var o=this,s=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return C(s,t,t),s},e.prototype.setDriver=function(t,o,s){var i=this;et(t)||(t=[t]);var c=this._getSupportedDrivers(t);function u(){i._config.driver=i.driver()}function f(_){return i._extend(_),u(),i._ready=i._initStorage(i._config),i._ready}function h(_){return function(){var S=0;function T(){for(;S<_.length;){var D=_[S];return S++,i._dbInfo=null,i._ready=null,i.getDriver(D).then(f).catch(T)}u();var O=new Error("No available storage method found.");return i._driverSet=v.reject(O),i._driverSet}return T()}}var d=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=d.then(function(){var _=c[0];return i._dbInfo=null,i._ready=null,i.getDriver(_).then(function(S){i._driver=S._driver,u(),i._wrapLibraryMethodsWithReady(),i._initDriver=h(c)})}).catch(function(){u();var _=new Error("No available storage method found.");return i._driverSet=v.reject(_),i._driverSet}),C(this._driverSet,o,s),this._driverSet},e.prototype.supports=function(t){return!!tt[t]},e.prototype._extend=function(t){Se(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],s=0,i=t.length;s<i;s++){var c=t[s];this.supports(c)&&o.push(c)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=we.length;t<o;t++)Vr(this,we[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Hr=new kr;a.exports=Hr},{3:3}]},{},[4])(4)})});var Kr=["tooltip"],Ht=20;var $t=new De("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let R=Ae(le);return()=>R.scrollStrategies.reposition({scrollThrottle:Ht})}});function Zr(R){return()=>R.scrollStrategies.reposition({scrollThrottle:Ht})}var Jr={provide:$t,deps:[le],useFactory:Zr};function en(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var tn=new De("mat-tooltip-default-options",{providedIn:"root",factory:en});var zt="tooltip-panel",Vt=xt({passive:!0}),rn=8,nn=8,on=24,sn=200,Mn=(()=>{let y=class y{get position(){return this._position}set position(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(n){this._positionAtOrigin=Ne(n),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(n){let a=Ne(n);this._disabled!==a&&(this._disabled=a,a?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(n){this._showDelay=Oe(n)}get hideDelay(){return this._hideDelay}set hideDelay(n){this._hideDelay=Oe(n),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(n){let a=this._message;this._message=n!=null?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(a)}get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(n,a,l,m,w,b,P,L,Y,v,g,C){this._overlay=n,this._elementRef=a,this._scrollDispatcher=l,this._viewContainerRef=m,this._ngZone=w,this._platform=b,this._ariaDescriber=P,this._focusMonitor=L,this._dir=v,this._defaultOptions=g,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=an,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new Te,this._injector=Ae(ut),this._scrollStrategy=Y,this._document=C,g&&(this._showDelay=g.showDelay,this._hideDelay=g.hideDelay,g.position&&(this.position=g.position),g.positionAtOrigin&&(this.positionAtOrigin=g.positionAtOrigin),g.touchGestures&&(this.touchGestures=g.touchGestures),g.tooltipClass&&(this.tooltipClass=g.tooltipClass)),v.change.pipe(K(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=rn}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(K(this._destroyed)).subscribe(n=>{n?n==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let n=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([a,l])=>{n.removeEventListener(a,l,Vt)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay,a){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let l=this._createOverlay(a);this._detach(),this._portal=this._portal||new Ft(this._tooltipComponent,this._viewContainerRef);let m=this._tooltipInstance=l.attach(this._portal).instance;m._triggerElement=this._elementRef.nativeElement,m._mouseLeaveHideDelay=this._hideDelay,m.afterHidden().pipe(K(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),m.show(n)}hide(n=this.hideDelay){let a=this._tooltipInstance;a&&(a.isVisible()?a.hide(n):(a._cancelPendingAnimations(),this._detach()))}toggle(n){this._isTooltipVisible()?this.hide():this.show(void 0,n)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(n){if(this._overlayRef){let m=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!n)&&m._origin instanceof ce)return this._overlayRef;this._detach()}let a=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),l=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?n||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(a);return l.positionChanges.pipe(K(this._destroyed)).subscribe(m=>{this._updateCurrentPositionClass(m.connectionPair),this._tooltipInstance&&m.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:l,panelClass:`${this._cssClassPrefix}-${zt}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(K(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(K(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(K(this._destroyed)).subscribe(m=>{this._isTooltipVisible()&&m.keyCode===27&&!Ct(m)&&(m.preventDefault(),m.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){let a=n.getConfig().positionStrategy,l=this._getOrigin(),m=this._getOverlayPosition();a.withPositions([this._addOffset(se(se({},l.main),m.main)),this._addOffset(se(se({},l.fallback),m.fallback))])}_addOffset(n){let a=nn,l=!this._dir||this._dir.value=="ltr";return n.originY==="top"?n.offsetY=-a:n.originY==="bottom"?n.offsetY=a:n.originX==="start"?n.offsetX=l?-a:a:n.originX==="end"&&(n.offsetX=l?a:-a),n}_getOrigin(){let n=!this._dir||this._dir.value=="ltr",a=this.position,l;a=="above"||a=="below"?l={originX:"center",originY:a=="above"?"top":"bottom"}:a=="before"||a=="left"&&n||a=="right"&&!n?l={originX:"start",originY:"center"}:(a=="after"||a=="right"&&n||a=="left"&&!n)&&(l={originX:"end",originY:"center"});let{x:m,y:w}=this._invertPosition(l.originX,l.originY);return{main:l,fallback:{originX:m,originY:w}}}_getOverlayPosition(){let n=!this._dir||this._dir.value=="ltr",a=this.position,l;a=="above"?l={overlayX:"center",overlayY:"bottom"}:a=="below"?l={overlayX:"center",overlayY:"top"}:a=="before"||a=="left"&&n||a=="right"&&!n?l={overlayX:"end",overlayY:"center"}:(a=="after"||a=="right"&&n||a=="left"&&!n)&&(l={overlayX:"start",overlayY:"center"});let{x:m,y:w}=this._invertPosition(l.overlayX,l.overlayY);return{main:l,fallback:{overlayX:m,overlayY:w}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),pt(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,a){return this.position==="above"||this.position==="below"?a==="top"?a="bottom":a==="bottom"&&(a="top"):n==="end"?n="start":n==="start"&&(n="end"),{x:n,y:a}}_updateCurrentPositionClass(n){let{overlayY:a,originX:l,originY:m}=n,w;if(a==="center"?this._dir&&this._dir.value==="rtl"?w=l==="end"?"left":"right":w=l==="start"?"left":"right":w=a==="bottom"&&m==="top"?"above":"below",w!==this._currentPosition){let b=this._overlayRef;if(b){let P=`${this._cssClassPrefix}-${zt}-`;b.removePanelClass(P+this._currentPosition),b.addPanelClass(P+w)}this._currentPosition=w}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",n=>{this._setupPointerExitEventsIfNeeded();let a;n.x!==void 0&&n.y!==void 0&&(a=n),this.show(void 0,a)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",n=>{let a=n.targetTouches?.[0],l=a?{x:a.clientX,y:a.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let m=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,l)},this._defaultOptions.touchLongPressShowDelay??m)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",a=>{let l=a.relatedTarget;(!l||!this._overlayRef?.overlayElement.contains(l))&&this.hide()}],["wheel",a=>this._wheelListener(a)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let a=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};n.push(["touchend",a],["touchcancel",a])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([a,l])=>{this._elementRef.nativeElement.addEventListener(a,l,Vt)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){let a=this._document.elementFromPoint(n.clientX,n.clientY),l=this._elementRef.nativeElement;a!==l&&!l.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){let n=this.touchGestures;if(n!=="off"){let a=this._elementRef.nativeElement,l=a.style;(n==="on"||a.nodeName!=="INPUT"&&a.nodeName!=="TEXTAREA")&&(l.userSelect=l.msUserSelect=l.webkitUserSelect=l.MozUserSelect="none"),(n==="on"||!a.draggable)&&(l.webkitUserDrag="none"),l.touchAction="none",l.webkitTapHighlightColor="transparent"}}_syncAriaDescription(n){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,n,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}};y.\u0275fac=function(a){return new(a||y)(U(le),U(ce),U(Mt),U(mt),U(ft),U(Pt),U(Nt),U(Ot),U($t),U(Bt),U(tn,8),U(Dt))},y.\u0275dir=at({type:y,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(a,l){a&2&&Pe("mat-mdc-tooltip-disabled",l.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0});let R=y;return R})(),an=(()=>{let y=class y{constructor(n,a,l){this._changeDetectorRef=n,this._elementRef=a,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Te,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=l==="NoopAnimations"}show(n){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},n)}hide(n){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},n)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:n}){(!n||!this._triggerElement.contains(n))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let n=this._elementRef.nativeElement.getBoundingClientRect();return n.height>on&&n.width>=sn}_handleAnimationEnd({animationName:n}){(n===this._showAnimation||n===this._hideAnimation)&&this._finalizeAnimation(n===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(n){n?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(n){let a=this._tooltip.nativeElement,l=this._showAnimation,m=this._hideAnimation;if(a.classList.remove(n?m:l),a.classList.add(n?l:m),this._isVisible!==n&&(this._isVisible=n,this._changeDetectorRef.markForCheck()),n&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let w=getComputedStyle(a);(w.getPropertyValue("animation-duration")==="0s"||w.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}n&&this._onShow(),this._animationsDisabled&&(a.classList.add("_mat-animation-noopable"),this._finalizeAnimation(n))}};y.\u0275fac=function(a){return new(a||y)(U(Tt),U(ce),U(ht,8))},y.\u0275cmp=ot({type:y,selectors:[["mat-tooltip-component"]],viewQuery:function(a,l){if(a&1&&yt(Kr,7),a&2){let m;bt(m=wt())&&(l._tooltip=m.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(a,l){a&1&&Ce("mouseleave",function(w){return l._handleMouseLeave(w)})},standalone:!0,features:[Et],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(a,l){if(a&1){let m=gt();xe(0,"div",1,0),Ce("animationend",function(b){return ct(m),lt(l._handleAnimationEnd(b))}),xe(2,"div",2),St(3),_t()()}a&2&&(Pe("mdc-tooltip--multiline",l._isMultiline),vt("ngClass",l.tooltipClass),dt(3),It(l.message))},dependencies:[Rt],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0});let R=y;return R})();var jn=(()=>{let y=class y{};y.\u0275fac=function(a){return new(a||y)},y.\u0275mod=st({type:y}),y.\u0275inj=it({providers:[Jr],imports:[Lt,At,Ut,Le,Le,jt]});let R=y;return R})();var J=Wr(Gt());var Qt=(()=>{let y=class y{constructor(){this.metadataSubject=new re(null),this.projectsSubject=new re([]),this.projectStatsSubject=new re({}),this.userStore=J.default.createInstance({driver:J.default.INDEXEDDB,name:"angor-hub",version:1,storeName:"users",description:"Store for user metadata"}),this.projectsStore=J.default.createInstance({driver:J.default.INDEXEDDB,name:"angor-hub",version:1,storeName:"projects",description:"Store for projects"}),this.projectStatsStore=J.default.createInstance({driver:J.default.INDEXEDDB,name:"angor-hub",version:1,storeName:"projectStats",description:"Store for project statistics"}),this.loadAllProjectsFromDB(),this.loadAllProjectStatsFromDB()}getProjectsObservable(){return this.projectsSubject.asObservable()}saveProject(n){return x(this,null,function*(){try{yield this.projectsStore.setItem(n.projectIdentifier,n);let a=yield this.getAllProjects();this.projectsSubject.next(a)}catch(a){console.error(`Error saving project ${n.projectIdentifier} to IndexedDB:`,a)}})}getProject(n){return x(this,null,function*(){try{return(yield this.projectsStore.getItem(n))||null}catch(a){return console.error(`Error getting project ${n} from IndexedDB:`,a),null}})}getAllProjects(){return x(this,null,function*(){try{let n=[];return yield this.projectsStore.iterate(a=>{n.push(a)}),n}catch(n){return console.error("Error getting all projects from IndexedDB:",n),[]}})}getProjectStatsObservable(){return this.projectStatsSubject.asObservable()}saveProjectStats(n,a){return x(this,null,function*(){try{yield this.projectStatsStore.setItem(n,a);let l=yield this.getAllProjectStats();this.projectStatsSubject.next(l)}catch(l){console.error(`Error saving project stats for ${n} to IndexedDB:`,l)}})}getProjectStats(n){return x(this,null,function*(){try{return(yield this.projectStatsStore.getItem(n))||null}catch(a){return console.error(`Error getting project stats for ${n} from IndexedDB:`,a),null}})}getMetadataStream(){return this.metadataSubject.asObservable()}getUserMetadata(n){return x(this,null,function*(){try{return yield this.userStore.getItem(n)}catch(a){return console.error("Error getting metadata from IndexedDB:",a),null}})}saveUserMetadata(n,a){return x(this,null,function*(){try{yield this.userStore.setItem(n,a),this.metadataSubject.next({pubkey:n,metadata:a})}catch(l){console.error("Error saving metadata to IndexedDB:",l)}})}removeUserMetadata(n){return x(this,null,function*(){try{yield this.userStore.removeItem(n),this.metadataSubject.next({pubkey:n,metadata:null})}catch(a){console.error("Error removing metadata from IndexedDB:",a)}})}loadAllProjectsFromDB(){return x(this,null,function*(){try{let n=yield this.getAllProjects();this.projectsSubject.next(n)}catch(n){console.error("Error loading projects from IndexedDB:",n)}})}getAllProjectStats(){return x(this,null,function*(){try{let n={};return yield this.projectStatsStore.iterate((a,l)=>{n[l]=a}),n}catch(n){return console.error("Error getting all project stats from IndexedDB:",n),{}}})}loadAllProjectStatsFromDB(){return x(this,null,function*(){try{let n=yield this.getAllProjectStats();this.projectStatsSubject.next(n)}catch(n){console.error("Error loading project stats from IndexedDB:",n)}})}getAllUsers(){return x(this,null,function*(){try{let n=[];return yield this.userStore.iterate(a=>{n.push(a)}),n}catch(n){return console.error("Error getting all users from IndexedDB:",n),[]}})}clearAllMetadata(){return x(this,null,function*(){try{yield this.userStore.clear(),this.metadataSubject.next(null)}catch(n){console.error("Error clearing all metadata:",n)}})}};y.\u0275fac=function(a){return new(a||y)},y.\u0275prov=de({token:y,factory:y.\u0275fac,providedIn:"root"});let R=y;return R})();var Xn=(()=>{let y=class y{constructor(n,a){this.indexedDBService=n,this.relayService=a,this.metadataSubject=new re(null),this.requestQueue=new Set,this.isProcessingQueue=!1,this.maxRequestsPerBatch=3,this.requestDelay=5e3}getMetadataStream(){return this.metadataSubject.asObservable().pipe(nt(2e3))}enqueueRequest(n){this.requestQueue.add(n),this.processQueue()}fetchMetadataForMultipleKeys(n){return x(this,null,function*(){let a={kinds:[0],authors:n};try{yield this.relayService.ensureConnectedRelays();let l=this.relayService.getConnectedRelays();if(l.length===0)return console.error("No relays are connected."),[];let m=[],w=this.relayService.getPool().subscribeMany(l,[a],{onevent:b=>x(this,null,function*(){if(b.kind===0)try{let P=JSON.parse(b.content);yield this.indexedDBService.saveUserMetadata(b.pubkey,P),m.push({pubkey:b.pubkey,metadata:P})}catch(P){console.error("Error parsing metadata:",P)}}),oneose:()=>{console.log("Relay connection closed.")}});return setTimeout(()=>{w.close()},10*60*1e3),m}catch(l){return console.error("Failed to fetch metadata for multiple keys:",l),[]}})}processQueue(){return x(this,null,function*(){if(!(this.isProcessingQueue||this.requestQueue.size===0)){for(this.isProcessingQueue=!0;this.requestQueue.size>0;){let n=Array.from(this.requestQueue).slice(0,this.maxRequestsPerBatch);this.requestQueue=new Set(Array.from(this.requestQueue).slice(this.maxRequestsPerBatch)),yield Promise.all(n.map(a=>x(this,null,function*(){try{let l=yield this.fetchMetadataRealtime(a);l&&(yield this.indexedDBService.saveUserMetadata(a,l),this.metadataSubject.next(l))}catch(l){console.error(`Failed to update metadata for user: ${a}`,l)}}))),yield new Promise(a=>setTimeout(a,this.requestDelay))}this.isProcessingQueue=!1}})}fetchMetadataWithCache(n){return x(this,null,function*(){let a=yield this.indexedDBService.getUserMetadata(n);return a?this.metadataSubject.next(a):this.enqueueRequest(n),this.subscribeToMetadataUpdates(n),a})}subscribeToMetadataUpdates(n){this.relayService.ensureConnectedRelays().then(()=>{let a={authors:[n],kinds:[0]};this.relayService.getPool().subscribeMany(this.relayService.getConnectedRelays(),[a],{onevent:l=>x(this,null,function*(){if(l.pubkey===n&&l.kind===0)try{let m=JSON.parse(l.content);yield this.indexedDBService.saveUserMetadata(n,m),this.metadataSubject.next(m)}catch(m){console.error("Error parsing updated metadata:",m)}}),oneose(){}})})}fetchMetadataRealtime(n){return x(this,null,function*(){yield this.relayService.ensureConnectedRelays();let a=this.relayService.getConnectedRelays();if(a.length===0)throw new Error("No connected relays");return new Promise(l=>{let m=this.relayService.getPool().subscribeMany(a,[{authors:[n],kinds:[0]}],{onevent:w=>{if(w.pubkey===n&&w.kind===0)try{let b=JSON.parse(w.content);l(b)}catch(b){console.error("Error parsing event content:",b),l(null)}finally{m.close()}},oneose(){m.close(),l(null)}})})})}refreshAllStoredMetadata(){return x(this,null,function*(){let n=yield this.indexedDBService.getAllUsers();if(!n||n.length===0){console.log("No stored users found in IndexedDB");return}n.forEach(a=>this.enqueueRequest(a.pubkey))})}};y.\u0275fac=function(a){return new(a||y)(Re(Qt),Re(Yt))},y.\u0275prov=de({token:y,factory:y.\u0275fac,providedIn:"root"});let R=y;return R})();export{Mn as a,jn as b,Qt as c,Xn as d};
