(self.webpackChunkangor=self.webpackChunkangor||[]).push([[81],{1146:bt=>{"use strict";for(var P="qpzry9x8gf2tvdw0s3jn54khce6mua7l",k={},E=0;E<32;E++){var y=P.charAt(E);if(void 0!==k[y])throw new TypeError(y+" is ambiguous");k[y]=E}function _(U){var j=U>>25;return(33554431&U)<<5^996825010&-(1&j)^642813549&-(j>>1&1)^513874426&-(j>>2&1)^1027748829&-(j>>3&1)^705979059&-(j>>4&1)}function A(U){for(var j=1,dt=0;dt<U.length;++dt){var G=U.charCodeAt(dt);if(G<33||G>126)return"Invalid prefix ("+U+")";j=_(j)^G>>5}for(j=_(j),dt=0;dt<U.length;++dt){var W=U.charCodeAt(dt);j=_(j)^31&W}return j}function C(U,j){if(U.length<8)return U+" too short";if(U.length>(j=j||90))return"Exceeds length limit";var dt=U.toLowerCase(),G=U.toUpperCase();if(U!==dt&&U!==G)return"Mixed-case string "+U;var W=(U=dt).lastIndexOf("1");if(-1===W)return"No separator character for "+U;if(0===W)return"Missing prefix for "+U;var i=U.slice(0,W),ct=U.slice(W+1);if(ct.length<6)return"Data too short";var Mt=A(i);if("string"==typeof Mt)return Mt;for(var Nt=[],it=0;it<ct.length;++it){var ot=ct.charAt(it),at=k[ot];if(void 0===at)return"Unknown character "+ot;Mt=_(Mt)^at,!(it+6>=ct.length)&&Nt.push(at)}return 1!==Mt?"Invalid checksum for "+U:{prefix:i,words:Nt}}function $(U,j,dt,G){for(var W=0,i=0,ct=(1<<dt)-1,Mt=[],Nt=0;Nt<U.length;++Nt)for(W=W<<j|U[Nt],i+=j;i>=dt;)Mt.push(W>>(i-=dt)&ct);if(G)i>0&&Mt.push(W<<dt-i&ct);else{if(i>=j)return"Excess padding";if(W<<dt-i&ct)return"Non-zero padding"}return Mt}bt.exports={decodeUnsafe:function R(){var U=C.apply(null,arguments);if("object"==typeof U)return U},decode:function B(U){var j=C.apply(null,arguments);if("object"==typeof j)return j;throw new Error(j)},encode:function m(U,j,dt){if(U.length+7+j.length>(dt=dt||90))throw new TypeError("Exceeds length limit");var G=A(U=U.toLowerCase());if("string"==typeof G)throw new Error(G);for(var W=U+"1",i=0;i<j.length;++i){var ct=j[i];if(ct>>5)throw new Error("Non 5-bit word");G=_(G)^ct,W+=P.charAt(ct)}for(i=0;i<6;++i)G=_(G);for(G^=1,i=0;i<6;++i)W+=P.charAt(G>>5*(5-i)&31);return W},toWordsUnsafe:function et(U){var j=$(U,8,5,!0);if(Array.isArray(j))return j},toWords:function ut(U){var j=$(U,8,5,!0);if(Array.isArray(j))return j;throw new Error(j)},fromWordsUnsafe:function X(U){var j=$(U,5,8,!1);if(Array.isArray(j))return j},fromWords:function nt(U){var j=$(U,5,8,!1);if(Array.isArray(j))return j;throw new Error(j)}}},2862:bt=>{"use strict";var P=Object.prototype.hasOwnProperty,k="~";function E(){}function y(C,R,B){this.fn=C,this.context=R,this.once=B||!1}function _(C,R,B,$,et){if("function"!=typeof B)throw new TypeError("The listener must be a function");var ut=new y(B,$||C,et),X=k?k+R:R;return C._events[X]?C._events[X].fn?C._events[X]=[C._events[X],ut]:C._events[X].push(ut):(C._events[X]=ut,C._eventsCount++),C}function A(C,R){0==--C._eventsCount?C._events=new E:delete C._events[R]}function m(){this._events=new E,this._eventsCount=0}Object.create&&(E.prototype=Object.create(null),(new E).__proto__||(k=!1)),m.prototype.eventNames=function(){var B,$,R=[];if(0===this._eventsCount)return R;for($ in B=this._events)P.call(B,$)&&R.push(k?$.slice(1):$);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(B)):R},m.prototype.listeners=function(R){var $=this._events[k?k+R:R];if(!$)return[];if($.fn)return[$.fn];for(var et=0,ut=$.length,X=new Array(ut);et<ut;et++)X[et]=$[et].fn;return X},m.prototype.listenerCount=function(R){var $=this._events[k?k+R:R];return $?$.fn?1:$.length:0},m.prototype.emit=function(R,B,$,et,ut,X){var nt=k?k+R:R;if(!this._events[nt])return!1;var dt,G,U=this._events[nt],j=arguments.length;if(U.fn){switch(U.once&&this.removeListener(R,U.fn,void 0,!0),j){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,B),!0;case 3:return U.fn.call(U.context,B,$),!0;case 4:return U.fn.call(U.context,B,$,et),!0;case 5:return U.fn.call(U.context,B,$,et,ut),!0;case 6:return U.fn.call(U.context,B,$,et,ut,X),!0}for(G=1,dt=new Array(j-1);G<j;G++)dt[G-1]=arguments[G];U.fn.apply(U.context,dt)}else{var i,W=U.length;for(G=0;G<W;G++)switch(U[G].once&&this.removeListener(R,U[G].fn,void 0,!0),j){case 1:U[G].fn.call(U[G].context);break;case 2:U[G].fn.call(U[G].context,B);break;case 3:U[G].fn.call(U[G].context,B,$);break;case 4:U[G].fn.call(U[G].context,B,$,et);break;default:if(!dt)for(i=1,dt=new Array(j-1);i<j;i++)dt[i-1]=arguments[i];U[G].fn.apply(U[G].context,dt)}}return!0},m.prototype.on=function(R,B,$){return _(this,R,B,$,!1)},m.prototype.once=function(R,B,$){return _(this,R,B,$,!0)},m.prototype.removeListener=function(R,B,$,et){var ut=k?k+R:R;if(!this._events[ut])return this;if(!B)return A(this,ut),this;var X=this._events[ut];if(X.fn)X.fn===B&&(!et||X.once)&&(!$||X.context===$)&&A(this,ut);else{for(var nt=0,U=[],j=X.length;nt<j;nt++)(X[nt].fn!==B||et&&!X[nt].once||$&&X[nt].context!==$)&&U.push(X[nt]);U.length?this._events[ut]=1===U.length?U[0]:U:A(this,ut)}return this},m.prototype.removeAllListeners=function(R){var B;return R?this._events[B=k?k+R:R]&&A(this,B):(this._events=new E,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=k,m.EventEmitter=m,bt.exports=m},8081:(bt,P,k)=>{"use strict";k.r(P),k.d(P,{default:()=>ou});var E={};k.r(E),k.d(E,{OG:()=>Ar,My:()=>dn,Ph:()=>Ce,lX:()=>Sr,Id:()=>ln,fg:()=>Li,qj:()=>Me,aT:()=>mn,lq:()=>tn,z:()=>Ni,Q5:()=>Rn});var y=k(467),_=k(5167),A=k(7403),m=k(177),C=k(9417),R=k(8834),B=k(1997),$=k(2102),et=k(9213),ut=k(9042),X=k(9115),nt=k(9183),U=k(450),j=k(4823),dt=k(9192),G=k(8865),W=k(3813),i=k(4438),ct=k(2577),Mt=k(345);const Nt=["qrcElement"];let it=(()=>{class e{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new i.bkB,this.context=null}ngOnChanges(){var t=this;return(0,y.A)(function*(){yield t.createQRCode()})()}isValidQrCodeText(t){return!1===this.allowEmptyString?!(typeof t>"u"||""===t||"null"===t||null===t):!(typeof t>"u")}toDataURL(t){return new Promise((r,o)=>{(0,ct.dY)(this.qrdata,t,(a,u)=>{a?o(a):r(u)})})}toCanvas(t,r){return new Promise((o,a)=>{(0,ct.mo)(t,this.qrdata,r,u=>{u?a(u):o("success")})})}toSVG(t){return new Promise((r,o)=>{(0,ct.toString)(this.qrdata,t,(a,u)=>{a?o(a):r(u)})})}renderElement(t){for(const r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){var t=this;return(0,y.A)(function*(){t.version&&t.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),t.version=40):t.version&&t.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),t.version=1):void 0!==t.version&&isNaN(t.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),t.version=void 0);try{if(!t.isValidQrCodeText(t.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");t.isValidQrCodeText(t.qrdata)&&""===t.qrdata&&(t.qrdata=" ");const r={color:{dark:t.colorDark,light:t.colorLight},errorCorrectionLevel:t.errorCorrectionLevel,margin:t.margin,scale:t.scale,version:t.version,width:t.width},o=t.imageSrc,a=t.imageHeight||40,u=t.imageWidth||40;switch(t.elementType){case"canvas":{const f=t.renderer.createElement("canvas");t.context=f.getContext("2d"),t.toCanvas(f,r).then(()=>{if(t.ariaLabel&&t.renderer.setAttribute(f,"aria-label",`${t.ariaLabel}`),t.title&&t.renderer.setAttribute(f,"title",`${t.title}`),o&&t.context){t.centerImage=new Image(u,a),o!==t.centerImage.src&&(t.centerImage.crossOrigin="anonymous",t.centerImage.src=o),a!==t.centerImage.height&&(t.centerImage.height=a),u!==t.centerImage.width&&(t.centerImage.width=u);const g=t.centerImage;g&&(g.onload=()=>{t.context?.drawImage(g,f.width/2-u/2,f.height/2-a/2,u,a)})}t.renderElement(f),t.emitQRCodeURL(f)}).catch(g=>{console.error("[angularx-qrcode] canvas error:",g)});break}case"svg":{const f=t.renderer.createElement("div");t.toSVG(r).then(g=>{t.renderer.setProperty(f,"innerHTML",g);const b=f.firstChild;t.renderer.setAttribute(b,"height",`${t.width}`),t.renderer.setAttribute(b,"width",`${t.width}`),t.renderElement(b),t.emitQRCodeURL(b)}).catch(g=>{console.error("[angularx-qrcode] svg error:",g)});break}default:{const f=t.renderer.createElement("img");t.toDataURL(r).then(g=>{t.alt&&f.setAttribute("alt",t.alt),t.ariaLabel&&f.setAttribute("aria-label",t.ariaLabel),f.setAttribute("src",g),t.title&&f.setAttribute("title",t.title),t.renderElement(f),t.emitQRCodeURL(f)}).catch(g=>{console.error("[angularx-qrcode] img/url error:",g)})}}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})()}convertBase64ImageUrlToBlob(t){const r=t.split(";base64,"),o=r[0].split(":")[1],a=atob(r[1]),u=new Uint8Array(a.length);for(let f=0;f<a.length;++f)u[f]=a.charCodeAt(f);return new Blob([u],{type:o})}emitQRCodeURL(t){const r=t.constructor.name;if(r===SVGSVGElement.name){const b=new Blob([t.outerHTML],{type:"image/svg+xml"}),S=URL.createObjectURL(b),T=this.sanitizer.bypassSecurityTrustUrl(S);return void this.qrCodeURL.emit(T)}let o="";r===HTMLCanvasElement.name&&(o=t.toDataURL("image/png")),r===HTMLImageElement.name&&(o=t.src);const a=this.convertBase64ImageUrlToBlob(o),u=URL.createObjectURL(a),f=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(f)}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(i.sFG),i.rXU(Mt.up))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["qrcode"]],viewQuery:function(r,o){if(1&r&&i.GBs(Nt,7),2&r){let a;i.mGM(a=i.lsd())&&(o.qrcElement=a.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[i.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,o){1&r&&i.nrm(0,"div",null,0),2&r&&i.HbH(o.cssClass)},encapsulation:2,changeDetection:0})}return e})(),ot=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=i.$C({type:e});static#n=this.\u0275inj=i.G2t({})}return e})();var at=k(7374),ht=k.n(at),p=k(5164),s=k.n(p);ht().extend(s());class v{constructor(n=0,t=0,r=15){this.until=0,this.since=0,this.until=n,this.setDefaultUntil(),this.baseTimeDiff=r,this.originalBaseTimeDiff=this.baseTimeDiff,0===t?this.setDefaultSince():this.setDefaultSince(t),this.previousSince=t,this.previousUntil=n}incrementUserTimes(n){const t=n.at(-1);t?(this.revertBackToOriginalBaseTimeDiff(),this.setUntil(t.createdAt),this.setSince(t.createdAt)):(this.updateBaseTimeToFindPosts(),this.setDefaultUntil(),this.setDefaultSince())}resetFilterTimes(n=0){this.setDefaultSince(),this.setDefaultUntil(),0!==n&&(this.baseTimeDiff=n)}updateBaseTimeToFindPosts(){this.baseTimeDiff=10*this.baseTimeDiff}revertBackToOriginalBaseTimeDiff(){this.baseTimeDiff=this.originalBaseTimeDiff}getSinceAsDate(){return new Date(1e3*this.since)}getUntilAsDate(){return new Date(1e3*this.until)}getSinceFromNow(){const n=this.getSinceAsDate();return ht()(n).fromNow()}getUntilFromNow(){const n=this.getSinceAsDate();return ht()(n).fromNow()}printTimes(){const n=this.getUntilAsDate().getTime()-this.getSinceAsDate().getTime();console.log(`Until: ${this.getUntilFromNow()} | Since: ${this.getSinceFromNow()}`),console.log(`Diff: ${n}`)}printVars(){console.log(`Until: ${this.until}`),console.log(`Since: ${this.since}`),console.log(`baseTimeDiff: ${this.baseTimeDiff}`)}setDefaultSince(n=0){let t=new Date;const r=Math.floor(t.setMinutes(t.getMinutes()-this.baseTimeDiff-n)/1e3);this.since=r}setDefaultUntil(){this.until=Math.floor(Date.now()/1e3)}getNewSince(n,t=0){const r=new Date(1e3*n);return Math.floor(r.setMinutes(r.getMinutes()-this.baseTimeDiff-t)/1e3)}setUntil(n){this.previousUntil=this.until-2e3,this.until=n}setSince(n,t=0){this.previousSince=this.since,this.since=this.getNewSince(n,t)}}let re=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=i.$C({type:e});static#n=this.\u0275inj=i.G2t({})}return e})();var Ne=k(1413),Dt=k(6977),Lt=k(5351),En=k(2798),Vt=k(882);function Yt(e,n){this.v=e,this.k=n}function oe(e){return new Yt(e,0)}function Ot(e){var n,t;function r(a,u){try{var f=e[a](u),g=f.value,b=g instanceof Yt;Promise.resolve(b?g.v:g).then(function(S){if(b){var T="return"===a?"return":"next";if(!g.k||S.done)return r(T,S);S=e[T](S).value}o(f.done?"return":"normal",S)},function(S){r("throw",S)})}catch(S){o("throw",S)}}function o(a,u){switch(a){case"return":n.resolve({value:u,done:!0});break;case"throw":n.reject(u);break;default:n.resolve({value:u,done:!1})}(n=n.next)?r(n.key,n.arg):t=null}this._invoke=function(a,u){return new Promise(function(f,g){var b={key:a,arg:u,resolve:f,reject:g,next:null};t?t=t.next=b:(n=t=b,r(a,u))})},"function"!=typeof e.return&&(this.return=void 0)}function jt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Kt(e,...n){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}k(2862),Ot.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ot.prototype.next=function(e){return this._invoke("next",e)},Ot.prototype.throw=function(e){return this._invoke("throw",e)},Ot.prototype.return=function(e){return this._invoke("return",e)};const Ie={number:jt,bool:function Vn(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Kt,hash:function se(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");jt(e.outputLen),jt(e.blockLen)},exists:function Yn(e,n=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(n&&e.finished)throw new Error("Hash#digest() has already been called")},output:function ae(e,n){Kt(e);const t=n.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},Ft="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Gt=e=>e instanceof Uint8Array,zt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Re=(e,n)=>e<<32-n|e>>>n;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const le=Array.from({length:256},(e,n)=>n.toString(16).padStart(2,"0"));function Ee(e){if(!Gt(e))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=le[e[t]];return n}function He(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const n=e.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const t=new Uint8Array(n/2);for(let r=0;r<t.length;r++){const o=2*r,a=e.slice(o,o+2),u=Number.parseInt(a,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");t[r]=u}return t}function Oe(e){if("string"==typeof e&&(e=function kn(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Gt(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Ze(...e){const n=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let t=0;return e.forEach(r=>{if(!Gt(r))throw new Error("Uint8Array expected");n.set(r,t),t+=r.length}),n}class fn{clone(){return this._cloneInto()}}function hn(e){const n=r=>e().update(Oe(r)).digest(),t=e();return n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=()=>e(),n}function Xe(e=32){if(Ft&&"function"==typeof Ft.getRandomValues)return Ft.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class Cn extends fn{constructor(n,t,r,o){super(),this.blockLen=n,this.outputLen=t,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=zt(this.buffer)}update(n){Ie.exists(this);const{view:t,buffer:r,blockLen:o}=this,a=(n=Oe(n)).length;for(let u=0;u<a;){const f=Math.min(o-this.pos,a-u);if(f!==o)r.set(n.subarray(u,u+f),this.pos),this.pos+=f,u+=f,this.pos===o&&(this.process(t,0),this.pos=0);else{const g=zt(n);for(;o<=a-u;u+=o)this.process(g,u)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){Ie.exists(this),Ie.output(n,this),this.finished=!0;const{buffer:t,view:r,blockLen:o,isLE:a}=this;let{pos:u}=this;t[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>o-u&&(this.process(r,0),u=0);for(let T=u;T<o;T++)t[T]=0;(function An(e,n,t,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(n,t,r);const o=BigInt(32),a=BigInt(4294967295),u=Number(t>>o&a),f=Number(t&a),b=r?0:4;e.setUint32(n+(r?4:0),u,r),e.setUint32(n+b,f,r)})(r,o-8,BigInt(8*this.length),a),this.process(r,0);const f=zt(n),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=g/4,S=this.get();if(b>S.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<b;T++)f.setUint32(4*T,S[T],a)}digest(){const{buffer:n,outputLen:t}=this;this.digestInto(n);const r=n.slice(0,t);return this.destroy(),r}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:t,buffer:r,length:o,finished:a,destroyed:u,pos:f}=this;return n.length=o,n.pos=f,n.finished=a,n.destroyed=u,o%t&&n.buffer.set(r),n}}const Tn=(e,n,t)=>e&n^~e&t,In=(e,n,t)=>e&n^e&t^n&t,cs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Je=new Uint32Array(64);class Ri extends Cn{constructor(){super(64,32,8,!1),this.A=0|Qe[0],this.B=0|Qe[1],this.C=0|Qe[2],this.D=0|Qe[3],this.E=0|Qe[4],this.F=0|Qe[5],this.G=0|Qe[6],this.H=0|Qe[7]}get(){const{A:n,B:t,C:r,D:o,E:a,F:u,G:f,H:g}=this;return[n,t,r,o,a,u,f,g]}set(n,t,r,o,a,u,f,g){this.A=0|n,this.B=0|t,this.C=0|r,this.D=0|o,this.E=0|a,this.F=0|u,this.G=0|f,this.H=0|g}process(n,t){for(let T=0;T<16;T++,t+=4)Je[T]=n.getUint32(t,!1);for(let T=16;T<64;T++){const F=Je[T-15],D=Je[T-2],L=Re(F,7)^Re(F,18)^F>>>3,N=Re(D,17)^Re(D,19)^D>>>10;Je[T]=N+Je[T-7]+L+Je[T-16]|0}let{A:r,B:o,C:a,D:u,E:f,F:g,G:b,H:S}=this;for(let T=0;T<64;T++){const D=S+(Re(f,6)^Re(f,11)^Re(f,25))+Tn(f,g,b)+cs[T]+Je[T]|0,N=(Re(r,2)^Re(r,13)^Re(r,22))+In(r,o,a)|0;S=b,b=g,g=f,f=u+D|0,u=a,a=o,o=r,r=D+N|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,u=u+this.D|0,f=f+this.E|0,g=g+this.F|0,b=b+this.G|0,S=S+this.H|0,this.set(r,o,a,u,f,g,b,S)}roundClean(){Je.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class us extends Ri{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const We=hn(()=>new Ri),Jn=(hn(()=>new us),BigInt(0),BigInt(1)),fs=BigInt(2),tr=e=>e instanceof Uint8Array,hs=Array.from({length:256},(e,n)=>n.toString(16).padStart(2,"0"));function dn(e){if(!tr(e))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=hs[e[t]];return n}function Pi(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function mn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const n=e.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const t=new Uint8Array(n/2);for(let r=0;r<t.length;r++){const o=2*r,a=e.slice(o,o+2),u=Number.parseInt(a,16);if(Number.isNaN(u)||u<0)throw new Error("Invalid byte sequence");t[r]=u}return t}function Ce(e){return Pi(dn(e))}function Sr(e){if(!tr(e))throw new Error("Uint8Array expected");return Pi(dn(Uint8Array.from(e).reverse()))}function tn(e,n){return mn(e.toString(16).padStart(2*n,"0"))}function Ni(e,n){return tn(e,n).reverse()}function Me(e,n,t){let r;if("string"==typeof n)try{r=mn(n)}catch(a){throw new Error(`${e} must be valid hex string, got "${n}". Cause: ${a}`)}else{if(!tr(n))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(n)}const o=r.length;if("number"==typeof t&&o!==t)throw new Error(`${e} expected ${t} bytes, got ${o}`);return r}function ln(...e){const n=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let t=0;return e.forEach(r=>{if(!tr(r))throw new Error("Uint8Array expected");n.set(r,t),t+=r.length}),n}const Ar=e=>(fs<<BigInt(e-1))-Jn,Cr=e=>new Uint8Array(e),Ui=e=>Uint8Array.from(e);function Li(e,n,t){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let r=Cr(e),o=Cr(e),a=0;const u=()=>{r.fill(1),o.fill(0),a=0},f=(...T)=>t(o,r,...T),g=(T=Cr())=>{o=f(Ui([0]),T),r=f(),0!==T.length&&(o=f(Ui([1]),T),r=f())},b=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let T=0;const F=[];for(;T<n;){r=f();const D=r.slice();F.push(D),T+=r.length}return ln(...F)};return(T,F)=>{let D;for(u(),g(T);!(D=F(b()));)g();return u(),D}}const ms={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,n)=>n.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Rn(e,n,t={}){const r=(o,a,u)=>{const f=ms[a];if("function"!=typeof f)throw new Error(`Invalid validator "${a}", expected function`);const g=e[o];if(!(u&&void 0===g||f(g,e)))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${a}`)};for(const[o,a]of Object.entries(n))r(o,a,!1);for(const[o,a]of Object.entries(t))r(o,a,!0);return e}const be=BigInt(0),$t=BigInt(1),en=BigInt(2),gs=BigInt(3),Tr=BigInt(4),Di=BigInt(5),Oi=BigInt(8);function _e(e,n){const t=e%n;return t>=be?t:n+t}function ys(e,n,t){if(t<=be||n<be)throw new Error("Expected power/modulo > 0");if(t===$t)return be;let r=$t;for(;n>be;)n&$t&&(r=r*e%t),e=e*e%t,n>>=$t;return r}function Ue(e,n,t){let r=e;for(;n-- >be;)r*=r,r%=t;return r}function er(e,n){if(e===be||n<=be)throw new Error(`invert: expected positive integers, got n=${e} mod=${n}`);let t=_e(e,n),r=n,o=be,a=$t,u=$t,f=be;for(;t!==be;){const b=r/t,S=r%t,T=o-u*b,F=a-f*b;r=t,t=S,o=u,a=f,u=T,f=F}if(r!==$t)throw new Error("invert: does not exist");return _e(o,n)}BigInt(9),BigInt(16);const _s=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ir(e,n){const t=void 0!==n?n:e.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}const As=BigInt(0),Rr=BigInt(1);function $i(e){return function xs(e){Rn(e,_s.reduce((r,o)=>(r[o]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),Rn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ir(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:Is,aT:Rs}=E,cn={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(e){const{Err:n}=cn;if(e.length<2||2!==e[0])throw new n("Invalid signature integer tag");const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new n("Invalid signature integer: wrong length");if(128&r[0])throw new n("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:Is(r),l:e.subarray(t+2)}},toSig(e){const{Err:n}=cn,t="string"==typeof e?Rs(e):e;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||48!=t[0])throw new n("Invalid signature tag");if(t[1]!==r-2)throw new n("Invalid signature: incorrect length");const{d:o,l:a}=cn._parseInt(t.subarray(2)),{d:u,l:f}=cn._parseInt(a);if(f.length)throw new n("Invalid signature: left bytes after parsing");return{r:o,s:u}},hexFromSig(e){const n=b=>8&Number.parseInt(b[0],16)?"00"+b:b,t=b=>{const S=b.toString(16);return 1&S.length?`0${S}`:S},r=n(t(e.s)),o=n(t(e.r)),a=r.length/2,u=o.length/2,f=t(a),g=t(u);return`30${t(u+a+4)}02${g}${o}02${f}${r}`}},$e=BigInt(0),ce=BigInt(1),nr=(BigInt(2),BigInt(3));function Ns(e){const n=function Ps(e){const n=$i(e);return Rn(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}(e),{Fp:t,n:r}=n,o=t.BYTES+1,a=2*t.BYTES+1;function f(H){return _e(H,r)}function g(H){return er(H,r)}const{ProjectivePoint:b,normPrivateKeyToScalar:S,weierstrassEquation:T,isWithinCurveOrder:F}=function Bs(e){const n=function Ts(e){const n=$i(e);Rn(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:o}=n;if(t){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}(e),{Fp:t}=n,r=n.toBytes||((L,N,O)=>{const z=N.toAffine();return ln(Uint8Array.from([4]),t.toBytes(z.x),t.toBytes(z.y))}),o=n.fromBytes||(L=>{const N=L.subarray(1);return{x:t.fromBytes(N.subarray(0,t.BYTES)),y:t.fromBytes(N.subarray(t.BYTES,2*t.BYTES))}});function a(L){const{a:N,b:O}=n,z=t.sqr(L),V=t.mul(z,L);return t.add(t.add(V,t.mul(L,N)),O)}if(!t.eql(t.sqr(n.Gy),a(n.Gx)))throw new Error("bad generator point: equation left != right");function u(L){return"bigint"==typeof L&&$e<L&&L<n.n}function f(L){if(!u(L))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(L){const{allowedPrivateKeyLengths:N,nByteLength:O,wrapPrivateKey:z,n:V}=n;if(N&&"bigint"!=typeof L){if(L instanceof Uint8Array&&(L=dn(L)),"string"!=typeof L||!N.includes(L.length))throw new Error("Invalid key");L=L.padStart(2*O,"0")}let Q;try{Q="bigint"==typeof L?L:Ce(Me("private key",L,O))}catch{throw new Error(`private key must be ${O} bytes, hex or bigint, not ${typeof L}`)}return z&&(Q=_e(Q,V)),f(Q),Q}const b=new Map;function S(L){if(!(L instanceof T))throw new Error("ProjectivePoint expected")}class T{constructor(N,O,z){if(this.px=N,this.py=O,this.pz=z,null==N||!t.isValid(N))throw new Error("x required");if(null==O||!t.isValid(O))throw new Error("y required");if(null==z||!t.isValid(z))throw new Error("z required")}static fromAffine(N){const{x:O,y:z}=N||{};if(!N||!t.isValid(O)||!t.isValid(z))throw new Error("invalid affine point");if(N instanceof T)throw new Error("projective point not allowed");const V=Q=>t.eql(Q,t.ZERO);return V(O)&&V(z)?T.ZERO:new T(O,z,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const O=t.invertBatch(N.map(z=>z.pz));return N.map((z,V)=>z.toAffine(O[V])).map(T.fromAffine)}static fromHex(N){const O=T.fromAffine(o(Me("pointHex",N)));return O.assertValidity(),O}static fromPrivateKey(N){return T.BASE.multiply(g(N))}_setWindowSize(N){this._WINDOW_SIZE=N,b.delete(this)}assertValidity(){if(this.is0()){if(n.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:N,y:O}=this.toAffine();if(!t.isValid(N)||!t.isValid(O))throw new Error("bad point: x or y not FE");const z=t.sqr(O),V=a(N);if(!t.eql(z,V))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:N}=this.toAffine();if(t.isOdd)return!t.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){S(N);const{px:O,py:z,pz:V}=this,{px:Q,py:Y,pz:rt}=N,q=t.eql(t.mul(O,rt),t.mul(Q,V)),K=t.eql(t.mul(z,rt),t.mul(Y,V));return q&&K}negate(){return new T(this.px,t.neg(this.py),this.pz)}double(){const{a:N,b:O}=n,z=t.mul(O,nr),{px:V,py:Q,pz:Y}=this;let rt=t.ZERO,q=t.ZERO,K=t.ZERO,tt=t.mul(V,V),J=t.mul(Q,Q),yt=t.mul(Y,Y),lt=t.mul(V,Q);return lt=t.add(lt,lt),K=t.mul(V,Y),K=t.add(K,K),rt=t.mul(N,K),q=t.mul(z,yt),q=t.add(rt,q),rt=t.sub(J,q),q=t.add(J,q),q=t.mul(rt,q),rt=t.mul(lt,rt),K=t.mul(z,K),yt=t.mul(N,yt),lt=t.sub(tt,yt),lt=t.mul(N,lt),lt=t.add(lt,K),K=t.add(tt,tt),tt=t.add(K,tt),tt=t.add(tt,yt),tt=t.mul(tt,lt),q=t.add(q,tt),yt=t.mul(Q,Y),yt=t.add(yt,yt),tt=t.mul(yt,lt),rt=t.sub(rt,tt),K=t.mul(yt,J),K=t.add(K,K),K=t.add(K,K),new T(rt,q,K)}add(N){S(N);const{px:O,py:z,pz:V}=this,{px:Q,py:Y,pz:rt}=N;let q=t.ZERO,K=t.ZERO,tt=t.ZERO;const J=n.a,yt=t.mul(n.b,nr);let lt=t.mul(O,Q),wt=t.mul(z,Y),Et=t.mul(V,rt),It=t.add(O,z),H=t.add(Q,Y);It=t.mul(It,H),H=t.add(lt,wt),It=t.sub(It,H),H=t.add(O,V);let Z=t.add(Q,rt);return H=t.mul(H,Z),Z=t.add(lt,Et),H=t.sub(H,Z),Z=t.add(z,V),q=t.add(Y,rt),Z=t.mul(Z,q),q=t.add(wt,Et),Z=t.sub(Z,q),tt=t.mul(J,H),q=t.mul(yt,Et),tt=t.add(q,tt),q=t.sub(wt,tt),tt=t.add(wt,tt),K=t.mul(q,tt),wt=t.add(lt,lt),wt=t.add(wt,lt),Et=t.mul(J,Et),H=t.mul(yt,H),wt=t.add(wt,Et),Et=t.sub(lt,Et),Et=t.mul(J,Et),H=t.add(H,Et),lt=t.mul(wt,H),K=t.add(K,lt),lt=t.mul(Z,H),q=t.mul(It,q),q=t.sub(q,lt),lt=t.mul(It,wt),tt=t.mul(Z,tt),tt=t.add(tt,lt),new T(q,K,tt)}subtract(N){return this.add(N.negate())}is0(){return this.equals(T.ZERO)}wNAF(N){return D.wNAFCached(this,b,N,O=>{const z=t.invertBatch(O.map(V=>V.pz));return O.map((V,Q)=>V.toAffine(z[Q])).map(T.fromAffine)})}multiplyUnsafe(N){const O=T.ZERO;if(N===$e)return O;if(f(N),N===ce)return this;const{endo:z}=n;if(!z)return D.unsafeLadder(this,N);let{k1neg:V,k1:Q,k2neg:Y,k2:rt}=z.splitScalar(N),q=O,K=O,tt=this;for(;Q>$e||rt>$e;)Q&ce&&(q=q.add(tt)),rt&ce&&(K=K.add(tt)),tt=tt.double(),Q>>=ce,rt>>=ce;return V&&(q=q.negate()),Y&&(K=K.negate()),K=new T(t.mul(K.px,z.beta),K.py,K.pz),q.add(K)}multiply(N){f(N);let z,V,O=N;const{endo:Q}=n;if(Q){const{k1neg:Y,k1:rt,k2neg:q,k2:K}=Q.splitScalar(O);let{p:tt,f:J}=this.wNAF(rt),{p:yt,f:lt}=this.wNAF(K);tt=D.constTimeNegate(Y,tt),yt=D.constTimeNegate(q,yt),yt=new T(t.mul(yt.px,Q.beta),yt.py,yt.pz),z=tt.add(yt),V=J.add(lt)}else{const{p:Y,f:rt}=this.wNAF(O);z=Y,V=rt}return T.normalizeZ([z,V])[0]}multiplyAndAddUnsafe(N,O,z){const V=T.BASE,Q=(rt,q)=>q!==$e&&q!==ce&&rt.equals(V)?rt.multiply(q):rt.multiplyUnsafe(q),Y=Q(this,O).add(Q(N,z));return Y.is0()?void 0:Y}toAffine(N){const{px:O,py:z,pz:V}=this,Q=this.is0();null==N&&(N=Q?t.ONE:t.inv(V));const Y=t.mul(O,N),rt=t.mul(z,N),q=t.mul(V,N);if(Q)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:Y,y:rt}}isTorsionFree(){const{h:N,isTorsionFree:O}=n;if(N===ce)return!0;if(O)return O(T,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:O}=n;return N===ce?this:O?O(T,this):this.multiplyUnsafe(n.h)}toRawBytes(N=!0){return this.assertValidity(),r(T,this,N)}toHex(N=!0){return dn(this.toRawBytes(N))}}T.BASE=new T(n.Gx,n.Gy,t.ONE),T.ZERO=new T(t.ZERO,t.ONE,t.ZERO);const F=n.nBitLength,D=function Cs(e,n){const t=(o,a)=>{const u=a.negate();return o?u:a},r=o=>({windows:Math.ceil(n/o)+1,windowSize:2**(o-1)});return{constTimeNegate:t,unsafeLadder(o,a){let u=e.ZERO,f=o;for(;a>As;)a&Rr&&(u=u.add(f)),f=f.double(),a>>=Rr;return u},precomputeWindow(o,a){const{windows:u,windowSize:f}=r(a),g=[];let b=o,S=b;for(let T=0;T<u;T++){S=b,g.push(S);for(let F=1;F<f;F++)S=S.add(b),g.push(S);b=S.double()}return g},wNAF(o,a,u){const{windows:f,windowSize:g}=r(o);let b=e.ZERO,S=e.BASE;const T=BigInt(2**o-1),F=2**o,D=BigInt(o);for(let L=0;L<f;L++){const N=L*g;let O=Number(u&T);u>>=D,O>g&&(O-=F,u+=Rr);const z=N,V=N+Math.abs(O)-1,Y=O<0;0===O?S=S.add(t(L%2!=0,a[z])):b=b.add(t(Y,a[V]))}return{p:b,f:S}},wNAFCached(o,a,u,f){const g=o._WINDOW_SIZE||1;let b=a.get(o);return b||(b=this.precomputeWindow(o,g),1!==g&&a.set(o,f(b))),this.wNAF(g,b,u)}}}(T,n.endo?Math.ceil(F/2):F);return{CURVE:n,ProjectivePoint:T,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:u}}({...n,toBytes(H,Z,pt){const _t=Z.toAffine(),st=t.toBytes(_t.x),Ct=ln;return pt?Ct(Uint8Array.from([Z.hasEvenY()?2:3]),st):Ct(Uint8Array.from([4]),st,t.toBytes(_t.y))},fromBytes(H){const Z=H.length,pt=H[0],_t=H.subarray(1);if(Z!==o||2!==pt&&3!==pt){if(Z===a&&4===pt)return{x:t.fromBytes(_t.subarray(0,t.BYTES)),y:t.fromBytes(_t.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${Z} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}{const st=Ce(_t);if(!function u(H){return $e<H&&H<t.ORDER}(st))throw new Error("Point is not on curve");const Ct=T(st);let Pt=t.sqrt(Ct);return!(1&~pt)!=((Pt&ce)===ce)&&(Pt=t.neg(Pt)),{x:st,y:Pt}}}}),D=H=>dn(tn(H,n.nByteLength));function L(H){return H>r>>ce}const O=(H,Z,pt)=>Ce(H.slice(Z,pt));class z{constructor(Z,pt,_t){this.r=Z,this.s=pt,this.recovery=_t,this.assertValidity()}static fromCompact(Z){const pt=n.nByteLength;return Z=Me("compactSignature",Z,2*pt),new z(O(Z,0,pt),O(Z,pt,2*pt))}static fromDER(Z){const{r:pt,s:_t}=cn.toSig(Me("DER",Z));return new z(pt,_t)}assertValidity(){if(!F(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!F(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Z){return new z(this.r,this.s,Z)}recoverPublicKey(Z){const{r:pt,s:_t,recovery:st}=this,Ct=K(Me("msgHash",Z));if(null==st||![0,1,2,3].includes(st))throw new Error("recovery id invalid");const Pt=2===st||3===st?pt+n.n:pt;if(Pt>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const xe=b.fromHex((1&st?"03":"02")+D(Pt)),Se=g(Pt),Pe=f(-Ct*Se),De=f(_t*Se),Ae=b.BASE.multiplyAndAddUnsafe(xe,Pe,De);if(!Ae)throw new Error("point at infinify");return Ae.assertValidity(),Ae}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new z(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return mn(this.toDERHex())}toDERHex(){return cn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mn(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}const V={isValidPrivateKey(H){try{return S(H),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const Z=function Ss(e,n,t=!1){const r=(e=Me("privateHash",e)).length,o=Ir(n).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);return _e(t?Sr(e):Ce(e),n-$t)+$t}(n.randomBytes(t.BYTES+8),r);return tn(Z,n.nByteLength)},precompute:(H=8,Z=b.BASE)=>(Z._setWindowSize(H),Z.multiply(BigInt(3)),Z)};function Y(H){const Z=H instanceof Uint8Array,pt="string"==typeof H,_t=(Z||pt)&&H.length;return Z?_t===o||_t===a:pt?_t===2*o||_t===2*a:H instanceof b}const q=n.bits2int||function(H){const Z=Ce(H),pt=8*H.length-n.nBitLength;return pt>0?Z>>BigInt(pt):Z},K=n.bits2int_modN||function(H){return f(q(H))},tt=Ar(n.nBitLength);function J(H){if("bigint"!=typeof H)throw new Error("bigint expected");if(!($e<=H&&H<tt))throw new Error(`bigint expected < 2^${n.nBitLength}`);return tn(H,n.nByteLength)}const lt={lowS:n.lowS,prehash:!1},wt={lowS:n.lowS,prehash:!1};return b.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function Q(H,Z=!0){return b.fromPrivateKey(H).toRawBytes(Z)},getSharedSecret:function rt(H,Z,pt=!0){if(Y(H))throw new Error("first arg must be private key");if(!Y(Z))throw new Error("second arg must be public key");return b.fromHex(Z).multiply(S(H)).toRawBytes(pt)},sign:function Et(H,Z,pt=lt){const{seed:_t,k2sig:st}=function yt(H,Z,pt=lt){if(["recovered","canonical"].some(Te=>Te in pt))throw new Error("sign() legacy options not supported");const{hash:_t,randomBytes:st}=n;let{lowS:Ct,prehash:Pt,extraEntropy:Bt}=pt;null==Ct&&(Ct=!0),H=Me("msgHash",H),Pt&&(H=Me("prehashed msgHash",_t(H)));const xe=K(H),Se=S(Z),Pe=[J(Se),J(xe)];if(null!=Bt){const Te=!0===Bt?st(t.BYTES):Bt;Pe.push(Me("extraEntropy",Te,t.BYTES))}const De=ln(...Pe),Ae=xe;return{seed:De,k2sig:function ze(Te){const bn=q(Te);if(!F(bn))return;const ss=g(bn),qe=b.BASE.multiply(bn).toAffine(),_n=f(qe.x);if(_n===$e)return;const xr=f(ss*f(Ae+_n*Se));if(xr===$e)return;let as=(qe.x===_n?0:2)|Number(qe.y&ce),ls=xr;return Ct&&L(xr)&&(ls=function N(H){return L(H)?f(-H):H}(xr),as^=1),new z(_n,ls,as)}}}(H,Z,pt);return Li(n.hash.outputLen,n.nByteLength,n.hmac)(_t,st)},verify:function It(H,Z,pt,_t=wt){const st=H;if(Z=Me("msgHash",Z),pt=Me("publicKey",pt),"strict"in _t)throw new Error("options.strict was renamed to lowS");const{lowS:Ct,prehash:Pt}=_t;let Bt,xe;try{if("string"==typeof st||st instanceof Uint8Array)try{Bt=z.fromDER(st)}catch(qe){if(!(qe instanceof cn.Err))throw qe;Bt=z.fromCompact(st)}else{if("object"!=typeof st||"bigint"!=typeof st.r||"bigint"!=typeof st.s)throw new Error("PARSE");{const{r:qe,s:_n}=st;Bt=new z(qe,_n)}}xe=b.fromHex(pt)}catch(qe){if("PARSE"===qe.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ct&&Bt.hasHighS())return!1;Pt&&(Z=n.hash(Z));const{r:Se,s:Pe}=Bt,De=K(Z),Ae=g(Pe),ze=f(De*Ae),Te=f(Se*Ae),bn=b.BASE.multiplyAndAddUnsafe(xe,ze,Te)?.toAffine();return!!bn&&f(bn.x)===Se},ProjectivePoint:b,Signature:z,utils:V}}BigInt(4);class Gi extends fn{constructor(n,t){super(),this.finished=!1,this.destroyed=!1,Ie.hash(n);const r=Oe(t);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,a=new Uint8Array(o);a.set(r.length>o?n.create().update(r).digest():r);for(let u=0;u<a.length;u++)a[u]^=54;this.iHash.update(a),this.oHash=n.create();for(let u=0;u<a.length;u++)a[u]^=106;this.oHash.update(a),a.fill(0)}update(n){return Ie.exists(this),this.iHash.update(n),this}digestInto(n){Ie.exists(this),Ie.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:o,destroyed:a,blockLen:u,outputLen:f}=this;return n.finished=o,n.destroyed=a,n.blockLen=u,n.outputLen=f,n.oHash=t._cloneInto(n.oHash),n.iHash=r._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const gn=(e,n,t)=>new Gi(e,n).update(t).digest();function Fs(e){return{hash:e,hmac:(n,...t)=>gn(e,n,Ze(...t)),randomBytes:Xe}}gn.create=(e,n)=>new Gi(e,n);const rr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ir=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zi=BigInt(1),or=BigInt(2),qi=(e,n)=>(e+n/or)/n;function Hi(e){const n=rr,t=BigInt(3),r=BigInt(6),o=BigInt(11),a=BigInt(22),u=BigInt(23),f=BigInt(44),g=BigInt(88),b=e*e*e%n,S=b*b*e%n,T=Ue(S,t,n)*S%n,F=Ue(T,t,n)*S%n,D=Ue(F,or,n)*b%n,L=Ue(D,o,n)*D%n,N=Ue(L,a,n)*L%n,O=Ue(N,f,n)*N%n,z=Ue(O,g,n)*O%n,V=Ue(z,f,n)*N%n,Q=Ue(V,t,n)*S%n,Y=Ue(Q,u,n)*L%n,rt=Ue(Y,r,n)*b%n,q=Ue(rt,or,n);if(!Pr.eql(Pr.sqr(q),e))throw new Error("Cannot find square root");return q}const Pr=function ks(e,n,t=!1,r={}){if(e<=be)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:a}=Ir(e,n);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=function bs(e){if(e%Tr===gs){const n=(e+$t)/Tr;return function(r,o){const a=r.pow(o,n);if(!r.eql(r.sqr(a),o))throw new Error("Cannot find square root");return a}}if(e%Oi===Di){const n=(e-Di)/Oi;return function(r,o){const a=r.mul(o,en),u=r.pow(a,n),f=r.mul(o,u),g=r.mul(r.mul(f,en),u),b=r.mul(f,r.sub(g,r.ONE));if(!r.eql(r.sqr(b),o))throw new Error("Cannot find square root");return b}}return function ws(e){const n=(e-$t)/en;let t,r,o;for(t=e-$t,r=0;t%en===be;t/=en,r++);for(o=en;o<e&&ys(o,n,e)!==e-$t;o++);if(1===r){const u=(e+$t)/Tr;return function(g,b){const S=g.pow(b,u);if(!g.eql(g.sqr(S),b))throw new Error("Cannot find square root");return S}}const a=(t+$t)/en;return function(f,g){if(f.pow(g,n)===f.neg(f.ONE))throw new Error("Cannot find square root");let b=r,S=f.pow(f.mul(f.ONE,o),t),T=f.pow(g,a),F=f.pow(g,t);for(;!f.eql(F,f.ONE);){if(f.eql(F,f.ZERO))return f.ZERO;let D=1;for(let N=f.sqr(F);D<b&&!f.eql(N,f.ONE);D++)N=f.sqr(N);const L=f.pow(S,$t<<BigInt(b-D-1));S=f.sqr(L),T=f.mul(T,L),F=f.mul(F,S),b=D}return T}}(e)}(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Ar(o),ZERO:be,ONE:$t,create:g=>_e(g,e),isValid:g=>{if("bigint"!=typeof g)throw new Error("Invalid field element: expected bigint, got "+typeof g);return be<=g&&g<e},is0:g=>g===be,isOdd:g=>(g&$t)===$t,neg:g=>_e(-g,e),eql:(g,b)=>g===b,sqr:g=>_e(g*g,e),add:(g,b)=>_e(g+b,e),sub:(g,b)=>_e(g-b,e),mul:(g,b)=>_e(g*b,e),pow:(g,b)=>function Es(e,n,t){if(t<be)throw new Error("Expected power > 0");if(t===be)return e.ONE;if(t===$t)return n;let r=e.ONE,o=n;for(;t>be;)t&$t&&(r=e.mul(r,o)),o=e.sqr(o),t>>=$t;return r}(f,g,b),div:(g,b)=>_e(g*er(b,e),e),sqrN:g=>g*g,addN:(g,b)=>g+b,subN:(g,b)=>g-b,mulN:(g,b)=>g*b,inv:g=>er(g,e),sqrt:r.sqrt||(g=>u(f,g)),invertBatch:g=>function Ms(e,n){const t=new Array(n.length),r=n.reduce((a,u,f)=>e.is0(u)?a:(t[f]=a,e.mul(a,u)),e.ONE),o=e.inv(r);return n.reduceRight((a,u,f)=>e.is0(u)?a:(t[f]=e.mul(a,t[f]),e.mul(a,u)),o),t}(f,g),cmov:(g,b,S)=>S?b:g,toBytes:g=>t?Ni(g,a):tn(g,a),fromBytes:g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return t?Sr(g):Ce(g)}});return Object.freeze(f)}(rr,void 0,void 0,{sqrt:Hi}),pn=function Gs(e,n){const t=r=>Ns({...e,...Fs(r)});return Object.freeze({...t(n),create:t})}({a:BigInt(0),b:BigInt(7),Fp:Pr,n:ir,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const n=ir,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zi*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,u=BigInt("0x100000000000000000000000000000000"),f=qi(a*e,n),g=qi(-r*e,n);let b=_e(e-f*t-g*o,n),S=_e(-f*r-g*a,n);const T=b>u,F=S>u;if(T&&(b=n-b),F&&(S=n-S),b>u||S>u)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:T,k1:b,k2neg:F,k2:S}}}},We),sr=BigInt(0),Wi=e=>"bigint"==typeof e&&sr<e&&e<rr,Vi={};function ar(e,...n){let t=Vi[e];if(void 0===t){const r=We(Uint8Array.from(e,o=>o.charCodeAt(0)));t=ln(r,r),Vi[e]=t}return We(ln(t,...n))}const Nr=e=>e.toRawBytes(!0).slice(1),Ur=e=>tn(e,32),Lr=e=>_e(e,rr),Pn=e=>_e(e,ir),Dr=pn.ProjectivePoint;function Or(e){let n=pn.utils.normPrivateKeyToScalar(e),t=Dr.fromPrivateKey(n);return{scalar:t.hasEvenY()?n:Pn(-n),bytes:Nr(t)}}function Yi(e){if(!Wi(e))throw new Error("bad x: need 0 < x < p");const n=Lr(e*e);let r=Hi(Lr(n*e+BigInt(7)));r%or!==sr&&(r=Lr(-r));const o=new Dr(e,r,zi);return o.assertValidity(),o}function Ki(...e){return Pn(Ce(ar("BIP0340/challenge",...e)))}function Zi(e,n,t){const r=Me("signature",e,64),o=Me("message",n),a=Me("publicKey",t,32);try{const u=Yi(Ce(a)),f=Ce(r.subarray(0,32));if(!Wi(f))return!1;const g=Ce(r.subarray(32,64));if(!(e=>"bigint"==typeof e&&sr<e&&e<ir)(g))return!1;const b=Ki(Ur(f),Nr(u),o),S=((e,n,t)=>Dr.BASE.multiplyAndAddUnsafe(e,n,t))(u,g,Pn(-b));return!(!S||!S.hasEvenY()||S.toAffine().x!==f)}catch{return!1}}const vn={getPublicKey:function Hs(e){return Or(e).bytes},sign:function Ws(e,n,t=Xe(32)){const r=Me("message",e),{bytes:o,scalar:a}=Or(n),u=Me("auxRand",t,32),f=Ur(a^Ce(ar("BIP0340/aux",u))),g=ar("BIP0340/nonce",f,o,r),b=Pn(Ce(g));if(b===sr)throw new Error("sign failed: k is zero");const{bytes:S,scalar:T}=Or(b),F=Ki(S,o,r),D=new Uint8Array(64);if(D.set(S,0),D.set(Ur(Pn(T+F*a)),32),!Zi(D,r,o))throw new Error("sign: Invalid signature produced");return D},verify:Zi,utils:{randomPrivateKey:pn.utils.randomPrivateKey,lift_x:Yi,pointToBytes:Nr,numberToBytesBE:tn,bytesToNumberBE:Ce,taggedHash:ar,mod:_e}};var Xi=k(5693),$r=k(9673),Vs=k(9608);const je=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Gr(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function zr(e){if("string"==typeof e&&(e=Gr(e)),!(e=>e instanceof Uint8Array)(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function qr(e,n){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof n&&e.length!==n)throw new Error(`Uint8Array length ${n} expected`)}function Hr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Qi(e,...n){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const Be={number:Hr,bool:function Js(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Qi,hash:function ta(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Hr(e.outputLen),Hr(e.blockLen)},exists:function ea(e,n=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(n&&e.finished)throw new Error("Hash#digest() has already been called")},output:function na(e,n){Qi(e);const t=n.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},ke=(e,n)=>255&e[n++]|(255&e[n++])<<8;class ra{constructor(n){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,qr(n=zr(n),32);const t=ke(n,0),r=ke(n,2),o=ke(n,4),a=ke(n,6),u=ke(n,8),f=ke(n,10),g=ke(n,12),b=ke(n,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|o<<6),this.r[3]=8191&(o>>>7|a<<9),this.r[4]=255&(a>>>4|u<<12),this.r[5]=u>>>1&8190,this.r[6]=8191&(u>>>14|f<<2),this.r[7]=8065&(f>>>11|g<<5),this.r[8]=8191&(g>>>8|b<<8),this.r[9]=b>>>5&127;for(let S=0;S<8;S++)this.pad[S]=ke(n,16+2*S)}process(n,t,r=!1){const o=r?0:2048,{h:a,r:u}=this,f=u[0],g=u[1],b=u[2],S=u[3],T=u[4],F=u[5],D=u[6],L=u[7],N=u[8],O=u[9],z=ke(n,t+0),V=ke(n,t+2),Q=ke(n,t+4),Y=ke(n,t+6),rt=ke(n,t+8),q=ke(n,t+10),K=ke(n,t+12),tt=ke(n,t+14);let J=a[0]+(8191&z),yt=a[1]+(8191&(z>>>13|V<<3)),lt=a[2]+(8191&(V>>>10|Q<<6)),wt=a[3]+(8191&(Q>>>7|Y<<9)),Et=a[4]+(8191&(Y>>>4|rt<<12)),It=a[5]+(rt>>>1&8191),H=a[6]+(8191&(rt>>>14|q<<2)),Z=a[7]+(8191&(q>>>11|K<<5)),pt=a[8]+(8191&(K>>>8|tt<<8)),_t=a[9]+(tt>>>5|o),st=0,Ct=st+J*f+yt*(5*O)+lt*(5*N)+wt*(5*L)+Et*(5*D);st=Ct>>>13,Ct&=8191,Ct+=It*(5*F)+H*(5*T)+Z*(5*S)+pt*(5*b)+_t*(5*g),st+=Ct>>>13,Ct&=8191;let Pt=st+J*g+yt*f+lt*(5*O)+wt*(5*N)+Et*(5*L);st=Pt>>>13,Pt&=8191,Pt+=It*(5*D)+H*(5*F)+Z*(5*T)+pt*(5*S)+_t*(5*b),st+=Pt>>>13,Pt&=8191;let Bt=st+J*b+yt*g+lt*f+wt*(5*O)+Et*(5*N);st=Bt>>>13,Bt&=8191,Bt+=It*(5*L)+H*(5*D)+Z*(5*F)+pt*(5*T)+_t*(5*S),st+=Bt>>>13,Bt&=8191;let xe=st+J*S+yt*b+lt*g+wt*f+Et*(5*O);st=xe>>>13,xe&=8191,xe+=It*(5*N)+H*(5*L)+Z*(5*D)+pt*(5*F)+_t*(5*T),st+=xe>>>13,xe&=8191;let Se=st+J*T+yt*S+lt*b+wt*g+Et*f;st=Se>>>13,Se&=8191,Se+=It*(5*O)+H*(5*N)+Z*(5*L)+pt*(5*D)+_t*(5*F),st+=Se>>>13,Se&=8191;let Pe=st+J*F+yt*T+lt*S+wt*b+Et*g;st=Pe>>>13,Pe&=8191,Pe+=It*f+H*(5*O)+Z*(5*N)+pt*(5*L)+_t*(5*D),st+=Pe>>>13,Pe&=8191;let De=st+J*D+yt*F+lt*T+wt*S+Et*b;st=De>>>13,De&=8191,De+=It*g+H*f+Z*(5*O)+pt*(5*N)+_t*(5*L),st+=De>>>13,De&=8191;let Ae=st+J*L+yt*D+lt*F+wt*T+Et*S;st=Ae>>>13,Ae&=8191,Ae+=It*b+H*g+Z*f+pt*(5*O)+_t*(5*N),st+=Ae>>>13,Ae&=8191;let ze=st+J*N+yt*L+lt*D+wt*F+Et*T;st=ze>>>13,ze&=8191,ze+=It*S+H*b+Z*g+pt*f+_t*(5*O),st+=ze>>>13,ze&=8191;let Te=st+J*O+yt*N+lt*L+wt*D+Et*F;st=Te>>>13,Te&=8191,Te+=It*T+H*S+Z*b+pt*g+_t*f,st+=Te>>>13,Te&=8191,st=(st<<2)+st|0,st=st+Ct|0,Ct=8191&st,st>>>=13,Pt+=st,a[0]=Ct,a[1]=Pt,a[2]=Bt,a[3]=xe,a[4]=Se,a[5]=Pe,a[6]=De,a[7]=Ae,a[8]=ze,a[9]=Te}finalize(){const{h:n,pad:t}=this,r=new Uint16Array(10);let o=n[1]>>>13;n[1]&=8191;for(let f=2;f<10;f++)n[f]+=o,o=n[f]>>>13,n[f]&=8191;n[0]+=5*o,o=n[0]>>>13,n[0]&=8191,n[1]+=o,o=n[1]>>>13,n[1]&=8191,n[2]+=o,r[0]=n[0]+5,o=r[0]>>>13,r[0]&=8191;for(let f=1;f<10;f++)r[f]=n[f]+o,o=r[f]>>>13,r[f]&=8191;r[9]-=8192;let a=(1^o)-1;for(let f=0;f<10;f++)r[f]&=a;a=~a;for(let f=0;f<10;f++)n[f]=n[f]&a|r[f];n[0]=65535&(n[0]|n[1]<<13),n[1]=65535&(n[1]>>>3|n[2]<<10),n[2]=65535&(n[2]>>>6|n[3]<<7),n[3]=65535&(n[3]>>>9|n[4]<<4),n[4]=65535&(n[4]>>>12|n[5]<<1|n[6]<<14),n[5]=65535&(n[6]>>>2|n[7]<<11),n[6]=65535&(n[7]>>>5|n[8]<<8),n[7]=65535&(n[8]>>>8|n[9]<<5);let u=n[0]+t[0];n[0]=65535&u;for(let f=1;f<8;f++)u=(n[f]+t[f]|0)+(u>>>16)|0,n[f]=65535&u}update(n){Be.exists(this);const{buffer:t,blockLen:r}=this,o=(n=zr(n)).length;for(let a=0;a<o;){const u=Math.min(r-this.pos,o-a);if(u!==r)t.set(n.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=o-a;a+=r)this.process(n,a)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(n){Be.exists(this),Be.output(n,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:o}=this;if(o){for(t[o++]=1;o<16;o++)t[o]=0;this.process(t,0,!0)}this.finalize();let a=0;for(let u=0;u<8;u++)n[a++]=r[u]>>>0,n[a++]=r[u]>>>8;return n}digest(){const{buffer:n,outputLen:t}=this;this.digestInto(n);const r=n.slice(0,t);return this.destroy(),r}}!function ia(e){const n=(r,o)=>e(o).update(zr(r)).digest(),t=e(new Uint8Array(32));n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=r=>e(r)}(e=>new ra(e));const oa=Gr("expand 16-byte k"),sa=Gr("expand 32-byte k"),aa=je(oa),la=je(sa),Ji=e=>!(e.byteOffset%4),vt=(e,n)=>e<<n|e>>>32-n;const to=(e=>{const{core:n,rounds:t,counterRight:r,counterLen:o,allow128bitKeys:a,extendNonceFn:u,blockLen:f}=function Xs(e,n){if(void 0!==n&&("object"!=typeof n||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(n)))throw new Error("options must be object or undefined");return Object.assign(e,n)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);Be.number(o),Be.number(t),Be.number(f),Be.bool(r),Be.bool(a);const g=f/4;if(f%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(b,S,T,F,D=0)=>{if(Be.bytes(b),Be.bytes(S),Be.bytes(T),F||(F=new Uint8Array(T.length)),Be.bytes(F),Be.number(D),D<0||D>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(F.length<T.length)throw new Error(`Salsa/ChaCha: output (${F.length}) is shorter than data (${T.length})`);const L=[];let N,O;if(32===b.length)N=b,O=la;else{if(16!==b.length||!a)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${b.length}`);N=new Uint8Array(32),N.set(b),N.set(b,16),O=aa,L.push(N)}if(u){if(S.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");N=u(O,N,S.subarray(0,16),new Uint8Array(32)),L.push(N),S=S.subarray(16)}const z=16-o;if(S.length!==z)throw new Error(`Salsa/ChaCha: nonce must be ${z} or 16 bytes`);if(12!==z){const J=new Uint8Array(12);J.set(S,r?0:12-S.length),L.push(S=J)}const V=new Uint8Array(f),Q=je(V),Y=je(N),rt=je(S),q=Ji(T)&&je(T),K=Ji(F)&&je(F);L.push(Q);const tt=T.length;for(let J=0,yt=D;J<tt;yt++){if(n(O,Y,rt,Q,yt,t),yt>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const lt=Math.min(f,tt-J);if(lt===f&&K&&q){const wt=J/4;if(J%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let Et=0;Et<g;Et++)K[wt+Et]=q[wt+Et]^Q[Et];J+=f}else{for(let wt=0;wt<lt;wt++)F[J+wt]=T[J+wt]^V[wt];J+=lt}}for(let J=0;J<L.length;J++)L[J].fill(0);return F}})({core:function Un(e,n,t,r,o,a=20){let u=e[0],f=e[1],g=e[2],b=e[3],S=n[0],T=n[1],F=n[2],D=n[3],L=n[4],N=n[5],O=n[6],z=n[7],V=o,Q=t[0],Y=t[1],rt=t[2],q=u,K=f,tt=g,J=b,yt=S,lt=T,wt=F,Et=D,It=L,H=N,Z=O,pt=z,_t=V,st=Q,Ct=Y,Pt=rt;for(let xe=0;xe<a;xe+=2)q=q+yt|0,_t=vt(_t^q,16),It=It+_t|0,yt=vt(yt^It,12),q=q+yt|0,_t=vt(_t^q,8),It=It+_t|0,yt=vt(yt^It,7),K=K+lt|0,st=vt(st^K,16),H=H+st|0,lt=vt(lt^H,12),K=K+lt|0,st=vt(st^K,8),H=H+st|0,lt=vt(lt^H,7),tt=tt+wt|0,Ct=vt(Ct^tt,16),Z=Z+Ct|0,wt=vt(wt^Z,12),tt=tt+wt|0,Ct=vt(Ct^tt,8),Z=Z+Ct|0,wt=vt(wt^Z,7),J=J+Et|0,Pt=vt(Pt^J,16),pt=pt+Pt|0,Et=vt(Et^pt,12),J=J+Et|0,Pt=vt(Pt^J,8),pt=pt+Pt|0,Et=vt(Et^pt,7),q=q+lt|0,Pt=vt(Pt^q,16),Z=Z+Pt|0,lt=vt(lt^Z,12),q=q+lt|0,Pt=vt(Pt^q,8),Z=Z+Pt|0,lt=vt(lt^Z,7),K=K+wt|0,_t=vt(_t^K,16),pt=pt+_t|0,wt=vt(wt^pt,12),K=K+wt|0,_t=vt(_t^K,8),pt=pt+_t|0,wt=vt(wt^pt,7),tt=tt+Et|0,st=vt(st^tt,16),It=It+st|0,Et=vt(Et^It,12),tt=tt+Et|0,st=vt(st^tt,8),It=It+st|0,Et=vt(Et^It,7),J=J+yt|0,Ct=vt(Ct^J,16),H=H+Ct|0,yt=vt(yt^H,12),J=J+yt|0,Ct=vt(Ct^J,8),H=H+Ct|0,yt=vt(yt^H,7);let Bt=0;r[Bt++]=u+q|0,r[Bt++]=f+K|0,r[Bt++]=g+tt|0,r[Bt++]=b+J|0,r[Bt++]=S+yt|0,r[Bt++]=T+lt|0,r[Bt++]=F+wt|0,r[Bt++]=D+Et|0,r[Bt++]=L+It|0,r[Bt++]=N+H|0,r[Bt++]=O+Z|0,r[Bt++]=z+pt|0,r[Bt++]=V+_t|0,r[Bt++]=Q+st|0,r[Bt++]=Y+Ct|0,r[Bt++]=rt+Pt|0},counterRight:!1,counterLen:4,allow128bitKeys:!1}),Wr=new Uint8Array([0]),ro=new Uint8Array;var ma=Object.defineProperty,ye=(e,n)=>{for(var t in n)ma(e,t,{get:n[t],enumerable:!0})};function io(){return Ee(vn.utils.randomPrivateKey())}function Vr(e){return Ee(vn.getPublicKey(e))}ye({},{MessageNode:()=>oo,MessageQueue:()=>so,insertEventIntoAscendingList:()=>va,insertEventIntoDescendingList:()=>pa,normalizeURL:()=>Yr,utf8Decoder:()=>Fe,utf8Encoder:()=>Le});var Fe=new TextDecoder("utf-8"),Le=new TextEncoder;function Yr(e){let n=new URL(e);return n.pathname=n.pathname.replace(/\/+/g,"/"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),("80"===n.port&&"ws:"===n.protocol||"443"===n.port&&"wss:"===n.protocol)&&(n.port=""),n.searchParams.sort(),n.hash="",n.toString()}function pa(e,n){let o,t=0,r=e.length-1,a=t;if(r<0)a=0;else if(n.created_at<e[r].created_at)a=r+1;else if(n.created_at>=e[t].created_at)a=t;else for(;;){if(r<=t+1){a=r;break}if(o=Math.floor(t+(r-t)/2),e[o].created_at>n.created_at)t=o;else{if(!(e[o].created_at<n.created_at)){a=o;break}r=o}}return e[a]?.id!==n.id?[...e.slice(0,a),n,...e.slice(a)]:e}function va(e,n){let o,t=0,r=e.length-1,a=t;if(r<0)a=0;else if(n.created_at>e[r].created_at)a=r+1;else if(n.created_at<=e[t].created_at)a=t;else for(;;){if(r<=t+1){a=r;break}if(o=Math.floor(t+(r-t)/2),e[o].created_at<n.created_at)t=o;else{if(!(e[o].created_at>n.created_at)){a=o;break}r=o}}return e[a]?.id!==n.id?[...e.slice(0,a),n,...e.slice(a)]:e}var oo=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},so=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const n=new oo(e);return 0!==this._size&&this._last?(this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},yn=Symbol("verified");function Ve(e,n){const t=e;return t.pubkey=Vr(n),t.id=Ln(t),t.sig=function ao(e,n){return Ee(vn.sign(Ln(e),n))}(t,n),t[yn]=!0,t}function Ln(e){let n=We(Le.encode(function ba(e){if(!Kr(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return Ee(n)}var _a=e=>e instanceof Object;function Kr(e){if(!_a(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let n=0;n<e.tags.length;n++){let t=e.tags[n];if(!Array.isArray(t))return!1;for(let r=0;r<t.length;r++)if("object"==typeof t[r])return!1}return!0}function lr(e){if("boolean"==typeof e[yn])return e[yn];const n=Ln(e);if(n!==e.id)return e[yn]=!1;try{return e[yn]=vn.verify(e.sig,n,e.pubkey)}catch{return e[yn]=!1}}function xa(e,n){if(e.ids&&-1===e.ids.indexOf(n.id)&&!e.ids.some(t=>n.id.startsWith(t))||e.kinds&&-1===e.kinds.indexOf(n.kind)||e.authors&&-1===e.authors.indexOf(n.pubkey)&&!e.authors.some(t=>n.pubkey.startsWith(t)))return!1;for(let t in e)if("#"===t[0]){let o=e[`#${t.slice(1)}`];if(o&&!n.tags.find(([a,u])=>a===t.slice(1)&&-1!==o.indexOf(u)))return!1}return!(e.since&&n.created_at<e.since||e.until&&n.created_at>e.until)}function cr(e,n){let t=n.length+3,r=e.indexOf(`"${n}":`)+t,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function co(e,n){let t=n.length,r=e.indexOf(`"${n}":`)+t+3,o=e.slice(r),a=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,a),10)}function uo(e){let n=e.slice(0,22).indexOf('"EVENT"');if(-1===n)return null;let t=e.slice(n+7+1).indexOf('"');if(-1===t)return null;let r=n+7+1+t,o=e.slice(r+1,80).indexOf('"');return-1===o?null:e.slice(r+1,r+1+o)}function ka(e,n){return n===cr(e,"id")}function Sa(e,n){return n===cr(e,"pubkey")}function Aa(e,n){return n===co(e,"kind")}function ho(e,n={}){let{listTimeout:t=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=n;var a,S,u={},f={connect:[],disconnect:[],error:[],notice:[],auth:[]},g={},b={};function F(){return(F=(0,y.A)(function*(){return S||(S=new Promise((Y,rt)=>{try{a=new WebSocket(e)}catch(J){rt(J)}a.onopen=()=>{f.connect.forEach(J=>J()),Y()},a.onerror=()=>{S=void 0,f.error.forEach(J=>J()),rt()},a.onclose=(0,y.A)(function*(){S=void 0,f.disconnect.forEach(J=>J())});let K,q=new so;function tt(){if(0===q.size)return clearInterval(K),void(K=null);var J=q.dequeue();if(!J)return;let yt=uo(J);if(yt){let lt=u[yt];if(lt&&lt.alreadyHaveEvent&&lt.alreadyHaveEvent(cr(J,"id"),e))return}try{let lt=JSON.parse(J);switch(lt[0]){case"EVENT":{let H=lt[1],Z=lt[2];return void(Kr(Z)&&u[H]&&(u[H].skipVerification||lr(Z))&&function lo(e,n){for(let t=0;t<e.length;t++)if(xa(e[t],n))return!0;return!1}(u[H].filters,Z)&&(g[H]?.event||[]).forEach(pt=>pt(Z)))}case"COUNT":let wt=lt[1],Et=lt[2];return void(u[wt]&&(g[wt]?.count||[]).forEach(H=>H(Et)));case"EOSE":{let H=lt[1];return void(H in g&&(g[H].eose.forEach(Z=>Z()),g[H].eose=[]))}case"OK":{let H=lt[1],Z=lt[2],pt=lt[3]||"";if(H in b){let{resolve:_t,reject:st}=b[H];Z?_t(null):st(new Error(pt))}return}case"NOTICE":let It=lt[1];return void f.notice.forEach(H=>H(It));case"AUTH":{let H=lt[1];return void f.auth?.forEach(Z=>Z(H))}}}catch{return}}a.onmessage=J=>{q.enqueue(J.data),K||(K=setInterval(tt,0))}}))})).apply(this,arguments)}function D(){return 1===a?.readyState}function N(){return N=(0,y.A)(function*(){D()||(yield function T(){return F.apply(this,arguments)}())}),N.apply(this,arguments)}function O(Y){return z.apply(this,arguments)}function z(){return(z=(0,y.A)(function*(Y){let rt=JSON.stringify(Y);if(D()||(yield new Promise(q=>setTimeout(q,1e3)),D()))try{a.send(rt)}catch(q){console.log(q)}})).apply(this,arguments)}const V=(Y,{verb:rt="REQ",skipVerification:q=!1,alreadyHaveEvent:K=null,id:tt=Math.random().toString().slice(2)}={})=>{let J=tt;u[J]={id:J,filters:Y,skipVerification:q,alreadyHaveEvent:K},O([rt,J,...Y]);let yt={sub:(lt,wt={})=>V(lt||Y,{skipVerification:wt.skipVerification||q,alreadyHaveEvent:wt.alreadyHaveEvent||K,id:J}),unsub:()=>{delete u[J],delete g[J],O(["CLOSE",J])},on:(lt,wt)=>{g[J]=g[J]||{event:[],count:[],eose:[]},g[J][lt].push(wt)},off:(lt,wt)=>{let Et=g[J],It=Et[lt].indexOf(wt);It>=0&&Et[lt].splice(It,1)},get events(){return function mo(e){return Zr.apply(this,arguments)}(yt)}};return yt};function Q(Y,rt){return new Promise((q,K)=>{if(!Y.id)return void K(new Error(`event ${Y} has no id`));let tt=Y.id;O([rt,Y]),b[tt]={resolve:q,reject:K}})}return{url:e,sub:V,on:(Y,rt)=>{f[Y].push(rt),"connect"===Y&&1===a?.readyState&&rt()},off:(Y,rt)=>{let q=f[Y].indexOf(rt);-1!==q&&f[Y].splice(q,1)},list:(Y,rt)=>new Promise(q=>{let K=V(Y,rt),tt=[],J=setTimeout(()=>{K.unsub(),q(tt)},t);K.on("eose",()=>{K.unsub(),clearTimeout(J),q(tt)}),K.on("event",yt=>{tt.push(yt)})}),get:(Y,rt)=>new Promise(q=>{let K=V([Y],rt),tt=setTimeout(()=>{K.unsub(),q(null)},r);K.on("event",J=>{K.unsub(),clearTimeout(tt),q(J)})}),count:Y=>new Promise(rt=>{let q=V(Y,{...V,verb:"COUNT"}),K=setTimeout(()=>{q.unsub(),rt(null)},o);q.on("count",tt=>{q.unsub(),clearTimeout(K),rt(tt)})}),publish:Y=>(0,y.A)(function*(){yield Q(Y,"EVENT")})(),auth:Y=>(0,y.A)(function*(){yield Q(Y,"AUTH")})(),connect:function L(){return N.apply(this,arguments)},close(){f={connect:[],disconnect:[],error:[],notice:[],auth:[]},g={},b={},a?.readyState===WebSocket.OPEN&&a.close()},get status(){return a?.readyState??3}}}function Zr(){return Zr=function Wn(e){return function(){return new Ot(e.apply(this,arguments))}}(function*(e){let n;const t=[],r=o=>{n?(n(o),n=void 0):t.push(o)};e.on("event",r);try{for(;;)t.length>0?yield t.shift():yield yield oe(new Promise(a=>{n=a}))}finally{e.off("event",r)}}),Zr.apply(this,arguments)}ye({},{getHex64:()=>cr,getInt:()=>co,getSubscriptionId:()=>uo,matchEventId:()=>ka,matchEventKind:()=>Aa,matchEventPubkey:()=>Sa});var Xr={};ye(Xr,{BECH32_REGEX:()=>po,decode:()=>Dn,naddrEncode:()=>Na,neventEncode:()=>Pa,noteEncode:()=>Ra,nprofileEncode:()=>Ba,npubEncode:()=>Ia,nrelayEncode:()=>Ua,nsecEncode:()=>Ta});var go=5e3,po=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Dn(e){let{prefix:n,words:t}=W.I.decode(e,go),r=new Uint8Array(W.I.fromWords(t));switch(n){case"nprofile":{let o=ur(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ee(o[0][0]),relays:o[1]?o[1].map(a=>Fe.decode(a)):[]}}}case"nevent":{let o=ur(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==o[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Ee(o[0][0]),relays:o[1]?o[1].map(a=>Fe.decode(a)):[],author:o[2]?.[0]?Ee(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(Ee(o[3][0]),16):void 0}}}case"naddr":{let o=ur(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==o[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==o[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Fe.decode(o[0][0]),pubkey:Ee(o[2][0]),kind:parseInt(Ee(o[3][0]),16),relays:o[1]?o[1].map(a=>Fe.decode(a)):[]}}}case"nrelay":{let o=ur(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Fe.decode(o[0][0])}}case"nsec":case"npub":case"note":return{type:n,data:Ee(r)};default:throw new Error(`unknown prefix ${n}`)}}function ur(e){let n={},t=e;for(;t.length>0;){let r=t[0],o=t[1];if(!o)throw new Error(`malformed TLV ${r}`);let a=t.slice(2,2+o);if(t=t.slice(2+o),a.length<o)throw new Error(`not enough data to read on TLV ${r}`);n[r]=n[r]||[],n[r].push(a)}return n}function Ta(e){return Qr("nsec",e)}function Ia(e){return Qr("npub",e)}function Ra(e){return Qr("note",e)}function On(e,n){let t=W.I.toWords(n);return W.I.encode(e,t,go)}function Qr(e,n){return On(e,He(n))}function Ba(e){return On("nprofile",fr({0:[He(e.pubkey)],1:(e.relays||[]).map(t=>Le.encode(t))}))}function Pa(e){let n;return null!=e.kind&&(n=function Ca(e){const n=new Uint8Array(4);return n[0]=e>>24&255,n[1]=e>>16&255,n[2]=e>>8&255,n[3]=255&e,n}(e.kind)),On("nevent",fr({0:[He(e.id)],1:(e.relays||[]).map(r=>Le.encode(r)),2:e.author?[He(e.author)]:[],3:n?[new Uint8Array(n)]:[]}))}function Na(e){let n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e.kind,!1),On("naddr",fr({0:[Le.encode(e.identifier)],1:(e.relays||[]).map(r=>Le.encode(r)),2:[He(e.pubkey)],3:[new Uint8Array(n)]}))}function Ua(e){return On("nrelay",fr({0:[Le.encode(e)]}))}function fr(e){let n=[];return Object.entries(e).forEach(([t,r])=>{r.forEach(o=>{let a=new Uint8Array(o.length+2);a.set([parseInt(t)],0),a.set([o.length],1),a.set(o,2),n.push(a)})}),Ze(...n)}var Jr={};function vo(e,n,t){return ti.apply(this,arguments)}function ti(){return(ti=(0,y.A)(function*(e,n,t){const o=yo(pn.getSharedSecret(e,"02"+n));let a=Uint8Array.from(Xe(16)),u=Le.encode(t),f=yield crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["encrypt"]),g=yield crypto.subtle.encrypt({name:"AES-CBC",iv:a},f,u);return`${W.K3.encode(new Uint8Array(g))}?iv=${W.K3.encode(new Uint8Array(a.buffer))}`})).apply(this,arguments)}function Da(e,n,t){return ei.apply(this,arguments)}function ei(){return(ei=(0,y.A)(function*(e,n,t){let[r,o]=t.split("?iv="),u=yo(pn.getSharedSecret(e,"02"+n)),f=yield crypto.subtle.importKey("raw",u,{name:"AES-CBC"},!1,["decrypt"]),g=W.K3.decode(r),b=W.K3.decode(o),S=yield crypto.subtle.decrypt({name:"AES-CBC",iv:b},f,g);return Fe.decode(S)})).apply(this,arguments)}function yo(e){return e.slice(1,33)}ye(Jr,{decrypt:()=>Da,encrypt:()=>vo}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),ye({},{NIP05_REGEX:()=>wo,queryProfile:()=>Fa,searchDomain:()=>ja,useFetchImplementation:()=>$a});var hr,wo=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{hr=fetch}catch{}function $a(e){hr=e}function ja(e){return ni.apply(this,arguments)}function ni(){return(ni=(0,y.A)(function*(e,n=""){try{return(yield(yield hr(`https://${e}/.well-known/nostr.json?name=${n}`)).json()).names}catch{return{}}})).apply(this,arguments)}function Fa(e){return ri.apply(this,arguments)}function ri(){return(ri=(0,y.A)(function*(e){const n=e.match(wo);if(!n)return null;const[t,r="_",o]=n;try{const a=yield hr(`https://${o}/.well-known/nostr.json?name=${r}`),{names:u,relays:f}=function Ga(e){const n={names:{}};for(const[t,r]of Object.entries(e.names))"string"==typeof t&&"string"==typeof r&&(n.names[t]=r);if(e.relays){n.relays={};for(const[t,r]of Object.entries(e.relays))"string"==typeof t&&Array.isArray(r)&&(n.relays[t]=r.filter(o=>"string"==typeof o))}return n}(yield a.json()),g=u[r];return g?{pubkey:g,relays:f?.[g]}:null}catch{return null}})).apply(this,arguments)}function qa(e,n){let r=Vs.c.fromMasterSeed((0,$r.kw)(e,n)).derive("m/44'/1237'/0'/0/0").privateKey;if(!r)throw new Error("could not derive private key");return Ee(r)}function Ha(){return(0,$r.we)(Xi.p)}function Wa(e){return(0,$r.JB)(e,Xi.p)}function Ya(e){const n={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const r of e.tags)"e"===r[0]&&r[1]&&t.push(r),"p"===r[0]&&r[1]&&n.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<t.length;r++){const o=t[r],[a,u,f,g]=o,b={id:u,relays:f?[f]:[]},T=r===t.length-1;"root"!==g?"reply"!==g?"mention"!==g?0===r?n.root=b:T?n.reply=b:n.mentions.push(b):n.mentions.push(b):n.reply=b:n.root=b}return n}function bo(e){let n=0;for(let t=0;t<e.length;t++){const r=parseInt(e[t],16);if(0!==r){n+=Math.clz32(r)-28;break}n+=4}return n}function Za(e,n){let t=0;const r=e,o=["nonce",t.toString(),n.toString()];for(r.tags.push(o);;){const a=Math.floor((new Date).getTime()/1e3);if(a!==r.created_at&&(t=0,r.created_at=a),o[1]=(++t).toString(),r.id=Ln(r),bo(r.id)>=n)break}return r}function Qa(e,n,t,r){return Ve({kind:6,tags:[...e.tags??[],["e",n.id,t],["p",n.pubkey]],content:""===e.content?"":JSON.stringify(n),created_at:e.created_at},r)}function _o(e){if(6!==e.kind)return;let n,t;for(let r=e.tags.length-1;r>=0&&(void 0===n||void 0===t);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===n?n=o:"p"===o[0]&&void 0===t&&(t=o))}return void 0!==n?{id:n[1],relays:[n[2],t?.[2]].filter(r=>"string"==typeof r),author:t?.[1]}:void 0}function Ja(e,{skipVerification:n}={}){const t=_o(e);if(void 0===t||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch{return}return r.id===t.id&&(n||lr(r))?r:void 0}ye({},{generateSeedWords:()=>Ha,privateKeyFromSeedWords:()=>qa,validateWords:()=>Wa}),ye({},{parse:()=>Ya}),ye({},{getPow:()=>bo,minePow:()=>Za}),ye({},{finishRepostEvent:()=>Qa,getRepostedEvent:()=>Ja,getRepostedEventPointer:()=>_o}),ye({},{NOSTR_URI_REGEX:()=>dr,parse:()=>nl,test:()=>el});var dr=new RegExp(`nostr:(${po.source})`);function el(e){return"string"==typeof e&&new RegExp(`^${dr.source}$`).test(e)}function nl(e){const n=e.match(new RegExp(`^${dr.source}$`));if(!n)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:n[0],value:n[1],decoded:Dn(n[1])}}function il(e,n,t){const r=n.tags.filter(o=>o.length>=2&&("e"===o[0]||"p"===o[0]));return Ve({...e,kind:7,tags:[...e.tags??[],...r,["e",n.id],["p",n.pubkey]],content:e.content??"+"},t)}function ol(e){if(7!==e.kind)return;let n,t;for(let r=e.tags.length-1;r>=0&&(void 0===n||void 0===t);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===n?n=o:"p"===o[0]&&void 0===t&&(t=o))}return void 0!==n&&void 0!==t?{id:n[1],relays:[n[2],t[2]].filter(r=>void 0!==r),author:t[1]}:void 0}function al(e,n){let t=[];(n.kind||-1)>=0&&t.push(`kind=${n.kind}`),n.until&&t.push(`created_at<${n.until}`),n.since&&t.push(`created_at>${n.since}`);let r=t.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=We(Le.encode(`nostr:delegation:${n.pubkey}:${r}`)),a=Ee(vn.sign(o,e));return{from:Vr(e),to:n.pubkey,cond:r,sig:a}}function ll(e){let n=e.tags.find(f=>"delegation"===f[0]&&f.length>=4);if(!n)return null;let t=n[1],r=n[2],o=n[3],a=r.split("&");for(let f=0;f<a.length;f++){let[g,b,S]=a[f].split(/\b/);if("kind"!==g||"="!==b||e.kind!==parseInt(S)){if("created_at"===g&&"<"===b&&e.created_at<parseInt(S))continue;if("created_at"===g&&">"===b&&e.created_at>parseInt(S))continue;return null}}let u=We(Le.encode(`nostr:delegation:${e.pubkey}:${r}`));return vn.verify(o,u,t)?t:null}ye({},{finishReactionEvent:()=>il,getReactedEventPointer:()=>ol}),ye({},{createDelegation:()=>al,getDelegator:()=>ll}),ye({},{matchAll:()=>ul,regex:()=>ii,replaceAll:()=>fl});var ii=()=>new RegExp(`\\b${dr.source}\\b`,"g");function*ul(e){const n=e.matchAll(ii());for(const t of n)try{const[r,o]=t;yield{uri:r,value:o,decoded:Dn(o),start:t.index,end:t.index+r.length}}catch{}}function fl(e,n){return e.replaceAll(ii(),(t,r)=>n({uri:t,value:r,decoded:Dn(r)}))}ye({},{channelCreateEvent:()=>dl,channelHideMessageEvent:()=>pl,channelMessageEvent:()=>gl,channelMetadataEvent:()=>ml,channelMuteUserEvent:()=>vl});var oi,dl=(e,n)=>{let t;if("object"==typeof e.content)t=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;t=e.content}return Ve({kind:40,tags:[...e.tags??[]],content:t,created_at:e.created_at},n)},ml=(e,n)=>{let t;if("object"==typeof e.content)t=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;t=e.content}return Ve({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:t,created_at:e.created_at},n)},gl=(e,n)=>{const t=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&t.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Ve({kind:42,tags:[...t,...e.tags??[]],content:e.content,created_at:e.created_at},n)},pl=(e,n)=>{let t;if("object"==typeof e.content)t=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;t=e.content}return Ve({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:t,created_at:e.created_at},n)},vl=(e,n)=>{let t;if("object"==typeof e.content)t=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;t=e.content}return Ve({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:t,created_at:e.created_at},n)};ye({},{useFetchImplementation:()=>wl,validateGithub:()=>bl});try{oi=fetch}catch{}function wl(e){oi=e}function bl(e,n,t){return si.apply(this,arguments)}function si(){return(si=(0,y.A)(function*(e,n,t){try{return(yield(yield oi(`https://gist.github.com/${n}/${t}/raw`)).text())===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}})).apply(this,arguments)}ye({},{authenticate:()=>xl});var xl=function(){var e=(0,y.A)(function*({challenge:n,relay:t,sign:r}){const o={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",n]],content:""};return t.auth(yield r(o))});return function(t){return e.apply(this,arguments)}}();ye({},{decrypt:()=>kl,encrypt:()=>Ml,utils:()=>un});var li,un={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,n)=>pn.getSharedSecret(e,"02"+n).subarray(1,33),getMessageKeys(e,n){const t=((e,n,t,r,o)=>function ha(e,n,t,r=32){if(Ie.hash(e),Ie.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);void 0===t&&(t=ro);const a=new Uint8Array(o*e.outputLen),u=gn.create(e,n),f=u._cloneInto(),g=new Uint8Array(u.outputLen);for(let b=0;b<o;b++)Wr[0]=b+1,f.update(0===b?ro:g).update(t).update(Wr).digestInto(g),a.set(g,e.outputLen*b),u._cloneInto(f);return u.destroy(),f.destroy(),g.fill(0),Wr.fill(0),a.slice(0,r)}(e,function fa(e,n,t){return Ie.hash(e),void 0===t&&(t=new Uint8Array(e.outputLen)),gn(e,Oe(t),Oe(n))}(e,n,t),r,o))(We,e,n,"nip44-v2",76);return{encryption:t.subarray(0,32),nonce:t.subarray(32,44),auth:t.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const n=1<<Math.floor(Math.log2(e-1))+1,t=n<=256?32:n/8;return t*(Math.floor((e-1)/t)+1)},pad(e){const n=Le.encode(e),t=n.length;if(t<1||t>=un.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=un.v2.calcPadding(t),o=new Uint8Array(r-t),a=new Uint8Array(2);return new DataView(a.buffer).setUint16(0,t),Ze(a,n,o)},unpad(e){const n=new DataView(e.buffer).getUint16(0),t=e.subarray(2,2+n);if(0===n||t.length!==n||e.length!==2+un.v2.calcPadding(n))throw new Error("invalid padding");return Fe.decode(t)}}};function Ml(e,n,t={}){const r=t.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const o=t.salt??Xe(32);qr(o,32);const a=un.v2.getMessageKeys(e,o),u=un.v2.pad(n),f=to(a.encryption,a.nonce,u),g=gn(We,a.auth,f);return W.K3.encode(Ze(new Uint8Array([r]),o,f,g))}function kl(e,n){const t=un.v2;qr(e,32);const r=n.length;if(r<t.minCiphertextSize||r>=t.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===n[0])throw new Error("unknown encryption version");let o;try{o=W.K3.decode(n)}catch(F){throw new Error("invalid base64: "+F.message)}const a=o.subarray(0,1)[0];if(2!==a)throw new Error("unknown encryption version "+a);const u=o.subarray(1,33),f=o.subarray(33,-32),g=o.subarray(-32),b=t.getMessageKeys(e,u);if(!function Qs(e,n){if(e.length!==n.length)throw new Error("equalBytes: Different size of Uint8Arrays");let t=!0;for(let r=0;r<e.length;r++)t&&(t=e[r]===n[r]);return t}(gn(We,b.auth,f),g))throw new Error("invalid MAC");const T=to(b.encryption,b.nonce,f);return t.unpad(T)}function Al(e){const{pathname:n,searchParams:t}=new URL(e),r=n,o=t.get("relay"),a=t.get("secret");if(!r||!o||!a)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:a}}function Cl(e){return ai.apply(this,arguments)}function ai(){return(ai=(0,y.A)(function*({pubkey:e,secret:n,invoice:t}){const o=yield vo(n,e,JSON.stringify({method:"pay_invoice",params:{invoice:t}}));return Ve({kind:23194,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]},n)})).apply(this,arguments)}ye({},{makeNwcRequestEvent:()=>Cl,parseConnectionString:()=>Al}),ye({},{getZapEndpoint:()=>Rl,makeZapReceipt:()=>Nl,makeZapRequest:()=>Bl,useFetchImplementation:()=>Il,validateZapRequest:()=>Pl});try{li=fetch}catch{}function Il(e){li=e}function Rl(e){return ci.apply(this,arguments)}function ci(){return(ci=(0,y.A)(function*(e){try{let n="",{lud06:t,lud16:r}=JSON.parse(e.content);if(t){let{words:u}=W.I.decode(t,1e3),f=W.I.fromWords(u);n=Fe.decode(f)}else{if(!r)return null;{let[u,f]=r.split("@");n=`https://${f}/.well-known/lnurlp/${u}`}}let a=yield(yield li(n)).json();if(a.allowsNostr&&a.nostrPubkey)return a.callback}catch{}return null})).apply(this,arguments)}function Bl({profile:e,event:n,amount:t,relays:r,comment:o=""}){if(!t)throw new Error("amount not given");if(!e)throw new Error("profile not given");let a={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",t.toString()],["relays",...r]]};return n&&a.tags.push(["e",n]),a}function Pl(e){let n;try{n=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Kr(n))return"Zap request is not a valid Nostr event.";if(!lr(n))return"Invalid signature on zap request.";let t=n.tags.find(([a,u])=>"p"===a&&u);if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=n.tags.find(([a,u])=>"e"===a&&u);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":n.tags.find(([a,u])=>"relays"===a&&u)?null:"Zap request doesn't have a 'relays' tag."}function Nl({zapRequest:e,preimage:n,bolt11:t,paidAt:r}){let a=JSON.parse(e).tags.filter(([f])=>"e"===f||"p"===f||"a"===f),u={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...a,["bolt11",t],["description",e]]};return n&&u.tags.push(["preimage",n]),u}ye({},{getToken:()=>Ll,unpackEventFromToken:()=>Eo,validateEvent:()=>Mo,validateToken:()=>Dl});var xo="Nostr ";function Ll(e,n,t){return ui.apply(this,arguments)}function ui(){return(ui=(0,y.A)(function*(e,n,t,r=!1){if(!e||!n)throw new Error("Missing loginUrl or httpMethod");const o=function wa(e=255){return{kind:e,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",e],["method",n]],o.created_at=Math.round((new Date).getTime()/1e3);const a=yield t(o);return(r?xo:"")+W.K3.encode(Le.encode(JSON.stringify(a)))})).apply(this,arguments)}function Dl(e,n,t){return fi.apply(this,arguments)}function fi(){return(fi=(0,y.A)(function*(e,n,t){const r=yield Eo(e).catch(a=>{throw a});return yield Mo(r,n,t).catch(a=>{throw a})})).apply(this,arguments)}function Eo(e){return hi.apply(this,arguments)}function hi(){return(hi=(0,y.A)(function*(e){if(!e)throw new Error("Missing token");e=e.replace(xo,"");const n=Fe.decode(W.K3.decode(e));if(!n||0===n.length||!n.startsWith("{"))throw new Error("Invalid token");return JSON.parse(n)})).apply(this,arguments)}function Mo(e,n,t){return di.apply(this,arguments)}function di(){return(di=(0,y.A)(function*(e,n,t){if(!e)throw new Error("Invalid nostr event");if(!lr(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find(a=>"u"===a[0]);if(1!==r?.length&&r?.[1]!==n)throw new Error("Invalid nostr event, url tag invalid");const o=e.tags.find(a=>"method"===a[0]);if(1!==o?.length&&o?.[1].toLowerCase()!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0})).apply(this,arguments)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rt.apply(this,arguments)}const Ao=e=>e.reduce((n,t)=>n+t.toString(16).padStart(2,"0"),"");class Co extends Error{constructor(n,t,r,o){let a=n.toString();t&&(a+=` ${t}`),a+=": ",a+=o.message?o.message:JSON.stringify(o),super(a),this.status=void 0,this.statusText=void 0,this.headers=void 0,this.error=void 0,this.status=n,this.statusText=t,this.headers=r,this.error=o}}const Ol=["auth","endpoint","params","request_body","method","max_retries","base_url","user_agent","headers"],$l="https://api.getalby.com";function To(e,n){return gi.apply(this,arguments)}function gi(){return(gi=(0,y.A)(function*(e,n,t=0){const r=yield fetch(e,n);if(429===r.status&&t>0){const o=Number(r.headers.get("x-rate-limit-reset")),a=Number(r.headers.get("x-rate-limit-remaining")),u=1e3*o-Date.now();let f=1e3;return 0===a&&(f=u),yield new Promise(g=>setTimeout(g,f)),To(e,n,t-1)}return r})).apply(this,arguments)}function pi(){return(pi=(0,y.A)(function*(e){let{auth:n,endpoint:t,params:r={},request_body:o,method:a,max_retries:u,base_url:f=$l,user_agent:g,headers:b}=e,S=function mi(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}(e,Ol);const T=new URL(f+t);T.search=function ko(e){return Object.entries(e).map(([n,t])=>n&&t?`${n}=${t}`:"").filter(n=>n).join("&")}(r);const F="POST"===a&&!!o,D=n?yield n.getAuthHeader(T.href,a):void 0,L=yield To(T.toString(),Rt({headers:Rt({},F?{"Content-Type":"application/json; charset=utf-8"}:void 0,D,b,{"User-Agent":g??"@getalby/sdk","X-User-Agent":g??"@getalby/sdk"}),method:a,body:F?JSON.stringify(o):void 0},S),u);if(!L.ok){const N=yield L.json();throw new Co(L.status,L.statusText,L.headers,N)}return L})).apply(this,arguments)}function we(e){return vi.apply(this,arguments)}function vi(){return vi=(0,y.A)(function*(e){return(yield function jl(e){return pi.apply(this,arguments)}(e)).json()}),vi.apply(this,arguments)}class Ro{constructor(n){this.bearer_token=void 0,this.bearer_token=n}getAuthHeader(){return{Authorization:`Bearer ${this.bearer_token}`}}}class on extends Error{constructor(n,t){super(n),this.error=void 0,this.code=void 0,this.error=n,this.code=t}}class Bo extends on{}class yi extends on{}class wi extends yi{}class bi extends yi{}class _i extends on{}class xi extends on{}class mr extends on{}class Po extends on{}class No extends on{}const Uo={alby:{authorizationUrl:"https://nwc.getalby.com/apps/new",relayUrl:"wss://relay.getalby.com/v1",walletPubkey:"69effe7b49a6dd5cf525bd0905917a5005ffe480b58eeb8e861418cf3ae760d9"}};class $n{static parseWalletConnectUrl(n){n=n.replace("nostrwalletconnect://","http://").replace("nostr+walletconnect://","http://").replace("nostrwalletconnect:","http://").replace("nostr+walletconnect:","http://");const t=new URL(n),r=t.searchParams.get("relay");if(!r)throw new Error("No relay URL found in connection string");const o={walletPubkey:t.host,relayUrl:r},a=t.searchParams.get("secret");a&&(o.secret=a);const u=t.searchParams.get("lud16");return u&&(o.lud16=u),o}static withNewSecret(n){return(n=n||{}).secret=io(),new $n(n)}constructor(n){var t;this.relay=void 0,this.relayUrl=void 0,this.secret=void 0,this.lud16=void 0,this.walletPubkey=void 0,this.options=void 0,n&&n.nostrWalletConnectUrl&&(n=Rt({},$n.parseWalletConnectUrl(n.nostrWalletConnectUrl),n));const r=Uo[(null==(t=n)?void 0:t.providerName)||"alby"];this.options=Rt({},r,n||{}),this.relayUrl=this.options.relayUrl,this.relay=ho(this.relayUrl),this.options.secret&&(this.secret=this.options.secret.toLowerCase().startsWith("nsec")?Xr.decode(this.options.secret).data:this.options.secret),this.lud16=this.options.lud16,this.walletPubkey=this.options.walletPubkey.toLowerCase().startsWith("npub")?Xr.decode(this.options.walletPubkey).data:this.options.walletPubkey,void 0===globalThis.WebSocket&&console.error("WebSocket is undefined. Make sure to `import websocket-polyfill` for nodejs environments")}get nostrWalletConnectUrl(){return this.getNostrWalletConnectUrl()}getNostrWalletConnectUrl(n=!0){let t=`nostr+walletconnect://${this.walletPubkey}?relay=${this.relayUrl}&pubkey=${this.publicKey}`;return n&&(t=`${t}&secret=${this.secret}`),t}get connected(){return 1===this.relay.status}get publicKey(){if(!this.secret)throw new Error("Missing secret key");return Vr(this.secret)}getPublicKey(){return Promise.resolve(this.publicKey)}signEvent(n){if(!this.secret)throw new Error("Missing secret key");return Promise.resolve(Ve(n,this.secret))}getEventHash(n){return Ln(n)}close(){return this.relay.close()}encrypt(n,t){var r=this;return(0,y.A)(function*(){if(!r.secret)throw new Error("Missing secret");return yield Jr.encrypt(r.secret,n,t)})()}decrypt(n,t){var r=this;return(0,y.A)(function*(){if(!r.secret)throw new Error("Missing secret");return yield Jr.decrypt(r.secret,n,t)})()}getAuthorizationUrl(n){if(!this.options.authorizationUrl)throw new Error("Missing authorizationUrl option");const t=new URL(this.options.authorizationUrl);return null!=n&&n.name&&t.searchParams.set("name",n?.name),t.searchParams.set("pubkey",this.publicKey),null!=n&&n.returnTo&&t.searchParams.set("return_to",n.returnTo),null!=n&&n.budgetRenewal&&t.searchParams.set("budget_renewal",n.budgetRenewal),null!=n&&n.expiresAt&&t.searchParams.set("expires_at",Math.floor(n.expiresAt.getTime()/1e3).toString()),null!=n&&n.maxAmount&&t.searchParams.set("max_amount",n.maxAmount.toString()),void 0!==n?.editable&&t.searchParams.set("editable",n.editable.toString()),null!=n&&n.requestMethods&&t.searchParams.set("request_methods",n.requestMethods.join(" ")),t}initNWC(n={}){n.name||(n.name=document.location.host);const t=this.getAuthorizationUrl(n),r=window.outerHeight/2+window.screenY-300,o=window.outerWidth/2+window.screenX-200;return new Promise((a,u)=>{const f=window.open(t.toString(),`${document.title} - Wallet Connect`,`height=600,width=400,top=${r},left=${o}`);if(!f)return void u(new Error("failed to execute window.open"));const g=S=>{const T=S.data;T&&"nwc:success"===T.type&&S.origin===`${t.protocol}//${t.host}`&&(a(T),clearInterval(b),window.removeEventListener("message",g),f&&f.close())},b=setInterval(()=>{f&&f.closed&&(clearInterval(b),window.removeEventListener("message",g),u(new Error("Popup closed")))},500);window.addEventListener("message",g)})}getWalletServiceSupportedMethods(){var n=this;return(0,y.A)(function*(){return console.warn("getWalletServiceSupportedMethods is deprecated. Please use getWalletServiceInfo instead."),(yield n.getWalletServiceInfo()).capabilities})()}getWalletServiceInfo(){var n=this;return(0,y.A)(function*(){var t;yield n._checkConnected();const r=yield n.relay.list([{kinds:[13194],limit:1,authors:[n.walletPubkey]}],{eoseSubTimeout:1e4});if(!r.length)throw new Error("no info event (kind 13194) returned from relay");const o=r[0].content,a=r[0].tags.find(u=>"notifications"===u[0]);return{capabilities:o.split(/[ |,]/g),notifications:(null==a||null==(t=a[1])?void 0:t.split(" "))||[]}})()}getInfo(){var n=this;return(0,y.A)(function*(){try{return yield n.executeNip47Request("get_info",{},t=>!!t.methods)}catch(t){throw console.error("Failed to request get_info",t),t}})()}getBalance(){var n=this;return(0,y.A)(function*(){try{return yield n.executeNip47Request("get_balance",{},t=>void 0!==t.balance)}catch(t){throw console.error("Failed to request get_balance",t),t}})()}payInvoice(n){var t=this;return(0,y.A)(function*(){try{return yield t.executeNip47Request("pay_invoice",n,r=>!!r.preimage)}catch(r){throw console.error("Failed to request pay_invoice",r),r}})()}payKeysend(n){var t=this;return(0,y.A)(function*(){try{return yield t.executeNip47Request("pay_keysend",n,r=>!!r.preimage)}catch(r){throw console.error("Failed to request pay_keysend",r),r}})()}signMessage(n){var t=this;return(0,y.A)(function*(){try{return yield t.executeNip47Request("sign_message",n,r=>r.message===n.message&&!!r.signature)}catch(r){throw console.error("Failed to request sign_message",r),r}})()}multiPayInvoice(n){var t=this;return(0,y.A)(function*(){try{return{invoices:yield t.executeMultiNip47Request("multi_pay_invoice",n,n.invoices.length,r=>!!r.preimage),errors:[]}}catch(r){throw console.error("Failed to request multi_pay_invoice",r),r}})()}multiPayKeysend(n){var t=this;return(0,y.A)(function*(){try{return{keysends:yield t.executeMultiNip47Request("multi_pay_keysend",n,n.keysends.length,r=>!!r.preimage),errors:[]}}catch(r){throw console.error("Failed to request multi_pay_keysend",r),r}})()}makeInvoice(n){var t=this;return(0,y.A)(function*(){try{if(!n.amount)throw new Error("No amount specified");return yield t.executeNip47Request("make_invoice",n,r=>!!r.invoice)}catch(r){throw console.error("Failed to request make_invoice",r),r}})()}lookupInvoice(n){var t=this;return(0,y.A)(function*(){try{return yield t.executeNip47Request("lookup_invoice",n,r=>!!r.invoice)}catch(r){throw console.error("Failed to request lookup_invoice",r),r}})()}listTransactions(n){var t=this;return(0,y.A)(function*(){try{return yield t.executeNip47Request("list_transactions",n,r=>!!r.transactions)}catch(r){throw console.error("Failed to request list_transactions",r),r}})()}subscribeNotifications(n,t){var r=this;return(0,y.A)(function*(){var o=r;let a,u,f,g=!0;return(0,y.A)(function*(){for(;g;){try{yield o._checkConnected(),f=o.relay.sub([{kinds:[23196],authors:[o.walletPubkey],"#p":[o.publicKey]}]),console.info("subscribed to relay"),f.on("event",function(){var b=(0,y.A)(function*(S){const T=yield o.decrypt(o.walletPubkey,S.content);let F;try{F=JSON.parse(T)}catch(D){return void console.error("Failed to parse decrypted event content",D)}F.notification?(!t||t.indexOf(F.notification_type)>-1)&&n(F):console.error("No notification in response",F)});return function(S){return b.apply(this,arguments)}}()),yield new Promise(b=>{a=()=>{b()},u=()=>{console.info("relay disconnected"),a?.()},o.relay.on("disconnect",u)}),void 0!==u&&o.relay.off("disconnect",u)}catch(b){console.error("error subscribing to notifications",b||"unknown relay error")}g&&(yield new Promise(b=>setTimeout(b,1e3)))}})(),()=>{var b;g=!1,a?.(),null==(b=f)||b.unsub()}})()}executeNip47Request(n,t,r){var o=this;return(0,y.A)(function*(){var a=o;return yield o._checkConnected(),new Promise((u,f)=>{(0,y.A)(function*(){const g={method:n,params:t},b=yield a.encrypt(a.walletPubkey,JSON.stringify(g)),S={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",a.walletPubkey]],content:b,pubkey:a.publicKey},T=yield a.signEvent(S),F=a.relay.sub([{kinds:[23195],authors:[a.walletPubkey],"#e":[T.id]}]),D=setTimeout(function(){F.unsub(),f(new bi(`reply timeout: event ${T.id}`,"INTERNAL"))},6e4);F.on("event",function(){var N=(0,y.A)(function*(O){clearTimeout(D),F.unsub();const z=yield a.decrypt(a.walletPubkey,O.content);let V;try{V=JSON.parse(z)}catch{return clearTimeout(D),F.unsub(),void f(new xi("failed to deserialize response","INTERNAL"))}var Q,Y;V.result?r(V.result)?u(V.result):(clearTimeout(D),F.unsub(),f(new mr("response from NWC failed validation: "+JSON.stringify(V.result),"INTERNAL"))):(clearTimeout(D),F.unsub(),f(new Bo((null==(Q=V.error)?void 0:Q.message)||"unknown Error",(null==(Y=V.error)?void 0:Y.code)||"INTERNAL")))});return function(O){return N.apply(this,arguments)}}());const L=setTimeout(function(){F.unsub(),f(new wi(`publish timeout: ${T.id}`,"INTERNAL"))},5e3);try{yield a.relay.publish(T),clearTimeout(L)}catch(N){clearTimeout(L),f(new _i(`failed to publish: ${N}`,"INTERNAL"))}})()})})()}executeMultiNip47Request(n,t,r,o){var a=this;return(0,y.A)(function*(){var u=a;yield a._checkConnected();const f=[];return new Promise((g,b)=>{(0,y.A)(function*(){const S={method:n,params:t},T=yield u.encrypt(u.walletPubkey,JSON.stringify(S)),F={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",u.walletPubkey]],content:T,pubkey:u.publicKey},D=yield u.signEvent(F),L=u.relay.sub([{kinds:[23195],authors:[u.walletPubkey],"#e":[D.id]}]),N=setTimeout(function(){L.unsub(),b(new bi(`reply timeout: event ${D.id}`,"INTERNAL"))},6e4);L.on("event",function(){var z=(0,y.A)(function*(V){const Q=yield u.decrypt(u.walletPubkey,V.content);let Y;try{Y=JSON.parse(Q)}catch{clearTimeout(N),L.unsub(),b(new xi("failed to deserialize response","INTERNAL"))}if(Y.result){var rt;if(!o(Y.result))return clearTimeout(N),L.unsub(),void b(new mr("Response from NWC failed validation: "+JSON.stringify(Y.result),"INTERNAL"));const tt=null==(rt=V.tags.find(J=>"d"===J[0]))?void 0:rt[1];if(void 0===tt)return clearTimeout(N),L.unsub(),void b(new mr("No d tag found in response event","INTERNAL"));f.push(Rt({},Y.result,{dTag:tt})),f.length===r&&(clearTimeout(N),L.unsub(),g(f))}else{var q,K;clearTimeout(N),L.unsub(),b(new Po(null==(q=Y.error)?void 0:q.message,null==(K=Y.error)?void 0:K.code))}});return function(V){return z.apply(this,arguments)}}());const O=setTimeout(function(){L.unsub(),b(new wi(`Publish timeout: ${D.id}`,"INTERNAL"))},5e3);try{yield u.relay.publish(D),clearTimeout(O)}catch(z){clearTimeout(O),b(new _i(`Failed to publish: ${z}`,"INTERNAL"))}})()})})()}_checkConnected(){var n=this;return(0,y.A)(function*(){if(!n.secret)throw new Error("Missing secret key");try{yield n.relay.connect()}catch{throw console.error("failed to connect to relay",n.relayUrl),new No("Failed to connect to "+n.relayUrl,"OTHER")}})()}}const zl={get_info:"getInfo",get_balance:"getBalance",make_invoice:"makeInvoice",pay_invoice:"sendPayment",pay_keysend:"payKeysend",lookup_invoice:"lookupInvoice",list_transactions:"listTransactions",multi_pay_invoice:"sendMultiPayment",multi_pay_keysend:"multiKeysend",sign_message:"signMessage"};class gr{get relay(){return console.warn("relay is deprecated. Please use client.relay instead."),this.client.relay}get relayUrl(){return console.warn("relayUrl is deprecated. Please use client.relayUrl instead."),this.client.relayUrl}get walletPubkey(){return console.warn("walletPubkey is deprecated. Please use client.walletPubkey instead."),this.client.walletPubkey}get options(){return this.client.options}get secret(){return console.warn("secret is deprecated. Please use client.secret instead."),this.client.secret}static withNewSecret(n){return(n=n||{}).secret=io(),new gr(n)}constructor(n){this._enabled=!1,this.client=void 0,this.subscribers=void 0,this.client=new $n(n),this.subscribers={}}on(n,t){this.subscribers[n]=t}notify(n,t){const r=this.subscribers[n];r&&r(t)}getNostrWalletConnectUrl(n=!0){return console.warn("getNostrWalletConnectUrl is deprecated. Please use client.getNostrWalletConnectUrl instead."),this.client.getNostrWalletConnectUrl(n)}get nostrWalletConnectUrl(){return console.warn("nostrWalletConnectUrl is deprecated. Please use client.nostrWalletConnectUrl instead."),this.client.nostrWalletConnectUrl}get connected(){return console.warn("connected is deprecated. Please use client.connected instead."),this.client.connected}get publicKey(){return console.warn("publicKey is deprecated. Please use client.publicKey instead."),this.client.publicKey}getPublicKey(){return this.client.getPublicKey()}signEvent(n){return this.client.signEvent(n)}getEventHash(n){return console.warn("getEventHash is deprecated. Please use client.getEventHash instead."),this.client.getEventHash(n)}enable(){var n=this;return(0,y.A)(function*(){n._enabled=!0})()}close(){return this.client.close()}encrypt(n,t){var r=this;return(0,y.A)(function*(){return console.warn("encrypt is deprecated. Please use client.encrypt instead."),r.client.encrypt(n,t)})()}decrypt(n,t){var r=this;return(0,y.A)(function*(){return console.warn("decrypt is deprecated. Please use client.decrypt instead."),r.client.decrypt(n,t)})()}getAuthorizationUrl(n){return console.warn("getAuthorizationUrl is deprecated. Please use client.getAuthorizationUrl instead."),this.client.getAuthorizationUrl(n)}initNWC(n={}){return console.warn("initNWC is deprecated. Please use client.initNWC instead."),this.client.initNWC(n)}getInfo(){var n=this;return(0,y.A)(function*(){yield n.checkEnabled();const t=["lightning","nostr"],r="Alby JS SDK";try{const o=yield n.client.getInfo(),a={methods:o.methods.map(u=>zl[u]),node:{alias:o.alias,pubkey:o.pubkey,color:o.color},supports:t,version:r};return n.notify("getInfo",a),a}catch(o){return console.error("Using minimal getInfo",o),{methods:["sendPayment"],node:{},supports:t,version:r}}})()}getBalance(){var n=this;return(0,y.A)(function*(){yield n.checkEnabled();const t=yield n.client.getBalance(),r={balance:Math.floor(t.balance/1e3),currency:"sats"};return n.notify("getBalance",r),r})()}sendPayment(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const r={preimage:(yield t.client.payInvoice({invoice:n})).preimage};return t.notify("sendPayment",r),r})()}sendPaymentAsync(n){var t=this;return(0,y.A)(function*(){return yield t.checkEnabled(),t.client.payInvoice({invoice:n}),t.notify("sendPaymentAsync",{}),{}})()}keysend(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const r={preimage:(yield t.client.payKeysend(Lo(n))).preimage};return t.notify("keysend",r),r})()}signMessage(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const r=yield t.client.signMessage({message:n}),o={message:r.message,signature:r.signature};return t.notify("keysend",o),o})()}makeInvoice(n){var t=this;return(0,y.A)(function*(){var r;yield t.checkEnabled();const o="object"==typeof n?n:void 0,a=+(null!=(r=o?.amount)?r:n);if(!a)throw new Error("No amount specified");const u={paymentRequest:(yield t.client.makeInvoice({amount:1e3*a,description:o?.defaultMemo})).invoice};return t.notify("makeInvoice",u),u})()}lookupInvoice(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const r=yield t.client.lookupInvoice({invoice:n.paymentRequest,payment_hash:n.paymentHash}),o={preimage:r.preimage,paymentRequest:r.invoice,paid:!!r.settled_at};return t.notify("lookupInvoice",o),o})()}listTransactions(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const r={transactions:(yield t.client.listTransactions(n)).transactions.map(ql)};return t.notify("listTransactions",r),r})()}sendMultiPayment(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const o={payments:(yield t.client.multiPayInvoice({invoices:n.map((a,u)=>({invoice:a,id:u.toString()}))})).invoices.map(a=>{const u=n[parseInt(a.dTag)];if(!u)throw new Error("Could not find paymentRequest matching response d tag");return{paymentRequest:u,preimage:a.preimage}}),errors:[]};return t.notify("sendMultiPayment",o),o})()}multiKeysend(n){var t=this;return(0,y.A)(function*(){yield t.checkEnabled();const o={keysends:(yield t.client.multiPayKeysend({keysends:n.map((a,u)=>Rt({},Lo(a),{id:u.toString()}))})).keysends.map(a=>{const u=n[parseInt(a.dTag)];if(!u)throw new Error("Could not find keysend matching response d tag");return{keysend:u,preimage:a.preimage}}),errors:[]};return t.notify("multiKeysend",o),o})()}lnurl(n){throw new Error("Method not implemented.")}request(n,t){throw new Error("Method not implemented.")}verifyMessage(n,t){throw new Error("Method not implemented.")}checkEnabled(){var n=this;return(0,y.A)(function*(){if(!n._enabled)throw new Error("please call enable() and await the promise before calling this function")})()}}function ql(e){return Rt({},e,{amount:Math.floor(e.amount/1e3),fees_paid:e.fees_paid?Math.floor(e.fees_paid/1e3):0})}function Lo(e){return{amount:1e3*+e.amount,pubkey:e.destination,tlv_records:e.customRecords?Object.entries(e.customRecords).map(n=>({type:parseInt(n[0]),value:Ao((new TextEncoder).encode(n[1]))})):[]}}const Hl=gr;function Do(e){const n={};return e.recipient.customKey&&e.recipient.customValue&&(n[e.recipient.customKey]=e.recipient.customValue),n[7629169]=JSON.stringify(e.boostagram),{destination:e.recipient.address,amount:e.amount,custom_records:n}}class Oo{constructor(n,t){this.auth=void 0,this.defaultRequestOptions=void 0,this.auth="string"==typeof n?new Ro(n):n,this.defaultRequestOptions=Rt({},t,{user_agent:t?.user_agent})}accountBalance(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/balance",params:n,method:"GET"}))}accountSummary(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/summary",params:n,method:"GET"}))}accountInformation(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/me",params:n,method:"GET"}))}accountValue4Value(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/value4value",params:n,method:"GET"}))}incomingInvoices(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices/incoming",params:n,method:"GET"}))}outgoingInvoices(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices/outgoing",params:n,method:"GET"}))}invoices(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices",params:n,method:"GET"}))}getInvoice(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/invoices/${n}`,method:"GET"}))}decodeInvoice(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/decode/bolt11/${n}`,method:"GET"}))}createInvoice(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices",request_body:n,method:"POST"}))}keysend(n,t){let r,o;return Array.isArray(n)?(r="/payments/keysend/multi",o={keysends:n.map(a=>Rt({},a,{custom_records:a.customRecords}))}):(r="/payments/keysend",o=Rt({},n,{custom_records:n.customRecords})),we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:r,request_body:o,method:"POST"}))}sendPayment(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/payments/bolt11",request_body:n,method:"POST"}))}sendBoostagram(n,t){let r,o;return Array.isArray(n)?(r="/payments/keysend/multi",o={keysends:n.map(a=>Do(a))}):(r="/payments/keysend",o=Do(n)),we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:r,request_body:o,method:"POST"}))}sendToAlbyAccount(n,t){return console.warn("sendToAlbyAccount is deprecated. Please use sendBoostagramToAlbyAccount instead."),this.sendBoostagramToAlbyAccount(n,t)}sendBoostagramToAlbyAccount(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/payments/keysend",request_body:{destination:"030a58b8653d32b99200a2334cfe913e51dc7d155aa0116c176657a4f1722677a3",custom_records:{696969:n.account},amount:n.amount,memo:n.memo},method:"POST"}))}createWebhookEndpoint(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/webhook_endpoints",request_body:n,method:"POST"}))}deleteWebhookEndpoint(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/webhook_endpoints/${n}`,method:"DELETE"}))}getSwapInfo(n){return we(Rt({auth:this.auth},this.defaultRequestOptions,n,{endpoint:"/swaps/info",method:"GET"}))}createSwap(n,t){return we(Rt({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/swaps",method:"POST",request_body:n}))}}var pr={__proto__:null,NostrWebLNProvider:gr,NWC:Hl,OauthWeblnProvider:class{constructor(e){this.client=void 0,this.auth=void 0,this.oauth=void 0,this.subscribers=void 0,this.isExecuting=void 0,this.auth=e.auth,this.client=new Oo(e.auth),this.oauth=!0,this.subscribers={},this.isExecuting=!1}on(e,n){this.subscribers[e]=n}notify(e,n){const t=this.subscribers[e];t&&t(n)}enable(){var e=this;return(0,y.A)(function*(){var n;if(!e.isExecuting){if(null!=(n=e.auth.token)&&n.access_token)return{enabled:!0};if(typeof window>"u"||void 0===window.document)throw new Error("Missing access token");try{e.isExecuting=!0,yield e.openAuthorization()}finally{e.isExecuting=!1}}})()}sendPayment(e){var n=this;return(0,y.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const t=yield n.client.sendPayment({invoice:e});return n.notify("sendPayment",t),{preimage:t.payment_preimage}}catch(t){let r="Unknown Error";throw t instanceof Error&&(r=t.message),new Error(r)}finally{n.isExecuting=!1}})()}keysend(e){var n=this;return(0,y.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const t=yield n.client.keysend(e);return n.notify("keysend",t),{preimage:t.payment_preimage}}catch(t){let r="Unknown Error";throw t instanceof Error&&(r=t.message),new Error(r)}finally{n.isExecuting=!1}})()}getInfo(){return(0,y.A)(function*(){return{alias:"Alby"}})()}makeInvoice(e){var n=this;return(0,y.A)(function*(){if(!n.isExecuting)try{n.isExecuting=!0;const t=yield n.client.createInvoice({amount:parseInt(e.amount.toString()),description:e.defaultMemo});return n.notify("makeInvoice",t),{paymentRequest:t.payment_request}}catch(t){let r="Unknown Error";throw t instanceof Error&&(r=t.message),new Error(r)}finally{n.isExecuting=!1}})()}openAuthorization(){var e=this;return(0,y.A)(function*(){var n=e;const t=window.outerHeight/2+window.screenY-350,r=window.outerWidth/2+window.screenX-300,o=yield e.auth.generateAuthURL({code_challenge_method:"S256"});return new Promise((a,u)=>{const f=window.open(o,`${document.title} - WebLN enable`,`height=700,width=600,top=${t},left=${r}`);let g=!1;window.addEventListener("message",function(){var b=(0,y.A)(function*(S){const T=S.data;if(T&&"alby:oauth:success"===T.type&&S.origin===`${document.location.protocol}//${document.location.host}`&&!g){g=!0,console.info("Processing OAuth code response");const F=T.payload.code;try{yield n.auth.requestAccessToken(F),n.client=new Oo(n.auth),f&&f.close(),n.notify("enable"),a({enabled:!0})}catch(D){console.error(D),u({enabled:!1})}}});return function(S){return b.apply(this,arguments)}}())})})()}}},Ge=k(9969),wn=k(6939),Wl=k(6860),Vl=k(9888),$o=k(9327),jo=k(7987);function Yl(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",1)(1,"button",2),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.action())}),i.EFF(2),i.k0s()()}if(2&e){const t=i.XpG();i.R7$(2),i.SpI(" ",t.data.action," ")}}const Kl=["label"];function Zl(e,n){}const Xl=Math.pow(2,31)-1;class Ei{constructor(n,t){this._overlayRef=t,this._afterDismissed=new Ne.B,this._afterOpened=new Ne.B,this._onAction=new Ne.B,this._dismissedByAction=!1,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,Xl))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const Fo=new i.nKC("MatSnackBarData");class vr{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Go=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275dir=i.FsC({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}return e})(),zo=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275dir=i.FsC({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}return e})(),qo=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275dir=i.FsC({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}return e})(),Ql=(()=>{class e{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(Ei),i.rXU(Fo))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[i.aNF],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){1&r&&(i.j41(0,"div",0),i.EFF(1),i.k0s(),i.DNE(2,Yl,3,1,"div",1)),2&r&&(i.R7$(),i.SpI(" ",o.data.message,"\n"),i.R7$(),i.vxM(o.hasAction?2:-1))},dependencies:[R.$z,Go,zo,qo],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return e})();const Jl={snackBarState:(0,Ge.hZ)("state",[(0,Ge.wk)("void, hidden",(0,Ge.iF)({transform:"scale(0.8)",opacity:0})),(0,Ge.wk)("visible",(0,Ge.iF)({transform:"scale(1)",opacity:1})),(0,Ge.kY)("* => visible",(0,Ge.i0)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,Ge.kY)("* => void, * => hidden",(0,Ge.i0)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,Ge.iF)({opacity:0})))])};let tc=0,Ho=(()=>{class e extends wn.lb{constructor(t,r,o,a,u){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=u,this._document=(0,i.WQX)(m.qQ),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ne.B,this._onExit=new Ne.B,this._onEnter=new Ne.B,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+tc++,this.attachDomPortal=f=>{this._assertNotAttached();const g=this._portalOutlet.attachDomPortal(f);return this._afterPortalAttached(),g},this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:o}=t;if(("void"===o&&"void"!==r||"hidden"===o)&&this._completeExit(),"visible"===o){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(u=>t.classList.add(u)):t.classList.add(r)),this._exposeToModals();const o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){const t=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){const a=r[o],u=a.getAttribute("aria-owns");this._trackedModals.add(a),u?-1===u.indexOf(t)&&a.setAttribute("aria-owns",u+" "+t):a.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const r=t.getAttribute("aria-owns");if(r){const o=r.replace(this._liveElementId,"").trim();o.length>0?t.setAttribute("aria-owns",o):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(o=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(i.SKi),i.rXU(i.aKT),i.rXU(i.gRc),i.rXU(Wl.OD),i.rXU(vr))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(1&r&&(i.GBs(wn.I3,7),i.GBs(Kl,7)),2&r){let a;i.mGM(a=i.lsd())&&(o._portalOutlet=a.first),i.mGM(a=i.lsd())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(r,o){1&r&&i.Kam("@state.done",function(u){return o.onAnimationEnd(u)}),2&r&&i.zvX("@state",o._animationState)},standalone:!0,features:[i.Vt3,i.aNF],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){1&r&&(i.j41(0,"div",1)(1,"div",2,0)(3,"div",3),i.DNE(4,Zl,0,0,"ng-template",4),i.k0s(),i.nrm(5,"div"),i.k0s()()),2&r&&(i.R7$(5),i.BMQ("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[wn.I3],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[Jl.snackBarState]}})}return e})();const nc=new i.nKC("mat-snack-bar-default-options",{providedIn:"root",factory:function ec(){return new vr}});let Mi=(()=>{class e{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,r,o,a,u,f){this._overlay=t,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=u,this._defaultConfig=f,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Ql,this.snackBarContainerComponent=Ho,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",o){const a={...this._defaultConfig,...o};return a.data={message:t,action:r},a.announcementMessage===t&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const a=i.zZn.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:vr,useValue:r}]}),u=new wn.A8(this.snackBarContainerComponent,r.viewContainerRef,a),f=t.attach(u);return f.instance.snackBarConfig=r,f.instance}_attach(t,r){const o={...new vr,...this._defaultConfig,...r},a=this._createOverlay(o),u=this._attachSnackBarContainer(a,o),f=new Ei(u,a);if(t instanceof i.C4Q){const g=new wn.VA(t,null,{$implicit:o.data,snackBarRef:f});f.instance=u.attachTemplatePortal(g)}else{const g=this._createInjector(o,f),b=new wn.A8(t,void 0,g),S=u.attachComponentPortal(b);f.instance=S.instance}return this._breakpointObserver.observe($o.Rp.HandsetPortrait).pipe((0,Dt.Q)(a.detachments())).subscribe(g=>{a.overlayElement.classList.toggle(this.handsetCssClass,g.matches)}),o.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(f,o),this._openedSnackBarRef=f,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new jo.rR;r.direction=t.direction;let o=this._overlay.position().global();const a="rtl"===t.direction,u="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!a||"end"===t.horizontalPosition&&a,f=!u&&"center"!==t.horizontalPosition;return u?o.left("0"):f?o.right("0"):o.centerHorizontally(),"top"===t.verticalPosition?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(t,r){return i.zZn.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:Ei,useValue:r},{provide:Fo,useValue:t.data}]})}static#t=this.\u0275fac=function(r){return new(r||e)(i.KVO(jo.hJ),i.KVO(Vl.Ai),i.KVO(i.zZn),i.KVO($o.QP),i.KVO(e,12),i.KVO(nc))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class rc{constructor(n,t){this._document=t;const r=this._textarea=this._document.createElement("textarea"),o=r.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",r.setAttribute("aria-hidden","true"),r.value=n,r.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(r)}copy(){const n=this._textarea;let t=!1;try{if(n){const r=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),t=this._document.execCommand("copy"),r&&r.focus()}}catch{}return t}destroy(){const n=this._textarea;n&&(n.remove(),this._textarea=void 0)}}let Wo=(()=>{class e{constructor(t){this._document=t}copy(t){const r=this.beginCopy(t),o=r.copy();return r.destroy(),o}beginCopy(t){return new rc(t,this._document)}static#t=this.\u0275fac=function(r){return new(r||e)(i.KVO(m.qQ))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ic(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",10),i.bIt("click",function(){const o=i.eBV(t).$implicit,a=i.XpG(2);return i.Njj(a.invoiceAmount=o.value)}),i.j41(1,"mat-icon"),i.EFF(2),i.k0s(),i.j41(3,"span"),i.EFF(4),i.k0s()()}if(2&e){const t=n.$implicit;i.R7$(2),i.JRh(t.icon),i.R7$(2),i.JRh(t.label)}}function oc(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-dialog-content")(1,"div",4),i.DNE(2,ic,5,2,"button",5),i.k0s(),i.nrm(3,"mat-divider"),i.j41(4,"mat-form-field",6)(5,"mat-label"),i.EFF(6,"Zap Amount"),i.k0s(),i.j41(7,"input",7),i.mxI("ngModelChange",function(o){i.eBV(t);const a=i.XpG();return i.DH7(a.invoiceAmount,o)||(a.invoiceAmount=o),i.Njj(o)}),i.k0s()(),i.j41(8,"mat-dialog-actions",8)(9,"button",9),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.generateInvoice())}),i.EFF(10," Generate Invoice "),i.k0s()()()}if(2&e){const t=i.XpG();i.R7$(2),i.Y8G("ngForOf",t.zapButtons),i.R7$(5),i.R50("ngModel",t.invoiceAmount)}}function sc(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",12)(1,"span"),i.EFF(2),i.k0s(),i.nrm(3,"mat-divider")(4,"qrcode",13),i.j41(5,"mat-dialog-actions",14)(6,"button",15),i.bIt("click",function(){i.eBV(t);const o=i.XpG(2);return i.Njj(o.copyInvoice())}),i.nrm(7,"mat-icon",16),i.k0s()()()}if(2&e){const t=i.XpG(2);i.R7$(2),i.SpI("Scan with phone to pay (",t.invoiceAmount," sats)"),i.R7$(2),i.Y8G("qrdata",t.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M"),i.R7$(2),i.Y8G("matTooltip","Copy Invoice"),i.R7$(),i.Y8G("svgIcon","heroicons_outline:clipboard-document")}}function ac(e,n){if(1&e&&(i.j41(0,"mat-dialog-content"),i.DNE(1,sc,8,6,"div",11),i.k0s()),2&e){const t=i.XpG();i.R7$(),i.Y8G("ngIf",t.displayQRCode)}}let lc=(()=>{class e{constructor(t,r,o){this.dialogRef=t,this.snackBar=r,this.clipboard=o,this.invoiceAmount="",this.lightningInvoice="",this.displayQRCode=!1,this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}]}generateInvoice(){var t=this;return(0,y.A)(function*(){if(!t.invoiceAmount||Number(t.invoiceAmount)<=0)t.openSnackBar("Please enter a valid amount","dismiss");else try{t.nwc=new pr.NostrWebLNProvider({nostrWalletConnectUrl:yield t.loadNWCUrl()}),yield t.nwc.enable();const r=yield t.nwc.makeInvoice({amount:Number(t.invoiceAmount)});t.lightningInvoice=r.paymentRequest,t.showQRCode()}catch(r){console.error("Error generating invoice:",r),t.openSnackBar("Failed to generate invoice","dismiss")}})()}loadNWCUrl(){return(0,y.A)(function*(){try{const t=pr.NostrWebLNProvider.withNewSecret();return yield t.initNWC({name:"Angor Hub"}),t.getNostrWalletConnectUrl()}catch(t){throw console.error("Error initializing NWC:",t),new Error("Failed to initialize NWC provider")}})()}showQRCode(){this.displayQRCode=!this.displayQRCode}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(t,r){this.snackBar.open(t,r,{duration:1300})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(Lt.CP),i.rXU(Mi),i.rXU(Wo))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["app-receive-dialog"]],standalone:!0,features:[i.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"],["align","center"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"]],template:function(r,o){1&r&&(i.j41(0,"div",0)(1,"button",1),i.nrm(2,"mat-icon",2),i.k0s()(),i.j41(3,"h2"),i.EFF(4,"\u26a1 Receive Zap"),i.k0s(),i.DNE(5,oc,11,2,"mat-dialog-content",3)(6,ac,2,1,"mat-dialog-content",3)),2&r&&(i.R7$(),i.Y8G("matDialogClose",void 0),i.R7$(),i.Y8G("svgIcon","heroicons_outline:x-mark"),i.R7$(3),i.Y8G("ngIf",!o.displayQRCode),i.R7$(),i.Y8G("ngIf",o.displayQRCode))},dependencies:[Vt.vg,R.Hl,R.$z,R.iY,R.$0,et.m_,et.An,C.YN,C.me,C.Q0,C.BC,C.vS,$.nJ,$.rl,C.X1,m.MD,m.Sq,m.bT,En.Ve,$.RG,ut.fS,ut.fg,Lt.Yi,Lt.E7,ot,it,B.q,j.oV,Lt.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}return e})();for(var Vo=k(1146),cc=k(3838),Ye=k(917),Yo={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Ko={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Zo={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Xo={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Qo={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},jn=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],uc={m:new Ye.BN(1e3,10),u:new Ye.BN(1e6,10),n:new Ye.BN(1e9,10),p:new Ye.BN(1e12,10)},fc=new Ye.BN("2100000000000000000",10),Jo=new Ye.BN(1e11,10),ki={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},ts={},yr=0,Si=Object.keys(ki);yr<Si.length;yr++){var hc=Si[yr],dc=ki[Si[yr]].toString();ts[dc]=hc}var mc={1:function(e){return sn(e,!0)},16:function(e){return sn(e,!0)},13:function(e){return sn(e,!0).toString("utf8")},19:function(e){return sn(e,!0)},23:function(e){return sn(e,!0)},27:function(e){return sn(e,!0)},6:wr,24:wr,3:function vc(e){for(var t,r,o,a,u,n=[],f=sn(e,!0);f.length>0;)t=f.slice(0,33).toString("hex"),r=f.slice(33,41).toString("hex"),o=parseInt(f.slice(41,45).toString("hex"),16),a=parseInt(f.slice(45,49).toString("hex"),16),u=parseInt(f.slice(49,51).toString("hex"),16),f=f.slice(51),n.push({pubkey:t,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:a,cltv_expiry_delta:u});return n},5:function yc(e){for(var n=e.slice().reverse().map(function(o){return[!!(1&o),!!(2&o),!!(4&o),!!(8&o),!!(16&o)]}).reduce(function(o,a){return o.concat(a)},[]);n.length<2*jn.length;)n.push(!1);var t={extra_bits:{}};if(jn.forEach(function(o,a){var u;n[2*a]?u="required":n[2*a+1]&&(u="supported"),t[o]=u}),n.length>2*jn.length){var r=n.slice(2*jn.length);t.extra_bits={start_bit:2*jn.length,bits:r,required:r.reduce(function(o,a,u){return u%2!=0?o||!1:o||a},!1)}}return t}};function gc(e){return function(n){return{tagCode:parseInt(e),words:Vo.encode("unknown",n,Number.MAX_SAFE_INTEGER)}}}function wr(e){return e.reverse().reduce(function(n,t,r){return n+t*Math.pow(32,r)},0)}function sn(e,n){var t=cc.hp.from(function pc(e,n,t){for(var r=0,o=0,a=(1<<t)-1,u=[],f=0;f<e.length;++f)for(r=r<<n|e[f],o+=n;o>=t;)u.push(r>>(o-=t)&a);return o>0&&u.push(r<<t-o&a),u}(e,5,8));return n&&5*e.length%8!=0&&(t=t.slice(0,-1)),t}var Ai=k(7673),Ci=k(9437),_c=k(1626);let es=(()=>{class e{constructor(t){this.http=t}getLightning(t){return this.http.get(t).pipe((0,Ci.W)(r=>(console.error("Failed to fetch Lightning response:",r),(0,Ai.of)({status:"Failed"}))))}getLightningInvoice(t,r){return this.http.get(`${t}?amount=${r}`).pipe((0,Ci.W)(a=>(console.error("Failed to fetch Lightning invoice:",a),(0,Ai.of)({pr:"",status:"Failed"}))))}getLightningAddress(t){try{const[r,o]=t.split("@");return`https://${o}/.well-known/lnurlp/${r}`}catch{return console.error("Invalid Lightning address format:",t),""}}sendZapRequest(t,r,o,a){const u=encodeURIComponent(JSON.stringify(r));return this.http.get(`${t}?amount=${o}&nostr=${u}&lnurl=${a}`).pipe((0,Ci.W)(g=>(console.error("Failed to send zap request:",g),(0,Ai.of)({pr:"",status:"Failed"}))))}login(){return(0,y.A)(function*(){try{return window.webln&&!window.webln.isEnabled()&&(yield window.webln.enable()),!0}catch(t){return console.error("WebLN login failed:",t),!1}})()}hasWebln(){return!!window.webln}sendPayment(t){var r=this;return(0,y.A)(function*(){try{return r.hasWebln()?yield window.webln.sendPayment(t):(console.error("WebLN is not available"),null)}catch(o){throw console.error("Payment failed:",o),o}})()}payInvoice(t){var r=this;return(0,y.A)(function*(){if((yield r.login())&&r.hasWebln())try{return!!(yield r.sendPayment(t))}catch(a){return console.error("Failed to pay invoice:",a),!1}return console.error("WebLN not available or login failed"),!1})()}static#t=this.\u0275fac=function(r){return new(r||e)(i.KVO(_c.Qq))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xc(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",10),i.bIt("click",function(){const o=i.eBV(t).$implicit,a=i.XpG(2);return i.Njj(a.sats=o.value)}),i.j41(1,"mat-icon"),i.EFF(2),i.k0s(),i.j41(3,"span"),i.EFF(4),i.k0s()()}if(2&e){const t=n.$implicit;i.R7$(2),i.JRh(t.icon),i.R7$(2),i.JRh(t.label)}}function Ec(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-dialog-content")(1,"div",4),i.DNE(2,xc,5,2,"button",5),i.k0s(),i.nrm(3,"mat-divider"),i.j41(4,"mat-form-field",6)(5,"mat-label"),i.EFF(6,"Zap Amount"),i.k0s(),i.j41(7,"input",7),i.mxI("ngModelChange",function(o){i.eBV(t);const a=i.XpG();return i.DH7(a.sats,o)||(a.sats=o),i.Njj(o)}),i.k0s()(),i.j41(8,"mat-dialog-actions",8)(9,"button",9),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.sendZap())}),i.EFF(10," Create invoice "),i.k0s()()()}if(2&e){const t=i.XpG();i.R7$(2),i.Y8G("ngForOf",t.zapButtons),i.R7$(5),i.R50("ngModel",t.sats)}}function Mc(e,n){if(1&e&&(i.j41(0,"div",16)(1,"span"),i.EFF(2),i.k0s(),i.nrm(3,"mat-divider")(4,"qrcode",17),i.k0s()),2&e){const t=i.XpG(2);i.R7$(2),i.SpI("Scan with phone to pay (",t.invoiceAmount," sats)"),i.R7$(2),i.Y8G("qrdata",t.lightningInvoice)("matTooltip","Lightning Invoice")("errorCorrectionLevel","M")}}function kc(e,n){if(1&e){const t=i.RV6();i.j41(0,"mat-dialog-content"),i.DNE(1,Mc,5,4,"div",11),i.j41(2,"mat-dialog-actions",12)(3,"button",13),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.copyInvoice())}),i.nrm(4,"mat-icon",14),i.k0s(),i.j41(5,"button",13),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.payInvoice())}),i.nrm(6,"mat-icon",15),i.k0s()()()}if(2&e){const t=i.XpG();i.R7$(),i.Y8G("ngIf",t.displayQRCode),i.R7$(2),i.Y8G("matTooltip","Copy Invoice"),i.R7$(),i.Y8G("svgIcon","heroicons_outline:clipboard-document"),i.R7$(),i.Y8G("matTooltip","Pay Invoice"),i.R7$(),i.Y8G("svgIcon","feather:zap")}}let Sc=(()=>{class e{constructor(t,r,o,a,u){this.dialogRef=t,this.metadata=r,this.lightning=o,this.snackBar=a,this.clipboard=u,this.lightningInvoice="",this.showInvoiceSection=!1,this.displayQRCode=!1,this.invoiceAmount="?",this.zapButtons=[{icon:"thumb_up",label:"50",value:50},{icon:"favorite",label:"100",value:100},{icon:"emoji_emotions",label:"500",value:500},{icon:"star",label:"1k",value:1e3},{icon:"celebration",label:"5k",value:5e3},{icon:"rocket",label:"10k",value:1e4},{icon:"local_fire_department",label:"100k",value:1e5},{icon:"flash_on",label:"500k",value:5e5},{icon:"diamond",label:"1M",value:1e6}],this.getLightningInfo()}getLightningInfo(){let t="";if(this.metadata?.lud06){const{words:r}=W.I.decode(this.metadata.lud06,5e3),o=new Uint8Array(W.I.fromWords(r));t=(new TextDecoder).decode(Uint8Array.from(o))}else if(this.metadata?.lud16?.toLowerCase().startsWith("lnurl")){const{words:r}=W.I.decode(this.metadata.lud16,5e3),o=new Uint8Array(W.I.fromWords(r));t=(new TextDecoder).decode(Uint8Array.from(o))}else this.metadata?.lud16&&(t=this.lightning.getLightningAddress(this.metadata.lud16));""!==t?this.lightning.getLightning(t).subscribe(r=>{this.lightningResponse=r,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.showInvoiceSection=!0:this.openSnackBar("Couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}getLightningInvoice(t){var r=this;this.lightningResponse&&this.lightningResponse.callback&&this.lightning.getLightningInvoice(this.lightningResponse.callback,t).subscribe(function(){var o=(0,y.A)(function*(a){r.lightningInvoice=a.pr,r.setInvoiceAmount(r.lightningInvoice),r.showInvoiceSection=!0,r.showQRCode()});return function(a){return o.apply(this,arguments)}}())}setInvoiceAmount(t){if(t){const o=function bc(e,n){if("string"!=typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");var t=[],r=Vo.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();var o=r.prefix,a=r.words,u=e.slice(o.length+1),f=a.slice(-104);a=a.slice(0,-104);var g=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(g&&!g[2]&&(g=o.match(/^ln(\S+)$/)),!g)throw new Error("Not a proper lightning payment request");t.push({name:"lightning_network",letters:"ln"});var S,b=g[1];if(n){if(void 0===n.bech32||void 0===n.pubKeyHash||void 0===n.scriptHash||!Array.isArray(n.validWitnessVersions))throw new Error("Invalid network");S=n}else switch(b){case Yo.bech32:S=Yo;break;case Ko.bech32:S=Ko;break;case Zo.bech32:S=Zo;break;case Xo.bech32:S=Xo;break;case Qo.bech32:S=Qo}if(!S||S.bech32!==b)throw new Error("Unknown coin bech32 prefix");t.push({name:"coin_network",letters:b,value:S});var F,T=g[2];T?(F=function wc(e,n){var t,r;if(e.slice(-1).match(/^[munp]$/))t=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");var o=new Ye.BN(r,10),a=t?o.mul(Jo).div(uc[t]):o.mul(Jo);if("p"===t&&!o.mod(new Ye.BN(10,10)).eq(new Ye.BN(0,10))||a.gt(fc))throw new Error("Amount is outside of valid range");return n?a.toString():a}(T+g[3],!0),t.push({name:"amount",letters:g[2]+g[3],value:F})):F=null,t.push({name:"separator",letters:"1"});var N,O,z,V,L=wr(a.slice(0,7));for(a=a.slice(7),t.push({name:"timestamp",letters:u.slice(0,7),value:L}),u=u.slice(7);a.length>0;){var Q=a[0].toString();N=ts[Q]||"unknown_tag",O=mc[Q]||gc(Q),z=wr((a=a.slice(1)).slice(0,2)),V=(a=a.slice(2)).slice(0,z),a=a.slice(z),t.push({name:N,tag:u[0],letters:u.slice(0,3+z),value:O(V)}),u=u.slice(3+z)}t.push({name:"signature",letters:u.slice(0,104),value:sn(f,!0)}),u=u.slice(104),t.push({name:"checksum",letters:u});var Y={paymentRequest:e,sections:t,get expiry(){var tt=t.find(function(J){return"expiry"===J.name});if(tt)return K("timestamp")+tt.value},get route_hints(){return t.filter(function(tt){return"route_hint"===tt.name}).map(function(tt){return tt.value})}},rt=function(tt){if("route_hint"===tt)return"continue";Object.defineProperty(Y,tt,{get:function(){return K(tt)}})};for(var q in ki)rt(q);return Y;function K(tt){var J=t.find(function(yt){return yt.name===tt});return J?J.value:void 0}}(t).sections.find(a=>"amount"===a.name);o&&(this.invoiceAmount=String(Number(o.value)/1e3))}}showQRCode(){this.displayQRCode=!this.displayQRCode}sendZap(){this.getLightningInvoice(String(1e3*Number(this.sats)))}payInvoice(){var t=this;return(0,y.A)(function*(){if(!t.lightningInvoice)return void console.error("Lightning invoice is not set");const r=new pr.NostrWebLNProvider({nostrWalletConnectUrl:yield t.loadNWCUrl()});r.enable().then(()=>r.sendPayment(t.lightningInvoice)).then(o=>{o&&o.preimage?(console.log(`Payment successful, preimage: ${o.preimage}`),t.openSnackBar("Zapped!","dismiss"),t.dialogRef.close()):t.listenForPaymentStatus(r)}).catch(o=>{console.error("Payment failed:",o),t.openSnackBar("Failed to pay invoice","dismiss"),t.listenForPaymentStatus(r)})})()}loadNWCUrl(){const t=pr.NostrWebLNProvider.withNewSecret();return t.initNWC({name:"Angor Hub"}).then(()=>t.getNostrWalletConnectUrl()).catch(r=>{throw console.error("Error initializing NWC:",r),r})}listenForPaymentStatus(t){const r=()=>{t.sendPayment(this.lightningInvoice).then(o=>{o&&o.preimage?(console.log("Payment confirmed, preimage:",o.preimage),this.openSnackBar("Payment confirmed!","dismiss"),this.dialogRef.close()):setTimeout(r,5e3)}).catch(o=>{console.error("Error checking payment status:",o),setTimeout(r,5e3)})};r()}copyInvoice(){this.lightningInvoice?(this.clipboard.copy(this.lightningInvoice),this.openSnackBar("Invoice copied","dismiss")):this.openSnackBar("No invoice available to copy","dismiss")}openSnackBar(t,r){this.snackBar.open(t,r,{duration:1300})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(Lt.CP),i.rXU(Lt.Vh),i.rXU(es),i.rXU(Mi),i.rXU(Wo))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["app-send-dialog"]],standalone:!0,features:[i.aNF],decls:7,vars:4,consts:[[1,"absolute","right-0","top-0","pr-4","pt-4"],["mat-icon-button","",3,"matDialogClose"],[1,"text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"preset-buttons"],["mat-mini-fab","","color","primary",3,"click",4,"ngFor","ngForOf"],["appearance","outline",1,"sats-input"],["matInput","","placeholder","e.g., 100","type","number",3,"ngModelChange","ngModel"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["class","qrcode",4,"ngIf"],["align","center"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"],["color","#f79318",3,"svgIcon"],[1,"qrcode"],[1,"qrcode-image",3,"qrdata","matTooltip","errorCorrectionLevel"]],template:function(r,o){1&r&&(i.j41(0,"div",0)(1,"button",1),i.nrm(2,"mat-icon",2),i.k0s()(),i.j41(3,"h1"),i.EFF(4,"\u26a1 Send Zap"),i.k0s(),i.DNE(5,Ec,11,2,"mat-dialog-content",3)(6,kc,7,5,"mat-dialog-content",3)),2&r&&(i.R7$(),i.Y8G("matDialogClose",void 0),i.R7$(),i.Y8G("svgIcon","heroicons_outline:x-mark"),i.R7$(3),i.Y8G("ngIf",!o.showInvoiceSection||!o.lightningInvoice),i.R7$(),i.Y8G("ngIf",o.showInvoiceSection&&o.lightningInvoice))},dependencies:[Vt.vg,R.Hl,R.$z,R.iY,R.$0,et.m_,et.An,C.YN,C.me,C.Q0,C.BC,C.vS,$.nJ,$.rl,C.X1,m.MD,m.Sq,m.bT,En.Ve,$.RG,ut.fS,ut.fg,Lt.Yi,Lt.E7,ot,it,B.q,j.oV,Lt.tx],styles:[".preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;justify-items:center;margin-bottom:20px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:700;width:70px;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;max-height:60px!important}.sats-input[_ngcontent-%COMP%]{margin-top:20px;width:100%}.lightning-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:10px 0}.qrcode[_ngcontent-%COMP%]{text-align:center}.qrcode-image[_ngcontent-%COMP%]{width:100%!important}"]})}return e})();var ns=k(2827),Ti=k(4930),Ac=k(4224),rs=k(6231);let Cc=(()=>{class e{constructor(t,r){this.relayService=t,this.signerService=r,this.followersSubject=new Ne.B,this.followingSubject=new Ne.B}getFollowersObservable(){return this.followersSubject.asObservable()}getFollowingObservable(){return this.followingSubject.asObservable()}getFollowers(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays();const o=r.relayService.getPool(),a=r.relayService.getConnectedRelays();if(0===a.length)throw new Error("No connected relays");const u=[{kinds:[3],"#p":[t]}],f=[];return new Promise(g=>{const b=o.subscribeMany(a,u,{onevent:S=>{f.push(S),r.followersSubject.next(S)},oneose(){b.close(),g(f)}})})})()}getFollowing(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays();const o=r.relayService.getPool(),a=r.relayService.getConnectedRelays();if(0===a.length)throw new Error("No connected relays");const u=[{kinds:[3],authors:[t]}],f=[];return new Promise(g=>{const b=o.subscribeMany(a,u,{onevent:S=>{S.tags.filter(F=>"p"===F[0]).forEach(F=>{f.push(F[1]),r.followingSubject.next(S)})},oneose(){b.close(),g(f)}})})})()}follow(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays(),r.relayService.getPool();const a=r.getFollowingList();if(a.includes(t))return void console.log(`Already following ${t}`);const u=[...a,t];r.setFollowingList(u);const f=r.signerService.getUnsignedEvent(3,u.map(S=>["p",S]),"");let b;if(yield r.signerService.isUsingExtension())b=yield r.signerService.signEventWithExtension(f);else{const S=yield r.signerService.getDecryptedSecretKey();if(!S)throw new Error("Secret key is missing. Unable to follow.");b=r.signerService.getSignedEvent(f,S)}r.relayService.publishEventToRelays(b),console.log(`Now following ${t}`)})()}unfollow(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays();const o=r.getFollowingList();if(!o.includes(t))return void console.log(`Not following ${t}`);const a=o.filter(b=>b!==t);r.setFollowingList(a);const u=r.signerService.getUnsignedEvent(3,a.map(b=>["p",b]),"");let g;if(yield r.signerService.isUsingExtension())g=yield r.signerService.signEventWithExtension(u);else{const b=yield r.signerService.getDecryptedSecretKey();if(!b)throw new Error("Secret key is missing. Unable to unfollow.");g=r.signerService.getSignedEvent(u,b)}r.relayService.publishEventToRelays(g),console.log(`Unfollowed ${t}`)})()}getFollowingListAsTags(){const t=this.getFollowingList(),r=[],o=this.relayService.getConnectedRelays();return t.forEach(a=>{o.forEach(u=>{r.push(["p",a,u,localStorage.getItem(`${a}`)||""])})}),r}setFollowingListFromTags(t){const r=[];t.forEach(o=>{r.push(o[1])}),this.setFollowingList(r)}setFollowingList(t){const o=Array.from(new Set(t)).filter(a=>a).join(",");localStorage.setItem("following",o)}getFollowingList(){const t=localStorage.getItem("following");return null===t||""===t?[]:t.split(",").filter(o=>/[a-f0-9]{64}/.test(o))}static#t=this.\u0275fac=function(r){return new(r||e)(i.KVO(rs.b),i.KVO(Ti.A))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Tc=k(881),Ic=k(9979),br=k(2953);class Rc{constructor(n,t,r,o,a,u,f=[]){this.username="",this.picture="/images/avatars/avatar-placeholder.png",this.replyCount=0,this.likeCount=0,this.zapCount=0,this.repostCount=0,this.likedByMe=!1,this.replies=[],this.likers=[],this.reposters=[],this.zappers=[],this.relatedEventIds=[],this.rootEventId="",this.replyToEventId="",this.mentions=[],this.hashtags=[],this.repostedByMe=!1,this.tags=[],this.isAReply=!1,this.kind=t,this.pubkey=r,this.content=o,this.noteId=a,this.createdAt=u,this.date=new Date(1e3*this.createdAt),this.fromNow=this.calculateTimeFromNow(this.date),this.tags=f,this.id=n}calculateTimeFromNow(n){const r=Math.floor(((new Date).getTime()-n.getTime())/1e3);return r<60?`${r} seconds ago`:r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<2592e3?`${Math.floor(r/86400)} days ago`:r<31536e3?`${Math.floor(r/2592e3)} months ago`:`${Math.floor(r/31536e3)} years ago`}}var _r=k(7442),Ii=k(4412),Bc=k(3386);let Pc=(()=>{class e{constructor(t,r,o){this.relayService=t,this.signerService=r,this.metadataService=o,this.eventsSubject=new Ii.t([]),this.isLoading=new Ii.t(!1),this.lastLoadedEventTime=null,this.pageSize=10,this.noMoreEvents=new Ii.t(!1),this.seenEventIds=new Set,this.likesMap=new Map,this.repliesMap=new Map,this.zapsMap=new Map,this.repostsMap=new Map,this.hasLikedMap=new Map,this.hasRepostedMap=new Map,this.jobQueue=[],this.isProcessingQueue=!1,this.myLikedNoteIds=[],this.clearEvents(),this.getMyLikes().then(()=>{}).catch(a=>{console.error("Failed to load user likes:",a)})}subscribeToEvents(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays();const o=r.relayService.getConnectedRelays().slice(0,3);if(!o||0===o.length)return void console.error("No connected relays available.");const a=[{kinds:[1],authors:t,limit:r.pageSize},{"#p":t,limit:1}];r.relayService.getPool().subscribeMany(o,a,{onevent:u=>{r.isReply(u)||r.handleNewOrUpdatedEvent(u);const f=r.getParentEventId(u);switch(f&&r.enqueueJob(f,"replies"),u.kind){case 7:r.enqueueJob(f,"likes");break;case 9735:r.enqueueJob(f,"zaps");break;case 6:r.enqueueJob(f,"reposts")}},oneose:()=>{}})})()}getParentEventId(t){const r=t.tags.find(o=>"e"===o[0]);return r?r[1]:null}handleNewOrUpdatedEvent(t){var r=this;return(0,y.A)(function*(){switch(t.kind){case 1:if(!r.seenEventIds.has(t.id)){r.seenEventIds.add(t.id);const o=yield r.createNewEvent(t),a=r.eventsSubject.getValue();r.eventsSubject.next([o,...a].sort((u,f)=>f.createdAt-u.createdAt)),r.updateEventInSubject(t.id)}break;case 7:r.handleLikeEvent(t);break;case 9735:r.handleZapEvent(t);break;case 6:r.handleRepostEvent(t);break;case 4:r.handleReplyEvent(t)}})()}handleLikeEvent(t){const r=t.tags.find(o=>"e"===o[0])?.[1];if(r){const a=this.eventsSubject.getValue().map(u=>(u.id===r&&(u.likeCount+=1,u.likers=[...u.likers||[],t.pubkey]),u));this.eventsSubject.next(a)}}handleZapEvent(t){const r=t.tags.find(o=>"e"===o[0])?.[1];if(r){const a=this.eventsSubject.getValue().map(u=>(u.id===r&&(u.zapCount+=1,u.zappers=[...u.zappers||[],t.pubkey]),u));this.eventsSubject.next(a)}}handleRepostEvent(t){const r=t.tags.find(o=>"e"===o[0])?.[1];if(r){const a=this.eventsSubject.getValue().map(u=>(u.id===r&&(u.repostCount+=1,u.reposters=[...u.reposters||[],t.pubkey]),u));this.eventsSubject.next(a)}}handleReplyEvent(t){var r=this;return(0,y.A)(function*(){const o=t.tags.find(a=>"e"===a[0])?.[1];if(o){const a=yield r.createNewEvent(t),f=r.eventsSubject.getValue().map(g=>(g.id===o&&(g.replyCount+=1,g.replies=[...g.replies||[],a]),g));r.eventsSubject.next(f)}})()}isReply(t){return t.tags.filter(o=>"e"===o[0]||"p"===o[0]).length>0}getMyLikes(){var t=this;return(0,y.A)(function*(){const r={kinds:[7],authors:[t.signerService.getPublicKey()]};try{return(yield t.fetchFilteredEvents(r)).forEach(a=>{const u=a.tags.find(f=>"e"===f[0]);u&&t.myLikedNoteIds.push(u[1])}),t.myLikedNoteIds}catch(o){return console.error("Failed to get user likes:",o),[]}})()}loadMoreEvents(t){var r=this;return(0,y.A)(function*(){if(r.isLoading.value||r.noMoreEvents.value)return;r.isLoading.next(!0);const o={authors:t,kinds:[1],until:r.lastLoadedEventTime||Math.floor(Date.now()/1e3),limit:r.pageSize};try{const a=yield r.fetchFilteredEvents(o);if(a.length<r.pageSize&&r.noMoreEvents.next(!0),a.length>0){r.lastLoadedEventTime=a[a.length-1].created_at;const u=a.filter(g=>!r.seenEventIds.has(g.id)&&!r.isReply(g));u.forEach(g=>r.seenEventIds.add(g.id));const f=yield Promise.all(u.map(g=>r.createNewEvent(g)));r.eventsSubject.next([...r.eventsSubject.getValue(),...f].sort((g,b)=>b.createdAt-g.createdAt))}else r.noMoreEvents.next(!0)}catch(a){console.error("Error loading more events:",a)}finally{r.isLoading.next(!1)}})()}fetchFilteredEvents(t){var r=this;return(0,y.A)(function*(){yield r.relayService.ensureConnectedRelays();const o=r.relayService.getConnectedRelays(),a=new Map,u=r.relayService.getPool();return yield Promise.all(o.map(function(){var f=(0,y.A)(function*(g){(yield u.querySync([g],t)).forEach(S=>{a.has(S.id)||a.set(S.id,S)})});return function(g){return f.apply(this,arguments)}}())),Array.from(a.values())})()}createNewEvent(t){var r=this;return(0,y.A)(function*(){const o=new Rc(t.id,t.kind,t.pubkey,t.content,t.id,t.created_at,t.tags);r.enqueueJob(t.id,"replies"),r.enqueueJob(t.id,"likes"),r.enqueueJob(t.id,"reposts"),r.enqueueJob(t.id,"zaps"),yield r.processJobQueue(),o.likedByMe=r.myLikedNoteIds.includes(t.id);const a=yield r.metadataService.fetchMetadataWithCache(t.pubkey);return a&&(o.username=a.name||o.npub,o.picture=a.picture||"/images/avatars/avatar-placeholder.png"),o})()}enqueueJob(t,r){this.jobQueue.some(o=>o.eventId===t&&o.jobType===r)||(this.jobQueue.push({eventId:t,jobType:r}),this.isProcessingQueue||this.processJobQueue())}processJobQueue(){var t=this;return(0,y.A)(function*(){if(t.isProcessingQueue)return;t.isProcessingQueue=!0;const r=[];for(;t.jobQueue.length>0||r.length>0;){for(;t.jobQueue.length>0&&r.length<10;){const o=t.jobQueue.shift();if(!o)break;const a=t.processJob(o);r.push(a),a.then(()=>{r.splice(r.indexOf(a),1)}).catch(u=>{console.error("Error processing job:",u),r.splice(r.indexOf(a),1)})}yield Promise.race(r)}t.isProcessingQueue=!1})()}processJob(t){var r=this;return(0,y.A)(function*(){switch(t.jobType){case"replies":const o=yield r.fetchReplies(t.eventId);r.repliesMap.set(t.eventId,o);break;case"likes":const a=yield r.getLikers(t.eventId);r.likesMap.set(t.eventId,a);break;case"zaps":const u=yield r.getZappers(t.eventId);r.zapsMap.set(t.eventId,u);break;case"reposts":const f=yield r.getReposters(t.eventId);r.repostsMap.set(t.eventId,f)}r.updateEventInSubject(t.eventId)})()}updateEventInSubject(t){const o=this.eventsSubject.getValue().map(a=>(a.id===t&&(a.replyCount=this.getRepliesCount(t),a.replies=this.repliesMap.get(t)||[],a.likeCount=this.getLikesCount(t),a.likers=this.likesMap.get(t)||[],a.zapCount=this.getZapsCount(t),a.zappers=this.zapsMap.get(t)||[],a.repostCount=this.getRepostsCount(t),a.reposters=this.repostsMap.get(t)||[]),a));this.eventsSubject.next(o)}fetchReplies(t){var r=this;return(0,y.A)(function*(){const o={"#e":[t],kinds:[1]},a=yield r.fetchFilteredEvents(o),u=new Map;return a.forEach(f=>{u.has(f.id)||u.set(f.id,f)}),Promise.all(Array.from(u.values()).map(f=>r.createNewEvent(f)))})()}getLikers(t){var r=this;return(0,y.A)(function*(){const o={"#e":[t],kinds:[7]};return(yield r.fetchFilteredEvents(o)).map(u=>u.pubkey)})()}getZappers(t){var r=this;return(0,y.A)(function*(){const o={"#e":[t],kinds:[9735]};return(yield r.fetchFilteredEvents(o)).map(u=>u.pubkey)})()}getReposters(t){var r=this;return(0,y.A)(function*(){const o={"#e":[t],kinds:[6]};return(yield r.fetchFilteredEvents(o)).map(u=>u.pubkey)})()}getRepliesCount(t){return(this.repliesMap.get(t)||[]).length}getLikesCount(t){return(this.likesMap.get(t)||[]).length}getZapsCount(t){return(this.zapsMap.get(t)||[]).length}getRepostsCount(t){return(this.repostsMap.get(t)||[]).length}hasUserLiked(t){return this.hasLikedMap.get(t)||!1}hasUserReposted(t){return this.hasRepostedMap.get(t)||!1}getEventStream(){return this.eventsSubject.asObservable().pipe((0,Bc.c)(1e3))}hasMoreEvents(){return this.noMoreEvents.asObservable()}sendTextEvent(t){var r=this;return(0,y.A)(function*(){if(t)try{const a=r.signerService.getUnsignedEvent(1,[],t);let u;if(r.signerService.isUsingSecretKey()){const f=yield r.signerService.getDecryptedSecretKey(),g=(0,br.aT)(f);u=(0,_r.pC)(a,g)}else u=yield r.signerService.signEventWithExtension(a);yield r.relayService.publishEventToWriteRelays(u)}catch(o){console.error("Failed to send text event:",o)}})()}sendLikeEvent(t){var r=this;return(0,y.A)(function*(){if(t)try{const u=r.signerService.getUnsignedEvent(7,[["e",t.id],["p",t.pubkey]],"+");let f;if(r.signerService.isUsingSecretKey()){const g=yield r.signerService.getDecryptedSecretKey(),b=(0,br.aT)(g);f=(0,_r.pC)(u,b)}else f=yield r.signerService.signEventWithExtension(u);yield r.relayService.publishEventToWriteRelays(f),r.likesMap.set(t.id,[...r.likesMap.get(t.id)||[],r.signerService.getPublicKey()]),r.hasLikedMap.set(t.id,!0)}catch(o){console.error("Failed to send like event:",o)}})()}sendZapEvent(t,r){var o=this;return(0,y.A)(function*(){if(t&&!(r<=0))try{const a=[["e",t.id],["p",t.pubkey],["amount",r.toString()]],f=o.signerService.getUnsignedEvent(9735,a,`Zapped with ${r} sats`);let g;if(o.signerService.isUsingSecretKey()){const b=yield o.signerService.getDecryptedSecretKey(),S=(0,br.aT)(b);g=(0,_r.pC)(f,S)}else g=yield o.signerService.signEventWithExtension(f);yield o.relayService.publishEventToWriteRelays(g)}catch(a){console.error("Failed to send zap event:",a)}})()}sendReplyEvent(t,r){var o=this;return(0,y.A)(function*(){if(t)try{const u=o.signerService.getUnsignedEvent(1,[["e",t.id],["p",t.pubkey]],r);let f;if(o.signerService.isUsingSecretKey()){const g=yield o.signerService.getDecryptedSecretKey(),b=(0,br.aT)(g);f=(0,_r.pC)(u,b)}else f=yield o.signerService.signEventWithExtension(u);yield o.relayService.publishEventToWriteRelays(f)}catch(a){console.error("Failed to send reply event:",a)}})()}clearEvents(){this.eventsSubject.next([]),this.seenEventIds.clear(),this.lastLoadedEventTime=null,this.noMoreEvents.next(!1)}static#t=this.\u0275fac=function(r){return new(r||e)(i.KVO(rs.b),i.KVO(Ti.A),i.KVO(ns.T))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Nc=["eventInput"],Uc=["commentInput"],is=()=>["/explore"],Lc=()=>["./"],Dc=e=>({"mt-8":e}),os=()=>[0,1,2,3],Oc=e=>["/profile",e],$c=e=>({"heart-beat":e}),jc=e=>({"rotate-180":e});function Fc(e,n){if(1&e&&(i.qex(0),i.nrm(1,"img",52),i.bVm()),2&e){const t=i.XpG();i.R7$(),i.FS9("alt",(null==t.metadata?null:t.metadata.display_name)||(null==t.metadata?null:t.metadata.name)||""),i.Y8G("src",t.getSafeUrl(null==t.metadata?null:t.metadata.picture),i.B4B)}}function Gc(e,n){if(1&e&&i.nrm(0,"img",53),2&e){const t=i.XpG();i.FS9("alt",(null==t.metadata?null:t.metadata.display_name)||(null==t.metadata?null:t.metadata.name)||"")}}function zc(e,n){if(1&e){const t=i.RV6();i.j41(0,"div")(1,"button",54),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.toggleFollow())}),i.nrm(2,"mat-icon",55),i.k0s()()}if(2&e){const t=i.XpG();i.R7$(),i.Y8G("matTooltip",t.isFollowing?"Unfollow":"Follow"),i.R7$(),i.Y8G("svgIcon",t.isFollowing?"heroicons_outline:user-minus":"heroicons_outline:user-plus")}}function qc(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",56),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.zap())}),i.j41(1,"span",41),i.nrm(2,"mat-icon",57),i.j41(3,"span"),i.EFF(4,"Send Zap"),i.k0s()()()}2&e&&(i.R7$(2),i.Y8G("svgIcon","feather:zap"))}function Hc(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",56),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.openReceiveZapDialog())}),i.j41(1,"span",41),i.nrm(2,"mat-icon",57),i.j41(3,"span"),i.EFF(4,"Receive Zap"),i.k0s()()()}2&e&&(i.R7$(2),i.Y8G("svgIcon","heroicons_outline:qr-code"))}function Wc(e,n){1&e&&(i.j41(0,"button",58)(1,"span",41),i.nrm(2,"mat-icon",57),i.j41(3,"span"),i.EFF(4,"Edit your profile"),i.k0s()()()),2&e&&(i.Y8G("routerLink","/settings/profile"),i.R7$(2),i.Y8G("svgIcon","heroicons_outline:pencil-square"))}function Vc(e,n){1&e&&(i.j41(0,"button",39)(1,"span",41),i.nrm(2,"mat-icon",57),i.j41(3,"span"),i.EFF(4,"Report"),i.k0s()()()),2&e&&(i.R7$(2),i.Y8G("svgIcon","heroicons_solid:exclamation-triangle"))}function Yc(e,n){1&e&&(i.j41(0,"button",39)(1,"span",41),i.nrm(2,"mat-icon",57),i.j41(3,"span"),i.EFF(4,"Turn on notifications"),i.k0s()()()),2&e&&(i.R7$(2),i.Y8G("svgIcon","heroicons_solid:bell"))}function Kc(e,n){if(1&e&&(i.j41(0,"angor-card",59)(1,"div",37),i.EFF(2,"About"),i.k0s(),i.j41(3,"div",60),i.EFF(4),i.k0s(),i.j41(5,"a",61),i.EFF(6," See complete about "),i.k0s()()),2&e){const t=i.XpG();i.R7$(4),i.SpI(" ",(null==t.metadata?null:t.metadata.about)||""," "),i.R7$(),i.Y8G("color","primary")("routerLink",i.lJ4(3,Lc))}}function Zc(e,n){if(1&e&&i.nrm(0,"img",68),2&e){const t=n.$implicit,r=i.XpG(2).$implicit,o=i.XpG(3);i.Y8G("src",null!=o.suggestions[4*r+t]&&null!=o.suggestions[4*r+t].metadata&&o.suggestions[4*r+t].metadata.picture?o.suggestions[4*r+t].metadata.picture:"images/avatars/avatar-placeholder.png",i.B4B)("alt",null!=o.suggestions[4*r+t]&&null!=o.suggestions[4*r+t].metadata&&o.suggestions[4*r+t].metadata.name?o.suggestions[4*r+t].metadata.name:"image")("matTooltip",null!=o.suggestions[4*r+t]&&null!=o.suggestions[4*r+t].metadata&&o.suggestions[4*r+t].metadata.name?o.suggestions[4*r+t].metadata.name:"")("routerLink",i.eq3(4,Oc,o.suggestions[4*r+t].pubkey))}}function Xc(e,n){1&e&&(i.qex(0),i.DNE(1,Zc,1,6,"img",67),i.bVm()),2&e&&(i.R7$(),i.Y8G("ngForOf",i.lJ4(1,os)))}function Qc(e,n){if(1&e&&(i.j41(0,"div",66),i.DNE(1,Xc,2,2,"ng-container",24),i.k0s()),2&e){const t=n.$implicit,r=i.XpG(3);i.R7$(),i.Y8G("ngIf",r.suggestions.length>4*t)}}function Jc(e,n){1&e&&(i.j41(0,"div",64),i.DNE(1,Qc,2,1,"div",65),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngForOf",i.lJ4(1,os)))}function tu(e,n){if(1&e&&(i.j41(0,"angor-card",62)(1,"div",36)(2,"div",37),i.EFF(3," Suggestion "),i.k0s(),i.j41(4,"div",38)(5,"button",25),i.nrm(6,"mat-icon",26),i.k0s(),i.j41(7,"mat-menu",null,3)(9,"button",58),i.EFF(10," Explore project "),i.k0s()()()(),i.DNE(11,Jc,2,2,"div",63),i.k0s()),2&e){const t=i.sdS(8),r=i.XpG();i.Y8G("ngClass",i.eq3(5,Dc,null==r.metadata?null:r.metadata.about)),i.R7$(5),i.Y8G("matMenuTriggerFor",t),i.R7$(),i.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),i.R7$(3),i.Y8G("routerLink",i.lJ4(7,is)),i.R7$(2),i.Y8G("ngIf",r.suggestions&&r.suggestions.length>0)}}function eu(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",87)(1,"emoji-mart",88),i.bIt("emojiClick",function(o){i.eBV(t);const a=i.XpG(2);return i.Njj(a.addEmoji(o))}),i.k0s()()}if(2&e){const t=i.XpG(2);i.R7$(),i.Y8G("darkMode",t.darkMode)}}function nu(e,n){if(1&e){const t=i.RV6();i.j41(0,"angor-card",69)(1,"div",70)(2,"div",71),i.EFF(3,"Create Post"),i.k0s(),i.j41(4,"mat-slide-toggle",72),i.bIt("change",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.togglePreview())}),i.EFF(5," Preview "),i.k0s()(),i.j41(6,"div",73)(7,"div",74),i.nrm(8,"img",75),i.j41(9,"div",76),i.EFF(10),i.k0s()(),i.j41(11,"mat-form-field",77),i.nrm(12,"textarea",78,4),i.k0s()(),i.j41(14,"div",79)(15,"div",41)(16,"button",80),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.toggleEmojiPicker())}),i.nrm(17,"mat-icon",26),i.j41(18,"span",81),i.EFF(19,"Feeling"),i.k0s()(),i.DNE(20,eu,2,1,"div",82),i.j41(21,"button",83),i.nrm(22,"mat-icon",26),i.j41(23,"span",81),i.EFF(24,"Media"),i.k0s()(),i.j41(25,"button",83),i.nrm(26,"mat-icon",26),i.j41(27,"span",81),i.EFF(28,"Tag"),i.k0s()(),i.j41(29,"button",84),i.nrm(30,"mat-icon",26),i.k0s(),i.j41(31,"mat-menu",null,5)(33,"button",85)(34,"span",41),i.nrm(35,"mat-icon",57),i.j41(36,"span"),i.EFF(37,"Tag"),i.k0s()()(),i.j41(38,"button",85)(39,"span",41),i.nrm(40,"mat-icon",57),i.j41(41,"span"),i.EFF(42,"Feeling"),i.k0s()()(),i.j41(43,"button",39)(44,"span",41),i.nrm(45,"mat-icon",57),i.j41(46,"span"),i.EFF(47,"Live"),i.k0s()()(),i.j41(48,"button",39)(49,"span",41),i.nrm(50,"mat-icon",57),i.j41(51,"span"),i.EFF(52,"Gif"),i.k0s()()(),i.j41(53,"button",39)(54,"span",41),i.nrm(55,"mat-icon",57),i.j41(56,"span"),i.EFF(57,"Check in"),i.k0s()()()()(),i.j41(58,"button",86),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.sendEvent())}),i.nrm(59,"mat-icon",26),i.j41(60,"span",81),i.EFF(61,"Send"),i.k0s()()()()}if(2&e){const t=i.sdS(32),r=i.XpG();i.R7$(4),i.Y8G("color","primary"),i.R7$(4),i.FS9("alt",(null==r.currentUserMetadata?null:r.currentUserMetadata.display_name)||(null==r.currentUserMetadata?null:r.currentUserMetadata.name)||"Avatar"),i.Y8G("src",(null==r.currentUserMetadata?null:r.currentUserMetadata.picture)||"images/avatars/avatar-placeholder.png",i.B4B),i.R7$(2),i.SpI(" ",(null==r.currentUserMetadata?null:r.currentUserMetadata.name)||"Unknown User"," "),i.R7$(),i.Y8G("subscriptSizing","dynamic"),i.R7$(),i.Y8G("placeholder","What's on your mind?")("rows",3),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:face-smile"),i.R7$(3),i.Y8G("ngIf",r.showEmojiPicker),i.R7$(2),i.Y8G("svgIcon","heroicons_solid:photo"),i.R7$(4),i.Y8G("svgIcon","heroicons_solid:user-circle"),i.R7$(3),i.Y8G("matMenuTriggerFor",t),i.R7$(),i.Y8G("svgIcon","heroicons_solid:ellipsis-horizontal"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:user-circle"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:face-smile"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:play"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:sparkles"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:map-pin"),i.R7$(4),i.Y8G("svgIcon","heroicons_solid:paper-airplane")}}function ru(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",87)(1,"emoji-mart",88),i.bIt("emojiClick",function(o){i.eBV(t);const a=i.XpG(2);return i.Njj(a.addEmojiTocomment(o))}),i.k0s()()}if(2&e){const t=i.XpG(2);i.R7$(),i.Y8G("darkMode",t.darkMode)}}function iu(e,n){if(1&e){const t=i.RV6();i.j41(0,"angor-card",89,6)(2,"div",90),i.nrm(3,"img",91),i.j41(4,"div",64)(5,"span",92),i.EFF(6),i.k0s(),i.j41(7,"span",93),i.EFF(8,"1 minutes ago"),i.k0s()(),i.j41(9,"button",94),i.nrm(10,"mat-icon",26),i.k0s(),i.j41(11,"mat-menu",null,7)(13,"button",39)(14,"span",41),i.nrm(15,"mat-icon",57),i.j41(16,"span"),i.EFF(17,"Save post"),i.k0s()()(),i.j41(18,"button",39)(19,"span",41),i.nrm(20,"mat-icon",57),i.j41(21,"span"),i.EFF(22,"Hide post"),i.k0s()()(),i.j41(23,"button",39)(24,"span",41),i.nrm(25,"mat-icon",57),i.j41(26,"span"),i.EFF(27,"Snooze for 30 days"),i.k0s()()(),i.j41(28,"button",39)(29,"span",41),i.nrm(30,"mat-icon",57),i.j41(31,"span"),i.EFF(32,"Hide all"),i.k0s()()(),i.nrm(33,"mat-divider",28),i.j41(34,"button",39)(35,"span",41),i.nrm(36,"mat-icon",57),i.j41(37,"span"),i.EFF(38,"Report post"),i.k0s()()(),i.j41(39,"button",39)(40,"span",41),i.nrm(41,"mat-icon",57),i.j41(42,"span"),i.EFF(43,"Turn on notifications for this post"),i.k0s()()()()(),i.j41(44,"div",95),i.EFF(45),i.k0s(),i.nrm(46,"div",96),i.j41(47,"div",97)(48,"button",80),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.toggleLike())}),i.nrm(49,"mat-icon",98),i.j41(50,"span",81),i.EFF(51),i.k0s()(),i.j41(52,"button",80),i.bIt("click",function(){i.eBV(t);const o=i.sdS(1);return i.Njj(o.expanded=!o.expanded)}),i.nrm(53,"mat-icon",26),i.j41(54,"span",81),i.EFF(55,"Comment"),i.k0s()(),i.j41(56,"button",99),i.nrm(57,"mat-icon",26),i.j41(58,"span",81),i.EFF(59,"Share"),i.k0s()()(),i.nrm(60,"hr",100),i.j41(61,"div",101)(62,"div",41),i.nrm(63,"img",102)(64,"img",103)(65,"img",103)(66,"img",103),i.j41(67,"div",104),i.EFF(68," You and 4 more liked this "),i.k0s()(),i.nrm(69,"div",105),i.j41(70,"div",106)(71,"button",107),i.EFF(72," 0 shares "),i.k0s(),i.j41(73,"button",108),i.bIt("click",function(){i.eBV(t);const o=i.sdS(1);return i.Njj(o.expanded=!o.expanded)}),i.j41(74,"span",109),i.EFF(75,"0 Comments"),i.k0s(),i.nrm(76,"mat-icon",110),i.k0s()()(),i.qex(77,111),i.nrm(78,"hr",112),i.j41(79,"div",113)(80,"div",114),i.nrm(81,"img",115),i.j41(82,"mat-form-field",77),i.nrm(83,"textarea",78,8),i.k0s()(),i.j41(85,"div",116)(86,"div",41)(87,"button",117),i.bIt("click",function(){i.eBV(t);const o=i.XpG();return i.Njj(o.toggleCommentEmojiPicker())}),i.nrm(88,"mat-icon",26),i.k0s(),i.DNE(89,ru,2,1,"div",82),i.j41(90,"button",118),i.nrm(91,"mat-icon",26),i.k0s(),i.j41(92,"button",118),i.nrm(93,"mat-icon",26),i.k0s()(),i.j41(94,"button",119),i.nrm(95,"mat-icon",26),i.j41(96,"span",81),i.EFF(97,"Send"),i.k0s()()()(),i.bVm(),i.k0s()}if(2&e){const t=i.sdS(1),r=i.sdS(12),o=i.XpG();i.R7$(3),i.FS9("alt",(null==o.currentUserMetadata?null:o.currentUserMetadata.display_name)||(null==o.currentUserMetadata?null:o.currentUserMetadata.name)||"Avatar"),i.Y8G("src",(null==o.currentUserMetadata?null:o.currentUserMetadata.picture)||"images/avatars/avatar-placeholder.png",i.B4B),i.R7$(3),i.JRh((null==o.currentUserMetadata?null:o.currentUserMetadata.display_name)||(null==o.currentUserMetadata?null:o.currentUserMetadata.name)),i.R7$(3),i.Y8G("matMenuTriggerFor",r),i.R7$(),i.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:arrow-up-tray"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:eye-slash"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:clock"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:minus-circle"),i.R7$(6),i.Y8G("svgIcon","heroicons_solid:exclamation-triangle"),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:bell"),i.R7$(4),i.SpI(" ",o.eventInput.nativeElement.value," "),i.R7$(4),i.Y8G("ngClass",i.eq3(29,$c,o.isLiked))("svgIcon",o.isLiked?"heroicons_solid:heart":"heroicons_outline:heart"),i.R7$(2),i.JRh(o.isLiked?"Unlike":"Like"),i.R7$(2),i.Y8G("svgIcon","heroicons_solid:chat-bubble-left-ellipsis"),i.R7$(4),i.Y8G("svgIcon","heroicons_solid:share"),i.R7$(19),i.Y8G("ngClass",i.eq3(31,jc,t.expanded))("svgIcon","heroicons_mini:chevron-down"),i.R7$(5),i.FS9("alt",(null==o.currentUserMetadata?null:o.currentUserMetadata.display_name)||(null==o.currentUserMetadata?null:o.currentUserMetadata.name)||"Avatar"),i.Y8G("src",(null==o.currentUserMetadata?null:o.currentUserMetadata.picture)||"images/avatars/avatar-placeholder.png",i.B4B),i.R7$(),i.Y8G("subscriptSizing","dynamic"),i.R7$(),i.Y8G("placeholder","Write a comment...")("rows",3),i.R7$(5),i.Y8G("svgIcon","heroicons_solid:face-smile"),i.R7$(),i.Y8G("ngIf",o.showCommentEmojiPicker),i.R7$(2),i.Y8G("svgIcon","heroicons_solid:photo"),i.R7$(2),i.Y8G("svgIcon","heroicons_solid:sparkles"),i.R7$(2),i.Y8G("svgIcon","heroicons_solid:paper-airplane")}}const ou=[{path:"",component:(()=>{class e{constructor(t,r,o,a,u,f,g,b,S,T,F,D,L){this._changeDetectorRef=t,this._metadataService=r,this._signerService=o,this._indexedDBService=a,this._sanitizer=u,this._route=f,this._socialService=g,this.snackBar=b,this.lightning=S,this._dialog=T,this._angorConfigService=F,this._angorConfirmationService=D,this.eventService=L,this.darkMode=!1,this.isLoading=!0,this.errorMessage=null,this._unsubscribeAll=new Ne.B,this.followers=[],this.following=[],this.allPublicKeys=[],this.suggestions=[],this.isCurrentUserProfile=!1,this.isFollowing=!1,this.showEmojiPicker=!1,this.showCommentEmojiPicker=!1,this.lightningResponse=null,this.lightningInvoice=null,this.paymentInvoice="",this.invoiceAmount="?",this.isLiked=!1,this.isPreview=!1,this.posts=[],this.likes=[],this.myLikes=[],this.myLikedNoteIds=[],this.isLoadingPosts=!0,this.noEventsMessage="";this.paginator=new v(0,0,12e3)}ngOnInit(){this._angorConfigService.config$.subscribe(t=>{"auto"===t.scheme?this.detectSystemTheme():this.darkMode="dark"===t.scheme}),this._route.paramMap.subscribe(t=>{const r=t.get("pubkey");this.routePubKey=r;const o=this._signerService.getPublicKey();this.currentUserPubKey=o,(r||o)&&(this.isCurrentUserProfile=r===o),this.routePubKey=r||o,this.loadProfile(this.routePubKey),r||(this.isCurrentUserProfile=!0),this.loadCurrentUserProfile()}),this._indexedDBService.getMetadataStream().pipe((0,Dt.Q)(this._unsubscribeAll)).subscribe(t=>{t&&t.pubkey===this.currentUserPubKey&&(this.currentUserMetadata=t.metadata,this._changeDetectorRef.detectChanges())}),this.routePubKey&&this._indexedDBService.getMetadataStream().pipe((0,Dt.Q)(this._unsubscribeAll)).subscribe(t=>{t&&t.pubkey===this.routePubKey&&(this.metadata=t.metadata,this._changeDetectorRef.detectChanges())}),this._socialService.getFollowersObservable().pipe((0,Dt.Q)(this._unsubscribeAll)).subscribe(t=>{this.followers.push(t.pubkey),this._changeDetectorRef.detectChanges()}),this._socialService.getFollowingObservable().pipe((0,Dt.Q)(this._unsubscribeAll)).subscribe(t=>{t.tags.filter(o=>"p"===o[0]).forEach(o=>{this.following.push({nostrPubKey:o[1]})}),this._changeDetectorRef.detectChanges()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadProfile(t){var r=this;return(0,y.A)(function*(){if(r.isLoading=!0,r.errorMessage=null,r.metadata=null,r.followers=[],r.following=[],r._changeDetectorRef.detectChanges(),!t)return r.errorMessage="No public key found. Please log in again.",r.isLoading=!1,void r._changeDetectorRef.detectChanges();try{const o=yield r._metadataService.fetchMetadataWithCache(t);o&&(r.metadata=o,r._changeDetectorRef.detectChanges()),r.followers=yield r._socialService.getFollowers(t);const a=r._signerService.getPublicKey();r.isFollowing=r.followers.includes(a),r.following=yield r._socialService.getFollowing(t),r._changeDetectorRef.detectChanges()}catch(o){console.error("Failed to load profile data:",o),r.errorMessage="Failed to load profile data. Please try again later.",r._changeDetectorRef.detectChanges()}finally{r.isLoading=!1,r._changeDetectorRef.detectChanges()}})()}loadCurrentUserProfile(){var t=this;return(0,y.A)(function*(){try{t.currentUserMetadata=null,t.currentUserPubKey=t._signerService.getPublicKey();const r=yield t._metadataService.fetchMetadataWithCache(t.currentUserPubKey);r&&(t.currentUserMetadata=r),t._changeDetectorRef.detectChanges()}catch(r){console.error("Failed to load profile data:",r),t.errorMessage="Failed to load profile data. Please try again later.",t._changeDetectorRef.detectChanges()}finally{t._changeDetectorRef.detectChanges()}})()}getSafeUrl(t){return this._sanitizer.bypassSecurityTrustUrl(t)}toggleFollow(){var t=this;return(0,y.A)(function*(){try{const r=t._signerService.getPublicKey(),o=t.routePubKey||t.currentUserPubKey;if(!o||!r)return void console.error("Public key missing. Unable to toggle follow.");t.isFollowing?(yield t._socialService.unfollow(o),console.log(`Unfollowed ${o}`),t.followers=t.followers.filter(a=>a!==r)):(yield t._socialService.follow(o),console.log(`Followed ${o}`),t.followers.push(r)),t.isFollowing=!t.isFollowing,t._changeDetectorRef.detectChanges()}catch(r){console.error("Failed to toggle follow:",r)}})()}openSnackBar(t,r){this.snackBar.open(t,r,{duration:1300})}getLightningInfo(){let t="";if(this.metadata?.lud06){const{words:r}=W.I.decode(this.metadata.lud06,5e3),o=new Uint8Array(W.I.fromWords(r));t=(new TextDecoder).decode(Uint8Array.from(o))}else if(this.metadata?.lud16?.toLowerCase().startsWith("lnurl")){const{words:r}=W.I.decode(this.metadata.lud16,5e3),o=new Uint8Array(W.I.fromWords(r));t=(new TextDecoder).decode(Uint8Array.from(o))}else this.metadata?.lud16&&(t=this.lightning.getLightningAddress(this.metadata.lud16));""!==t?this.lightning.getLightning(t).subscribe(r=>{this.lightningResponse=r,"Failed"===this.lightningResponse.status?this.openSnackBar("Failed to lookup lightning address","dismiss"):this.lightningResponse.callback?this.openZapDialog():this.openSnackBar("couldn't find user's lightning address","dismiss")}):this.openSnackBar("No lightning address found","dismiss")}zap(){var t=this;return(0,y.A)(function*(){t.metadata&&(t.metadata.lud06||t.metadata.lud16)?t.getLightningInfo():t.openSnackBar("user can't receive zaps","dismiss")})()}openZapDialog(){this._dialog.open(Sc,{width:"405px",maxHeight:"90vh",data:this.metadata})}openReceiveZapDialog(){this._dialog.open(lc,{width:"405px",maxHeight:"90vh",data:this.metadata})}toggleLike(){this.isLiked=!this.isLiked,this.isLiked&&setTimeout(()=>{this.isLiked=!1,this.isLiked=!0},300)}addEmoji(t){this.eventInput.nativeElement.value+=t.emoji.native,this.showEmojiPicker=!1}toggleEmojiPicker(){this.showCommentEmojiPicker=!1,this.showEmojiPicker=!this.showEmojiPicker}addEmojiTocomment(t){this.commentInput.nativeElement.value+=t.emoji.native,this.showCommentEmojiPicker=!1}toggleCommentEmojiPicker(){this.showEmojiPicker=!1,this.showCommentEmojiPicker=!this.showCommentEmojiPicker}detectSystemTheme(){const t=window.matchMedia("(prefers-color-scheme: dark)");this.darkMode=t.matches,t.addEventListener("change",r=>{this.darkMode=r.matches})}openConfirmationDialog(){this._angorConfirmationService.open({title:"Share Event",message:'Are you sure you want to share this event on your profile? <span class="font-medium">This action is permanent and cannot be undone.</span>',icon:{show:!0,name:"heroicons_solid:share",color:"primary"},actions:{confirm:{show:!0,label:"Yes, Share",color:"primary"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}).afterClosed().subscribe(r=>{console.log(r)})}togglePreview(){this.isPreview=!this.isPreview}sendEvent(){""!=this.eventInput.nativeElement.value&&this.eventService.sendTextEvent(this.eventInput.nativeElement.value).then(()=>{this._changeDetectorRef.markForCheck()}).catch(t=>{console.error("Failed to send Event:",t)})}static#t=this.\u0275fac=function(r){return new(r||e)(i.rXU(i.gRc),i.rXU(ns.T),i.rXU(Ti.A),i.rXU(Ac.n),i.rXU(Mt.up),i.rXU(dt.nX),i.rXU(Cc),i.rXU(Mi),i.rXU(es),i.rXU(Lt.bZ),i.rXU(Tc.P),i.rXU(Ic.m),i.rXU(Pc))};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["profile"]],viewQuery:function(r,o){if(1&r&&(i.GBs(Nc,5),i.GBs(Uc,5)),2&r){let a;i.mGM(a=i.lsd())&&(o.eventInput=a.first),i.mGM(a=i.lsd())&&(o.commentInput=a.first)}},standalone:!0,features:[i.aNF],decls:71,vars:25,consts:[["defaultAvatar",""],["profileMenu","matMenu"],["listEventMenu","matMenu"],["listCard08Menu","matMenu"],["eventInput",""],["postCardMenu01","matMenu"],["expandableComments","angorCard"],["postCardMenu02","matMenu"],["commentInput",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"bg-card","flex","flex-col","shadow"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';",1,"h-40","object-cover","lg:h-80",3,"src","alt"],[1,"bg-card","mx-auto","flex","w-full","max-w-5xl","flex-0","flex-col","items-center","px-8","lg:h-18","lg:flex-row"],[1,"-mt-26","flex-shrink-0","rounded-full","lg:-mt-22"],[4,"ngIf","ngIfElse"],[1,"mt-4","flex","flex-grow","flex-col","items-center","lg:ml-8","lg:mt-0","lg:items-start"],[1,"max-w-full","truncate","text-lg","font-bold","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"text-secondary","max-w-full","truncate","leading-tight","lg:max-w-[25rem]",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[1,"mx-8","hidden","h-8","flex-shrink-0","border-l-2","lg:flex"],[1,"mt-6","flex","flex-shrink-0","items-center","space-x-6","lg:mt-0"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-secondary","text-sm","font-medium"],[1,"mb-4","mt-8","flex","flex-shrink-0","items-center","space-x-6","lg:m-0","lg:ml-auto"],[4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"my-2"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","",4,"ngIf"],[1,"mx-auto","flex","w-full","max-w-5xl","flex-auto","justify-center","p-6","sm:p-8"],[1,"mr-8","hidden","flex-col","items-start","lg:flex"],["class","flex w-full max-w-80 flex-col p-8",4,"ngIf"],["class","flex w-full max-w-80 flex-col px-8 pb-4 pt-6",3,"ngClass",4,"ngIf"],[1,"mt-8","flex","w-full","max-w-80","flex-col","px-8","pb-4","pt-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-menu-item",""],[1,"mt-5","flex","flex-col"],[1,"flex","items-center"],["src","images/cards/coffee-shop-01-320x200.jpg","alt","Card cover image",1,"mr-4","h-14","w-14","rounded","object-cover"],[1,"flex","min-w-0","flex-col"],[1,"font-medium","leading-none"],[1,"mt-1","truncate","text-md","leading-none"],[1,"text-secondary","mt-2","text-md","leading-none"],[1,"-mx-3","mt-6","flex","items-center"],["mat-button","",1,"px-3",3,"color","routerLink"],[1,"flex","w-full","flex-col","items-start"],["class","mb-8 flex w-full flex-col p-6 pb-6 sm:p-8",4,"ngIf"],["class","mb-8 flex w-full flex-col bg-primary-50 dark:bg-primary-800",4,"ngIf"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","max-w-fit","rounded-full","object-cover","ring-4",3,"src","alt"],["src","/images/avatars/avatar-placeholder.png","onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"ring-bg-card","h-32","min-h-32","w-32","min-w-32","rounded-full","object-cover","ring-4",3,"alt"],["mat-icon-button","",3,"click","matTooltip"],[3,"svgIcon"],["mat-menu-item","",3,"click"],[1,"mr-3","icon-size-5",3,"svgIcon"],["mat-menu-item","",3,"routerLink"],[1,"flex","w-full","max-w-80","flex-col","p-8"],[1,"mt-4"],["mat-flat-button","",1,"mt-8","px-6",3,"color","routerLink"],[1,"flex","w-full","max-w-80","flex-col","px-8","pb-4","pt-6",3,"ngClass"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["class","mt-6 flex justify-between",4,"ngFor","ngForOf"],[1,"mt-6","flex","justify-between"],["class","h-14 w-14 rounded-full object-cover","onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","role","button",3,"src","alt","matTooltip","routerLink",4,"ngFor","ngForOf"],["onerror","this.onerror=null; this.src='/images/pages/profile/cover.jpg';","role","button",1,"h-14","w-14","rounded-full","object-cover",3,"src","alt","matTooltip","routerLink"],[1,"mb-8","flex","w-full","flex-col","p-6","pb-6","sm:p-8"],[1,"flex","justify-between"],[1,"text-xl","font-semibold"],[1,"-mr-4","ml-auto",3,"change","color"],[1,"mt-8","flex","flex-col","items-start","sm:flex-row"],[1,"mb-6","flex","items-center","sm:mb-0"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-12","w-12","min-w-12","rounded-full","object-cover",3,"src","alt"],[1,"sm:hidden"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"placeholder","rows"],[1,"-mx-3","mt-6","flex","items-center","justify-between","sm:mt-8"],["mat-button","",1,"mr-1","px-3",3,"click"],[1,"ml-2"],["class","emoji-picker-container-global",4,"ngIf"],["mat-button","",1,"mr-1","hidden","px-3","sm:inline-flex"],["mat-button","",1,"px-3",3,"matMenuTriggerFor"],["mat-menu-item","",1,"sm:hidden"],["mat-button","",1,"mr-1","flex","px-3",3,"click"],[1,"emoji-picker-container-global"],[3,"emojiClick","darkMode"],[1,"mb-8","flex","w-full","flex-col","bg-primary-50","dark:bg-primary-800"],[1,"mx-6","mb-4","mt-6","flex","items-center","sm:mx-8"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-4","h-10","w-10","rounded-full",3,"src","alt"],[1,"font-semibold","leading-none"],[1,"text-secondary","mt-1","text-sm","leading-none"],["mat-icon-button","",1,"-mr-4","ml-auto",3,"matMenuTriggerFor"],[1,"mx-6","mb-6","mt-2","sm:mx-8"],[1,"relative","mb-4"],[1,"mx-3","flex","items-center","sm:mx-5"],[1,"text-red-500","icon-size-5",3,"ngClass","svgIcon"],["mat-button","",1,"mr-1","px-3"],[1,"mx-6","mb-6","mt-4","border-b","sm:mx-8"],[1,"mx-6","mb-4","flex","flex-col","sm:mx-8","sm:mb-6","sm:flex-row","sm:items-center"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","h-6","w-6","rounded-full","ring-2","ring-white"],["src","images/avatars/avatar-placeholder.png","alt","Card cover image",1,"text-card","m-0.5","-ml-3","h-6","w-6","rounded-full","ring-2","ring-white"],[1,"ml-3","text-md","tracking-tight"],[1,"hidden","flex-auto","sm:flex"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"-ml-2","mr-1","px-3","sm:ml-0"],["mat-button","",1,"px-3","sm:-mr-4",3,"click"],[1,"mr-1"],[1,"rotate-0","transition-transform","duration-150","ease-in-out","icon-size-5",3,"ngClass","svgIcon"],["angorCardExpansion",""],[1,"m-0","border-b"],[1,"mx-4","mb-3","mt-6","flex","flex-col","sm:mx-8"],[1,"flex","items-start"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"mr-5","h-12","w-12","rounded-full","object-cover",3,"src","alt"],[1,"mt-3","flex","items-center","justify-between"],["mat-icon-button","",3,"click"],["mat-icon-button",""],["mat-button","",1,"mr-1","flex","px-3"]],template:function(r,o){if(1&r&&(i.j41(0,"div",9)(1,"div",10)(2,"div"),i.nrm(3,"img",11),i.k0s(),i.j41(4,"div",12)(5,"div",13),i.DNE(6,Fc,2,2,"ng-container",14)(7,Gc,1,1,"ng-template",null,0,i.C5r),i.k0s(),i.j41(9,"div",15)(10,"div",16),i.EFF(11),i.k0s(),i.j41(12,"div",17),i.EFF(13),i.k0s()(),i.nrm(14,"div",18),i.j41(15,"div",19)(16,"div",20)(17,"span",21),i.EFF(18),i.k0s(),i.j41(19,"span",22),i.EFF(20,"FOLLOWERS"),i.k0s()(),i.j41(21,"div",20)(22,"span",21),i.EFF(23),i.k0s(),i.j41(24,"span",22),i.EFF(25,"FOLLOWING"),i.k0s()()(),i.nrm(26,"div",18),i.j41(27,"div",23),i.DNE(28,zc,3,2,"div",24),i.j41(29,"div")(30,"button",25),i.nrm(31,"mat-icon",26),i.k0s(),i.j41(32,"mat-menu",null,1),i.DNE(34,qc,5,1,"button",27)(35,Hc,5,1,"button",27),i.nrm(36,"mat-divider",28),i.DNE(37,Wc,5,2,"button",29)(38,Vc,5,1,"button",30)(39,Yc,5,1,"button",30),i.k0s()()()()(),i.j41(40,"div",31)(41,"div",32),i.DNE(42,Kc,7,4,"angor-card",33)(43,tu,12,8,"angor-card",34),i.j41(44,"angor-card",35)(45,"div",36)(46,"div",37),i.EFF(47," Last projects "),i.k0s(),i.j41(48,"div",38)(49,"button",25),i.nrm(50,"mat-icon",26),i.k0s(),i.j41(51,"mat-menu",null,2)(53,"button",39),i.EFF(54,"Search for groups"),i.k0s()()()(),i.j41(55,"div",40)(56,"div",41),i.nrm(57,"img",42),i.j41(58,"div",43)(59,"div",44),i.EFF(60," The Port Cafe "),i.k0s(),i.j41(61,"div",45),i.EFF(62," Best cafe of the downtown New York "),i.k0s(),i.j41(63,"div",46),i.EFF(64," 1.2k followers "),i.k0s()()()(),i.j41(65,"div",47)(66,"a",48),i.EFF(67," See all Project "),i.k0s()()()(),i.j41(68,"div",49),i.DNE(69,nu,62,19,"angor-card",50)(70,iu,98,33,"angor-card",51),i.k0s()()()),2&r){const a=i.sdS(8),u=i.sdS(33),f=i.sdS(52);i.R7$(3),i.FS9("alt",(null==o.metadata?null:o.metadata.display_name)||(null==o.metadata?null:o.metadata.name)||"Banner"),i.Y8G("src",(null==o.metadata?null:o.metadata.banner)||"/images/pages/profile/cover.jpg",i.B4B),i.R7$(3),i.Y8G("ngIf",null==o.metadata?null:o.metadata.picture)("ngIfElse",a),i.R7$(5),i.SpI(" ",(null==o.metadata?null:o.metadata.display_name)||(null==o.metadata?null:o.metadata.name)||"Unknown User"," "),i.R7$(2),i.SpI(" ",(null==o.metadata?null:o.metadata.username)||(null==o.metadata?null:o.metadata.name)," "),i.R7$(5),i.JRh(o.followers.length),i.R7$(5),i.JRh(o.following.length),i.R7$(5),i.Y8G("ngIf",!o.isCurrentUserProfile),i.R7$(2),i.Y8G("matMenuTriggerFor",u),i.R7$(),i.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),i.R7$(3),i.Y8G("ngIf",!o.isCurrentUserProfile),i.R7$(),i.Y8G("ngIf",o.isCurrentUserProfile),i.R7$(2),i.Y8G("ngIf",o.isCurrentUserProfile),i.R7$(),i.Y8G("ngIf",!o.isCurrentUserProfile),i.R7$(),i.Y8G("ngIf",!o.isCurrentUserProfile),i.R7$(3),i.Y8G("ngIf",(null==o.metadata?null:o.metadata.about)&&""!==o.metadata.about.trim()),i.R7$(),i.Y8G("ngIf",o.suggestions.length>0),i.R7$(6),i.Y8G("matMenuTriggerFor",f),i.R7$(),i.Y8G("svgIcon","heroicons_solid:ellipsis-vertical"),i.R7$(16),i.Y8G("color","primary")("routerLink",i.lJ4(24,is)),i.R7$(3),i.Y8G("ngIf",o.isCurrentUserProfile),i.R7$(),i.Y8G("ngIf",o.isPreview)}},dependencies:[dt.Wk,_.n,et.m_,et.An,R.Hl,R.It,R.$z,R.iY,X.Cn,X.kk,X.fb,X.Cp,$.RG,$.rl,ut.fS,ut.fg,A.xb,A.EE,B.w,B.q,j.uc,j.oV,m.YU,m.MD,m.Sq,m.bT,C.YN,ot,G.Ic,U.sG,nt.D6,re],styles:[".emoji-picker-container-global{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;width:350px;max-width:100%}.heart-beat{animation:heartBeatAnimation .3s ease-in-out}@keyframes heartBeatAnimation{0%{transform:scale(1)}30%{transform:scale(2)}60%{transform:scale(1)}to{transform:scale(1)}}.loading-spinner{display:flex;justify-content:center;align-items:center;margin:20px 0}.loading-spinner .spinner{border:4px solid rgba(0,0,0,.1);border-left-color:#009fb5;border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n"],encapsulation:2,changeDetection:0})}return e})()}]},2577:(bt,P,k)=>{const y=k(531),_=k(8715),A=k(465),m=k(5510);function C(R,B,$,et,ut){const X=[].slice.call(arguments,1),nt=X.length,U="function"==typeof X[nt-1];if(!U&&!y())throw new Error("Callback required as last argument");if(!U){if(nt<1)throw new Error("Too few arguments provided");return 1===nt?($=B,B=et=void 0):2===nt&&!B.getContext&&(et=$,$=B,B=void 0),new Promise(function(j,dt){try{const G=_.create($,et);j(R(G,B,et))}catch(G){dt(G)}})}if(nt<2)throw new Error("Too few arguments provided");2===nt?(ut=$,$=B,B=et=void 0):3===nt&&(B.getContext&&typeof ut>"u"?(ut=et,et=void 0):(ut=et,et=$,$=B,B=void 0));try{const j=_.create($,et);ut(null,R(j,B,et))}catch(j){ut(j)}}P.mo=C.bind(null,A.render),P.dY=C.bind(null,A.renderToDataURL),P.toString=C.bind(null,function(R,B,$){return m.render(R,$)})},531:bt=>{bt.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},919:(bt,P,k)=>{const E=k(2656).getSymbolSize;P.getRowColCoords=function(_){if(1===_)return[];const A=Math.floor(_/7)+2,m=E(_),C=145===m?26:2*Math.ceil((m-13)/(2*A-2)),R=[m-7];for(let B=1;B<A-1;B++)R[B]=R[B-1]-C;return R.push(6),R.reverse()},P.getPositions=function(_){const A=[],m=P.getRowColCoords(_),C=m.length;for(let R=0;R<C;R++)for(let B=0;B<C;B++)0===R&&0===B||0===R&&B===C-1||R===C-1&&0===B||A.push([m[R],m[B]]);return A}},387:(bt,P,k)=>{const E=k(838),y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function _(A){this.mode=E.ALPHANUMERIC,this.data=A}_.getBitsLength=function(m){return 11*Math.floor(m/2)+m%2*6},_.prototype.getLength=function(){return this.data.length},_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)},_.prototype.write=function(m){let C;for(C=0;C+2<=this.data.length;C+=2){let R=45*y.indexOf(this.data[C]);R+=y.indexOf(this.data[C+1]),m.put(R,11)}this.data.length%2&&m.put(y.indexOf(this.data[C]),6)},bt.exports=_},4481:bt=>{function P(){this.buffer=[],this.length=0}P.prototype={get:function(k){const E=Math.floor(k/8);return 1==(this.buffer[E]>>>7-k%8&1)},put:function(k,E){for(let y=0;y<E;y++)this.putBit(1==(k>>>E-y-1&1))},getLengthInBits:function(){return this.length},putBit:function(k){const E=Math.floor(this.length/8);this.buffer.length<=E&&this.buffer.push(0),k&&(this.buffer[E]|=128>>>this.length%8),this.length++}},bt.exports=P},8038:bt=>{function P(k){if(!k||k<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=k,this.data=new Uint8Array(k*k),this.reservedBit=new Uint8Array(k*k)}P.prototype.set=function(k,E,y,_){const A=k*this.size+E;this.data[A]=y,_&&(this.reservedBit[A]=!0)},P.prototype.get=function(k,E){return this.data[k*this.size+E]},P.prototype.xor=function(k,E,y){this.data[k*this.size+E]^=y},P.prototype.isReserved=function(k,E){return this.reservedBit[k*this.size+E]},bt.exports=P},1736:(bt,P,k)=>{const E=k(3174),y=k(838);function _(A){this.mode=y.BYTE,"string"==typeof A&&(A=E(A)),this.data=new Uint8Array(A)}_.getBitsLength=function(m){return 8*m},_.prototype.getLength=function(){return this.data.length},_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)},_.prototype.write=function(A){for(let m=0,C=this.data.length;m<C;m++)A.put(this.data[m],8)},bt.exports=_},2296:(bt,P,k)=>{const E=k(139),y=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];P.getBlocksCount=function(m,C){switch(C){case E.L:return y[4*(m-1)+0];case E.M:return y[4*(m-1)+1];case E.Q:return y[4*(m-1)+2];case E.H:return y[4*(m-1)+3];default:return}},P.getTotalCodewordsCount=function(m,C){switch(C){case E.L:return _[4*(m-1)+0];case E.M:return _[4*(m-1)+1];case E.Q:return _[4*(m-1)+2];case E.H:return _[4*(m-1)+3];default:return}}},139:(bt,P)=>{P.L={bit:1},P.M={bit:0},P.Q={bit:3},P.H={bit:2},P.isValid=function(y){return y&&typeof y.bit<"u"&&y.bit>=0&&y.bit<4},P.from=function(y,_){if(P.isValid(y))return y;try{return function k(E){if("string"!=typeof E)throw new Error("Param is not a string");switch(E.toLowerCase()){case"l":case"low":return P.L;case"m":case"medium":return P.M;case"q":case"quartile":return P.Q;case"h":case"high":return P.H;default:throw new Error("Unknown EC Level: "+E)}}(y)}catch{return _}}},9202:(bt,P,k)=>{const E=k(2656).getSymbolSize;P.getPositions=function(A){const m=E(A);return[[0,0],[m-7,0],[0,m-7]]}},9211:(bt,P,k)=>{const E=k(2656),A=E.getBCHDigit(1335);P.getEncodedBits=function(C,R){const B=C.bit<<3|R;let $=B<<10;for(;E.getBCHDigit($)-A>=0;)$^=1335<<E.getBCHDigit($)-A;return 21522^(B<<10|$)}},6965:(bt,P)=>{const k=new Uint8Array(512),E=new Uint8Array(256);(function(){let _=1;for(let A=0;A<255;A++)k[A]=_,E[_]=A,_<<=1,256&_&&(_^=285);for(let A=255;A<512;A++)k[A]=k[A-255]})(),P.log=function(_){if(_<1)throw new Error("log("+_+")");return E[_]},P.exp=function(_){return k[_]},P.mul=function(_,A){return 0===_||0===A?0:k[E[_]+E[A]]}},1971:(bt,P,k)=>{const E=k(838),y=k(2656);function _(A){this.mode=E.KANJI,this.data=A}_.getBitsLength=function(m){return 13*m},_.prototype.getLength=function(){return this.data.length},_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)},_.prototype.write=function(A){let m;for(m=0;m<this.data.length;m++){let C=y.toSJIS(this.data[m]);if(C>=33088&&C<=40956)C-=33088;else{if(!(C>=57408&&C<=60351))throw new Error("Invalid SJIS character: "+this.data[m]+"\nMake sure your charset is UTF-8");C-=49472}C=192*(C>>>8&255)+(255&C),A.put(C,13)}},bt.exports=_},9366:(bt,P)=>{P.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function E(y,_,A){switch(y){case P.Patterns.PATTERN000:return(_+A)%2==0;case P.Patterns.PATTERN001:return _%2==0;case P.Patterns.PATTERN010:return A%3==0;case P.Patterns.PATTERN011:return(_+A)%3==0;case P.Patterns.PATTERN100:return(Math.floor(_/2)+Math.floor(A/3))%2==0;case P.Patterns.PATTERN101:return _*A%2+_*A%3==0;case P.Patterns.PATTERN110:return(_*A%2+_*A%3)%2==0;case P.Patterns.PATTERN111:return(_*A%3+(_+A)%2)%2==0;default:throw new Error("bad maskPattern:"+y)}}P.isValid=function(_){return null!=_&&""!==_&&!isNaN(_)&&_>=0&&_<=7},P.from=function(_){return P.isValid(_)?parseInt(_,10):void 0},P.getPenaltyN1=function(_){const A=_.size;let m=0,C=0,R=0,B=null,$=null;for(let et=0;et<A;et++){C=R=0,B=$=null;for(let ut=0;ut<A;ut++){let X=_.get(et,ut);X===B?C++:(C>=5&&(m+=C-5+3),B=X,C=1),X=_.get(ut,et),X===$?R++:(R>=5&&(m+=R-5+3),$=X,R=1)}C>=5&&(m+=C-5+3),R>=5&&(m+=R-5+3)}return m},P.getPenaltyN2=function(_){const A=_.size;let m=0;for(let C=0;C<A-1;C++)for(let R=0;R<A-1;R++){const B=_.get(C,R)+_.get(C,R+1)+_.get(C+1,R)+_.get(C+1,R+1);(4===B||0===B)&&m++}return 3*m},P.getPenaltyN3=function(_){const A=_.size;let m=0,C=0,R=0;for(let B=0;B<A;B++){C=R=0;for(let $=0;$<A;$++)C=C<<1&2047|_.get(B,$),$>=10&&(1488===C||93===C)&&m++,R=R<<1&2047|_.get($,B),$>=10&&(1488===R||93===R)&&m++}return 40*m},P.getPenaltyN4=function(_){let A=0;const m=_.data.length;for(let R=0;R<m;R++)A+=_.data[R];return 10*Math.abs(Math.ceil(100*A/m/5)-10)},P.applyMask=function(_,A){const m=A.size;for(let C=0;C<m;C++)for(let R=0;R<m;R++)A.isReserved(R,C)||A.xor(R,C,E(_,R,C))},P.getBestMask=function(_,A){const m=Object.keys(P.Patterns).length;let C=0,R=1/0;for(let B=0;B<m;B++){A(B),P.applyMask(B,_);const $=P.getPenaltyN1(_)+P.getPenaltyN2(_)+P.getPenaltyN3(_)+P.getPenaltyN4(_);P.applyMask(B,_),$<R&&(R=$,C=B)}return C}},838:(bt,P,k)=>{const E=k(1604),y=k(6082);P.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},P.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},P.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},P.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},P.MIXED={bit:-1},P.getCharCountIndicator=function(m,C){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!E.isValid(C))throw new Error("Invalid version: "+C);return C>=1&&C<10?m.ccBits[0]:C<27?m.ccBits[1]:m.ccBits[2]},P.getBestModeForData=function(m){return y.testNumeric(m)?P.NUMERIC:y.testAlphanumeric(m)?P.ALPHANUMERIC:y.testKanji(m)?P.KANJI:P.BYTE},P.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},P.isValid=function(m){return m&&m.bit&&m.ccBits},P.from=function(m,C){if(P.isValid(m))return m;try{return function _(A){if("string"!=typeof A)throw new Error("Param is not a string");switch(A.toLowerCase()){case"numeric":return P.NUMERIC;case"alphanumeric":return P.ALPHANUMERIC;case"kanji":return P.KANJI;case"byte":return P.BYTE;default:throw new Error("Unknown mode: "+A)}}(m)}catch{return C}}},7035:(bt,P,k)=>{const E=k(838);function y(_){this.mode=E.NUMERIC,this.data=_.toString()}y.getBitsLength=function(A){return 10*Math.floor(A/3)+(A%3?A%3*3+1:0)},y.prototype.getLength=function(){return this.data.length},y.prototype.getBitsLength=function(){return y.getBitsLength(this.data.length)},y.prototype.write=function(A){let m,C,R;for(m=0;m+3<=this.data.length;m+=3)C=this.data.substr(m,3),R=parseInt(C,10),A.put(R,10);const B=this.data.length-m;B>0&&(C=this.data.substr(m),R=parseInt(C,10),A.put(R,3*B+1))},bt.exports=y},7767:(bt,P,k)=>{const E=k(6965);P.mul=function(_,A){const m=new Uint8Array(_.length+A.length-1);for(let C=0;C<_.length;C++)for(let R=0;R<A.length;R++)m[C+R]^=E.mul(_[C],A[R]);return m},P.mod=function(_,A){let m=new Uint8Array(_);for(;m.length-A.length>=0;){const C=m[0];for(let B=0;B<A.length;B++)m[B]^=E.mul(A[B],C);let R=0;for(;R<m.length&&0===m[R];)R++;m=m.slice(R)}return m},P.generateECPolynomial=function(_){let A=new Uint8Array([1]);for(let m=0;m<_;m++)A=P.mul(A,new Uint8Array([1,E.exp(m)]));return A}},8715:(bt,P,k)=>{const E=k(2656),y=k(139),_=k(4481),A=k(8038),m=k(919),C=k(9202),R=k(9366),B=k(2296),$=k(6758),et=k(8925),ut=k(9211),X=k(838),nt=k(7939);function W(it,ot,at){const ht=it.size,p=ut.getEncodedBits(ot,at);let s,l;for(s=0;s<15;s++)l=1==(p>>s&1),it.set(s<6?s:s<8?s+1:ht-15+s,8,l,!0),it.set(8,s<8?ht-s-1:s<9?15-s-1+1:15-s-1,l,!0);it.set(ht-8,8,1,!0)}function Nt(it,ot,at,ht){let p;if(Array.isArray(it))p=nt.fromArray(it);else{if("string"!=typeof it)throw new Error("Invalid data");{let v=ot;if(!v){const M=nt.rawSplit(it);v=et.getBestVersionForData(M,at)}p=nt.fromString(it,v||40)}}const s=et.getBestVersionForData(p,at);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(ot){if(ot<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else ot=s;const l=function ct(it,ot,at){const ht=new _;at.forEach(function(d){ht.put(d.mode.bit,4),ht.put(d.getLength(),X.getCharCountIndicator(d.mode,it)),d.write(ht)});const l=8*(E.getSymbolTotalCodewords(it)-B.getTotalCodewordsCount(it,ot));for(ht.getLengthInBits()+4<=l&&ht.put(0,4);ht.getLengthInBits()%8!=0;)ht.putBit(0);const h=(l-ht.getLengthInBits())/8;for(let d=0;d<h;d++)ht.put(d%2?17:236,8);return function Mt(it,ot,at){const ht=E.getSymbolTotalCodewords(ot),s=ht-B.getTotalCodewordsCount(ot,at),l=B.getBlocksCount(ot,at),d=l-ht%l,v=Math.floor(ht/l),M=Math.floor(s/l),I=M+1,w=v-M,c=new $(w);let x=0;const ft=new Array(l),mt=new Array(l);let gt=0;const xt=new Uint8Array(it.buffer);for(let Tt=0;Tt<l;Tt++){const Ke=Tt<d?M:I;ft[Tt]=xt.slice(x,x+Ke),mt[Tt]=c.encode(ft[Tt]),x+=Ke,gt=Math.max(gt,Ke)}const At=new Uint8Array(ht);let Ut,St,kt=0;for(Ut=0;Ut<gt;Ut++)for(St=0;St<l;St++)Ut<ft[St].length&&(At[kt++]=ft[St][Ut]);for(Ut=0;Ut<w;Ut++)for(St=0;St<l;St++)At[kt++]=mt[St][Ut];return At}(ht,it,ot)}(ot,at,p),h=E.getSymbolSize(ot),d=new A(h);return function U(it,ot){const at=it.size,ht=C.getPositions(ot);for(let p=0;p<ht.length;p++){const s=ht[p][0],l=ht[p][1];for(let h=-1;h<=7;h++)if(!(s+h<=-1||at<=s+h))for(let d=-1;d<=7;d++)l+d<=-1||at<=l+d||it.set(s+h,l+d,h>=0&&h<=6&&(0===d||6===d)||d>=0&&d<=6&&(0===h||6===h)||h>=2&&h<=4&&d>=2&&d<=4,!0)}}(d,ot),function j(it){const ot=it.size;for(let at=8;at<ot-8;at++){const ht=at%2==0;it.set(at,6,ht,!0),it.set(6,at,ht,!0)}}(d),function dt(it,ot){const at=m.getPositions(ot);for(let ht=0;ht<at.length;ht++){const p=at[ht][0],s=at[ht][1];for(let l=-2;l<=2;l++)for(let h=-2;h<=2;h++)it.set(p+l,s+h,-2===l||2===l||-2===h||2===h||0===l&&0===h,!0)}}(d,ot),W(d,at,0),ot>=7&&function G(it,ot){const at=it.size,ht=et.getEncodedBits(ot);let p,s,l;for(let h=0;h<18;h++)p=Math.floor(h/3),s=h%3+at-8-3,l=1==(ht>>h&1),it.set(p,s,l,!0),it.set(s,p,l,!0)}(d,ot),function i(it,ot){const at=it.size;let ht=-1,p=at-1,s=7,l=0;for(let h=at-1;h>0;h-=2)for(6===h&&h--;;){for(let d=0;d<2;d++)if(!it.isReserved(p,h-d)){let v=!1;l<ot.length&&(v=1==(ot[l]>>>s&1)),it.set(p,h-d,v),s--,-1===s&&(l++,s=7)}if(p+=ht,p<0||at<=p){p-=ht,ht=-ht;break}}}(d,l),isNaN(ht)&&(ht=R.getBestMask(d,W.bind(null,d,at))),R.applyMask(ht,d),W(d,at,ht),{modules:d,version:ot,errorCorrectionLevel:at,maskPattern:ht,segments:p}}P.create=function(ot,at){if(typeof ot>"u"||""===ot)throw new Error("No input text");let p,s,ht=y.M;return typeof at<"u"&&(ht=y.from(at.errorCorrectionLevel,y.M),p=et.from(at.version),s=R.from(at.maskPattern),at.toSJISFunc&&E.setToSJISFunction(at.toSJISFunc)),Nt(ot,p,ht,s)}},6758:(bt,P,k)=>{const E=k(7767);function y(_){this.genPoly=void 0,this.degree=_,this.degree&&this.initialize(this.degree)}y.prototype.initialize=function(A){this.degree=A,this.genPoly=E.generateECPolynomial(this.degree)},y.prototype.encode=function(A){if(!this.genPoly)throw new Error("Encoder not initialized");const m=new Uint8Array(A.length+this.degree);m.set(A);const C=E.mod(m,this.genPoly),R=this.degree-C.length;if(R>0){const B=new Uint8Array(this.degree);return B.set(C,R),B}return C},bt.exports=y},6082:(bt,P)=>{const k="[0-9]+";let y="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";y=y.replace(/u/g,"\\u");const _="(?:(?![A-Z0-9 $%*+\\-./:]|"+y+")(?:.|[\r\n]))+";P.KANJI=new RegExp(y,"g"),P.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),P.BYTE=new RegExp(_,"g"),P.NUMERIC=new RegExp(k,"g"),P.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const A=new RegExp("^"+y+"$"),m=new RegExp("^"+k+"$"),C=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");P.testKanji=function(B){return A.test(B)},P.testNumeric=function(B){return m.test(B)},P.testAlphanumeric=function(B){return C.test(B)}},7939:(bt,P,k)=>{const E=k(838),y=k(7035),_=k(387),A=k(1736),m=k(1971),C=k(6082),R=k(2656),B=k(243);function $(G){return unescape(encodeURIComponent(G)).length}function et(G,W,i){const ct=[];let Mt;for(;null!==(Mt=G.exec(i));)ct.push({data:Mt[0],index:Mt.index,mode:W,length:Mt[0].length});return ct}function ut(G){const W=et(C.NUMERIC,E.NUMERIC,G),i=et(C.ALPHANUMERIC,E.ALPHANUMERIC,G);let ct,Mt;return R.isKanjiModeEnabled()?(ct=et(C.BYTE,E.BYTE,G),Mt=et(C.KANJI,E.KANJI,G)):(ct=et(C.BYTE_KANJI,E.BYTE,G),Mt=[]),W.concat(i,ct,Mt).sort(function(it,ot){return it.index-ot.index}).map(function(it){return{data:it.data,mode:it.mode,length:it.length}})}function X(G,W){switch(W){case E.NUMERIC:return y.getBitsLength(G);case E.ALPHANUMERIC:return _.getBitsLength(G);case E.KANJI:return m.getBitsLength(G);case E.BYTE:return A.getBitsLength(G)}}function dt(G,W){let i;const ct=E.getBestModeForData(G);if(i=E.from(W,ct),i!==E.BYTE&&i.bit<ct.bit)throw new Error('"'+G+'" cannot be encoded with mode '+E.toString(i)+".\n Suggested mode is: "+E.toString(ct));switch(i===E.KANJI&&!R.isKanjiModeEnabled()&&(i=E.BYTE),i){case E.NUMERIC:return new y(G);case E.ALPHANUMERIC:return new _(G);case E.KANJI:return new m(G);case E.BYTE:return new A(G)}}P.fromArray=function(W){return W.reduce(function(i,ct){return"string"==typeof ct?i.push(dt(ct,null)):ct.data&&i.push(dt(ct.data,ct.mode)),i},[])},P.fromString=function(W,i){const Mt=function U(G){const W=[];for(let i=0;i<G.length;i++){const ct=G[i];switch(ct.mode){case E.NUMERIC:W.push([ct,{data:ct.data,mode:E.ALPHANUMERIC,length:ct.length},{data:ct.data,mode:E.BYTE,length:ct.length}]);break;case E.ALPHANUMERIC:W.push([ct,{data:ct.data,mode:E.BYTE,length:ct.length}]);break;case E.KANJI:W.push([ct,{data:ct.data,mode:E.BYTE,length:$(ct.data)}]);break;case E.BYTE:W.push([{data:ct.data,mode:E.BYTE,length:$(ct.data)}])}}return W}(ut(W,R.isKanjiModeEnabled())),Nt=function j(G,W){const i={},ct={start:{}};let Mt=["start"];for(let Nt=0;Nt<G.length;Nt++){const it=G[Nt],ot=[];for(let at=0;at<it.length;at++){const ht=it[at],p=""+Nt+at;ot.push(p),i[p]={node:ht,lastCount:0},ct[p]={};for(let s=0;s<Mt.length;s++){const l=Mt[s];i[l]&&i[l].node.mode===ht.mode?(ct[l][p]=X(i[l].lastCount+ht.length,ht.mode)-X(i[l].lastCount,ht.mode),i[l].lastCount+=ht.length):(i[l]&&(i[l].lastCount=ht.length),ct[l][p]=X(ht.length,ht.mode)+4+E.getCharCountIndicator(ht.mode,W))}}Mt=ot}for(let Nt=0;Nt<Mt.length;Nt++)ct[Mt[Nt]].end=0;return{map:ct,table:i}}(Mt,i),it=B.find_path(Nt.map,"start","end"),ot=[];for(let at=1;at<it.length-1;at++)ot.push(Nt.table[it[at]].node);return P.fromArray(function nt(G){return G.reduce(function(W,i){const ct=W.length-1>=0?W[W.length-1]:null;return ct&&ct.mode===i.mode?(W[W.length-1].data+=i.data,W):(W.push(i),W)},[])}(ot))},P.rawSplit=function(W){return P.fromArray(ut(W,R.isKanjiModeEnabled()))}},2656:(bt,P)=>{let k;const E=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];P.getSymbolSize=function(_){if(!_)throw new Error('"version" cannot be null or undefined');if(_<1||_>40)throw new Error('"version" should be in range from 1 to 40');return 4*_+17},P.getSymbolTotalCodewords=function(_){return E[_]},P.getBCHDigit=function(y){let _=0;for(;0!==y;)_++,y>>>=1;return _},P.setToSJISFunction=function(_){if("function"!=typeof _)throw new Error('"toSJISFunc" is not a valid function.');k=_},P.isKanjiModeEnabled=function(){return typeof k<"u"},P.toSJIS=function(_){return k(_)}},1604:(bt,P)=>{P.isValid=function(E){return!isNaN(E)&&E>=1&&E<=40}},8925:(bt,P,k)=>{const E=k(2656),y=k(2296),_=k(139),A=k(838),m=k(1604),R=E.getBCHDigit(7973);function $(X,nt){return A.getCharCountIndicator(X,nt)+4}function et(X,nt){let U=0;return X.forEach(function(j){const dt=$(j.mode,nt);U+=dt+j.getBitsLength()}),U}P.from=function(nt,U){return m.isValid(nt)?parseInt(nt,10):U},P.getCapacity=function(nt,U,j){if(!m.isValid(nt))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=A.BYTE);const W=8*(E.getSymbolTotalCodewords(nt)-y.getTotalCodewordsCount(nt,U));if(j===A.MIXED)return W;const i=W-$(j,nt);switch(j){case A.NUMERIC:return Math.floor(i/10*3);case A.ALPHANUMERIC:return Math.floor(i/11*2);case A.KANJI:return Math.floor(i/13);default:return Math.floor(i/8)}},P.getBestVersionForData=function(nt,U){let j;const dt=_.from(U,_.M);if(Array.isArray(nt)){if(nt.length>1)return function ut(X,nt){for(let U=1;U<=40;U++)if(et(X,U)<=P.getCapacity(U,nt,A.MIXED))return U}(nt,dt);if(0===nt.length)return 1;j=nt[0]}else j=nt;return function B(X,nt,U){for(let j=1;j<=40;j++)if(nt<=P.getCapacity(j,U,X))return j}(j.mode,j.getLength(),dt)},P.getEncodedBits=function(nt){if(!m.isValid(nt)||nt<7)throw new Error("Invalid QR Code version");let U=nt<<12;for(;E.getBCHDigit(U)-R>=0;)U^=7973<<E.getBCHDigit(U)-R;return nt<<12|U}},465:(bt,P,k)=>{const E=k(8428);P.render=function(m,C,R){let B=R,$=C;typeof B>"u"&&(!C||!C.getContext)&&(B=C,C=void 0),C||($=function _(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),B=E.getOptions(B);const et=E.getImageWidth(m.modules.size,B),ut=$.getContext("2d"),X=ut.createImageData(et,et);return E.qrToImageData(X.data,m,B),function y(A,m,C){A.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=C,m.width=C,m.style.height=C+"px",m.style.width=C+"px"}(ut,$,et),ut.putImageData(X,0,0),$},P.renderToDataURL=function(m,C,R){let B=R;return typeof B>"u"&&(!C||!C.getContext)&&(B=C,C=void 0),B||(B={}),P.render(m,C,B).toDataURL(B.type||"image/png",(B.rendererOpts||{}).quality)}},5510:(bt,P,k)=>{const E=k(8428);function y(m,C){const R=m.a/255,B=C+'="'+m.hex+'"';return R<1?B+" "+C+'-opacity="'+R.toFixed(2).slice(1)+'"':B}function _(m,C,R){let B=m+C;return typeof R<"u"&&(B+=" "+R),B}P.render=function(C,R,B){const $=E.getOptions(R),et=C.modules.size,ut=C.modules.data,X=et+2*$.margin,nt=$.color.light.a?"<path "+y($.color.light,"fill")+' d="M0 0h'+X+"v"+X+'H0z"/>':"",U="<path "+y($.color.dark,"stroke")+' d="'+function A(m,C,R){let B="",$=0,et=!1,ut=0;for(let X=0;X<m.length;X++){const nt=Math.floor(X%C),U=Math.floor(X/C);!nt&&!et&&(et=!0),m[X]?(ut++,X>0&&nt>0&&m[X-1]||(B+=et?_("M",nt+R,.5+U+R):_("m",$,0),$=0,et=!1),nt+1<C&&m[X+1]||(B+=_("h",ut),ut=0)):$++}return B}(ut,et,$.margin)+'"/>',G='<svg xmlns="http://www.w3.org/2000/svg" '+($.width?'width="'+$.width+'" height="'+$.width+'" ':"")+'viewBox="0 0 '+X+" "+X+'" shape-rendering="crispEdges">'+nt+U+"</svg>\n";return"function"==typeof B&&B(null,G),G}},8428:(bt,P)=>{function k(E){if("number"==typeof E&&(E=E.toString()),"string"!=typeof E)throw new Error("Color should be defined as hex string");let y=E.slice().replace("#","").split("");if(y.length<3||5===y.length||y.length>8)throw new Error("Invalid hex color: "+E);(3===y.length||4===y.length)&&(y=Array.prototype.concat.apply([],y.map(function(A){return[A,A]}))),6===y.length&&y.push("F","F");const _=parseInt(y.join(""),16);return{r:_>>24&255,g:_>>16&255,b:_>>8&255,a:255&_,hex:"#"+y.slice(0,6).join("")}}P.getOptions=function(y){y||(y={}),y.color||(y.color={});const A=y.width&&y.width>=21?y.width:void 0;return{width:A,scale:A?4:y.scale||4,margin:typeof y.margin>"u"||null===y.margin||y.margin<0?4:y.margin,color:{dark:k(y.color.dark||"#000000ff"),light:k(y.color.light||"#ffffffff")},type:y.type,rendererOpts:y.rendererOpts||{}}},P.getScale=function(y,_){return _.width&&_.width>=y+2*_.margin?_.width/(y+2*_.margin):_.scale},P.getImageWidth=function(y,_){const A=P.getScale(y,_);return Math.floor((y+2*_.margin)*A)},P.qrToImageData=function(y,_,A){const m=_.modules.size,C=_.modules.data,R=P.getScale(m,A),B=Math.floor((m+2*A.margin)*R),$=A.margin*R,et=[A.color.light,A.color.dark];for(let ut=0;ut<B;ut++)for(let X=0;X<B;X++){let nt=4*(ut*B+X),U=A.color.light;ut>=$&&X>=$&&ut<B-$&&X<B-$&&(U=et[C[Math.floor((ut-$)/R)*m+Math.floor((X-$)/R)]?1:0]),y[nt++]=U.r,y[nt++]=U.g,y[nt++]=U.b,y[nt]=U.a}}},917:function(bt,P,k){!function(E,y){"use strict";function _(p,s){if(!p)throw new Error(s||"Assertion failed")}function A(p,s){p.super_=s;var l=function(){};l.prototype=s.prototype,p.prototype=new l,p.prototype.constructor=p}function m(p,s,l){if(m.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,null!==p&&(("le"===s||"be"===s)&&(l=s,s=10),this._init(p||0,s||10,l||"be"))}var C;"object"==typeof E?E.exports=m:y.BN=m,m.BN=m,m.wordSize=26;try{C=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:k(7790).Buffer}catch{}function R(p,s){var l=p.charCodeAt(s);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function B(p,s,l){var h=R(p,l);return l-1>=s&&(h|=R(p,l-1)<<4),h}function $(p,s,l,h){for(var d=0,v=Math.min(p.length,l),M=s;M<v;M++){var I=p.charCodeAt(M)-48;d*=h,d+=I>=49?I-49+10:I>=17?I-17+10:I}return d}m.isBN=function(s){return s instanceof m||null!==s&&"object"==typeof s&&s.constructor.wordSize===m.wordSize&&Array.isArray(s.words)},m.max=function(s,l){return s.cmp(l)>0?s:l},m.min=function(s,l){return s.cmp(l)<0?s:l},m.prototype._init=function(s,l,h){if("number"==typeof s)return this._initNumber(s,l,h);if("object"==typeof s)return this._initArray(s,l,h);"hex"===l&&(l=16),_(l===(0|l)&&l>=2&&l<=36);var d=0;"-"===(s=s.toString().replace(/\s+/g,""))[0]&&(d++,this.negative=1),d<s.length&&(16===l?this._parseHex(s,d,h):(this._parseBase(s,l,d),"le"===h&&this._initArray(this.toArray(),l,h)))},m.prototype._initNumber=function(s,l,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[67108863&s],this.length=1):s<4503599627370496?(this.words=[67108863&s,s/67108864&67108863],this.length=2):(_(s<9007199254740992),this.words=[67108863&s,s/67108864&67108863,1],this.length=3),"le"===h&&this._initArray(this.toArray(),l,h)},m.prototype._initArray=function(s,l,h){if(_("number"==typeof s.length),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var v,M,I=0;if("be"===h)for(d=s.length-1,v=0;d>=0;d-=3)this.words[v]|=(M=s[d]|s[d-1]<<8|s[d-2]<<16)<<I&67108863,this.words[v+1]=M>>>26-I&67108863,(I+=24)>=26&&(I-=26,v++);else if("le"===h)for(d=0,v=0;d<s.length;d+=3)this.words[v]|=(M=s[d]|s[d+1]<<8|s[d+2]<<16)<<I&67108863,this.words[v+1]=M>>>26-I&67108863,(I+=24)>=26&&(I-=26,v++);return this.strip()},m.prototype._parseHex=function(s,l,h){this.length=Math.ceil((s.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var I,v=0,M=0;if("be"===h)for(d=s.length-1;d>=l;d-=2)I=B(s,l,d)<<v,this.words[M]|=67108863&I,v>=18?(v-=18,this.words[M+=1]|=I>>>26):v+=8;else for(d=(s.length-l)%2==0?l+1:l;d<s.length;d+=2)I=B(s,l,d)<<v,this.words[M]|=67108863&I,v>=18?(v-=18,this.words[M+=1]|=I>>>26):v+=8;this.strip()},m.prototype._parseBase=function(s,l,h){this.words=[0],this.length=1;for(var d=0,v=1;v<=67108863;v*=l)d++;d--,v=v/l|0;for(var M=s.length-h,I=M%d,w=Math.min(M,M-I)+h,c=0,x=h;x<w;x+=d)c=$(s,x,x+d,l),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==I){var ft=1;for(c=$(s,x,s.length,l),x=0;x<I;x++)ft*=l;this.imuln(ft),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},m.prototype.copy=function(s){s.words=new Array(this.length);for(var l=0;l<this.length;l++)s.words[l]=this.words[l];s.length=this.length,s.negative=this.negative,s.red=this.red},m.prototype.clone=function(){var s=new m(null);return this.copy(s),s},m.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},m.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},m.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},m.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var et=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ut=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],X=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function U(p,s,l){l.negative=s.negative^p.negative;var h=p.length+s.length|0;l.length=h,h=h-1|0;var d=0|p.words[0],v=0|s.words[0],M=d*v,w=M/67108864|0;l.words[0]=67108863&M;for(var c=1;c<h;c++){for(var x=w>>>26,ft=67108863&w,mt=Math.min(c,s.length-1),gt=Math.max(0,c-p.length+1);gt<=mt;gt++)x+=(M=(d=0|p.words[c-gt|0])*(v=0|s.words[gt])+ft)/67108864|0,ft=67108863&M;l.words[c]=0|ft,w=0|x}return 0!==w?l.words[c]=0|w:l.length--,l.strip()}m.prototype.toString=function(s,l){var h;if(l=0|l||1,16===(s=s||10)||"hex"===s){h="";for(var d=0,v=0,M=0;M<this.length;M++){var I=this.words[M],w=(16777215&(I<<d|v)).toString(16);h=0!=(v=I>>>24-d&16777215)||M!==this.length-1?et[6-w.length]+w+h:w+h,(d+=2)>=26&&(d-=26,M--)}for(0!==v&&(h=v.toString(16)+h);h.length%l!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}if(s===(0|s)&&s>=2&&s<=36){var c=ut[s],x=X[s];h="";var ft=this.clone();for(ft.negative=0;!ft.isZero();){var mt=ft.modn(x).toString(s);h=(ft=ft.idivn(x)).isZero()?mt+h:et[c-mt.length]+mt+h}for(this.isZero()&&(h="0"+h);h.length%l!=0;)h="0"+h;return 0!==this.negative&&(h="-"+h),h}_(!1,"Base should be between 2 and 36")},m.prototype.toNumber=function(){var s=this.words[0];return 2===this.length?s+=67108864*this.words[1]:3===this.length&&1===this.words[2]?s+=4503599627370496+67108864*this.words[1]:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-s:s},m.prototype.toJSON=function(){return this.toString(16)},m.prototype.toBuffer=function(s,l){return _(typeof C<"u"),this.toArrayLike(C,s,l)},m.prototype.toArray=function(s,l){return this.toArrayLike(Array,s,l)},m.prototype.toArrayLike=function(s,l,h){var d=this.byteLength(),v=h||Math.max(1,d);_(d<=v,"byte array longer than desired length"),_(v>0,"Requested array length <= 0"),this.strip();var w,c,M="le"===l,I=new s(v),x=this.clone();if(M){for(c=0;!x.isZero();c++)w=x.andln(255),x.iushrn(8),I[c]=w;for(;c<v;c++)I[c]=0}else{for(c=0;c<v-d;c++)I[c]=0;for(c=0;!x.isZero();c++)w=x.andln(255),x.iushrn(8),I[v-c-1]=w}return I},m.prototype._countBits=Math.clz32?function(s){return 32-Math.clz32(s)}:function(s){var l=s,h=0;return l>=4096&&(h+=13,l>>>=13),l>=64&&(h+=7,l>>>=7),l>=8&&(h+=4,l>>>=4),l>=2&&(h+=2,l>>>=2),h+l},m.prototype._zeroBits=function(s){if(0===s)return 26;var l=s,h=0;return 8191&l||(h+=13,l>>>=13),127&l||(h+=7,l>>>=7),15&l||(h+=4,l>>>=4),3&l||(h+=2,l>>>=2),1&l||h++,h},m.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},m.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,l=0;l<this.length;l++){var h=this._zeroBits(this.words[l]);if(s+=h,26!==h)break}return s},m.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},m.prototype.toTwos=function(s){return 0!==this.negative?this.abs().inotn(s).iaddn(1):this.clone()},m.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},m.prototype.isNeg=function(){return 0!==this.negative},m.prototype.neg=function(){return this.clone().ineg()},m.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},m.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]|s.words[l];return this.strip()},m.prototype.ior=function(s){return _(!(this.negative|s.negative)),this.iuor(s)},m.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},m.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},m.prototype.iuand=function(s){var l;l=this.length>s.length?s:this;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=l.length,this.strip()},m.prototype.iand=function(s){return _(!(this.negative|s.negative)),this.iuand(s)},m.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},m.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},m.prototype.iuxor=function(s){var l,h;this.length>s.length?(l=this,h=s):(l=s,h=this);for(var d=0;d<h.length;d++)this.words[d]=l.words[d]^h.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},m.prototype.ixor=function(s){return _(!(this.negative|s.negative)),this.iuxor(s)},m.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},m.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},m.prototype.inotn=function(s){_("number"==typeof s&&s>=0);var l=0|Math.ceil(s/26),h=s%26;this._expand(l),h>0&&l--;for(var d=0;d<l;d++)this.words[d]=67108863&~this.words[d];return h>0&&(this.words[d]=~this.words[d]&67108863>>26-h),this.strip()},m.prototype.notn=function(s){return this.clone().inotn(s)},m.prototype.setn=function(s,l){_("number"==typeof s&&s>=0);var h=s/26|0,d=s%26;return this._expand(h+1),this.words[h]=l?this.words[h]|1<<d:this.words[h]&~(1<<d),this.strip()},m.prototype.iadd=function(s){var l,h,d;if(0!==this.negative&&0===s.negative)return this.negative=0,l=this.isub(s),this.negative^=1,this._normSign();if(0===this.negative&&0!==s.negative)return s.negative=0,l=this.isub(s),s.negative=1,l._normSign();this.length>s.length?(h=this,d=s):(h=s,d=this);for(var v=0,M=0;M<d.length;M++)this.words[M]=67108863&(l=(0|h.words[M])+(0|d.words[M])+v),v=l>>>26;for(;0!==v&&M<h.length;M++)this.words[M]=67108863&(l=(0|h.words[M])+v),v=l>>>26;if(this.length=h.length,0!==v)this.words[this.length]=v,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},m.prototype.add=function(s){var l;return 0!==s.negative&&0===this.negative?(s.negative=0,l=this.sub(s),s.negative^=1,l):0===s.negative&&0!==this.negative?(this.negative=0,l=s.sub(this),this.negative=1,l):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},m.prototype.isub=function(s){if(0!==s.negative){s.negative=0;var l=this.iadd(s);return s.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var d,v,h=this.cmp(s);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(d=this,v=s):(d=s,v=this);for(var M=0,I=0;I<v.length;I++)M=(l=(0|d.words[I])-(0|v.words[I])+M)>>26,this.words[I]=67108863&l;for(;0!==M&&I<d.length;I++)M=(l=(0|d.words[I])+M)>>26,this.words[I]=67108863&l;if(0===M&&I<d.length&&d!==this)for(;I<d.length;I++)this.words[I]=d.words[I];return this.length=Math.max(this.length,I),d!==this&&(this.negative=1),this.strip()},m.prototype.sub=function(s){return this.clone().isub(s)};var j=function(s,l,h){var w,c,x,d=s.words,v=l.words,M=h.words,I=0,ft=0|d[0],mt=8191&ft,gt=ft>>>13,xt=0|d[1],At=8191&xt,kt=xt>>>13,Ut=0|d[2],St=8191&Ut,Tt=Ut>>>13,Ke=0|d[3],qt=8191&Ke,Zt=Ke>>>13,xn=0|d[4],Xt=8191&xn,Ht=xn>>>13,Fn=0|d[5],Qt=8191&Fn,Jt=Fn>>>13,Gn=0|d[6],te=8191&Gn,ue=Gn>>>13,Er=0|d[7],fe=8191&Er,he=Er>>>13,zn=0|d[8],de=8191&zn,ee=zn>>>13,qn=0|d[9],Wt=8191&qn,ne=qn>>>13,Mr=0|v[0],me=8191&Mr,re=Mr>>>13,Ne=0|v[1],Dt=8191&Ne,Lt=Ne>>>13,En=0|v[2],Vt=8191&En,ie=En>>>13,Hn=0|v[3],Yt=8191&Hn,oe=Hn>>>13,Wn=0|v[4],Ot=8191&Wn,jt=Wn>>>13,Vn=0|v[5],Kt=8191&Vn,se=Vn>>>13,Yn=0|v[6],ae=8191&Yn,ge=Yn>>>13,Ie=0|v[7],Ft=8191&Ie,Gt=Ie>>>13,kr=0|v[8],pe=8191&kr,zt=kr>>>13,Re=0|v[9],ve=8191&Re,le=Re>>>13;h.negative=s.negative^l.negative,h.length=19;var Ee=(I+(w=Math.imul(mt,me))|0)+((8191&(c=(c=Math.imul(mt,re))+Math.imul(gt,me)|0))<<13)|0;I=((x=Math.imul(gt,re))+(c>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,w=Math.imul(At,me),c=(c=Math.imul(At,re))+Math.imul(kt,me)|0,x=Math.imul(kt,re);var He=(I+(w=w+Math.imul(mt,Dt)|0)|0)+((8191&(c=(c=c+Math.imul(mt,Lt)|0)+Math.imul(gt,Dt)|0))<<13)|0;I=((x=x+Math.imul(gt,Lt)|0)+(c>>>13)|0)+(He>>>26)|0,He&=67108863,w=Math.imul(St,me),c=(c=Math.imul(St,re))+Math.imul(Tt,me)|0,x=Math.imul(Tt,re),w=w+Math.imul(At,Dt)|0,c=(c=c+Math.imul(At,Lt)|0)+Math.imul(kt,Dt)|0,x=x+Math.imul(kt,Lt)|0;var Mn=(I+(w=w+Math.imul(mt,Vt)|0)|0)+((8191&(c=(c=c+Math.imul(mt,ie)|0)+Math.imul(gt,Vt)|0))<<13)|0;I=((x=x+Math.imul(gt,ie)|0)+(c>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,w=Math.imul(qt,me),c=(c=Math.imul(qt,re))+Math.imul(Zt,me)|0,x=Math.imul(Zt,re),w=w+Math.imul(St,Dt)|0,c=(c=c+Math.imul(St,Lt)|0)+Math.imul(Tt,Dt)|0,x=x+Math.imul(Tt,Lt)|0,w=w+Math.imul(At,Vt)|0,c=(c=c+Math.imul(At,ie)|0)+Math.imul(kt,Vt)|0,x=x+Math.imul(kt,ie)|0;var Kn=(I+(w=w+Math.imul(mt,Yt)|0)|0)+((8191&(c=(c=c+Math.imul(mt,oe)|0)+Math.imul(gt,Yt)|0))<<13)|0;I=((x=x+Math.imul(gt,oe)|0)+(c>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,w=Math.imul(Xt,me),c=(c=Math.imul(Xt,re))+Math.imul(Ht,me)|0,x=Math.imul(Ht,re),w=w+Math.imul(qt,Dt)|0,c=(c=c+Math.imul(qt,Lt)|0)+Math.imul(Zt,Dt)|0,x=x+Math.imul(Zt,Lt)|0,w=w+Math.imul(St,Vt)|0,c=(c=c+Math.imul(St,ie)|0)+Math.imul(Tt,Vt)|0,x=x+Math.imul(Tt,ie)|0,w=w+Math.imul(At,Yt)|0,c=(c=c+Math.imul(At,oe)|0)+Math.imul(kt,Yt)|0,x=x+Math.imul(kt,oe)|0;var an=(I+(w=w+Math.imul(mt,Ot)|0)|0)+((8191&(c=(c=c+Math.imul(mt,jt)|0)+Math.imul(gt,Ot)|0))<<13)|0;I=((x=x+Math.imul(gt,jt)|0)+(c>>>13)|0)+(an>>>26)|0,an&=67108863,w=Math.imul(Qt,me),c=(c=Math.imul(Qt,re))+Math.imul(Jt,me)|0,x=Math.imul(Jt,re),w=w+Math.imul(Xt,Dt)|0,c=(c=c+Math.imul(Xt,Lt)|0)+Math.imul(Ht,Dt)|0,x=x+Math.imul(Ht,Lt)|0,w=w+Math.imul(qt,Vt)|0,c=(c=c+Math.imul(qt,ie)|0)+Math.imul(Zt,Vt)|0,x=x+Math.imul(Zt,ie)|0,w=w+Math.imul(St,Yt)|0,c=(c=c+Math.imul(St,oe)|0)+Math.imul(Tt,Yt)|0,x=x+Math.imul(Tt,oe)|0,w=w+Math.imul(At,Ot)|0,c=(c=c+Math.imul(At,jt)|0)+Math.imul(kt,Ot)|0,x=x+Math.imul(kt,jt)|0;var kn=(I+(w=w+Math.imul(mt,Kt)|0)|0)+((8191&(c=(c=c+Math.imul(mt,se)|0)+Math.imul(gt,Kt)|0))<<13)|0;I=((x=x+Math.imul(gt,se)|0)+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,w=Math.imul(te,me),c=(c=Math.imul(te,re))+Math.imul(ue,me)|0,x=Math.imul(ue,re),w=w+Math.imul(Qt,Dt)|0,c=(c=c+Math.imul(Qt,Lt)|0)+Math.imul(Jt,Dt)|0,x=x+Math.imul(Jt,Lt)|0,w=w+Math.imul(Xt,Vt)|0,c=(c=c+Math.imul(Xt,ie)|0)+Math.imul(Ht,Vt)|0,x=x+Math.imul(Ht,ie)|0,w=w+Math.imul(qt,Yt)|0,c=(c=c+Math.imul(qt,oe)|0)+Math.imul(Zt,Yt)|0,x=x+Math.imul(Zt,oe)|0,w=w+Math.imul(St,Ot)|0,c=(c=c+Math.imul(St,jt)|0)+Math.imul(Tt,Ot)|0,x=x+Math.imul(Tt,jt)|0,w=w+Math.imul(At,Kt)|0,c=(c=c+Math.imul(At,se)|0)+Math.imul(kt,Kt)|0,x=x+Math.imul(kt,se)|0;var Oe=(I+(w=w+Math.imul(mt,ae)|0)|0)+((8191&(c=(c=c+Math.imul(mt,ge)|0)+Math.imul(gt,ae)|0))<<13)|0;I=((x=x+Math.imul(gt,ge)|0)+(c>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,w=Math.imul(fe,me),c=(c=Math.imul(fe,re))+Math.imul(he,me)|0,x=Math.imul(he,re),w=w+Math.imul(te,Dt)|0,c=(c=c+Math.imul(te,Lt)|0)+Math.imul(ue,Dt)|0,x=x+Math.imul(ue,Lt)|0,w=w+Math.imul(Qt,Vt)|0,c=(c=c+Math.imul(Qt,ie)|0)+Math.imul(Jt,Vt)|0,x=x+Math.imul(Jt,ie)|0,w=w+Math.imul(Xt,Yt)|0,c=(c=c+Math.imul(Xt,oe)|0)+Math.imul(Ht,Yt)|0,x=x+Math.imul(Ht,oe)|0,w=w+Math.imul(qt,Ot)|0,c=(c=c+Math.imul(qt,jt)|0)+Math.imul(Zt,Ot)|0,x=x+Math.imul(Zt,jt)|0,w=w+Math.imul(St,Kt)|0,c=(c=c+Math.imul(St,se)|0)+Math.imul(Tt,Kt)|0,x=x+Math.imul(Tt,se)|0,w=w+Math.imul(At,ae)|0,c=(c=c+Math.imul(At,ge)|0)+Math.imul(kt,ae)|0,x=x+Math.imul(kt,ge)|0;var Ze=(I+(w=w+Math.imul(mt,Ft)|0)|0)+((8191&(c=(c=c+Math.imul(mt,Gt)|0)+Math.imul(gt,Ft)|0))<<13)|0;I=((x=x+Math.imul(gt,Gt)|0)+(c>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,w=Math.imul(de,me),c=(c=Math.imul(de,re))+Math.imul(ee,me)|0,x=Math.imul(ee,re),w=w+Math.imul(fe,Dt)|0,c=(c=c+Math.imul(fe,Lt)|0)+Math.imul(he,Dt)|0,x=x+Math.imul(he,Lt)|0,w=w+Math.imul(te,Vt)|0,c=(c=c+Math.imul(te,ie)|0)+Math.imul(ue,Vt)|0,x=x+Math.imul(ue,ie)|0,w=w+Math.imul(Qt,Yt)|0,c=(c=c+Math.imul(Qt,oe)|0)+Math.imul(Jt,Yt)|0,x=x+Math.imul(Jt,oe)|0,w=w+Math.imul(Xt,Ot)|0,c=(c=c+Math.imul(Xt,jt)|0)+Math.imul(Ht,Ot)|0,x=x+Math.imul(Ht,jt)|0,w=w+Math.imul(qt,Kt)|0,c=(c=c+Math.imul(qt,se)|0)+Math.imul(Zt,Kt)|0,x=x+Math.imul(Zt,se)|0,w=w+Math.imul(St,ae)|0,c=(c=c+Math.imul(St,ge)|0)+Math.imul(Tt,ae)|0,x=x+Math.imul(Tt,ge)|0,w=w+Math.imul(At,Ft)|0,c=(c=c+Math.imul(At,Gt)|0)+Math.imul(kt,Ft)|0,x=x+Math.imul(kt,Gt)|0;var fn=(I+(w=w+Math.imul(mt,pe)|0)|0)+((8191&(c=(c=c+Math.imul(mt,zt)|0)+Math.imul(gt,pe)|0))<<13)|0;I=((x=x+Math.imul(gt,zt)|0)+(c>>>13)|0)+(fn>>>26)|0,fn&=67108863,w=Math.imul(Wt,me),c=(c=Math.imul(Wt,re))+Math.imul(ne,me)|0,x=Math.imul(ne,re),w=w+Math.imul(de,Dt)|0,c=(c=c+Math.imul(de,Lt)|0)+Math.imul(ee,Dt)|0,x=x+Math.imul(ee,Lt)|0,w=w+Math.imul(fe,Vt)|0,c=(c=c+Math.imul(fe,ie)|0)+Math.imul(he,Vt)|0,x=x+Math.imul(he,ie)|0,w=w+Math.imul(te,Yt)|0,c=(c=c+Math.imul(te,oe)|0)+Math.imul(ue,Yt)|0,x=x+Math.imul(ue,oe)|0,w=w+Math.imul(Qt,Ot)|0,c=(c=c+Math.imul(Qt,jt)|0)+Math.imul(Jt,Ot)|0,x=x+Math.imul(Jt,jt)|0,w=w+Math.imul(Xt,Kt)|0,c=(c=c+Math.imul(Xt,se)|0)+Math.imul(Ht,Kt)|0,x=x+Math.imul(Ht,se)|0,w=w+Math.imul(qt,ae)|0,c=(c=c+Math.imul(qt,ge)|0)+Math.imul(Zt,ae)|0,x=x+Math.imul(Zt,ge)|0,w=w+Math.imul(St,Ft)|0,c=(c=c+Math.imul(St,Gt)|0)+Math.imul(Tt,Ft)|0,x=x+Math.imul(Tt,Gt)|0,w=w+Math.imul(At,pe)|0,c=(c=c+Math.imul(At,zt)|0)+Math.imul(kt,pe)|0,x=x+Math.imul(kt,zt)|0;var Sn=(I+(w=w+Math.imul(mt,ve)|0)|0)+((8191&(c=(c=c+Math.imul(mt,le)|0)+Math.imul(gt,ve)|0))<<13)|0;I=((x=x+Math.imul(gt,le)|0)+(c>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,w=Math.imul(Wt,Dt),c=(c=Math.imul(Wt,Lt))+Math.imul(ne,Dt)|0,x=Math.imul(ne,Lt),w=w+Math.imul(de,Vt)|0,c=(c=c+Math.imul(de,ie)|0)+Math.imul(ee,Vt)|0,x=x+Math.imul(ee,ie)|0,w=w+Math.imul(fe,Yt)|0,c=(c=c+Math.imul(fe,oe)|0)+Math.imul(he,Yt)|0,x=x+Math.imul(he,oe)|0,w=w+Math.imul(te,Ot)|0,c=(c=c+Math.imul(te,jt)|0)+Math.imul(ue,Ot)|0,x=x+Math.imul(ue,jt)|0,w=w+Math.imul(Qt,Kt)|0,c=(c=c+Math.imul(Qt,se)|0)+Math.imul(Jt,Kt)|0,x=x+Math.imul(Jt,se)|0,w=w+Math.imul(Xt,ae)|0,c=(c=c+Math.imul(Xt,ge)|0)+Math.imul(Ht,ae)|0,x=x+Math.imul(Ht,ge)|0,w=w+Math.imul(qt,Ft)|0,c=(c=c+Math.imul(qt,Gt)|0)+Math.imul(Zt,Ft)|0,x=x+Math.imul(Zt,Gt)|0,w=w+Math.imul(St,pe)|0,c=(c=c+Math.imul(St,zt)|0)+Math.imul(Tt,pe)|0,x=x+Math.imul(Tt,zt)|0;var Zn=(I+(w=w+Math.imul(At,ve)|0)|0)+((8191&(c=(c=c+Math.imul(At,le)|0)+Math.imul(kt,ve)|0))<<13)|0;I=((x=x+Math.imul(kt,le)|0)+(c>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,w=Math.imul(Wt,Vt),c=(c=Math.imul(Wt,ie))+Math.imul(ne,Vt)|0,x=Math.imul(ne,ie),w=w+Math.imul(de,Yt)|0,c=(c=c+Math.imul(de,oe)|0)+Math.imul(ee,Yt)|0,x=x+Math.imul(ee,oe)|0,w=w+Math.imul(fe,Ot)|0,c=(c=c+Math.imul(fe,jt)|0)+Math.imul(he,Ot)|0,x=x+Math.imul(he,jt)|0,w=w+Math.imul(te,Kt)|0,c=(c=c+Math.imul(te,se)|0)+Math.imul(ue,Kt)|0,x=x+Math.imul(ue,se)|0,w=w+Math.imul(Qt,ae)|0,c=(c=c+Math.imul(Qt,ge)|0)+Math.imul(Jt,ae)|0,x=x+Math.imul(Jt,ge)|0,w=w+Math.imul(Xt,Ft)|0,c=(c=c+Math.imul(Xt,Gt)|0)+Math.imul(Ht,Ft)|0,x=x+Math.imul(Ht,Gt)|0,w=w+Math.imul(qt,pe)|0,c=(c=c+Math.imul(qt,zt)|0)+Math.imul(Zt,pe)|0,x=x+Math.imul(Zt,zt)|0;var hn=(I+(w=w+Math.imul(St,ve)|0)|0)+((8191&(c=(c=c+Math.imul(St,le)|0)+Math.imul(Tt,ve)|0))<<13)|0;I=((x=x+Math.imul(Tt,le)|0)+(c>>>13)|0)+(hn>>>26)|0,hn&=67108863,w=Math.imul(Wt,Yt),c=(c=Math.imul(Wt,oe))+Math.imul(ne,Yt)|0,x=Math.imul(ne,oe),w=w+Math.imul(de,Ot)|0,c=(c=c+Math.imul(de,jt)|0)+Math.imul(ee,Ot)|0,x=x+Math.imul(ee,jt)|0,w=w+Math.imul(fe,Kt)|0,c=(c=c+Math.imul(fe,se)|0)+Math.imul(he,Kt)|0,x=x+Math.imul(he,se)|0,w=w+Math.imul(te,ae)|0,c=(c=c+Math.imul(te,ge)|0)+Math.imul(ue,ae)|0,x=x+Math.imul(ue,ge)|0,w=w+Math.imul(Qt,Ft)|0,c=(c=c+Math.imul(Qt,Gt)|0)+Math.imul(Jt,Ft)|0,x=x+Math.imul(Jt,Gt)|0,w=w+Math.imul(Xt,pe)|0,c=(c=c+Math.imul(Xt,zt)|0)+Math.imul(Ht,pe)|0,x=x+Math.imul(Ht,zt)|0;var Xn=(I+(w=w+Math.imul(qt,ve)|0)|0)+((8191&(c=(c=c+Math.imul(qt,le)|0)+Math.imul(Zt,ve)|0))<<13)|0;I=((x=x+Math.imul(Zt,le)|0)+(c>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,w=Math.imul(Wt,Ot),c=(c=Math.imul(Wt,jt))+Math.imul(ne,Ot)|0,x=Math.imul(ne,jt),w=w+Math.imul(de,Kt)|0,c=(c=c+Math.imul(de,se)|0)+Math.imul(ee,Kt)|0,x=x+Math.imul(ee,se)|0,w=w+Math.imul(fe,ae)|0,c=(c=c+Math.imul(fe,ge)|0)+Math.imul(he,ae)|0,x=x+Math.imul(he,ge)|0,w=w+Math.imul(te,Ft)|0,c=(c=c+Math.imul(te,Gt)|0)+Math.imul(ue,Ft)|0,x=x+Math.imul(ue,Gt)|0,w=w+Math.imul(Qt,pe)|0,c=(c=c+Math.imul(Qt,zt)|0)+Math.imul(Jt,pe)|0,x=x+Math.imul(Jt,zt)|0;var Qn=(I+(w=w+Math.imul(Xt,ve)|0)|0)+((8191&(c=(c=c+Math.imul(Xt,le)|0)+Math.imul(Ht,ve)|0))<<13)|0;I=((x=x+Math.imul(Ht,le)|0)+(c>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,w=Math.imul(Wt,Kt),c=(c=Math.imul(Wt,se))+Math.imul(ne,Kt)|0,x=Math.imul(ne,se),w=w+Math.imul(de,ae)|0,c=(c=c+Math.imul(de,ge)|0)+Math.imul(ee,ae)|0,x=x+Math.imul(ee,ge)|0,w=w+Math.imul(fe,Ft)|0,c=(c=c+Math.imul(fe,Gt)|0)+Math.imul(he,Ft)|0,x=x+Math.imul(he,Gt)|0,w=w+Math.imul(te,pe)|0,c=(c=c+Math.imul(te,zt)|0)+Math.imul(ue,pe)|0,x=x+Math.imul(ue,zt)|0;var Xe=(I+(w=w+Math.imul(Qt,ve)|0)|0)+((8191&(c=(c=c+Math.imul(Qt,le)|0)+Math.imul(Jt,ve)|0))<<13)|0;I=((x=x+Math.imul(Jt,le)|0)+(c>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,w=Math.imul(Wt,ae),c=(c=Math.imul(Wt,ge))+Math.imul(ne,ae)|0,x=Math.imul(ne,ge),w=w+Math.imul(de,Ft)|0,c=(c=c+Math.imul(de,Gt)|0)+Math.imul(ee,Ft)|0,x=x+Math.imul(ee,Gt)|0,w=w+Math.imul(fe,pe)|0,c=(c=c+Math.imul(fe,zt)|0)+Math.imul(he,pe)|0,x=x+Math.imul(he,zt)|0;var An=(I+(w=w+Math.imul(te,ve)|0)|0)+((8191&(c=(c=c+Math.imul(te,le)|0)+Math.imul(ue,ve)|0))<<13)|0;I=((x=x+Math.imul(ue,le)|0)+(c>>>13)|0)+(An>>>26)|0,An&=67108863,w=Math.imul(Wt,Ft),c=(c=Math.imul(Wt,Gt))+Math.imul(ne,Ft)|0,x=Math.imul(ne,Gt),w=w+Math.imul(de,pe)|0,c=(c=c+Math.imul(de,zt)|0)+Math.imul(ee,pe)|0,x=x+Math.imul(ee,zt)|0;var Cn=(I+(w=w+Math.imul(fe,ve)|0)|0)+((8191&(c=(c=c+Math.imul(fe,le)|0)+Math.imul(he,ve)|0))<<13)|0;I=((x=x+Math.imul(he,le)|0)+(c>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,w=Math.imul(Wt,pe),c=(c=Math.imul(Wt,zt))+Math.imul(ne,pe)|0,x=Math.imul(ne,zt);var Tn=(I+(w=w+Math.imul(de,ve)|0)|0)+((8191&(c=(c=c+Math.imul(de,le)|0)+Math.imul(ee,ve)|0))<<13)|0;I=((x=x+Math.imul(ee,le)|0)+(c>>>13)|0)+(Tn>>>26)|0,Tn&=67108863;var In=(I+(w=Math.imul(Wt,ve))|0)+((8191&(c=(c=Math.imul(Wt,le))+Math.imul(ne,ve)|0))<<13)|0;return I=((x=Math.imul(ne,le))+(c>>>13)|0)+(In>>>26)|0,In&=67108863,M[0]=Ee,M[1]=He,M[2]=Mn,M[3]=Kn,M[4]=an,M[5]=kn,M[6]=Oe,M[7]=Ze,M[8]=fn,M[9]=Sn,M[10]=Zn,M[11]=hn,M[12]=Xn,M[13]=Qn,M[14]=Xe,M[15]=An,M[16]=Cn,M[17]=Tn,M[18]=In,0!==I&&(M[19]=I,h.length++),h};function G(p,s,l){return(new W).mulp(p,s,l)}function W(p,s){this.x=p,this.y=s}Math.imul||(j=U),m.prototype.mulTo=function(s,l){var h,d=this.length+s.length;return h=10===this.length&&10===s.length?j(this,s,l):d<63?U(this,s,l):d<1024?function dt(p,s,l){l.negative=s.negative^p.negative,l.length=p.length+s.length;for(var h=0,d=0,v=0;v<l.length-1;v++){var M=d;d=0;for(var I=67108863&h,w=Math.min(v,s.length-1),c=Math.max(0,v-p.length+1);c<=w;c++){var gt=(0|p.words[v-c])*(0|s.words[c]),xt=67108863&gt;I=67108863&(xt=xt+I|0),d+=(M=(M=M+(gt/67108864|0)|0)+(xt>>>26)|0)>>>26,M&=67108863}l.words[v]=I,h=M,M=d}return 0!==h?l.words[v]=h:l.length--,l.strip()}(this,s,l):G(this,s,l),h},W.prototype.makeRBT=function(s){for(var l=new Array(s),h=m.prototype._countBits(s)-1,d=0;d<s;d++)l[d]=this.revBin(d,h,s);return l},W.prototype.revBin=function(s,l,h){if(0===s||s===h-1)return s;for(var d=0,v=0;v<l;v++)d|=(1&s)<<l-v-1,s>>=1;return d},W.prototype.permute=function(s,l,h,d,v,M){for(var I=0;I<M;I++)d[I]=l[s[I]],v[I]=h[s[I]]},W.prototype.transform=function(s,l,h,d,v,M){this.permute(M,s,l,h,d,v);for(var I=1;I<v;I<<=1)for(var w=I<<1,c=Math.cos(2*Math.PI/w),x=Math.sin(2*Math.PI/w),ft=0;ft<v;ft+=w)for(var mt=c,gt=x,xt=0;xt<I;xt++){var At=h[ft+xt],kt=d[ft+xt],Ut=h[ft+xt+I],St=d[ft+xt+I],Tt=mt*Ut-gt*St;St=mt*St+gt*Ut,h[ft+xt]=At+(Ut=Tt),d[ft+xt]=kt+St,h[ft+xt+I]=At-Ut,d[ft+xt+I]=kt-St,xt!==w&&(Tt=c*mt-x*gt,gt=c*gt+x*mt,mt=Tt)}},W.prototype.guessLen13b=function(s,l){var h=1|Math.max(l,s),d=1&h,v=0;for(h=h/2|0;h;h>>>=1)v++;return 1<<v+1+d},W.prototype.conjugate=function(s,l,h){if(!(h<=1))for(var d=0;d<h/2;d++){var v=s[d];s[d]=s[h-d-1],s[h-d-1]=v,v=l[d],l[d]=-l[h-d-1],l[h-d-1]=-v}},W.prototype.normalize13b=function(s,l){for(var h=0,d=0;d<l/2;d++){var v=8192*Math.round(s[2*d+1]/l)+Math.round(s[2*d]/l)+h;s[d]=67108863&v,h=v<67108864?0:v/67108864|0}return s},W.prototype.convert13b=function(s,l,h,d){for(var v=0,M=0;M<l;M++)h[2*M]=8191&(v+=0|s[M]),h[2*M+1]=8191&(v>>>=13),v>>>=13;for(M=2*l;M<d;++M)h[M]=0;_(0===v),_(!(-8192&v))},W.prototype.stub=function(s){for(var l=new Array(s),h=0;h<s;h++)l[h]=0;return l},W.prototype.mulp=function(s,l,h){var d=2*this.guessLen13b(s.length,l.length),v=this.makeRBT(d),M=this.stub(d),I=new Array(d),w=new Array(d),c=new Array(d),x=new Array(d),ft=new Array(d),mt=new Array(d),gt=h.words;gt.length=d,this.convert13b(s.words,s.length,I,d),this.convert13b(l.words,l.length,x,d),this.transform(I,M,w,c,d,v),this.transform(x,M,ft,mt,d,v);for(var xt=0;xt<d;xt++){var At=w[xt]*ft[xt]-c[xt]*mt[xt];c[xt]=w[xt]*mt[xt]+c[xt]*ft[xt],w[xt]=At}return this.conjugate(w,c,d),this.transform(w,c,gt,M,d,v),this.conjugate(gt,M,d),this.normalize13b(gt,d),h.negative=s.negative^l.negative,h.length=s.length+l.length,h.strip()},m.prototype.mul=function(s){var l=new m(null);return l.words=new Array(this.length+s.length),this.mulTo(s,l)},m.prototype.mulf=function(s){var l=new m(null);return l.words=new Array(this.length+s.length),G(this,s,l)},m.prototype.imul=function(s){return this.clone().mulTo(s,this)},m.prototype.imuln=function(s){_("number"==typeof s),_(s<67108864);for(var l=0,h=0;h<this.length;h++){var d=(0|this.words[h])*s,v=(67108863&d)+(67108863&l);l>>=26,l+=d/67108864|0,l+=v>>>26,this.words[h]=67108863&v}return 0!==l&&(this.words[h]=l,this.length++),this},m.prototype.muln=function(s){return this.clone().imuln(s)},m.prototype.sqr=function(){return this.mul(this)},m.prototype.isqr=function(){return this.imul(this.clone())},m.prototype.pow=function(s){var l=function nt(p){for(var s=new Array(p.bitLength()),l=0;l<s.length;l++){var d=l%26;s[l]=(p.words[l/26|0]&1<<d)>>>d}return s}(s);if(0===l.length)return new m(1);for(var h=this,d=0;d<l.length&&0===l[d];d++,h=h.sqr());if(++d<l.length)for(var v=h.sqr();d<l.length;d++,v=v.sqr())0!==l[d]&&(h=h.mul(v));return h},m.prototype.iushln=function(s){_("number"==typeof s&&s>=0);var v,l=s%26,h=(s-l)/26,d=67108863>>>26-l<<26-l;if(0!==l){var M=0;for(v=0;v<this.length;v++){var I=this.words[v]&d;this.words[v]=(0|this.words[v])-I<<l|M,M=I>>>26-l}M&&(this.words[v]=M,this.length++)}if(0!==h){for(v=this.length-1;v>=0;v--)this.words[v+h]=this.words[v];for(v=0;v<h;v++)this.words[v]=0;this.length+=h}return this.strip()},m.prototype.ishln=function(s){return _(0===this.negative),this.iushln(s)},m.prototype.iushrn=function(s,l,h){var d;_("number"==typeof s&&s>=0),d=l?(l-l%26)/26:0;var v=s%26,M=Math.min((s-v)/26,this.length),I=67108863^67108863>>>v<<v,w=h;if(d-=M,d=Math.max(0,d),w){for(var c=0;c<M;c++)w.words[c]=this.words[c];w.length=M}if(0!==M)if(this.length>M)for(this.length-=M,c=0;c<this.length;c++)this.words[c]=this.words[c+M];else this.words[0]=0,this.length=1;var x=0;for(c=this.length-1;c>=0&&(0!==x||c>=d);c--){var ft=0|this.words[c];this.words[c]=x<<26-v|ft>>>v,x=ft&I}return w&&0!==x&&(w.words[w.length++]=x),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},m.prototype.ishrn=function(s,l,h){return _(0===this.negative),this.iushrn(s,l,h)},m.prototype.shln=function(s){return this.clone().ishln(s)},m.prototype.ushln=function(s){return this.clone().iushln(s)},m.prototype.shrn=function(s){return this.clone().ishrn(s)},m.prototype.ushrn=function(s){return this.clone().iushrn(s)},m.prototype.testn=function(s){_("number"==typeof s&&s>=0);var l=s%26,h=(s-l)/26;return!(this.length<=h||!(this.words[h]&1<<l))},m.prototype.imaskn=function(s){_("number"==typeof s&&s>=0);var l=s%26,h=(s-l)/26;return _(0===this.negative,"imaskn works only with positive numbers"),this.length<=h?this:(0!==l&&h++,this.length=Math.min(h,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},m.prototype.maskn=function(s){return this.clone().imaskn(s)},m.prototype.iaddn=function(s){return _("number"==typeof s),_(s<67108864),s<0?this.isubn(-s):0!==this.negative?1===this.length&&(0|this.words[0])<s?(this.words[0]=s-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},m.prototype._iaddn=function(s){this.words[0]+=s;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},m.prototype.isubn=function(s){if(_("number"==typeof s),_(s<67108864),s<0)return this.iaddn(-s);if(0!==this.negative)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},m.prototype.addn=function(s){return this.clone().iaddn(s)},m.prototype.subn=function(s){return this.clone().isubn(s)},m.prototype.iabs=function(){return this.negative=0,this},m.prototype.abs=function(){return this.clone().iabs()},m.prototype._ishlnsubmul=function(s,l,h){var v;this._expand(s.length+h);var M,I=0;for(v=0;v<s.length;v++){M=(0|this.words[v+h])+I;var w=(0|s.words[v])*l;I=((M-=67108863&w)>>26)-(w/67108864|0),this.words[v+h]=67108863&M}for(;v<this.length-h;v++)I=(M=(0|this.words[v+h])+I)>>26,this.words[v+h]=67108863&M;if(0===I)return this.strip();for(_(-1===I),I=0,v=0;v<this.length;v++)I=(M=-(0|this.words[v])+I)>>26,this.words[v]=67108863&M;return this.negative=1,this.strip()},m.prototype._wordDiv=function(s,l){var h,d=this.clone(),v=s,M=0|v.words[v.length-1];0!=(h=26-this._countBits(M))&&(v=v.ushln(h),d.iushln(h),M=0|v.words[v.length-1]);var c,w=d.length-v.length;if("mod"!==l){(c=new m(null)).length=w+1,c.words=new Array(c.length);for(var x=0;x<c.length;x++)c.words[x]=0}var ft=d.clone()._ishlnsubmul(v,1,w);0===ft.negative&&(d=ft,c&&(c.words[w]=1));for(var mt=w-1;mt>=0;mt--){var gt=67108864*(0|d.words[v.length+mt])+(0|d.words[v.length+mt-1]);for(gt=Math.min(gt/M|0,67108863),d._ishlnsubmul(v,gt,mt);0!==d.negative;)gt--,d.negative=0,d._ishlnsubmul(v,1,mt),d.isZero()||(d.negative^=1);c&&(c.words[mt]=gt)}return c&&c.strip(),d.strip(),"div"!==l&&0!==h&&d.iushrn(h),{div:c||null,mod:d}},m.prototype.divmod=function(s,l,h){return _(!s.isZero()),this.isZero()?{div:new m(0),mod:new m(0)}:0!==this.negative&&0===s.negative?(M=this.neg().divmod(s,l),"mod"!==l&&(d=M.div.neg()),"div"!==l&&(v=M.mod.neg(),h&&0!==v.negative&&v.iadd(s)),{div:d,mod:v}):0===this.negative&&0!==s.negative?(M=this.divmod(s.neg(),l),"mod"!==l&&(d=M.div.neg()),{div:d,mod:M.mod}):this.negative&s.negative?(M=this.neg().divmod(s.neg(),l),"div"!==l&&(v=M.mod.neg(),h&&0!==v.negative&&v.isub(s)),{div:M.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new m(0),mod:this}:1===s.length?"div"===l?{div:this.divn(s.words[0]),mod:null}:"mod"===l?{div:null,mod:new m(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new m(this.modn(s.words[0]))}:this._wordDiv(s,l);var d,v,M},m.prototype.div=function(s){return this.divmod(s,"div",!1).div},m.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},m.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},m.prototype.divRound=function(s){var l=this.divmod(s);if(l.mod.isZero())return l.div;var h=0!==l.div.negative?l.mod.isub(s):l.mod,d=s.ushrn(1),v=s.andln(1),M=h.cmp(d);return M<0||1===v&&0===M?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},m.prototype.modn=function(s){_(s<=67108863);for(var l=(1<<26)%s,h=0,d=this.length-1;d>=0;d--)h=(l*h+(0|this.words[d]))%s;return h},m.prototype.idivn=function(s){_(s<=67108863);for(var l=0,h=this.length-1;h>=0;h--){var d=(0|this.words[h])+67108864*l;this.words[h]=d/s|0,l=d%s}return this.strip()},m.prototype.divn=function(s){return this.clone().idivn(s)},m.prototype.egcd=function(s){_(0===s.negative),_(!s.isZero());var l=this,h=s.clone();l=0!==l.negative?l.umod(s):l.clone();for(var d=new m(1),v=new m(0),M=new m(0),I=new m(1),w=0;l.isEven()&&h.isEven();)l.iushrn(1),h.iushrn(1),++w;for(var c=h.clone(),x=l.clone();!l.isZero();){for(var ft=0,mt=1;!(l.words[0]&mt)&&ft<26;++ft,mt<<=1);if(ft>0)for(l.iushrn(ft);ft-- >0;)(d.isOdd()||v.isOdd())&&(d.iadd(c),v.isub(x)),d.iushrn(1),v.iushrn(1);for(var gt=0,xt=1;!(h.words[0]&xt)&&gt<26;++gt,xt<<=1);if(gt>0)for(h.iushrn(gt);gt-- >0;)(M.isOdd()||I.isOdd())&&(M.iadd(c),I.isub(x)),M.iushrn(1),I.iushrn(1);l.cmp(h)>=0?(l.isub(h),d.isub(M),v.isub(I)):(h.isub(l),M.isub(d),I.isub(v))}return{a:M,b:I,gcd:h.iushln(w)}},m.prototype._invmp=function(s){_(0===s.negative),_(!s.isZero());var ft,l=this,h=s.clone();l=0!==l.negative?l.umod(s):l.clone();for(var d=new m(1),v=new m(0),M=h.clone();l.cmpn(1)>0&&h.cmpn(1)>0;){for(var I=0,w=1;!(l.words[0]&w)&&I<26;++I,w<<=1);if(I>0)for(l.iushrn(I);I-- >0;)d.isOdd()&&d.iadd(M),d.iushrn(1);for(var c=0,x=1;!(h.words[0]&x)&&c<26;++c,x<<=1);if(c>0)for(h.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);l.cmp(h)>=0?(l.isub(h),d.isub(v)):(h.isub(l),v.isub(d))}return(ft=0===l.cmpn(1)?d:v).cmpn(0)<0&&ft.iadd(s),ft},m.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var l=this.clone(),h=s.clone();l.negative=0,h.negative=0;for(var d=0;l.isEven()&&h.isEven();d++)l.iushrn(1),h.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;h.isEven();)h.iushrn(1);var v=l.cmp(h);if(v<0){var M=l;l=h,h=M}else if(0===v||0===h.cmpn(1))break;l.isub(h)}return h.iushln(d)},m.prototype.invm=function(s){return this.egcd(s).a.umod(s)},m.prototype.isEven=function(){return!(1&this.words[0])},m.prototype.isOdd=function(){return!(1&~this.words[0])},m.prototype.andln=function(s){return this.words[0]&s},m.prototype.bincn=function(s){_("number"==typeof s);var l=s%26,h=(s-l)/26,d=1<<l;if(this.length<=h)return this._expand(h+1),this.words[h]|=d,this;for(var v=d,M=h;0!==v&&M<this.length;M++){var I=0|this.words[M];v=(I+=v)>>>26,this.words[M]=I&=67108863}return 0!==v&&(this.words[M]=v,this.length++),this},m.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},m.prototype.cmpn=function(s){var h,l=s<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)h=1;else{l&&(s=-s),_(s<=67108863,"Number is too big");var d=0|this.words[0];h=d===s?0:d<s?-1:1}return 0!==this.negative?0|-h:h},m.prototype.cmp=function(s){if(0!==this.negative&&0===s.negative)return-1;if(0===this.negative&&0!==s.negative)return 1;var l=this.ucmp(s);return 0!==this.negative?0|-l:l},m.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var l=0,h=this.length-1;h>=0;h--){var d=0|this.words[h],v=0|s.words[h];if(d!==v){d<v?l=-1:d>v&&(l=1);break}}return l},m.prototype.gtn=function(s){return 1===this.cmpn(s)},m.prototype.gt=function(s){return 1===this.cmp(s)},m.prototype.gten=function(s){return this.cmpn(s)>=0},m.prototype.gte=function(s){return this.cmp(s)>=0},m.prototype.ltn=function(s){return-1===this.cmpn(s)},m.prototype.lt=function(s){return-1===this.cmp(s)},m.prototype.lten=function(s){return this.cmpn(s)<=0},m.prototype.lte=function(s){return this.cmp(s)<=0},m.prototype.eqn=function(s){return 0===this.cmpn(s)},m.prototype.eq=function(s){return 0===this.cmp(s)},m.red=function(s){return new at(s)},m.prototype.toRed=function(s){return _(!this.red,"Already a number in reduction context"),_(0===this.negative,"red works only with positives"),s.convertTo(this)._forceRed(s)},m.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},m.prototype._forceRed=function(s){return this.red=s,this},m.prototype.forceRed=function(s){return _(!this.red,"Already a number in reduction context"),this._forceRed(s)},m.prototype.redAdd=function(s){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},m.prototype.redIAdd=function(s){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},m.prototype.redSub=function(s){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},m.prototype.redISub=function(s){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},m.prototype.redShl=function(s){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},m.prototype.redMul=function(s){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},m.prototype.redIMul=function(s){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},m.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},m.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},m.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},m.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},m.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},m.prototype.redPow=function(s){return _(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var i={k256:null,p224:null,p192:null,p25519:null};function ct(p,s){this.name=p,this.p=new m(s,16),this.n=this.p.bitLength(),this.k=new m(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Mt(){ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Nt(){ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function it(){ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function ot(){ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function at(p){if("string"==typeof p){var s=m._prime(p);this.m=s.p,this.prime=s}else _(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}function ht(p){at.call(this,p),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new m(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ct.prototype._tmp=function(){var s=new m(null);return s.words=new Array(Math.ceil(this.n/13)),s},ct.prototype.ireduce=function(s){var h,l=s;do{this.split(l,this.tmp),h=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(h>this.n);var d=h<this.n?-1:l.ucmp(this.p);return 0===d?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ct.prototype.split=function(s,l){s.iushrn(this.n,0,l)},ct.prototype.imulK=function(s){return s.imul(this.k)},A(Mt,ct),Mt.prototype.split=function(s,l){for(var h=4194303,d=Math.min(s.length,9),v=0;v<d;v++)l.words[v]=s.words[v];if(l.length=d,s.length<=9)return s.words[0]=0,void(s.length=1);var M=s.words[9];for(l.words[l.length++]=M&h,v=10;v<s.length;v++){var I=0|s.words[v];s.words[v-10]=(I&h)<<4|M>>>22,M=I}s.words[v-10]=M>>>=22,s.length-=0===M&&s.length>10?10:9},Mt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var l=0,h=0;h<s.length;h++){var d=0|s.words[h];s.words[h]=67108863&(l+=977*d),l=64*d+(l/67108864|0)}return 0===s.words[s.length-1]&&(s.length--,0===s.words[s.length-1]&&s.length--),s},A(Nt,ct),A(it,ct),A(ot,ct),ot.prototype.imulK=function(s){for(var l=0,h=0;h<s.length;h++){var d=19*(0|s.words[h])+l,v=67108863&d;d>>>=26,s.words[h]=v,l=d}return 0!==l&&(s.words[s.length++]=l),s},m._prime=function(s){if(i[s])return i[s];var l;if("k256"===s)l=new Mt;else if("p224"===s)l=new Nt;else if("p192"===s)l=new it;else{if("p25519"!==s)throw new Error("Unknown prime "+s);l=new ot}return i[s]=l,l},at.prototype._verify1=function(s){_(0===s.negative,"red works only with positives"),_(s.red,"red works only with red numbers")},at.prototype._verify2=function(s,l){_(!(s.negative|l.negative),"red works only with positives"),_(s.red&&s.red===l.red,"red works only with red numbers")},at.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},at.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},at.prototype.add=function(s,l){this._verify2(s,l);var h=s.add(l);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},at.prototype.iadd=function(s,l){this._verify2(s,l);var h=s.iadd(l);return h.cmp(this.m)>=0&&h.isub(this.m),h},at.prototype.sub=function(s,l){this._verify2(s,l);var h=s.sub(l);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},at.prototype.isub=function(s,l){this._verify2(s,l);var h=s.isub(l);return h.cmpn(0)<0&&h.iadd(this.m),h},at.prototype.shl=function(s,l){return this._verify1(s),this.imod(s.ushln(l))},at.prototype.imul=function(s,l){return this._verify2(s,l),this.imod(s.imul(l))},at.prototype.mul=function(s,l){return this._verify2(s,l),this.imod(s.mul(l))},at.prototype.isqr=function(s){return this.imul(s,s.clone())},at.prototype.sqr=function(s){return this.mul(s,s)},at.prototype.sqrt=function(s){if(s.isZero())return s.clone();var l=this.m.andln(3);if(_(l%2==1),3===l){var h=this.m.add(new m(1)).iushrn(2);return this.pow(s,h)}for(var d=this.m.subn(1),v=0;!d.isZero()&&0===d.andln(1);)v++,d.iushrn(1);_(!d.isZero());var M=new m(1).toRed(this),I=M.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new m(2*c*c).toRed(this);0!==this.pow(c,w).cmp(I);)c.redIAdd(I);for(var x=this.pow(c,d),ft=this.pow(s,d.addn(1).iushrn(1)),mt=this.pow(s,d),gt=v;0!==mt.cmp(M);){for(var xt=mt,At=0;0!==xt.cmp(M);At++)xt=xt.redSqr();_(At<gt);var kt=this.pow(x,new m(1).iushln(gt-At-1));ft=ft.redMul(kt),x=kt.redSqr(),mt=mt.redMul(x),gt=At}return ft},at.prototype.invm=function(s){var l=s._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},at.prototype.pow=function(s,l){if(l.isZero())return new m(1).toRed(this);if(0===l.cmpn(1))return s.clone();var d=new Array(16);d[0]=new m(1).toRed(this),d[1]=s;for(var v=2;v<d.length;v++)d[v]=this.mul(d[v-1],s);var M=d[0],I=0,w=0,c=l.bitLength()%26;for(0===c&&(c=26),v=l.length-1;v>=0;v--){for(var x=l.words[v],ft=c-1;ft>=0;ft--){var mt=x>>ft&1;M!==d[0]&&(M=this.sqr(M)),0!==mt||0!==I?(I<<=1,I|=mt,(4==++w||0===v&&0===ft)&&(M=this.mul(M,d[I]),w=0,I=0)):w=0}c=26}return M},at.prototype.convertTo=function(s){var l=s.umod(this.m);return l===s?l.clone():l},at.prototype.convertFrom=function(s){var l=s.clone();return l.red=null,l},m.mont=function(s){return new ht(s)},A(ht,at),ht.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},ht.prototype.convertFrom=function(s){var l=this.imod(s.mul(this.rinv));return l.red=null,l},ht.prototype.imul=function(s,l){if(s.isZero()||l.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(l),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=h.isub(d).iushrn(this.shift),M=v;return v.cmp(this.m)>=0?M=v.isub(this.m):v.cmpn(0)<0&&(M=v.iadd(this.m)),M._forceRed(this)},ht.prototype.mul=function(s,l){if(s.isZero()||l.isZero())return new m(0)._forceRed(this);var h=s.mul(l),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=h.isub(d).iushrn(this.shift),M=v;return v.cmp(this.m)>=0?M=v.isub(this.m):v.cmpn(0)<0&&(M=v.iadd(this.m)),M._forceRed(this)},ht.prototype.invm=function(s){return this.imod(s._invmp(this.m).mul(this.r2))._forceRed(this)}}(bt=k.nmd(bt),this)},7374:function(bt){bt.exports=function(){"use strict";var k=6e4,E=36e5,y="millisecond",_="second",A="minute",m="hour",C="day",R="week",B="month",$="quarter",et="year",ut="date",X="Invalid Date",nt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(p){var s=["th","st","nd","rd"],l=p%100;return"["+p+(s[(l-20)%10]||s[l]||s[0])+"]"}},dt=function(p,s,l){var h=String(p);return!h||h.length>=s?p:""+Array(s+1-h.length).join(l)+p},G={s:dt,z:function(p){var s=-p.utcOffset(),l=Math.abs(s),h=Math.floor(l/60),d=l%60;return(s<=0?"+":"-")+dt(h,2,"0")+":"+dt(d,2,"0")},m:function p(s,l){if(s.date()<l.date())return-p(l,s);var h=12*(l.year()-s.year())+(l.month()-s.month()),d=s.clone().add(h,B),v=l-d<0,M=s.clone().add(h+(v?-1:1),B);return+(-(h+(l-d)/(v?d-M:M-d))||0)},a:function(p){return p<0?Math.ceil(p)||0:Math.floor(p)},p:function(p){return{M:B,y:et,w:R,d:C,D:ut,h:m,m:A,s:_,ms:y,Q:$}[p]||String(p||"").toLowerCase().replace(/s$/,"")},u:function(p){return void 0===p}},W="en",i={};i[W]=j;var ct="$isDayjsObject",Mt=function(p){return p instanceof at||!(!p||!p[ct])},Nt=function p(s,l,h){var d;if(!s)return W;if("string"==typeof s){var v=s.toLowerCase();i[v]&&(d=v),l&&(i[v]=l,d=v);var M=s.split("-");if(!d&&M.length>1)return p(M[0])}else{var I=s.name;i[I]=s,d=I}return!h&&d&&(W=d),d||!h&&W},it=function(p,s){if(Mt(p))return p.clone();var l="object"==typeof s?s:{};return l.date=p,l.args=arguments,new at(l)},ot=G;ot.l=Nt,ot.i=Mt,ot.w=function(p,s){return it(p,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var at=function(){function p(l){this.$L=Nt(l.locale,null,!0),this.parse(l),this.$x=this.$x||l.x||{},this[ct]=!0}var s=p.prototype;return s.parse=function(l){this.$d=function(h){var d=h.date,v=h.utc;if(null===d)return new Date(NaN);if(ot.u(d))return new Date;if(d instanceof Date)return new Date(d);if("string"==typeof d&&!/Z$/i.test(d)){var M=d.match(nt);if(M){var I=M[2]-1||0,w=(M[7]||"0").substring(0,3);return v?new Date(Date.UTC(M[1],I,M[3]||1,M[4]||0,M[5]||0,M[6]||0,w)):new Date(M[1],I,M[3]||1,M[4]||0,M[5]||0,M[6]||0,w)}}return new Date(d)}(l),this.init()},s.init=function(){var l=this.$d;this.$y=l.getFullYear(),this.$M=l.getMonth(),this.$D=l.getDate(),this.$W=l.getDay(),this.$H=l.getHours(),this.$m=l.getMinutes(),this.$s=l.getSeconds(),this.$ms=l.getMilliseconds()},s.$utils=function(){return ot},s.isValid=function(){return this.$d.toString()!==X},s.isSame=function(l,h){var d=it(l);return this.startOf(h)<=d&&d<=this.endOf(h)},s.isAfter=function(l,h){return it(l)<this.startOf(h)},s.isBefore=function(l,h){return this.endOf(h)<it(l)},s.$g=function(l,h,d){return ot.u(l)?this[h]:this.set(d,l)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(l,h){var d=this,v=!!ot.u(h)||h,M=ot.p(l),I=function(At,kt){var Ut=ot.w(d.$u?Date.UTC(d.$y,kt,At):new Date(d.$y,kt,At),d);return v?Ut:Ut.endOf(C)},w=function(At,kt){return ot.w(d.toDate()[At].apply(d.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(kt)),d)},c=this.$W,x=this.$M,ft=this.$D,mt="set"+(this.$u?"UTC":"");switch(M){case et:return v?I(1,0):I(31,11);case B:return v?I(1,x):I(0,x+1);case R:var gt=this.$locale().weekStart||0,xt=(c<gt?c+7:c)-gt;return I(v?ft-xt:ft+(6-xt),x);case C:case ut:return w(mt+"Hours",0);case m:return w(mt+"Minutes",1);case A:return w(mt+"Seconds",2);case _:return w(mt+"Milliseconds",3);default:return this.clone()}},s.endOf=function(l){return this.startOf(l,!1)},s.$set=function(l,h){var d,v=ot.p(l),M="set"+(this.$u?"UTC":""),I=(d={},d[C]=M+"Date",d[ut]=M+"Date",d[B]=M+"Month",d[et]=M+"FullYear",d[m]=M+"Hours",d[A]=M+"Minutes",d[_]=M+"Seconds",d[y]=M+"Milliseconds",d)[v],w=v===C?this.$D+(h-this.$W):h;if(v===B||v===et){var c=this.clone().set(ut,1);c.$d[I](w),c.init(),this.$d=c.set(ut,Math.min(this.$D,c.daysInMonth())).$d}else I&&this.$d[I](w);return this.init(),this},s.set=function(l,h){return this.clone().$set(l,h)},s.get=function(l){return this[ot.p(l)]()},s.add=function(l,h){var d,v=this;l=Number(l);var M=ot.p(h),I=function(x){var ft=it(v);return ot.w(ft.date(ft.date()+Math.round(x*l)),v)};if(M===B)return this.set(B,this.$M+l);if(M===et)return this.set(et,this.$y+l);if(M===C)return I(1);if(M===R)return I(7);var w=(d={},d[A]=k,d[m]=E,d[_]=1e3,d)[M]||1,c=this.$d.getTime()+l*w;return ot.w(c,this)},s.subtract=function(l,h){return this.add(-1*l,h)},s.format=function(l){var h=this,d=this.$locale();if(!this.isValid())return d.invalidDate||X;var v=l||"YYYY-MM-DDTHH:mm:ssZ",M=ot.z(this),I=this.$H,w=this.$m,c=this.$M,x=d.weekdays,ft=d.months,gt=function(kt,Ut,St,Tt){return kt&&(kt[Ut]||kt(h,v))||St[Ut].slice(0,Tt)},xt=function(kt){return ot.s(I%12||12,kt,"0")},At=d.meridiem||function(kt,Ut,St){var Tt=kt<12?"AM":"PM";return St?Tt.toLowerCase():Tt};return v.replace(U,function(kt,Ut){return Ut||function(St){switch(St){case"YY":return String(h.$y).slice(-2);case"YYYY":return ot.s(h.$y,4,"0");case"M":return c+1;case"MM":return ot.s(c+1,2,"0");case"MMM":return gt(d.monthsShort,c,ft,3);case"MMMM":return gt(ft,c);case"D":return h.$D;case"DD":return ot.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return gt(d.weekdaysMin,h.$W,x,2);case"ddd":return gt(d.weekdaysShort,h.$W,x,3);case"dddd":return x[h.$W];case"H":return String(I);case"HH":return ot.s(I,2,"0");case"h":return xt(1);case"hh":return xt(2);case"a":return At(I,w,!0);case"A":return At(I,w,!1);case"m":return String(w);case"mm":return ot.s(w,2,"0");case"s":return String(h.$s);case"ss":return ot.s(h.$s,2,"0");case"SSS":return ot.s(h.$ms,3,"0");case"Z":return M}return null}(kt)||M.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(l,h,d){var v,M=this,I=ot.p(h),w=it(l),c=(w.utcOffset()-this.utcOffset())*k,x=this-w,ft=function(){return ot.m(M,w)};switch(I){case et:v=ft()/12;break;case B:v=ft();break;case $:v=ft()/3;break;case R:v=(x-c)/6048e5;break;case C:v=(x-c)/864e5;break;case m:v=x/E;break;case A:v=x/k;break;case _:v=x/1e3;break;default:v=x}return d?v:ot.a(v)},s.daysInMonth=function(){return this.endOf(B).$D},s.$locale=function(){return i[this.$L]},s.locale=function(l,h){if(!l)return this.$L;var d=this.clone(),v=Nt(l,h,!0);return v&&(d.$L=v),d},s.clone=function(){return ot.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},p}(),ht=at.prototype;return it.prototype=ht,[["$ms",y],["$s",_],["$m",A],["$H",m],["$W",C],["$M",B],["$y",et],["$D",ut]].forEach(function(p){ht[p[1]]=function(s){return this.$g(s,p[0],p[1])}}),it.extend=function(p,s){return p.$i||(p(s,at,it),p.$i=!0),it},it.locale=Nt,it.isDayjs=Mt,it.unix=function(p){return it(1e3*p)},it.en=i[W],it.Ls=i,it.p={},it}()},5164:function(bt){bt.exports=function(){"use strict";return function(P,k,E){P=P||{};var y=k.prototype,_={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function A(C,R,B,$){return y.fromToBase(C,R,B,$)}E.en.relativeTime=_,y.fromToBase=function(C,R,B,$,et){for(var ut,X,nt,U=B.$locale().relativeTime||_,j=P.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],dt=j.length,G=0;G<dt;G+=1){var W=j[G];W.d&&(ut=$?E(C).diff(B,W.d,!0):B.diff(C,W.d,!0));var i=(P.rounding||Math.round)(Math.abs(ut));if(nt=ut>0,i<=W.r||!W.r){i<=1&&G>0&&(W=j[G-1]);var ct=U[W.l];et&&(i=et(""+i)),X="string"==typeof ct?ct.replace("%d",i):ct(i,R,W.l,nt);break}}if(R)return X;var Mt=nt?U.future:U.past;return"function"==typeof Mt?Mt(X):Mt.replace("%s",X)},y.to=function(C,R){return A(C,R,this,!0)},y.from=function(C,R){return A(C,R,this)};var m=function(C){return C.$u?E.utc():E()};y.toNow=function(C){return this.to(m(this),C)},y.fromNow=function(C){return this.from(m(this),C)}}}()},243:bt=>{"use strict";var P={single_source_shortest_paths:function(k,E,y){var _={},A={};A[E]=0;var C,R,B,$,et,X,m=P.PriorityQueue.make();for(m.push(E,0);!m.empty();)for(B in $=(C=m.pop()).cost,et=k[R=C.value]||{})et.hasOwnProperty(B)&&(X=$+et[B],(typeof A[B]>"u"||A[B]>X)&&(A[B]=X,m.push(B,X),_[B]=R));if(typeof y<"u"&&typeof A[y]>"u"){var j=["Could not find a path from ",E," to ",y,"."].join("");throw new Error(j)}return _},extract_shortest_path_from_predecessor_list:function(k,E){for(var y=[],_=E;_;)y.push(_),_=k[_];return y.reverse(),y},find_path:function(k,E,y){var _=P.single_source_shortest_paths(k,E,y);return P.extract_shortest_path_from_predecessor_list(_,y)},PriorityQueue:{make:function(k){var _,E=P.PriorityQueue,y={};for(_ in k=k||{},E)E.hasOwnProperty(_)&&(y[_]=E[_]);return y.queue=[],y.sorter=k.sorter||E.default_sorter,y},default_sorter:function(k,E){return k.cost-E.cost},push:function(k,E){this.queue.push({value:k,cost:E}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};bt.exports=P},3174:bt=>{"use strict";bt.exports=function(k){for(var E=[],y=k.length,_=0;_<y;_++){var A=k.charCodeAt(_);if(A>=55296&&A<=56319&&y>_+1){var m=k.charCodeAt(_+1);m>=56320&&m<=57343&&(A=1024*(A-55296)+m-56320+65536,_+=1)}A<128?E.push(A):A<2048?(E.push(A>>6|192),E.push(63&A|128)):A<55296||A>=57344&&A<65536?(E.push(A>>12|224),E.push(A>>6&63|128),E.push(63&A|128)):A>=65536&&A<=1114111?(E.push(A>>18|240),E.push(A>>12&63|128),E.push(A>>6&63|128),E.push(63&A|128)):E.push(239,191,189)}return new Uint8Array(E).buffer}},7790:()=>{},9183:(bt,P,k)=>{"use strict";k.d(P,{D6:()=>X,LG:()=>et});var E=k(4438),y=k(177),_=k(6600);const A=["determinateSpinner"];function m(nt,U){if(1&nt&&(E.qSk(),E.j41(0,"svg",11),E.nrm(1,"circle",12),E.k0s()),2&nt){const j=E.XpG();E.BMQ("viewBox",j._viewBox()),E.R7$(),E.xc7("stroke-dasharray",j._strokeCircumference(),"px")("stroke-dashoffset",j._strokeCircumference()/2,"px")("stroke-width",j._circleStrokeWidth(),"%"),E.BMQ("r",j._circleRadius())}}const C=new E.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function R(){return{diameter:B}}}),B=100;let et=(()=>{class nt{get color(){return this._color||this._defaultColor}set color(j){this._color=j}constructor(j,dt,G){this._elementRef=j,this._defaultColor="primary",this._value=0,this._diameter=B,this._noopAnimations="NoopAnimations"===dt&&!!G&&!G._forceAnimations,this.mode="mat-spinner"===j.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",G&&(G.color&&(this.color=this._defaultColor=G.color),G.diameter&&(this.diameter=G.diameter),G.strokeWidth&&(this.strokeWidth=G.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(j){this._value=Math.max(0,Math.min(100,j||0))}get diameter(){return this._diameter}set diameter(j){this._diameter=j||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(j){this._strokeWidth=j||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const j=2*this._circleRadius()+this.strokeWidth;return`0 0 ${j} ${j}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#t=this.\u0275fac=function(dt){return new(dt||nt)(E.rXU(E.aKT),E.rXU(E.bc$,8),E.rXU(C))};static#e=this.\u0275cmp=E.VBU({type:nt,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(dt,G){if(1&dt&&E.GBs(A,5),2&dt){let W;E.mGM(W=E.lsd())&&(G._determinateCircle=W.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(dt,G){2&dt&&(E.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===G.mode?G.value:null)("mode",G.mode),E.HbH("mat-"+G.color),E.xc7("width",G.diameter,"px")("height",G.diameter,"px")("--mdc-circular-progress-size",G.diameter+"px")("--mdc-circular-progress-active-indicator-width",G.diameter+"px"),E.AVh("_mat-animation-noopable",G._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===G.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",E.Udg],diameter:[2,"diameter","diameter",E.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",E.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[E.GFd,E.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(dt,G){if(1&dt&&(E.DNE(0,m,2,8,"ng-template",null,0,E.C5r),E.j41(2,"div",2,1),E.qSk(),E.j41(4,"svg",3),E.nrm(5,"circle",4),E.k0s()(),E.joV(),E.j41(6,"div",5)(7,"div",6)(8,"div",7),E.eu8(9,8),E.k0s(),E.j41(10,"div",9),E.eu8(11,8),E.k0s(),E.j41(12,"div",10),E.eu8(13,8),E.k0s()()()),2&dt){const W=E.sdS(1);E.R7$(4),E.BMQ("viewBox",G._viewBox()),E.R7$(),E.xc7("stroke-dasharray",G._strokeCircumference(),"px")("stroke-dashoffset",G._strokeDashOffset(),"px")("stroke-width",G._circleStrokeWidth(),"%"),E.BMQ("r",G._circleRadius()),E.R7$(4),E.Y8G("ngTemplateOutlet",W),E.R7$(2),E.Y8G("ngTemplateOutlet",W),E.R7$(2),E.Y8G("ngTemplateOutlet",W)}},dependencies:[y.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return nt})(),X=(()=>{class nt{static#t=this.\u0275fac=function(dt){return new(dt||nt)};static#e=this.\u0275mod=E.$C({type:nt});static#n=this.\u0275inj=E.G2t({imports:[y.MD,_.yE]})}return nt})()}}]);