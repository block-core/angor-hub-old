import{a as te}from"./chunk-RQRL4SS7.js";import{a as ie,c as ne,d as oe,e as re}from"./chunk-YKVPUU23.js";import"./chunk-YT4QGOI5.js";import"./chunk-KQX6Z6FU.js";import{d as K,e as A}from"./chunk-XCEH5654.js";import{C as O,E as f,G as U,H as W,L as H,N as Y,O as J,P as Q,R as X,S as Z,T as $,U as ee,q as P,r as N,t as V,x as B,y as q}from"./chunk-FOIKTNAL.js";import{$ as G,X as z,Z as j,ba as D,ca as R}from"./chunk-UUQOEFCO.js";import{f as k,k as T}from"./chunk-DNRPKDOR.js";import{Aa as h,Ba as v,Ca as b,Da as E,Jb as t,Kb as e,Lb as o,Pb as I,Vb as y,Xb as L,cc as _,db as r,dc as a,eb as x,fc as M,kc as C,lc as F,qa as S,wb as d,yb as n}from"./chunk-E43IZEHU.js";var me=()=>["/register"];function se(i,m){if(i&1&&(t(0,"angor-alert",10),a(1),e()),i&2){let w=L();n("appearance","outline")("showIcon",!1)("type",w.alert.type)("@shake",w.alert.type==="error"),r(),M(" ",w.alert.message," ")}}function le(i,m){i&1&&o(0,"mat-icon",37),i&2&&n("svgIcon","heroicons_solid:eye")}function de(i,m){i&1&&o(0,"mat-icon",37),i&2&&n("svgIcon","heroicons_solid:eye-slash")}function pe(i,m){i&1&&(t(0,"mat-error"),a(1," Password is required "),e())}function ce(i,m){i&1&&(t(0,"span"),a(1,"Login"),e())}function ge(i,m){i&1&&o(0,"mat-progress-spinner",38)}function fe(i,m){i&1&&o(0,"mat-icon",37),i&2&&n("svgIcon","heroicons_solid:eye")}function ue(i,m){i&1&&o(0,"mat-icon",37),i&2&&n("svgIcon","heroicons_solid:eye-slash")}function he(i,m){i&1&&(t(0,"mat-error"),a(1," Password is required "),e())}function ve(i,m){i&1&&(t(0,"span"),a(1,"Login"),e())}function ye(i,m){i&1&&o(0,"mat-progress-spinner",38)}function _e(i,m){i&1&&(t(0,"div")(1,"div",13),o(2,"div",14),t(3,"div",15),a(4,"Or login with extension"),e(),o(5,"div",14),e(),t(6,"div",39)(7,"button",40),o(8,"mat-icon",37),e()()()),i&2&&(r(8),n("svgIcon","feather:zap"))}var ae=(()=>{let m=class m{constructor(l,p,s){this._formBuilder=l,this._router=p,this._signerService=s,this.alert={type:"error",message:""},this.showAlert=!1,this.loading=!1,this.isInstalledExtension=!1}ngOnInit(){this.initializeForms(),this.checkNostrExtensionAvailability()}initializeForms(){this.SecretKeyLoginForm=this._formBuilder.group({secretKey:["",[f.required,f.minLength(3)]],password:["",f.required]}),this.MenemonicLoginForm=this._formBuilder.group({menemonic:["",[f.required,f.minLength(3)]],password:["",f.required]})}checkNostrExtensionAvailability(){let l=globalThis;l.nostr&&typeof l.nostr.signEvent=="function"?this.isInstalledExtension=!0:this.isInstalledExtension=!1}loginWithSecretKey(){if(this.SecretKeyLoginForm.invalid)return;let l=this.SecretKeyLoginForm.get("secretKey")?.value,p=this.SecretKeyLoginForm.get("password")?.value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(l),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Secret key is missing or invalid.",this.showAlert=!0)}loginWithMenemonic(){if(this.MenemonicLoginForm.invalid)return;let l=this.MenemonicLoginForm.get("menemonic")?.value,p=this.MenemonicLoginForm.get("password")?.value;this.loading=!0,this.showAlert=!1,this._signerService.saveSecretKeyToSession(l),this._signerService.getPublicKey()?this._router.navigateByUrl("/home"):(this.loading=!1,this.alert.message="Menemonic is missing or invalid.",this.showAlert=!0)}};m.\u0275fac=function(p){return new(p||m)(x(Q),x(K),x(te))},m.\u0275cmp=S({type:m,selectors:[["auth-sign-in"]],standalone:!0,features:[C],decls:83,vars:23,consts:[["secretPasswordField",""],["menemonicPasswordField",""],[1,"flex","min-w-0","flex-auto","flex-col","items-center","sm:flex-row","sm:justify-center","md:items-start","md:justify-start"],[1,"w-full","px-4","py-8","sm:bg-card","sm:w-auto","sm:rounded-2xl","sm:p-12","sm:shadow","md:flex","md:h-full","md:w-1/2","md:items-center","md:justify-end","md:rounded-none","md:p-16","md:shadow-none"],[1,"mx-auto","w-full","max-w-80","sm:mx-0","sm:w-80"],[1,"w-12"],["src","images/logo/logo.svg"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"mt-0.5","flex","items-baseline","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"appearance","showIcon","type"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"ngSubmit","formGroup"],[1,"mt-8","flex","items-center"],[1,"mt-px","flex-auto","border-t"],[1,"text-secondary","mx-2"],[1,"w-full"],["matInput","","formControlName","secretKey"],["id","password","matInput","","type","password",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary",1,"angor-mat-button-large","mt-6","w-full",3,"disabled"],["diameter","24","mode","indeterminate",4,"ngIf"],["matInput","","formControlName","menemonic"],[1,"relative","hidden","h-full","w-1/2","flex-auto","items-center","justify-center","overflow-hidden","bg-gray-800","p-16","dark:border-l","md:flex","lg:px-28"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","leading-6","tracking-tight","text-gray-400"],[1,"icon-size-5",3,"svgIcon"],["diameter","24","mode","indeterminate"],[1,"mt-8","flex","items-center","space-x-4"],["type","button","mat-stroked-button","",1,"flex-auto"]],template:function(p,s){if(p&1){let c=I();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),o(4,"img",6),e(),t(5,"div",7),a(6," Login "),e(),t(7,"div",8)(8,"div"),a(9,"Don't have an account?"),e(),t(10,"a",9),a(11,"Register"),e()(),t(12,"angor-alert",10),a(13," Privet key test = "),t(14,"strong"),a(15,"123"),e(),o(16,"br"),a(17," Menemonic test = "),t(18,"strong"),a(19,"321"),e(),o(20,"br"),e(),d(21,se,2,5,"angor-alert",11),t(22,"form",12),y("ngSubmit",function(){return h(c),v(s.loginWithSecretKey())}),t(23,"div",13),o(24,"div",14),t(25,"div",15),a(26,"Enter secret key"),e(),o(27,"div",14),e(),t(28,"mat-form-field",16)(29,"mat-label"),a(30,"Secret Key"),e(),o(31,"input",17),e(),t(32,"mat-form-field",16)(33,"mat-label"),a(34,"Password"),e(),o(35,"input",18,0),t(37,"button",19),y("click",function(){h(c);let g=_(36);return v(g.type==="password"?g.type="text":g.type="password")}),d(38,le,1,1,"mat-icon",20)(39,de,1,1,"mat-icon",20),e(),d(40,pe,2,0,"mat-error",21),e(),t(41,"button",22),d(42,ce,2,0,"span",21)(43,ge,1,0,"mat-progress-spinner",23),e()(),t(44,"div",13),o(45,"div",14),t(46,"div",15),a(47,"Or enter menemonic"),e(),o(48,"div",14),e(),t(49,"form",12),y("ngSubmit",function(){return h(c),v(s.loginWithMenemonic())}),t(50,"mat-form-field",16)(51,"mat-label"),a(52,"Menemonic"),e(),o(53,"input",24),e(),t(54,"mat-form-field",16)(55,"mat-label"),a(56,"Password"),e(),o(57,"input",18,1),t(59,"button",19),y("click",function(){h(c);let g=_(58);return v(g.type==="password"?g.type="text":g.type="password")}),d(60,fe,1,1,"mat-icon",20)(61,ue,1,1,"mat-icon",20),e(),d(62,he,2,0,"mat-error",21),e(),t(63,"button",22),d(64,ve,2,0,"span",21)(65,ye,1,0,"mat-progress-spinner",23),e()(),d(66,_e,9,1,"div",21),e()(),t(67,"div",25),b(),t(68,"svg",26)(69,"g",27),o(70,"circle",28)(71,"circle",29),e()(),t(72,"svg",30)(73,"defs")(74,"pattern",31),o(75,"rect",32),e()(),o(76,"rect",33),e(),E(),t(77,"div",34)(78,"div",35)(79,"div"),a(80,"Angor Hub"),e()(),t(81,"div",36),a(82," Angor Hub is a Nostr client customized around the Angor protocol, a decentralized crowdfunding platform. "),e()()()()}if(p&2){let c=_(36),u=_(58);r(10),n("routerLink",F(22,me)),r(2),n("appearance","outline")("showIcon",!1)("type","info"),r(9),n("ngIf",s.showAlert),r(),n("formGroup",s.SecretKeyLoginForm),r(13),n("formControlName","password"),r(3),n("ngIf",c.type==="password"),r(),n("ngIf",c.type==="text"),r(),n("ngIf",s.SecretKeyLoginForm.get("password").hasError("required")),r(),n("disabled",s.SecretKeyLoginForm.invalid),r(),n("ngIf",!s.loading),r(),n("ngIf",s.loading),r(6),n("formGroup",s.MenemonicLoginForm),r(8),n("formControlName","password"),r(3),n("ngIf",u.type==="password"),r(),n("ngIf",u.type==="text"),r(),n("ngIf",s.MenemonicLoginForm.get("password").hasError("required")),r(),n("disabled",s.MenemonicLoginForm.invalid),r(),n("ngIf",!s.loading),r(),n("ngIf",s.loading),r(),n("ngIf",s.isInstalledExtension)}},dependencies:[A,ie,X,H,O,U,W,Z,Y,J,q,B,P,N,V,ee,$,G,z,j,R,D,ne,re,oe,T,k],encapsulation:2});let i=m;return i})();var De=[{path:"",component:ae}];export{De as default};
