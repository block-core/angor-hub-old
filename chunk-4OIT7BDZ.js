import{a as ue,b as he,c as fe,d as ge}from"./chunk-ON6SO2QP.js";import{a as ve,b as _e,c as xe,d as Ce}from"./chunk-K7XPURVS.js";import{h as Ge}from"./chunk-3Q7ZV3LD.js";import{b as rt}from"./chunk-MNFLCFFY.js";import{t as it,u as at,v as ot}from"./chunk-6S6AYVUH.js";import{A as Je,B as qe,D as Xe,H as Ye,L as et,T as tt,V as q,W as X,q as We,t as pe,y as G,z as J}from"./chunk-4AZPYN7Q.js";import{d as nt}from"./chunk-BLRJMPLX.js";import{$ as B,X as Qe,Z as R,_ as Ze,ba as T,ca as F}from"./chunk-MH4Z64LL.js";import{$a as g,Aa as P,Ab as Oe,Ba as r,Bb as x,Ca as I,D as N,Db as ae,Eb as oe,F as Se,Fb as re,Hb as k,Ib as Ve,Jb as Ne,Kb as $,Mb as $e,Ob as ee,P as Me,Pa as _,Q as S,Qb as te,Rb as Ke,Ua as l,W as Fe,Wa as ke,Wb as se,Z as z,_ as H,_a as W,a as Y,ab as Q,ba as M,bb as Z,cb as s,db as c,dc as ce,eb as d,gc as Ue,h as D,hb as Re,ia as y,ib as O,ic as ze,j as Ie,ja as w,k as A,ka as De,l as U,lb as C,nb as u,p as Ee,q as we,qa as Pe,r as j,t as Te,tb as Be,tc as He,ub as Le,vb as je,wc as le,xc as me,yb as L,yc as de,za as Ae,zb as p}from"./chunk-LP5NDBXI.js";var st=(()=>{let a=class a{constructor(){}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=M({type:a,selectors:[["chat"]],standalone:!0,features:[k],decls:3,vars:0,consts:[[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"flex","flex-auto","overflow-hidden"]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1),d(2,"router-outlet"),c()())},dependencies:[le],encapsulation:2,changeDetection:0});let i=a;return i})();var ie=4;var E=(()=>{let a=class a{constructor(e,t,o,m,h){this._metadataService=e,this._signerService=t,this._indexedDBService=o,this._relayService=m,this._sanitizer=h,this.chatList=[],this.latestMessageTimestamps={},this.messageQueue=[],this.isDecrypting=!1,this._chat=new U(null),this._chats=new U(null),this._contact=new U(null),this._contacts=new U(null),this._profile=new U(null),this._unsubscribeAll=new A}get chat$(){return this._chat.asObservable()}get chats$(){return this._chats.asObservable()}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get profile$(){return this._profile.asObservable()}getContact(e){return D(this,null,function*(){try{let t=yield this._metadataService.fetchMetadataWithCache(e);if(t){let o={pubKey:e,displayName:t.name,picture:t.picture,about:t.about};this._contact.next(o),this._indexedDBService.getMetadataStream().pipe(S(this._unsubscribeAll)).subscribe(m=>{if(m&&m.pubkey===e){let h={pubKey:e,displayName:m.metadata.name,picture:m.metadata.picture,about:m.metadata.about};this._contact.next(h)}})}}catch(t){console.error("Error fetching contact metadata:",t)}})}getContacts(){return new Ie(e=>(this._indexedDBService.getAllUsers().then(t=>{t.length>0&&(this._contacts.next(t),e.next(t));let o=t.map(m=>m.pubKey);o.length>0&&this.subscribeToRealTimeContacts(o,e)}).catch(t=>{console.error("Error loading cached contacts from IndexedDB:",t),e.error(t)}),()=>{console.log("Unsubscribing from contacts updates.")}))}subscribeToRealTimeContacts(e,t){this._metadataService.fetchMetadataForMultipleKeys(e).then(o=>{let m=[...this._contacts.value||[]];o.forEach(h=>{let f=m.findIndex(b=>b.pubKey===h.pubkey),v={pubKey:h.pubkey,displayName:h.name,picture:h.picture,about:h.about};f!==-1?m[f]=Y(Y({},m[f]),v):m.push(v)}),this._contacts.next(m),t.next(m)}).catch(o=>{console.error("Error fetching metadata for contacts:",o),t.error(o)})}getProfile(){return D(this,null,function*(){try{let e=this._signerService.getPublicKey(),t=yield this._metadataService.fetchMetadataWithCache(e);t&&(this._profile.next(t),this._indexedDBService.getMetadataStream().pipe(S(this._unsubscribeAll)).subscribe(o=>{o&&o.pubkey===e&&this._profile.next(o.metadata)}))}catch(e){console.error("Error fetching profile metadata:",e)}})}getChats(){return D(this,null,function*(){let e=this._signerService.getPublicKey(),t=yield this._signerService.isUsingExtension(),o=yield this._signerService.getSecretKey("123");return this.subscribeToChatList(e,t,o),this.chatList.forEach(m=>this.loadChatHistory(m.id)),this.getChatListStream()})}subscribeToChatList(e,t,o){return this._relayService.ensureConnectedRelays().then(()=>{let m=[{kinds:[ie],authors:[e]},{kinds:[ie],"#p":[e]}];this._relayService.getPool().subscribeMany(this._relayService.getConnectedRelays(),m,{onevent:h=>D(this,null,function*(){let f=h.pubkey===e?h.tags.find(b=>b[0]==="p")?.[1]||"":h.pubkey;if(!f)return;let v=this.latestMessageTimestamps[f]||0;h.created_at>v&&(this.latestMessageTimestamps[f]=h.created_at,this.messageQueue.push(h),yield this.processNextMessage(e,t,o))}),oneose:()=>{console.log("Subscription closed"),this._chats.next(this.chatList)}})}),this.getChatListStream()}processNextMessage(e,t,o){return D(this,null,function*(){if(!(this.isDecrypting||this.messageQueue.length===0)){this.isDecrypting=!0;try{for(;this.messageQueue.length>0;){let m=this.messageQueue.shift();if(!m)continue;let h=m.pubkey===e,f=h?m.tags.find(b=>b[0]==="p")?.[1]||"":m.pubkey;if(!f)continue;let v=yield this.decryptReceivedMessage(m,t,o,f);if(v){let b=m.created_at*1e3;this.addOrUpdateChatList(f,v,b,h),this._chat.next(this.chatList.find(V=>V.id===f))}}}catch(m){console.error("Failed to decrypt message:",m)}finally{this.isDecrypting=!1}}})}addOrUpdateChatList(e,t,o,m){let h=this.chatList.find(v=>v.contact?.pubKey===e),f={id:`${e}-${o}`,chatId:e,contactId:e,isMine:m,value:t,createdAt:new Date(o).toISOString()};if(h)h.messages?.some(b=>b.id===f.id)||(h.messages=(h.messages||[]).concat(f).sort((b,V)=>new Date(b.createdAt).getTime()-new Date(V.createdAt).getTime()),new Date(h.lastMessageAt).getTime()<o&&(h.lastMessage=t,h.lastMessageAt=new Date(o).toISOString()));else{let v={id:e,contact:{pubKey:e},lastMessage:t,lastMessageAt:new Date(o).toISOString(),messages:[f]};this.chatList.push(v),this.fetchMetadataForPubKey(e)}this.chatList.sort((v,b)=>new Date(b.lastMessageAt).getTime()-new Date(v.lastMessageAt).getTime()),this._chats.next(this.chatList)}fetchMetadataForPubKey(e){this._metadataService.fetchMetadataWithCache(e).then(t=>{let o=this.chatList.find(m=>m.contact?.pubKey===e);o&&t&&(o.contact=Y(Y({},o.contact),t),this._chats.next(this.chatList))}).catch(t=>{console.error(`Failed to fetch metadata for pubKey: ${e}`,t)})}getChatListStream(){return this._chats.asObservable()}decryptReceivedMessage(e,t,o,m){return D(this,null,function*(){return t?yield this._signerService.decryptMessageWithExtension(e.content,m):yield this._signerService.decryptMessage(o,m,e.content)})}loadChatHistory(e){return D(this,null,function*(){let t=this._signerService.getPublicKey(),o=[{kinds:[ie],authors:[t],"#p":[e]},{kinds:[ie],authors:[e],"#p":[t]}];console.log("Subscribing to history for chat with: ",e),this._relayService.getPool().subscribeMany(this._relayService.getConnectedRelays(),o,{onevent:m=>D(this,null,function*(){console.log("Received historical event: ",m);let h=m.pubkey===t,f=h?e:m.pubkey,v=yield this.decryptReceivedMessage(m,yield this._signerService.isUsingExtension(),yield this._signerService.getSecretKey("123"),f);if(v){let b=m.created_at*1e3;this.addOrUpdateChatList(e,v,b,h),this._chat.next(this.chatList.find(V=>V.id===e))}}),oneose:()=>{console.log(`Closed subscription for loading history of chat: ${e}`)}})})}updateChat(e,t){return this.chats$.pipe(Se(1),Me(o=>{let m=t.contact?.pubKey;if(!m)return j("No public key found for this chat");let h={kind:4,pubkey:m,content:JSON.stringify(t),created_at:Math.floor(Date.now()/1e3),tags:[["p",m]]};return h.id=nt(h),Ee(this._relayService.publishEventToRelays(h)).pipe(Te(()=>{if(o){let f=o.findIndex(v=>v.id===e);f!==-1&&(o[f]=t,this._chats.next(o))}return t}),N(f=>(console.error("Failed to update chat via Nostr:",f),j(f))))}))}getChatById(e){this.recipientPublicKey=e;let t=this._signerService.getPublicKey(),o=this._signerService.isUsingExtension(),m=this._signerService.getSecretKey("123");return this.chats$.pipe(Se(1),Me(h=>{let f=h?.find(V=>V.id===e);if(f)return this._chat.next(f),console.log("Fetching chat history for: ",this.recipientPublicKey),this.loadChatHistory(this.recipientPublicKey),we(f);let v={id:this.recipientPublicKey,contact:{pubKey:this.recipientPublicKey,picture:"/images/avatars/avatar-placeholder.png"},lastMessage:"",lastMessageAt:new Date().toISOString(),messages:[]},b=h?[...h,v]:[v];return this._chats.next(b),this._chat.next(v),console.log("Fetching chat history for: ",this.recipientPublicKey),this.loadChatHistory(this.recipientPublicKey),we(v)}),N(h=>(console.error("Error fetching chat by id from Nostr:",h),j(h))))}resetChat(){this._chat.next(null)}sendPrivateMessage(e){return D(this,null,function*(){try{if(this.message=e,yield this._signerService.isUsingExtension())yield this.handleMessageSendingWithExtension();else{let o=yield this._signerService.getSecretKey("123");if(!this.isValidMessageSetup()){console.error("Message, sender private key, or recipient public key is not properly set.");return}let m=yield this._signerService.encryptMessage(o,this.recipientPublicKey,this.message),h=this._signerService.getUnsignedEvent(4,[["p",this.recipientPublicKey]],m),f=this._signerService.getSignedEvent(h,o);(yield this._relayService.publishEventToRelays(f))?(console.log("Message sent successfully!"),this.message=""):console.error("Failed to send the message.")}}catch(t){console.error("Error sending private message:",t)}})}handleMessageSendingWithExtension(){return D(this,null,function*(){try{let e=yield this._signerService.encryptMessageWithExtension(this.message,this.recipientPublicKey),t=yield this._signerService.signEventWithExtension({kind:4,pubkey:this._signerService.getPublicKey(),tags:[["p",this.recipientPublicKey]],content:e,created_at:Math.floor(Date.now()/1e3)});(yield this._relayService.publishEventToRelays(t))?(console.log("Message sent successfully with extension!"),this.message=""):console.error("Failed to send the message with extension.")}catch(e){console.error("Error sending message with extension:",e)}})}isValidMessageSetup(){return this.message.trim()!==""&&this.recipientPublicKey!==""}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}};a.\u0275fac=function(t){return new(t||a)(z(ot),z(rt),z(it),z(at),z(He))},a.\u0275prov=Fe({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();function gt(i,a){if(i&1){let n=O();s(0,"div",16),C("click",function(){y(n);let t=u().$implicit,o=u(2);return w(o.openChat(t))}),p(1),c()}if(i&2){let n,e=u().$implicit;r(),x(" ",(n=e==null||e.name==null?null:e.name.charAt(0))!==null&&n!==void 0?n:""," ")}}function vt(i,a){if(i&1&&d(0,"img",11),i&2){let n=u().$implicit;l("src",n.picture||"/images/avatars/avatar-placeholder.png",P)}}function _t(i,a){if(i&1&&(s(0,"div",12),p(1),c()),i&2){let n,e=u().$implicit;r(),x(" ",(n=e==null||e.name==null?null:e.name.charAt(0))!==null&&n!==void 0?n:""," ")}}function xt(i,a){if(i&1){let n=O();_(0,gt,2,1,"div",8),s(1,"div",9),C("click",function(){let t=y(n).$implicit,o=u(2);return w(o.openChat(t))}),s(2,"div",10),_(3,vt,1,1,"img",11)(4,_t,2,1,"div",12),c(),s(5,"div",13)(6,"div",14),p(7),c(),s(8,"div",15),p(9),c()()()}if(i&2){let n,e=a.$implicit,t=a.$index,o=u(2);g(t===0||((n=e==null||e.name==null?null:e.name.charAt(0))!==null&&n!==void 0?n:"")!==((n=o.contacts[t-1]==null||o.contacts[t-1].name==null?null:o.contacts[t-1].name.charAt(0))!==null&&n!==void 0?n:"")?0:-1),r(3),g(e.picture?3:-1),r(),g(e.picture?-1:4),r(3),x(" ",e.name," "),r(2),x(" ",e.about," ")}}function Ct(i,a){if(i&1&&Q(0,xt,10,5,"div",7,W().trackByFn,!0),i&2){let n=u();Z(n.contacts)}}function bt(i,a){i&1&&(s(0,"div",6),p(1," There are no contacts! "),c())}var ct=(()=>{let a=class a{constructor(e,t){this._chatService=e,this.router=t,this.contacts=[],this._unsubscribeAll=new A}ngOnInit(){this._chatService.contacts$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.contacts=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openChat(e){this._chatService.getChatById(e.pubKey).pipe(N(t=>{console.error(t);let o=this.router.url.split("/").slice(0,-1).join("/");return this.router.navigateByUrl(o),j(t)})).subscribe(),this.drawer.close()}trackByFn(e,t){return t.id||e}};a.\u0275fac=function(t){return new(t||a)(I(E),I(me))},a.\u0275cmp=M({type:a,selectors:[["chat-new-chat"]],inputs:{drawer:"drawer"},standalone:!0,features:[k],decls:9,vars:2,consts:[[1,"bg-card","flex","h-full","flex-auto","flex-col","overflow-hidden","dark:bg-default"],[1,"-mb-px","flex","h-18","flex-0","items-center","bg-gray-50","px-6","dark:bg-transparent"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","text-2xl","font-semibold"],[1,"relative","overflow-y-auto"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-6","py-4","dark:hover:bg-hover","hover:bg-gray-100","md:px-8"],[1,"text-secondary","sticky","top-0","z-10","-mt-px","border-b","border-t","bg-gray-100","px-6","py-1","font-medium","uppercase","dark:bg-gray-900","md:px-8"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-6","py-4","dark:hover:bg-hover","hover:bg-gray-100","md:px-8",3,"click"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Contact picture",1,"h-full","w-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","min-w-0"],[1,"truncate","font-medium","leading-5"],[1,"text-secondary","truncate","leading-5"],[1,"text-secondary","sticky","top-0","z-10","-mt-px","border-b","border-t","bg-gray-100","px-6","py-1","font-medium","uppercase","dark:bg-gray-900","md:px-8",3,"click"]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return o.drawer.close()}),d(3,"mat-icon",3),c(),s(4,"div",4),p(5,"New chat"),c()(),s(6,"div",5),_(7,Ct,2,0)(8,bt,2,0,"div",6),c()()),t&2&&(r(3),l("svgIcon","heroicons_outline:arrow-long-left"),r(4),g(o.contacts.length?7:8))},dependencies:[B,R,F,T],encapsulation:2,changeDetection:0});let i=a;return i})();function yt(i,a){if(i&1&&d(0,"img",10),i&2){let n=u();l("src",n.profile.picture||"/images/avatars/avatar-placeholder.png",P)("alt","Profile picture")}}function wt(i,a){if(i&1&&(s(0,"div",11),p(1),c()),i&2){let n=u();r(),x(" ",n.profile.name.charAt(0)," ")}}var dt=(()=>{let a=class a{constructor(e){this._chatService=e,this._unsubscribeAll=new A}ngOnInit(){this._chatService.profile$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.profile=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}};a.\u0275fac=function(t){return new(t||a)(I(E))},a.\u0275cmp=M({type:a,selectors:[["chat-profile"]],inputs:{drawer:"drawer"},standalone:!0,features:[k],decls:35,vars:11,consts:[[1,"bg-card","flex","flex-auto","flex-col","dark:bg-default"],[1,"flex","h-18","flex-0","items-center","border-b","bg-gray-50","px-6","dark:bg-transparent"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","text-2xl","font-semibold"],[1,"px-6"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"mx-2","mt-8","flex","flex-col"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"ngModel"],[1,"mt-4","flex","items-center","justify-end"],["mat-button","",3,"click"],["mat-flat-button","",1,"ml-2",3,"color"]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return o.drawer.close()}),d(3,"mat-icon",3),c(),s(4,"div",4),p(5,"Profile"),c()(),s(6,"div",5)(7,"div",6)(8,"div",7),d(9,"mat-icon",8),s(10,"div",9),p(11," Change Profile Photo "),c()(),_(12,yt,1,2,"img",10)(13,wt,2,1,"div",11),c(),s(14,"div",12)(15,"mat-form-field")(16,"mat-label"),p(17,"Name"),c(),d(18,"mat-icon",13)(19,"input",14),c(),s(20,"mat-form-field")(21,"mat-label"),p(22,"Username"),c(),d(23,"mat-icon",13)(24,"input",14),c(),s(25,"mat-form-field")(26,"mat-label"),p(27,"About"),c(),d(28,"mat-icon",13)(29,"input",14),c(),s(30,"div",15)(31,"button",16),C("click",function(){return o.drawer.close()}),p(32,"Cancel"),c(),s(33,"button",17),p(34," Save "),c()()()()()),t&2&&(r(3),l("svgIcon","heroicons_outline:arrow-long-left"),r(6),l("svgIcon","heroicons_outline:camera"),r(3),g(o.profile.picture?12:-1),r(),g(o.profile.picture?-1:13),r(5),l("svgIcon","heroicons_solid:user-circle"),r(),l("ngModel",o.profile.name),r(4),l("svgIcon","heroicons_solid:at-symbol"),r(),l("ngModel",o.profile.username),r(4),l("svgIcon","heroicons_solid:identification"),r(),l("ngModel",o.profile.about),r(4),l("color","primary"))},dependencies:[B,Qe,R,F,T,J,G,We,pe,X,q,tt,Xe,Ye,et],encapsulation:2,changeDetection:0});let i=a;return i})();var kt=(i,a)=>({"dark:hover:bg-hover hover:bg-gray-100":i,"bg-primary-50 dark:bg-hover":a}),It=i=>[i],Et=(i,a)=>({"absolute inset-0 z-20 flex lg:static lg:inset-auto":i,"hidden lg:flex":a});function Tt(i,a){if(i&1&&d(0,"chat-new-chat",6),i&2){u();let n=L(3);l("drawer",n)}}function Ft(i,a){if(i&1&&d(0,"chat-profile",6),i&2){u();let n=L(3);l("drawer",n)}}function Dt(i,a){if(i&1&&d(0,"img",15),i&2){let n=u(2);l("src",n.profile.picture||"/images/avatars/avatar-placeholder.png",P)}}function Pt(i,a){if(i&1&&(s(0,"div",16),p(1),c()),i&2){let n=u(2);r(),x(" ",n.profile.name?n.profile.name.charAt(0):""," ")}}function At(i,a){if(i&1&&d(0,"div",38),i&2){let n=u().$implicit,e=u(3);ke("ring-primary-50",e.selectedChat&&e.selectedChat.id===n.id)}}function Rt(i,a){if(i&1&&d(0,"img",31),i&2){let n=u().$implicit;l("src",n.contact.picture||"/images/avatars/avatar-placeholder.png",P)}}function Bt(i,a){if(i&1&&(s(0,"div",16),p(1),c()),i&2){let n=u().$implicit;r(),x(" ",!(n==null||n.contact==null)&&n.contact.name?n.contact.name.charAt(0):""," ")}}function Lt(i,a){i&1&&d(0,"mat-icon",37),i&2&&l("svgIcon","heroicons_solid:speaker-x-mark")}function jt(i,a){if(i&1&&(s(0,"a",28)(1,"div",29),_(2,At,1,2,"div",30)(3,Rt,1,1,"img",31)(4,Bt,2,1,"div",16),c(),s(5,"div",32)(6,"div",33),p(7),c(),s(8,"div",34),p(9),c()(),s(10,"div",35)(11,"div",36),p(12),c(),_(13,Lt,1,1,"mat-icon",37),c()()),i&2){let n=a.$implicit,e=u(3);l("ngClass",$(13,kt,!e.selectedChat||e.selectedChat.id!==n.id,e.selectedChat&&e.selectedChat.id===n.id))("routerLink",Ne(16,It,n.id)),r(2),g(n.unreadCount>0?2:-1),r(),g(n.contact.picture?3:-1),r(),g(n.contact.picture?-1:4),r(3),x(" ",n.contact.name," "),r(),ke("text-primary",n.unreadCount>0)("dark:text-primary-500",n.unreadCount>0),r(),x(" ",n.lastMessage," "),r(3),x(" ",n.lastMessageAt," "),r(),g(n.muted?13:-1)}}function Ot(i,a){if(i&1&&Q(0,jt,14,18,"a",28,W().trackByFn,!0),i&2){let n=u(2);Z(n.filteredChats)}}function Vt(i,a){i&1&&(s(0,"div",9),d(1,"mat-icon",39),s(2,"div",40),p(3," No chats "),c()()),i&2&&(r(),l("svgIcon","heroicons_outline:chat-bubble-oval-left-ellipsis"))}function Nt(i,a){if(i&1){let n=O();s(0,"div",8)(1,"div",11)(2,"div",12)(3,"div",13),C("click",function(){y(n);let t=u();return w(t.openProfile())}),s(4,"div",14),_(5,Dt,1,1,"img",15)(6,Pt,2,1,"div",16),c(),s(7,"div",17),p(8),c()(),s(9,"button",18),C("click",function(){y(n);let t=u();return w(t.openNewChat())}),d(10,"mat-icon",19),c(),s(11,"button",20),d(12,"mat-icon",19),s(13,"mat-menu",null,1)(15,"button",21),d(16,"mat-icon",19),p(17," New group "),c(),s(18,"button",21),d(19,"mat-icon",19),p(20," Create a room "),c(),s(21,"button",22),C("click",function(){y(n);let t=u();return w(t.openProfile())}),d(22,"mat-icon",19),p(23," Profile "),c(),s(24,"button",21),d(25,"mat-icon",19),p(26," Archived "),c(),s(27,"button",21),d(28,"mat-icon",19),p(29," Starred "),c(),s(30,"button",21),d(31,"mat-icon",19),p(32," Settings "),c()()()(),s(33,"div",23)(34,"mat-form-field",24),d(35,"mat-icon",25),s(36,"input",26,2),C("input",function(){y(n);let t=L(37),o=u();return w(o.filterChats(t.value))}),c()()()(),s(38,"div",27),_(39,Ot,2,0)(40,Vt,4,1,"div",9),c()()}if(i&2){let n=L(14),e=u();r(5),g(e.profile.picture?5:-1),r(),g(e.profile.picture?-1:6),r(2),x(" ",e.profile.name," "),r(2),l("svgIcon","heroicons_outline:plus-circle"),r(),l("matMenuTriggerFor",n),r(),l("svgIcon","heroicons_outline:ellipsis-vertical"),r(4),l("svgIcon","heroicons_outline:user-group"),r(3),l("svgIcon","heroicons_outline:chat-bubble-left-right"),r(3),l("svgIcon","heroicons_outline:user-circle"),r(3),l("svgIcon","heroicons_outline:archive-box"),r(3),l("svgIcon","heroicons_outline:star"),r(3),l("svgIcon","heroicons_outline:cog-8-tooth"),r(3),l("subscriptSizing","dynamic"),r(),l("svgIcon","heroicons_solid:magnifying-glass"),r(),l("autocomplete","off")("placeholder","Search or start new chat"),r(3),g(e.filteredChats.length>0?39:40)}}function $t(i,a){i&1&&(s(0,"div",9),d(1,"mat-icon",39),s(2,"div",40),p(3," No chats "),c()()),i&2&&(r(),l("svgIcon","heroicons_outline:chat-bubble-oval-left-ellipsis"))}function Kt(i,a){if(i&1&&(s(0,"div",10),d(1,"router-outlet"),c()),i&2){let n=u();l("ngClass",$(1,Et,n.selectedChat&&n.selectedChat.id,!n.selectedChat||!n.selectedChat.id))}}var pt=(()=>{let a=class a{constructor(e,t){this._chatService=e,this._changeDetectorRef=t,this.drawerOpened=!1,this._unsubscribeAll=new A}ngOnInit(){this._chatService.chats$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.chats=this.filteredChats=e,this._changeDetectorRef.markForCheck()}),this._chatService.profile$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.profile=e,this._changeDetectorRef.markForCheck()}),this._chatService.chat$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.selectedChat=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._chatService.resetChat()}filterChats(e){if(!e){this.filteredChats=this.chats;return}this.filteredChats=this.chats.filter(t=>(t.contact.name?t.contact.name.toLowerCase():"").includes(e.toLowerCase()))}openNewChat(){this.drawerComponent="new-chat",this.drawerOpened=!0,this._changeDetectorRef.markForCheck()}openProfile(){this.drawerComponent="profile",this.drawerOpened=!0,this._changeDetectorRef.markForCheck()}trackByFn(e,t){return t.id||e}};a.\u0275fac=function(t){return new(t||a)(I(E),I(se))},a.\u0275cmp=M({type:a,selectors:[["chat-chats"]],standalone:!0,features:[k],decls:10,vars:7,consts:[["drawer",""],["chatsHeaderMenu",""],["searchField",""],[1,"bg-card","relative","flex","w-full","flex-auto","dark:bg-transparent"],[1,"h-full","flex-auto",3,"hasBackdrop"],[1,"w-full","dark:bg-gray-900","sm:w-100","lg:border-r","lg:shadow-none",3,"openedChange","autoFocus","opened"],[3,"drawer"],[1,"flex","overflow-hidden"],[1,"bg-card","relative","flex","w-full","min-w-0","flex-auto","flex-col","dark:bg-transparent","lg:min-w-100","lg:max-w-100"],[1,"flex","h-full","flex-auto","flex-col","items-center","justify-center"],[1,"flex-auto","border-l",3,"ngClass"],[1,"flex","flex-0","flex-col","border-b","bg-gray-50","px-8","py-4","dark:bg-transparent"],[1,"flex","items-center"],[1,"mr-1","flex","cursor-pointer","items-center",3,"click"],[1,"h-10","w-10"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Profile picture",1,"h-full","w-full","rounded-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","truncate","font-medium"],["mat-icon-button","",1,"ml-auto",3,"click"],[3,"svgIcon"],["mat-icon-button","",1,"-mr-4","ml-1",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"mt-4"],[1,"angor-mat-rounded","angor-mat-dense","w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],[1,"flex-auto","overflow-y-auto"],[1,"z-20","flex","cursor-pointer","items-center","border-b","px-8","py-5",3,"ngClass","routerLink"],[1,"relative","flex","h-10","w-10","flex-0","items-center","justify-center"],[1,"ring-bg-card","absolute","bottom-0","right-0","-ml-0.5","h-2","w-2","flex-0","rounded-full","bg-primary","text-on-primary","ring-2","dark:bg-primary-500","dark:ring-gray-900",3,"ring-primary-50"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Contact picture",1,"h-full","w-full","rounded-full","object-cover",3,"src"],[1,"ml-4","min-w-0"],[1,"truncate","font-medium","leading-5"],[1,"text-secondary","truncate","leading-5"],[1,"ml-auto","flex","flex-col","items-end","self-start","pl-2"],[1,"text-secondary","text-sm","leading-5"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"ring-bg-card","absolute","bottom-0","right-0","-ml-0.5","h-2","w-2","flex-0","rounded-full","bg-primary","text-on-primary","ring-2","dark:bg-primary-500","dark:ring-gray-900"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(t,o){if(t&1){let m=O();s(0,"div",3)(1,"mat-drawer-container",4)(2,"mat-drawer",5,0),re("openedChange",function(f){return y(m),oe(o.drawerOpened,f)||(o.drawerOpened=f),w(f)}),_(4,Tt,1,1,"chat-new-chat",6)(5,Ft,1,1,"chat-profile",6),c(),s(6,"mat-drawer-content",7),_(7,Nt,41,17,"div",8)(8,$t,4,1,"div",9)(9,Kt,2,4,"div",10),c()()()}t&2&&(r(),l("hasBackdrop",!1),r(),l("autoFocus",!1),ae("opened",o.drawerOpened),r(2),g(o.drawerComponent==="new-chat"?4:-1),r(),g(o.drawerComponent==="profile"?5:-1),r(2),g(o.chats&&o.chats.length>0?7:8),r(2),g(o.chats&&o.chats.length>0?9:-1))},dependencies:[Ce,_e,xe,ve,ct,dt,B,R,F,T,ge,he,ue,fe,J,G,pe,X,q,ce,de,le],encapsulation:2,changeDetection:0});let i=a;return i})();function Ut(i,a){if(i&1&&d(0,"img",8),i&2){let n=u();l("src",n.chat.contact.picture||"/images/avatars/avatar-placeholder.png",P)("alt","Contact picture")}}function zt(i,a){if(i&1&&(s(0,"div",9),p(1),c()),i&2){let n=u();r(),x(" ",!(n.chat==null||n.chat.contact==null)&&n.chat.contact.name?n.chat.contact.name.charAt(0):""," ")}}var ut=(()=>{let a=class a{constructor(){}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=M({type:a,selectors:[["chat-contact-info"]],inputs:{chat:"chat",drawer:"drawer"},standalone:!0,features:[k],decls:15,vars:5,consts:[[1,"bg-card","flex","h-full","flex-auto","flex-col","dark:bg-default"],[1,"flex","h-18","flex-0","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","text-lg","font-medium"],[1,"overflow-y-auto"],[1,"mt-8","flex","flex-col","items-center"],[1,"h-40","w-40","rounded-full"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';",1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"mt-4","text-lg","font-medium"],[1,"text-secondary","mt-0.5","text-md"]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return o.drawer.close()}),d(3,"mat-icon",3),c(),s(4,"div",4),p(5,"Contact info"),c()(),s(6,"div",5)(7,"div",6)(8,"div",7),_(9,Ut,1,2,"img",8)(10,zt,2,1,"div",9),c(),s(11,"div",10),p(12),c(),s(13,"div",11),p(14),c()()()()),t&2&&(r(3),l("svgIcon","heroicons_outline:x-mark"),r(6),g(o.chat.contact.picture?9:-1),r(),g(o.chat.contact.picture?-1:10),r(2),Oe(o.chat.contact.name),r(2),x(" ",o.chat.contact.about," "))},dependencies:[B,R,F,T],encapsulation:2,changeDetection:0});let i=a;return i})();var Ht=["messageInput"],Wt=()=>["./"],Qt=(i,a,n,e)=>({"items-end":i,"items-start":a,"mt-0.5":n,"mt-3":e}),Zt=(i,a)=>({"bg-blue-500 text-blue-50":i,"bg-gray-500 text-gray-50":a}),Gt=(i,a)=>({"-right-1 -mr-px mb-px text-blue-500":i,"-left-1 -ml-px mb-px -scale-x-1 text-gray-500":a}),Jt=(i,a)=>({"mr-3":i,"ml-3":a});function qt(i,a){if(i&1&&d(0,"img",15),i&2){let n=u(2);l("src",n.chat.contact.picture||"/images/avatars/avatar-placeholder.png",P)}}function Xt(i,a){if(i&1&&(s(0,"div",16),p(1),c()),i&2){let n,e=u(2);r(),x(" ",(n=e.chat==null||e.chat.contact==null||e.chat.contact.name==null?null:e.chat.contact.name.charAt(0))!==null&&n!==void 0?n:""," ")}}function Yt(i,a){i&1&&(d(0,"mat-icon",12),p(1," Mute notifications ")),i&2&&l("svgIcon","heroicons_outline:speaker-x-mark")}function ei(i,a){i&1&&(d(0,"mat-icon",12),p(1," Unmute notifications ")),i&2&&l("svgIcon","heroicons_outline:speaker-wave")}function ti(i,a){if(i&1&&(s(0,"div",32),d(1,"div",37),s(2,"div",38),p(3),ee(4,"date"),c(),d(5,"div",37),c()),i&2){let n=u().$implicit;r(3),x(" ",te(4,1,n.createdAt,"longDate")," ")}}function ii(i,a){i&1&&Re(0)}function ni(i,a){if(i&1&&(s(0,"div",34),_(1,ii,1,0,"ng-container",39),c()),i&2){let n=u().$implicit;u(2);let e=L(4);l("ngClass",$(2,Gt,n.isMine,!n.isMine)),r(),l("ngTemplateOutlet",e)}}function ai(i,a){if(i&1&&(s(0,"div",36),p(1),ee(2,"date"),c()),i&2){let n=u().$implicit;l("ngClass",$(5,Jt,n.isMine,!n.isMine)),r(),x(" ",te(2,2,n.createdAt,"HH:mm")," ")}}function oi(i,a){if(i&1&&(_(0,ti,6,4,"div",32),ee(1,"date"),ee(2,"date"),s(3,"div",23)(4,"div",33),_(5,ni,2,5,"div",34),d(6,"div",35),c(),_(7,ai,3,8,"div",36),c()),i&2){let n=a.$implicit,e=a.$index,t=a.$count,o=u(2);g(e===0||te(1,6,o.chat.messages[e-1].createdAt,"d")!==te(2,9,n.createdAt,"d")?0:-1),r(3),l("ngClass",$e(12,Qt,n.isMine,!n.isMine,e>0&&o.chat.messages[e-1].isMine===n.isMine,e>0&&o.chat.messages[e-1].isMine!==n.isMine)),r(),l("ngClass",$(17,Zt,n.isMine,!n.isMine)),r(),g(e===t-1||o.chat.messages[e+1].isMine!==n.isMine?5:-1),r(),l("innerHTML",n.value,Ae),r(),g(e===0||e===t-1||o.chat.messages[e+1].isMine!==n.isMine||o.chat.messages[e+1].createdAt!==n.createdAt?7:-1)}}function ri(i,a){if(i&1){let n=O();s(0,"mat-drawer-container",5)(1,"mat-drawer",7,1),re("openedChange",function(t){y(n);let o=u();return oe(o.drawerOpened,t)||(o.drawerOpened=t),w(t)}),d(3,"chat-contact-info",8),c(),s(4,"mat-drawer-content",9)(5,"div",10)(6,"a",11),C("click",function(){y(n);let t=u();return w(t.resetChat())}),d(7,"mat-icon",12),c(),s(8,"div",13),C("click",function(){y(n);let t=u();return w(t.openContactInfo())}),s(9,"div",14),_(10,qt,1,1,"img",15)(11,Xt,2,1,"div",16),c(),s(12,"div",17),p(13),c()(),s(14,"button",18),d(15,"mat-icon",12),s(16,"mat-menu",null,2)(18,"button",19),C("click",function(){y(n);let t=u();return w(t.openContactInfo())}),d(19,"mat-icon",12),p(20," Contact info "),c(),s(21,"button",20),d(22,"mat-icon",12),p(23," Select messages "),c(),s(24,"button",19),C("click",function(){y(n);let t=u();return w(t.toggleMuteNotifications())}),_(25,Yt,2,1)(26,ei,2,1),c(),s(27,"button",20),d(28,"mat-icon",12),p(29," Clear messages "),c(),s(30,"button",20),d(31,"mat-icon",12),p(32," Delete chat "),c()()()(),s(33,"div",21)(34,"div",22),Q(35,oi,8,20,"div",23,W().trackByFn,!0),c()(),s(37,"div",24)(38,"div",25)(39,"button",26),d(40,"mat-icon",12),c(),s(41,"button",27),d(42,"mat-icon",12),c()(),s(43,"mat-form-field",28),d(44,"textarea",29,3),c(),s(46,"div",30)(47,"button",31),C("click",function(){y(n);let t=u();return w(t.sendMessage())}),d(48,"mat-icon",12),c()()()()()}if(i&2){let n=L(2),e=L(17),t=u();l("hasBackdrop",!1),r(),l("autoFocus",!1)("mode",t.drawerMode)("position","end"),ae("opened",t.drawerOpened),r(2),l("drawer",n)("chat",t.chat),r(3),l("routerLink",Ve(23,Wt)),r(),l("svgIcon","heroicons_outline:arrow-long-left"),r(3),g(t.chat.contact.picture?10:-1),r(),g(t.chat.contact.picture?-1:11),r(2),x(" ",t.chat.contact.name," "),r(),l("matMenuTriggerFor",e),r(),l("svgIcon","heroicons_outline:ellipsis-vertical"),r(4),l("svgIcon","heroicons_outline:user-circle"),r(3),l("svgIcon","heroicons_outline:check-circle"),r(3),g(t.chat.muted?-1:25),r(),g(t.chat.muted?26:-1),r(2),l("svgIcon","heroicons_outline:backspace"),r(3),l("svgIcon","heroicons_outline:trash"),r(4),Z(t.chat.messages),r(5),l("svgIcon","heroicons_outline:face-smile"),r(2),l("svgIcon","heroicons_outline:paper-clip"),r(6),l("svgIcon","heroicons_outline:paper-airplane")}}function si(i,a){i&1&&(s(0,"div",6),d(1,"mat-icon",40),s(2,"div",41),p(3," Select a conversation or start a new chat "),c()()),i&2&&(r(),l("svgIcon","heroicons_outline:chat-bubble-oval-left-ellipsis"))}function ci(i,a){i&1&&(De(),s(0,"svg",42)(1,"g",43),d(2,"path",44),c()())}var ht=(()=>{let a=class a{constructor(e,t,o,m){this._changeDetectorRef=e,this._chatService=t,this._angorMediaWatcherService=o,this._ngZone=m,this.drawerMode="side",this.drawerOpened=!1,this._unsubscribeAll=new A}_resizeMessageInput(){this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.messageInput.nativeElement.style.height="auto",this._changeDetectorRef.detectChanges(),this.messageInput.nativeElement.style.height=`${this.messageInput.nativeElement.scrollHeight}px`,this._changeDetectorRef.detectChanges()})})}ngOnInit(){this._chatService.chat$.pipe(S(this._unsubscribeAll)).subscribe(e=>{this.chat=e,this._changeDetectorRef.markForCheck()}),this._angorMediaWatcherService.onMediaChange$.pipe(S(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?this.drawerMode="side":this.drawerMode="over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openContactInfo(){this.drawerOpened=!0,this._changeDetectorRef.markForCheck()}resetChat(){this._chatService.resetChat(),this.drawerOpened=!1,this._changeDetectorRef.markForCheck()}toggleMuteNotifications(){this.chat.muted=!this.chat.muted,this._chatService.updateChat(this.chat.id,this.chat).subscribe()}sendMessage(){let e=this.messageInput.nativeElement.value.trim();if(!e){console.warn("Cannot send an empty message.");return}this._chatService.sendPrivateMessage(e).then(()=>{this.messageInput.nativeElement.value="",console.log("Message sent successfully.")}).catch(t=>{console.error("Failed to send message:",t)})}trackByFn(e,t){return t.id||e}};a.\u0275fac=function(t){return new(t||a)(I(se),I(E),I(Ge),I(Pe))},a.\u0275cmp=M({type:a,selectors:[["chat-conversation"]],viewQuery:function(t,o){if(t&1&&Be(Ht,5),t&2){let m;Le(m=je())&&(o.messageInput=m.first)}},hostBindings:function(t,o){t&1&&C("input",function(){return o._resizeMessageInput()})("ngModelChange",function(){return o._resizeMessageInput()})},standalone:!0,features:[k],decls:5,vars:1,consts:[["speechBubbleExtension",""],["drawer",""],["conversationHeaderMenu",""],["messageInput",""],[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"h-full","flex-auto",3,"hasBackdrop"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"w-full","dark:bg-gray-900","sm:w-100","lg:border-l","lg:shadow-none",3,"openedChange","autoFocus","mode","position","opened"],[3,"drawer","chat"],[1,"flex","flex-col","overflow-hidden"],[1,"flex","h-18","flex-0","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent","md:px-6"],["mat-icon-button","",1,"md:-ml-2","lg:hidden",3,"click","routerLink"],[3,"svgIcon"],[1,"ml-2","mr-2","flex","cursor-pointer","items-center","lg:ml-0",3,"click"],[1,"relative","flex","h-10","w-10","flex-0","items-center","justify-center"],["onerror","this.onerror=null; this.src='/images/avatars/avatar-placeholder.png';","alt","Contact picture",1,"h-full","w-full","rounded-full","object-cover",3,"src"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-lg","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"ml-4","truncate","text-lg","font-medium","leading-5"],["mat-icon-button","",1,"ml-auto",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item",""],[1,"flex","flex-col-reverse","overflow-y-auto","h-full"],[1,"bg-card","flex","flex-auto","shrink","flex-col","p-6","dark:bg-transparent"],[1,"flex","flex-col",3,"ngClass"],[1,"flex","items-end","border-t","bg-gray-50","p-4","dark:bg-transparent"],[1,"my-px","flex","h-11","items-center"],["mat-icon-button",""],["mat-icon-button","",1,"ml-0.5"],["subscriptSizing","dynamic",1,"angor-mat-dense","angor-mat-rounded","angor-mat-bold","ml-4","w-full"],["matInput","","cdkTextareaAutosize","",1,"max-h-20"],[1,"my-px","ml-4","flex","h-11","items-center"],["mat-icon-button","",3,"click"],[1,"-mx-6","my-3","flex","items-center","justify-center"],[1,"relative","max-w-3/4","rounded-lg","px-3","py-2",3,"ngClass"],[1,"absolute","bottom-0","w-3",3,"ngClass"],[1,"min-w-4","leading-5",3,"innerHTML"],[1,"text-secondary","my-0.5","text-sm","font-medium",3,"ngClass"],[1,"flex-auto","border-b"],[1,"text-secondary","mx-4","flex-0","text-sm","font-medium","leading-5"],[4,"ngTemplateOutlet"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"],["width","100%","height","100%","viewBox","0 0 66 66","xmlns","http://www.w3.org/2000/svg"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["d","M1.01522827,0.516204834 C-8.83532715,54.3062744 61.7609863,70.5215302 64.8009949,64.3061218 C68.8074951,54.8859711 30.1663208,52.9997559 37.5036011,0.516204834 L1.01522827,0.516204834 Z","fill","currentColor","fill-rule","nonzero"]],template:function(t,o){t&1&&(s(0,"div",4),_(1,ri,49,24,"mat-drawer-container",5)(2,si,4,1,"div",6)(3,ci,3,0,"ng-template",null,0,Ke),c()),t&2&&(r(),g(o.chat?1:2))},dependencies:[Ce,_e,xe,ve,ut,B,Ze,R,de,F,T,ge,he,ue,fe,ce,Ue,J,G,X,q,Je,qe,ze],encapsulation:2,changeDetection:0});let i=a;return i})();var ft=(()=>{let a=class a{constructor(){}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=M({type:a,selectors:[["chat-empty-conversation"]],standalone:!0,features:[k],decls:5,vars:1,consts:[[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1),d(2,"mat-icon",2),s(3,"div",3),p(4," Select a conversation or start a new chat "),c()()()),t&2&&(r(2),l("svgIcon","heroicons_outline:chat-bubble-oval-left-ellipsis"))},dependencies:[F,T],encapsulation:2,changeDetection:0});let i=a;return i})();var li=(i,a)=>{let n=H(E),e=H(me);return n.getChatById(i.paramMap.get("id")).pipe(N(t=>{console.error(t);let o=a.url.split("/").slice(0,-1).join("/");return e.navigateByUrl(o),j(t)}))},yn=[{path:"",component:st,resolve:{chats:()=>H(E).getChats(),contacts:()=>H(E).getContacts(),profile:()=>H(E).getProfile()},children:[{path:"",component:pt,children:[{path:"",pathMatch:"full",component:ft},{path:":id",component:ht,resolve:{conversation:li}}]}]}];export{yn as default};
